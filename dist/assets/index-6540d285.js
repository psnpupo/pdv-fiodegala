function SC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _C(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Hx={exports:{}},Qc={},Gx={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),CC=Symbol.for("react.portal"),NC=Symbol.for("react.fragment"),EC=Symbol.for("react.strict_mode"),kC=Symbol.for("react.profiler"),TC=Symbol.for("react.provider"),PC=Symbol.for("react.context"),AC=Symbol.for("react.forward_ref"),RC=Symbol.for("react.suspense"),OC=Symbol.for("react.memo"),IC=Symbol.for("react.lazy"),pg=Symbol.iterator;function LC(e){return e===null||typeof e!="object"?null:(e=pg&&e[pg]||e["@@iterator"],typeof e=="function"?e:null)}var Kx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jx=Object.assign,Yx={};function ui(e,t,r){this.props=e,this.context=t,this.refs=Yx,this.updater=r||Kx}ui.prototype.isReactComponent={};ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Xx(){}Xx.prototype=ui.prototype;function Hf(e,t,r){this.props=e,this.context=t,this.refs=Yx,this.updater=r||Kx}var Gf=Hf.prototype=new Xx;Gf.constructor=Hf;Jx(Gf,ui.prototype);Gf.isPureReactComponent=!0;var gg=Array.isArray,Qx=Object.prototype.hasOwnProperty,Kf={current:null},Zx={key:!0,ref:!0,__self:!0,__source:!0};function e0(e,t,r){var n,s={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Qx.call(t,n)&&!Zx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Va,type:e,key:o,ref:a,props:s,_owner:Kf.current}}function MC(e,t){return{$$typeof:Va,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Va}function DC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vg=/\/+/g;function Xu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?DC(""+e.key):t.toString(36)}function Ul(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Va:case CC:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Xu(a,0):n,gg(s)?(r="",e!=null&&(r=e.replace(vg,"$&/")+"/"),Ul(s,t,r,"",function(u){return u})):s!=null&&(Jf(s)&&(s=MC(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(vg,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",gg(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+Xu(o,l);a+=Ul(o,t,r,c,s)}else if(c=LC(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+Xu(o,l++),a+=Ul(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ol(e,t,r){if(e==null)return e;var n=[],s=0;return Ul(e,n,"","",function(o){return t.call(r,o,s++)}),n}function $C(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dt={current:null},Bl={transition:null},FC={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Bl,ReactCurrentOwner:Kf};function t0(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ol,forEach:function(e,t,r){ol(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ol(e,function(){t++}),t},toArray:function(e){return ol(e,function(t){return t})||[]},only:function(e){if(!Jf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=ui;Se.Fragment=NC;Se.Profiler=kC;Se.PureComponent=Hf;Se.StrictMode=EC;Se.Suspense=RC;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FC;Se.act=t0;Se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Jx({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Kf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Qx.call(t,c)&&!Zx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Va,type:e.type,key:s,ref:o,props:n,_owner:a}};Se.createContext=function(e){return e={$$typeof:PC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:TC,_context:e},e.Consumer=e};Se.createElement=e0;Se.createFactory=function(e){var t=e0.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:AC,render:e}};Se.isValidElement=Jf;Se.lazy=function(e){return{$$typeof:IC,_payload:{_status:-1,_result:e},_init:$C}};Se.memo=function(e,t){return{$$typeof:OC,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=Bl.transition;Bl.transition={};try{e()}finally{Bl.transition=t}};Se.unstable_act=t0;Se.useCallback=function(e,t){return Dt.current.useCallback(e,t)};Se.useContext=function(e){return Dt.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return Dt.current.useDeferredValue(e)};Se.useEffect=function(e,t){return Dt.current.useEffect(e,t)};Se.useId=function(){return Dt.current.useId()};Se.useImperativeHandle=function(e,t,r){return Dt.current.useImperativeHandle(e,t,r)};Se.useInsertionEffect=function(e,t){return Dt.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return Dt.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return Dt.current.useMemo(e,t)};Se.useReducer=function(e,t,r){return Dt.current.useReducer(e,t,r)};Se.useRef=function(e){return Dt.current.useRef(e)};Se.useState=function(e){return Dt.current.useState(e)};Se.useSyncExternalStore=function(e,t,r){return Dt.current.useSyncExternalStore(e,t,r)};Se.useTransition=function(){return Dt.current.useTransition()};Se.version="18.3.1";Gx.exports=Se;var p=Gx.exports;const ue=qx(p),Yf=SC({__proto__:null,default:ue},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VC=p,UC=Symbol.for("react.element"),BC=Symbol.for("react.fragment"),zC=Object.prototype.hasOwnProperty,WC=VC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qC={key:!0,ref:!0,__self:!0,__source:!0};function r0(e,t,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)zC.call(t,n)&&!qC.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:UC,type:e,key:o,ref:a,props:s,_owner:WC.current}}Qc.Fragment=BC;Qc.jsx=r0;Qc.jsxs=r0;Hx.exports=Qc;var i=Hx.exports,nh={},n0={exports:{}},ir={},s0={exports:{}},o0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,P){var U=T.length;T.push(P);e:for(;0<U;){var L=U-1>>>1,H=T[L];if(0<s(H,P))T[L]=P,T[U]=H,U=L;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var P=T[0],U=T.pop();if(U!==P){T[0]=U;e:for(var L=0,H=T.length,oe=H>>>1;L<oe;){var de=2*(L+1)-1,Ne=T[de],ae=de+1,Y=T[ae];if(0>s(Ne,U))ae<H&&0>s(Y,Ne)?(T[L]=Y,T[ae]=U,L=ae):(T[L]=Ne,T[de]=U,L=de);else if(ae<H&&0>s(Y,U))T[L]=Y,T[ae]=U,L=ae;else break e}}return P}function s(T,P){var U=T.sortIndex-P.sortIndex;return U!==0?U:T.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,w=!1,m=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var P=r(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=T)n(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=r(u)}}function b(T){if(m=!1,y(T),!w)if(r(c)!==null)w=!0,F(S);else{var P=r(u);P!==null&&A(b,P.startTime-T)}}function S(T,P){w=!1,m&&(m=!1,x(_),_=-1),g=!0;var U=f;try{for(y(P),h=r(c);h!==null&&(!(h.expirationTime>P)||T&&!R());){var L=h.callback;if(typeof L=="function"){h.callback=null,f=h.priorityLevel;var H=L(h.expirationTime<=P);P=e.unstable_now(),typeof H=="function"?h.callback=H:h===r(c)&&n(c),y(P)}else n(c);h=r(c)}if(h!==null)var oe=!0;else{var de=r(u);de!==null&&A(b,de.startTime-P),oe=!1}return oe}finally{h=null,f=U,g=!1}}var E=!1,N=null,_=-1,C=5,I=-1;function R(){return!(e.unstable_now()-I<C)}function O(){if(N!==null){var T=e.unstable_now();I=T;var P=!0;try{P=N(!0,T)}finally{P?z():(E=!1,N=null)}}else E=!1}var z;if(typeof v=="function")z=function(){v(O)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,$=k.port2;k.port1.onmessage=O,z=function(){$.postMessage(null)}}else z=function(){j(O,0)};function F(T){N=T,E||(E=!0,z())}function A(T,P){_=j(function(){T(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,F(S))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var U=f;f=P;try{return T()}finally{f=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,P){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var U=f;f=T;try{return P()}finally{f=U}},e.unstable_scheduleCallback=function(T,P,U){var L=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,T){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=U+H,T={id:d++,callback:P,priorityLevel:T,startTime:U,expirationTime:H,sortIndex:-1},U>L?(T.sortIndex=U,t(u,T),r(c)===null&&T===r(u)&&(m?(x(_),_=-1):m=!0,A(b,U-L))):(T.sortIndex=H,t(c,T),w||g||(w=!0,F(S))),T},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(T){var P=f;return function(){var U=f;f=P;try{return T.apply(this,arguments)}finally{f=U}}}})(o0);s0.exports=o0;var HC=s0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GC=p,nr=HC;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i0=new Set,ua={};function no(e,t){Xo(e,t),Xo(e+"Capture",t)}function Xo(e,t){for(ua[e]=t,e=0;e<t.length;e++)i0.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sh=Object.prototype.hasOwnProperty,KC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yg={},xg={};function JC(e){return sh.call(xg,e)?!0:sh.call(yg,e)?!1:KC.test(e)?xg[e]=!0:(yg[e]=!0,!1)}function YC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XC(e,t,r,n){if(t===null||typeof t>"u"||YC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,r,n,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){St[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];St[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){St[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){St[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){St[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){St[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){St[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){St[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){St[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xf=/[\-:]([a-z])/g;function Qf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xf,Qf);St[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xf,Qf);St[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xf,Qf);St[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){St[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});St.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){St[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zf(e,t,r,n){var s=St.hasOwnProperty(t)?St[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XC(t,r,s,n)&&(r=null),n||s===null?JC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Sn=GC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),Co=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),oh=Symbol.for("react.profiler"),a0=Symbol.for("react.provider"),l0=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),ah=Symbol.for("react.suspense_list"),rm=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),c0=Symbol.for("react.offscreen"),wg=Symbol.iterator;function Ci(e){return e===null||typeof e!="object"?null:(e=wg&&e[wg]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Qu;function $i(e){if(Qu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Qu=t&&t[1]||""}return`
`+Qu+e}var Zu=!1;function ed(e,t){if(!e||Zu)return"";Zu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Zu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$i(e):""}function QC(e){switch(e.tag){case 5:return $i(e.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return e=ed(e.type,!1),e;case 11:return e=ed(e.type.render,!1),e;case 1:return e=ed(e.type,!0),e;default:return""}}function lh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case Co:return"Portal";case oh:return"Profiler";case em:return"StrictMode";case ih:return"Suspense";case ah:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case l0:return(e.displayName||"Context")+".Consumer";case a0:return(e._context.displayName||"Context")+".Provider";case tm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rm:return t=e.displayName||null,t!==null?t:lh(e.type)||"Memo";case In:t=e._payload,e=e._init;try{return lh(e(t))}catch{}}return null}function ZC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lh(t);case 8:return t===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function as(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function u0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eN(e){var t=u0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function al(e){e._valueTracker||(e._valueTracker=eN(e))}function d0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=u0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ac(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ch(e,t){var r=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function jg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=as(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function h0(e,t){t=t.checked,t!=null&&Zf(e,"checked",t,!1)}function uh(e,t){h0(e,t);var r=as(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dh(e,t.type,r):t.hasOwnProperty("defaultValue")&&dh(e,t.type,as(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function dh(e,t,r){(t!=="number"||ac(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fi=Array.isArray;function Uo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+as(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(W(92));if(Fi(r)){if(1<r.length)throw Error(W(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:as(r)}}function f0(e,t){var r=as(t.value),n=as(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function _g(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function m0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?m0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ll,p0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ll=ll||document.createElement("div"),ll.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ll.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function da(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tN=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(e){tN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hi[t]=Hi[e]})});function g0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hi.hasOwnProperty(e)&&Hi[e]?(""+t).trim():t+"px"}function v0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=g0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var rN=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mh(e,t){if(t){if(rN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=null;function nm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vh=null,Bo=null,zo=null;function Cg(e){if(e=za(e)){if(typeof vh!="function")throw Error(W(280));var t=e.stateNode;t&&(t=nu(t),vh(e.stateNode,e.type,t))}}function y0(e){Bo?zo?zo.push(e):zo=[e]:Bo=e}function x0(){if(Bo){var e=Bo,t=zo;if(zo=Bo=null,Cg(e),t)for(e=0;e<t.length;e++)Cg(t[e])}}function w0(e,t){return e(t)}function j0(){}var td=!1;function b0(e,t,r){if(td)return e(t,r);td=!0;try{return w0(e,t,r)}finally{td=!1,(Bo!==null||zo!==null)&&(j0(),x0())}}function ha(e,t){var r=e.stateNode;if(r===null)return null;var n=nu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(W(231,t,typeof r));return r}var yh=!1;if(pn)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){yh=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{yh=!1}function nN(e,t,r,n,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Gi=!1,lc=null,cc=!1,xh=null,sN={onError:function(e){Gi=!0,lc=e}};function oN(e,t,r,n,s,o,a,l,c){Gi=!1,lc=null,nN.apply(sN,arguments)}function iN(e,t,r,n,s,o,a,l,c){if(oN.apply(this,arguments),Gi){if(Gi){var u=lc;Gi=!1,lc=null}else throw Error(W(198));cc||(cc=!0,xh=u)}}function so(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function S0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ng(e){if(so(e)!==e)throw Error(W(188))}function aN(e){var t=e.alternate;if(!t){if(t=so(e),t===null)throw Error(W(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Ng(s),e;if(o===n)return Ng(s),t;o=o.sibling}throw Error(W(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(W(189))}}if(r.alternate!==n)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?e:t}function _0(e){return e=aN(e),e!==null?C0(e):null}function C0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=C0(e);if(t!==null)return t;e=e.sibling}return null}var N0=nr.unstable_scheduleCallback,Eg=nr.unstable_cancelCallback,lN=nr.unstable_shouldYield,cN=nr.unstable_requestPaint,Je=nr.unstable_now,uN=nr.unstable_getCurrentPriorityLevel,sm=nr.unstable_ImmediatePriority,E0=nr.unstable_UserBlockingPriority,uc=nr.unstable_NormalPriority,dN=nr.unstable_LowPriority,k0=nr.unstable_IdlePriority,Zc=null,Wr=null;function hN(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Zc,e,void 0,(e.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:pN,fN=Math.log,mN=Math.LN2;function pN(e){return e>>>=0,e===0?32:31-(fN(e)/mN|0)|0}var cl=64,ul=4194304;function Vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Vi(l):(o&=a,o!==0&&(n=Vi(o)))}else a=r&~s,a!==0?n=Vi(a):o!==0&&(n=Vi(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ar(t),s=1<<r,n|=e[r],t&=~s;return n}function gN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vN(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ar(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=gN(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function wh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T0(){var e=cl;return cl<<=1,!(cl&4194240)&&(cl=64),e}function rd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ua(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ar(t),e[t]=r}function yN(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ar(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function om(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ar(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ae=0;function P0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var A0,im,R0,O0,I0,jh=!1,dl=[],Kn=null,Jn=null,Yn=null,fa=new Map,ma=new Map,$n=[],xN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(e,t){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":fa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(t.pointerId)}}function Ei(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=za(t),t!==null&&im(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wN(e,t,r,n,s){switch(t){case"focusin":return Kn=Ei(Kn,e,t,r,n,s),!0;case"dragenter":return Jn=Ei(Jn,e,t,r,n,s),!0;case"mouseover":return Yn=Ei(Yn,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return fa.set(o,Ei(fa.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,ma.set(o,Ei(ma.get(o)||null,e,t,r,n,s)),!0}return!1}function L0(e){var t=$s(e.target);if(t!==null){var r=so(t);if(r!==null){if(t=r.tag,t===13){if(t=S0(r),t!==null){e.blockedOn=t,I0(e.priority,function(){R0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);gh=n,r.target.dispatchEvent(n),gh=null}else return t=za(r),t!==null&&im(t),e.blockedOn=r,!1;t.shift()}return!0}function Tg(e,t,r){zl(e)&&r.delete(t)}function jN(){jh=!1,Kn!==null&&zl(Kn)&&(Kn=null),Jn!==null&&zl(Jn)&&(Jn=null),Yn!==null&&zl(Yn)&&(Yn=null),fa.forEach(Tg),ma.forEach(Tg)}function ki(e,t){e.blockedOn===t&&(e.blockedOn=null,jh||(jh=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,jN)))}function pa(e){function t(s){return ki(s,e)}if(0<dl.length){ki(dl[0],e);for(var r=1;r<dl.length;r++){var n=dl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Kn!==null&&ki(Kn,e),Jn!==null&&ki(Jn,e),Yn!==null&&ki(Yn,e),fa.forEach(t),ma.forEach(t),r=0;r<$n.length;r++)n=$n[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$n.length&&(r=$n[0],r.blockedOn===null);)L0(r),r.blockedOn===null&&$n.shift()}var Wo=Sn.ReactCurrentBatchConfig,hc=!0;function bN(e,t,r,n){var s=Ae,o=Wo.transition;Wo.transition=null;try{Ae=1,am(e,t,r,n)}finally{Ae=s,Wo.transition=o}}function SN(e,t,r,n){var s=Ae,o=Wo.transition;Wo.transition=null;try{Ae=4,am(e,t,r,n)}finally{Ae=s,Wo.transition=o}}function am(e,t,r,n){if(hc){var s=bh(e,t,r,n);if(s===null)hd(e,t,n,fc,r),kg(e,n);else if(wN(s,e,t,r,n))n.stopPropagation();else if(kg(e,n),t&4&&-1<xN.indexOf(e)){for(;s!==null;){var o=za(s);if(o!==null&&A0(o),o=bh(e,t,r,n),o===null&&hd(e,t,n,fc,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else hd(e,t,n,null,r)}}var fc=null;function bh(e,t,r,n){if(fc=null,e=nm(n),e=$s(e),e!==null)if(t=so(e),t===null)e=null;else if(r=t.tag,r===13){if(e=S0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fc=e,null}function M0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uN()){case sm:return 1;case E0:return 4;case uc:case dN:return 16;case k0:return 536870912;default:return 16}default:return 16}}var Bn=null,lm=null,Wl=null;function D0(){if(Wl)return Wl;var e,t=lm,r=t.length,n,s="value"in Bn?Bn.value:Bn.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[o-n];n++);return Wl=s.slice(e,1<n?1-n:void 0)}function ql(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hl(){return!0}function Pg(){return!1}function ar(e){function t(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hl:Pg,this.isPropagationStopped=Pg,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),t}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=ar(di),Ba=qe({},di,{view:0,detail:0}),_N=ar(Ba),nd,sd,Ti,eu=qe({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ti&&(Ti&&e.type==="mousemove"?(nd=e.screenX-Ti.screenX,sd=e.screenY-Ti.screenY):sd=nd=0,Ti=e),nd)},movementY:function(e){return"movementY"in e?e.movementY:sd}}),Ag=ar(eu),CN=qe({},eu,{dataTransfer:0}),NN=ar(CN),EN=qe({},Ba,{relatedTarget:0}),od=ar(EN),kN=qe({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),TN=ar(kN),PN=qe({},di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AN=ar(PN),RN=qe({},di,{data:0}),Rg=ar(RN),ON={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MN(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LN[e])?!!t[e]:!1}function um(){return MN}var DN=qe({},Ba,{key:function(e){if(e.key){var t=ON[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ql(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?IN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(e){return e.type==="keypress"?ql(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ql(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$N=ar(DN),FN=qe({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=ar(FN),VN=qe({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),UN=ar(VN),BN=qe({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),zN=ar(BN),WN=qe({},eu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qN=ar(WN),HN=[9,13,27,32],dm=pn&&"CompositionEvent"in window,Ki=null;pn&&"documentMode"in document&&(Ki=document.documentMode);var GN=pn&&"TextEvent"in window&&!Ki,$0=pn&&(!dm||Ki&&8<Ki&&11>=Ki),Ig=String.fromCharCode(32),Lg=!1;function F0(e,t){switch(e){case"keyup":return HN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Eo=!1;function KN(e,t){switch(e){case"compositionend":return V0(t);case"keypress":return t.which!==32?null:(Lg=!0,Ig);case"textInput":return e=t.data,e===Ig&&Lg?null:e;default:return null}}function JN(e,t){if(Eo)return e==="compositionend"||!dm&&F0(e,t)?(e=D0(),Wl=lm=Bn=null,Eo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $0&&t.locale!=="ko"?null:t.data;default:return null}}var YN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!YN[e.type]:t==="textarea"}function U0(e,t,r,n){y0(n),t=mc(t,"onChange"),0<t.length&&(r=new cm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ji=null,ga=null;function XN(e){Q0(e,0)}function tu(e){var t=Po(e);if(d0(t))return e}function QN(e,t){if(e==="change")return t}var B0=!1;if(pn){var id;if(pn){var ad="oninput"in document;if(!ad){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),ad=typeof Dg.oninput=="function"}id=ad}else id=!1;B0=id&&(!document.documentMode||9<document.documentMode)}function $g(){Ji&&(Ji.detachEvent("onpropertychange",z0),ga=Ji=null)}function z0(e){if(e.propertyName==="value"&&tu(ga)){var t=[];U0(t,ga,e,nm(e)),b0(XN,t)}}function ZN(e,t,r){e==="focusin"?($g(),Ji=t,ga=r,Ji.attachEvent("onpropertychange",z0)):e==="focusout"&&$g()}function eE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tu(ga)}function tE(e,t){if(e==="click")return tu(t)}function rE(e,t){if(e==="input"||e==="change")return tu(t)}function nE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Or=typeof Object.is=="function"?Object.is:nE;function va(e,t){if(Or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!sh.call(t,s)||!Or(e[s],t[s]))return!1}return!0}function Fg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vg(e,t){var r=Fg(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fg(r)}}function W0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?W0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function q0(){for(var e=window,t=ac();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ac(e.document)}return t}function hm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sE(e){var t=q0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&W0(r.ownerDocument.documentElement,r)){if(n!==null&&hm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=Vg(r,o);var a=Vg(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var oE=pn&&"documentMode"in document&&11>=document.documentMode,ko=null,Sh=null,Yi=null,_h=!1;function Ug(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_h||ko==null||ko!==ac(n)||(n=ko,"selectionStart"in n&&hm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yi&&va(Yi,n)||(Yi=n,n=mc(Sh,"onSelect"),0<n.length&&(t=new cm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ko)))}function fl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var To={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},ld={},H0={};pn&&(H0=document.createElement("div").style,"AnimationEvent"in window||(delete To.animationend.animation,delete To.animationiteration.animation,delete To.animationstart.animation),"TransitionEvent"in window||delete To.transitionend.transition);function ru(e){if(ld[e])return ld[e];if(!To[e])return e;var t=To[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in H0)return ld[e]=t[r];return e}var G0=ru("animationend"),K0=ru("animationiteration"),J0=ru("animationstart"),Y0=ru("transitionend"),X0=new Map,Bg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){X0.set(e,t),no(t,[e])}for(var cd=0;cd<Bg.length;cd++){var ud=Bg[cd],iE=ud.toLowerCase(),aE=ud[0].toUpperCase()+ud.slice(1);fs(iE,"on"+aE)}fs(G0,"onAnimationEnd");fs(K0,"onAnimationIteration");fs(J0,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(Y0,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function zg(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,iN(n,t,void 0,e),e.currentTarget=null}function Q0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;zg(s,l,u),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;zg(s,l,u),o=c}}}if(cc)throw e=xh,cc=!1,xh=null,e}function $e(e,t){var r=t[Th];r===void 0&&(r=t[Th]=new Set);var n=e+"__bubble";r.has(n)||(Z0(t,e,2,!1),r.add(n))}function dd(e,t,r){var n=0;t&&(n|=4),Z0(r,e,n,t)}var ml="_reactListening"+Math.random().toString(36).slice(2);function ya(e){if(!e[ml]){e[ml]=!0,i0.forEach(function(r){r!=="selectionchange"&&(lE.has(r)||dd(r,!1,e),dd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ml]||(t[ml]=!0,dd("selectionchange",!1,t))}}function Z0(e,t,r,n){switch(M0(t)){case 1:var s=bN;break;case 4:s=SN;break;default:s=am}r=s.bind(null,t,r,e),s=void 0,!yh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function hd(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=$s(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}b0(function(){var u=o,d=nm(r),h=[];e:{var f=X0.get(e);if(f!==void 0){var g=cm,w=e;switch(e){case"keypress":if(ql(r)===0)break e;case"keydown":case"keyup":g=$N;break;case"focusin":w="focus",g=od;break;case"focusout":w="blur",g=od;break;case"beforeblur":case"afterblur":g=od;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=NN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=UN;break;case G0:case K0:case J0:g=TN;break;case Y0:g=zN;break;case"scroll":g=_N;break;case"wheel":g=qN;break;case"copy":case"cut":case"paste":g=AN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Og}var m=(t&4)!==0,j=!m&&e==="scroll",x=m?f!==null?f+"Capture":null:f;m=[];for(var v=u,y;v!==null;){y=v;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,x!==null&&(b=ha(v,x),b!=null&&m.push(xa(v,b,y)))),j)break;v=v.return}0<m.length&&(f=new g(f,w,null,r,d),h.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==gh&&(w=r.relatedTarget||r.fromElement)&&($s(w)||w[gn]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=r.relatedTarget||r.toElement,g=u,w=w?$s(w):null,w!==null&&(j=so(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(m=Ag,b="onMouseLeave",x="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=Og,b="onPointerLeave",x="onPointerEnter",v="pointer"),j=g==null?f:Po(g),y=w==null?f:Po(w),f=new m(b,v+"leave",g,r,d),f.target=j,f.relatedTarget=y,b=null,$s(d)===u&&(m=new m(x,v+"enter",w,r,d),m.target=y,m.relatedTarget=j,b=m),j=b,g&&w)t:{for(m=g,x=w,v=0,y=m;y;y=po(y))v++;for(y=0,b=x;b;b=po(b))y++;for(;0<v-y;)m=po(m),v--;for(;0<y-v;)x=po(x),y--;for(;v--;){if(m===x||x!==null&&m===x.alternate)break t;m=po(m),x=po(x)}m=null}else m=null;g!==null&&Wg(h,f,g,m,!1),w!==null&&j!==null&&Wg(h,j,w,m,!0)}}e:{if(f=u?Po(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var S=QN;else if(Mg(f))if(B0)S=rE;else{S=eE;var E=ZN}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=tE);if(S&&(S=S(e,u))){U0(h,S,r,d);break e}E&&E(e,f,u),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&dh(f,"number",f.value)}switch(E=u?Po(u):window,e){case"focusin":(Mg(E)||E.contentEditable==="true")&&(ko=E,Sh=u,Yi=null);break;case"focusout":Yi=Sh=ko=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Ug(h,r,d);break;case"selectionchange":if(oE)break;case"keydown":case"keyup":Ug(h,r,d)}var N;if(dm)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Eo?F0(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&($0&&r.locale!=="ko"&&(Eo||_!=="onCompositionStart"?_==="onCompositionEnd"&&Eo&&(N=D0()):(Bn=d,lm="value"in Bn?Bn.value:Bn.textContent,Eo=!0)),E=mc(u,_),0<E.length&&(_=new Rg(_,e,null,r,d),h.push({event:_,listeners:E}),N?_.data=N:(N=V0(r),N!==null&&(_.data=N)))),(N=GN?KN(e,r):JN(e,r))&&(u=mc(u,"onBeforeInput"),0<u.length&&(d=new Rg("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}Q0(h,t)})}function xa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ha(e,r),o!=null&&n.unshift(xa(e,o,s)),o=ha(e,t),o!=null&&n.push(xa(e,o,s))),e=e.return}return n}function po(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wg(e,t,r,n,s){for(var o=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ha(r,o),c!=null&&a.unshift(xa(r,c,l))):s||(c=ha(r,o),c!=null&&a.push(xa(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var cE=/\r\n?/g,uE=/\u0000|\uFFFD/g;function qg(e){return(typeof e=="string"?e:""+e).replace(cE,`
`).replace(uE,"")}function pl(e,t,r){if(t=qg(t),qg(e)!==t&&r)throw Error(W(425))}function pc(){}var Ch=null,Nh=null;function Eh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,dE=typeof clearTimeout=="function"?clearTimeout:void 0,Hg=typeof Promise=="function"?Promise:void 0,hE=typeof queueMicrotask=="function"?queueMicrotask:typeof Hg<"u"?function(e){return Hg.resolve(null).then(e).catch(fE)}:kh;function fE(e){setTimeout(function(){throw e})}function fd(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),pa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);pa(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),Ur="__reactFiber$"+hi,wa="__reactProps$"+hi,gn="__reactContainer$"+hi,Th="__reactEvents$"+hi,mE="__reactListeners$"+hi,pE="__reactHandles$"+hi;function $s(e){var t=e[Ur];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gn]||r[Ur]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gg(e);e!==null;){if(r=e[Ur])return r;e=Gg(e)}return t}e=r,r=e.parentNode}return null}function za(e){return e=e[Ur]||e[gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Po(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function nu(e){return e[wa]||null}var Ph=[],Ao=-1;function ms(e){return{current:e}}function Fe(e){0>Ao||(e.current=Ph[Ao],Ph[Ao]=null,Ao--)}function Ie(e,t){Ao++,Ph[Ao]=e.current,e.current=t}var ls={},At=ms(ls),Wt=ms(!1),Gs=ls;function Qo(e,t){var r=e.type.contextTypes;if(!r)return ls;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qt(e){return e=e.childContextTypes,e!=null}function gc(){Fe(Wt),Fe(At)}function Kg(e,t,r){if(At.current!==ls)throw Error(W(168));Ie(At,t),Ie(Wt,r)}function ew(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(W(108,ZC(e)||"Unknown",s));return qe({},r,n)}function vc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ls,Gs=At.current,Ie(At,e),Ie(Wt,Wt.current),!0}function Jg(e,t,r){var n=e.stateNode;if(!n)throw Error(W(169));r?(e=ew(e,t,Gs),n.__reactInternalMemoizedMergedChildContext=e,Fe(Wt),Fe(At),Ie(At,e)):Fe(Wt),Ie(Wt,r)}var an=null,su=!1,md=!1;function tw(e){an===null?an=[e]:an.push(e)}function gE(e){su=!0,tw(e)}function ps(){if(!md&&an!==null){md=!0;var e=0,t=Ae;try{var r=an;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}an=null,su=!1}catch(s){throw an!==null&&(an=an.slice(e+1)),N0(sm,ps),s}finally{Ae=t,md=!1}}return null}var Ro=[],Oo=0,yc=null,xc=0,ur=[],dr=0,Ks=null,ln=1,cn="";function As(e,t){Ro[Oo++]=xc,Ro[Oo++]=yc,yc=e,xc=t}function rw(e,t,r){ur[dr++]=ln,ur[dr++]=cn,ur[dr++]=Ks,Ks=e;var n=ln;e=cn;var s=32-Ar(n)-1;n&=~(1<<s),r+=1;var o=32-Ar(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,ln=1<<32-Ar(t)+s|r<<s|n,cn=o+e}else ln=1<<o|r<<s|n,cn=e}function fm(e){e.return!==null&&(As(e,1),rw(e,1,0))}function mm(e){for(;e===yc;)yc=Ro[--Oo],Ro[Oo]=null,xc=Ro[--Oo],Ro[Oo]=null;for(;e===Ks;)Ks=ur[--dr],ur[dr]=null,cn=ur[--dr],ur[dr]=null,ln=ur[--dr],ur[dr]=null}var Qt=null,Xt=null,Ve=!1,Pr=null;function nw(e,t){var r=hr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Yg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ks!==null?{id:ln,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=hr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qt=e,Xt=null,!0):!1;default:return!1}}function Ah(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rh(e){if(Ve){var t=Xt;if(t){var r=t;if(!Yg(e,t)){if(Ah(e))throw Error(W(418));t=Xn(r.nextSibling);var n=Qt;t&&Yg(e,t)?nw(n,r):(e.flags=e.flags&-4097|2,Ve=!1,Qt=e)}}else{if(Ah(e))throw Error(W(418));e.flags=e.flags&-4097|2,Ve=!1,Qt=e}}}function Xg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function gl(e){if(e!==Qt)return!1;if(!Ve)return Xg(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Eh(e.type,e.memoizedProps)),t&&(t=Xt)){if(Ah(e))throw sw(),Error(W(418));for(;t;)nw(e,t),t=Xn(t.nextSibling)}if(Xg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xt=Xn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Qt?Xn(e.stateNode.nextSibling):null;return!0}function sw(){for(var e=Xt;e;)e=Xn(e.nextSibling)}function Zo(){Xt=Qt=null,Ve=!1}function pm(e){Pr===null?Pr=[e]:Pr.push(e)}var vE=Sn.ReactCurrentBatchConfig;function Pi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var n=r.stateNode}if(!n)throw Error(W(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,e))}return e}function vl(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qg(e){var t=e._init;return t(e._payload)}function ow(e){function t(x,v){if(e){var y=x.deletions;y===null?(x.deletions=[v],x.flags|=16):y.push(v)}}function r(x,v){if(!e)return null;for(;v!==null;)t(x,v),v=v.sibling;return null}function n(x,v){for(x=new Map;v!==null;)v.key!==null?x.set(v.key,v):x.set(v.index,v),v=v.sibling;return x}function s(x,v){return x=ts(x,v),x.index=0,x.sibling=null,x}function o(x,v,y){return x.index=y,e?(y=x.alternate,y!==null?(y=y.index,y<v?(x.flags|=2,v):y):(x.flags|=2,v)):(x.flags|=1048576,v)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,v,y,b){return v===null||v.tag!==6?(v=jd(y,x.mode,b),v.return=x,v):(v=s(v,y),v.return=x,v)}function c(x,v,y,b){var S=y.type;return S===No?d(x,v,y.props.children,b,y.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===In&&Qg(S)===v.type)?(b=s(v,y.props),b.ref=Pi(x,v,y),b.return=x,b):(b=Ql(y.type,y.key,y.props,null,x.mode,b),b.ref=Pi(x,v,y),b.return=x,b)}function u(x,v,y,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=bd(y,x.mode,b),v.return=x,v):(v=s(v,y.children||[]),v.return=x,v)}function d(x,v,y,b,S){return v===null||v.tag!==7?(v=Ws(y,x.mode,b,S),v.return=x,v):(v=s(v,y),v.return=x,v)}function h(x,v,y){if(typeof v=="string"&&v!==""||typeof v=="number")return v=jd(""+v,x.mode,y),v.return=x,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case il:return y=Ql(v.type,v.key,v.props,null,x.mode,y),y.ref=Pi(x,null,v),y.return=x,y;case Co:return v=bd(v,x.mode,y),v.return=x,v;case In:var b=v._init;return h(x,b(v._payload),y)}if(Fi(v)||Ci(v))return v=Ws(v,x.mode,y,null),v.return=x,v;vl(x,v)}return null}function f(x,v,y,b){var S=v!==null?v.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:l(x,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case il:return y.key===S?c(x,v,y,b):null;case Co:return y.key===S?u(x,v,y,b):null;case In:return S=y._init,f(x,v,S(y._payload),b)}if(Fi(y)||Ci(y))return S!==null?null:d(x,v,y,b,null);vl(x,y)}return null}function g(x,v,y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(y)||null,l(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case il:return x=x.get(b.key===null?y:b.key)||null,c(v,x,b,S);case Co:return x=x.get(b.key===null?y:b.key)||null,u(v,x,b,S);case In:var E=b._init;return g(x,v,y,E(b._payload),S)}if(Fi(b)||Ci(b))return x=x.get(y)||null,d(v,x,b,S,null);vl(v,b)}return null}function w(x,v,y,b){for(var S=null,E=null,N=v,_=v=0,C=null;N!==null&&_<y.length;_++){N.index>_?(C=N,N=null):C=N.sibling;var I=f(x,N,y[_],b);if(I===null){N===null&&(N=C);break}e&&N&&I.alternate===null&&t(x,N),v=o(I,v,_),E===null?S=I:E.sibling=I,E=I,N=C}if(_===y.length)return r(x,N),Ve&&As(x,_),S;if(N===null){for(;_<y.length;_++)N=h(x,y[_],b),N!==null&&(v=o(N,v,_),E===null?S=N:E.sibling=N,E=N);return Ve&&As(x,_),S}for(N=n(x,N);_<y.length;_++)C=g(N,x,_,y[_],b),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?_:C.key),v=o(C,v,_),E===null?S=C:E.sibling=C,E=C);return e&&N.forEach(function(R){return t(x,R)}),Ve&&As(x,_),S}function m(x,v,y,b){var S=Ci(y);if(typeof S!="function")throw Error(W(150));if(y=S.call(y),y==null)throw Error(W(151));for(var E=S=null,N=v,_=v=0,C=null,I=y.next();N!==null&&!I.done;_++,I=y.next()){N.index>_?(C=N,N=null):C=N.sibling;var R=f(x,N,I.value,b);if(R===null){N===null&&(N=C);break}e&&N&&R.alternate===null&&t(x,N),v=o(R,v,_),E===null?S=R:E.sibling=R,E=R,N=C}if(I.done)return r(x,N),Ve&&As(x,_),S;if(N===null){for(;!I.done;_++,I=y.next())I=h(x,I.value,b),I!==null&&(v=o(I,v,_),E===null?S=I:E.sibling=I,E=I);return Ve&&As(x,_),S}for(N=n(x,N);!I.done;_++,I=y.next())I=g(N,x,_,I.value,b),I!==null&&(e&&I.alternate!==null&&N.delete(I.key===null?_:I.key),v=o(I,v,_),E===null?S=I:E.sibling=I,E=I);return e&&N.forEach(function(O){return t(x,O)}),Ve&&As(x,_),S}function j(x,v,y,b){if(typeof y=="object"&&y!==null&&y.type===No&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case il:e:{for(var S=y.key,E=v;E!==null;){if(E.key===S){if(S=y.type,S===No){if(E.tag===7){r(x,E.sibling),v=s(E,y.props.children),v.return=x,x=v;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===In&&Qg(S)===E.type){r(x,E.sibling),v=s(E,y.props),v.ref=Pi(x,E,y),v.return=x,x=v;break e}r(x,E);break}else t(x,E);E=E.sibling}y.type===No?(v=Ws(y.props.children,x.mode,b,y.key),v.return=x,x=v):(b=Ql(y.type,y.key,y.props,null,x.mode,b),b.ref=Pi(x,v,y),b.return=x,x=b)}return a(x);case Co:e:{for(E=y.key;v!==null;){if(v.key===E)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(x,v.sibling),v=s(v,y.children||[]),v.return=x,x=v;break e}else{r(x,v);break}else t(x,v);v=v.sibling}v=bd(y,x.mode,b),v.return=x,x=v}return a(x);case In:return E=y._init,j(x,v,E(y._payload),b)}if(Fi(y))return w(x,v,y,b);if(Ci(y))return m(x,v,y,b);vl(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,v!==null&&v.tag===6?(r(x,v.sibling),v=s(v,y),v.return=x,x=v):(r(x,v),v=jd(y,x.mode,b),v.return=x,x=v),a(x)):r(x,v)}return j}var ei=ow(!0),iw=ow(!1),wc=ms(null),jc=null,Io=null,gm=null;function vm(){gm=Io=jc=null}function ym(e){var t=wc.current;Fe(wc),e._currentValue=t}function Oh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function qo(e,t){jc=e,gm=Io=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zt=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(gm!==e)if(e={context:e,memoizedValue:t,next:null},Io===null){if(jc===null)throw Error(W(308));Io=e,jc.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Fs=null;function xm(e){Fs===null?Fs=[e]:Fs.push(e)}function aw(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,xm(t)):(r.next=s.next,s.next=r),t.interleaved=r,vn(e,n)}function vn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ln=!1;function wm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Te&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,vn(e,r)}return s=n.interleaved,s===null?(t.next=t,xm(n)):(t.next=s.next,s.next=t),n.interleaved=t,vn(e,r)}function Hl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,om(e,r)}}function Zg(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bc(e,t,r,n){var s=e.updateQueue;Ln=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,d=u=c=null,l=o;do{var f=l.lane,g=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,m=l;switch(f=t,g=r,m.tag){case 1:if(w=m.payload,typeof w=="function"){h=w.call(g,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=m.payload,f=typeof w=="function"?w.call(g,h,f):w,f==null)break e;h=qe({},h,f);break e;case 2:Ln=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Ys|=a,e.lanes=a,e.memoizedState=h}}function ev(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(W(191,s));s.call(n)}}}var Wa={},qr=ms(Wa),ja=ms(Wa),ba=ms(Wa);function Vs(e){if(e===Wa)throw Error(W(174));return e}function jm(e,t){switch(Ie(ba,t),Ie(ja,e),Ie(qr,Wa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fh(t,e)}Fe(qr),Ie(qr,t)}function ti(){Fe(qr),Fe(ja),Fe(ba)}function cw(e){Vs(ba.current);var t=Vs(qr.current),r=fh(t,e.type);t!==r&&(Ie(ja,e),Ie(qr,r))}function bm(e){ja.current===e&&(Fe(qr),Fe(ja))}var Be=ms(0);function Sc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pd=[];function Sm(){for(var e=0;e<pd.length;e++)pd[e]._workInProgressVersionPrimary=null;pd.length=0}var Gl=Sn.ReactCurrentDispatcher,gd=Sn.ReactCurrentBatchConfig,Js=0,We=null,ut=null,gt=null,_c=!1,Xi=!1,Sa=0,yE=0;function Et(){throw Error(W(321))}function _m(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Or(e[r],t[r]))return!1;return!0}function Cm(e,t,r,n,s,o){if(Js=o,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gl.current=e===null||e.memoizedState===null?bE:SE,e=r(n,s),Xi){o=0;do{if(Xi=!1,Sa=0,25<=o)throw Error(W(301));o+=1,gt=ut=null,t.updateQueue=null,Gl.current=_E,e=r(n,s)}while(Xi)}if(Gl.current=Cc,t=ut!==null&&ut.next!==null,Js=0,gt=ut=We=null,_c=!1,t)throw Error(W(300));return e}function Nm(){var e=Sa!==0;return Sa=0,e}function Vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?We.memoizedState=gt=e:gt=gt.next=e,gt}function vr(){if(ut===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=gt===null?We.memoizedState:gt.next;if(t!==null)gt=t,ut=e;else{if(e===null)throw Error(W(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?We.memoizedState=gt=e:gt=gt.next=e}return gt}function _a(e,t){return typeof t=="function"?t(e):t}function vd(e){var t=vr(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=ut,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((Js&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,We.lanes|=d,Ys|=d}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=l,Or(n,t.memoizedState)||(zt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,We.lanes|=o,Ys|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yd(e){var t=vr(),r=t.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Or(o,t.memoizedState)||(zt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function uw(){}function dw(e,t){var r=We,n=vr(),s=t(),o=!Or(n.memoizedState,s);if(o&&(n.memoizedState=s,zt=!0),n=n.queue,Em(mw.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Ca(9,fw.bind(null,r,n,s,t),void 0,null),vt===null)throw Error(W(349));Js&30||hw(r,t,s)}return s}function hw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function fw(e,t,r,n){t.value=r,t.getSnapshot=n,pw(t)&&gw(e)}function mw(e,t,r){return r(function(){pw(t)&&gw(e)})}function pw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Or(e,r)}catch{return!0}}function gw(e){var t=vn(e,1);t!==null&&Rr(t,e,1,-1)}function tv(e){var t=Vr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=jE.bind(null,We,e),[t.memoizedState,e]}function Ca(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function vw(){return vr().memoizedState}function Kl(e,t,r,n){var s=Vr();We.flags|=e,s.memoizedState=Ca(1|t,r,void 0,n===void 0?null:n)}function ou(e,t,r,n){var s=vr();n=n===void 0?null:n;var o=void 0;if(ut!==null){var a=ut.memoizedState;if(o=a.destroy,n!==null&&_m(n,a.deps)){s.memoizedState=Ca(t,r,o,n);return}}We.flags|=e,s.memoizedState=Ca(1|t,r,o,n)}function rv(e,t){return Kl(8390656,8,e,t)}function Em(e,t){return ou(2048,8,e,t)}function yw(e,t){return ou(4,2,e,t)}function xw(e,t){return ou(4,4,e,t)}function ww(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function jw(e,t,r){return r=r!=null?r.concat([e]):null,ou(4,4,ww.bind(null,t,e),r)}function km(){}function bw(e,t){var r=vr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_m(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Sw(e,t){var r=vr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_m(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _w(e,t,r){return Js&21?(Or(r,t)||(r=T0(),We.lanes|=r,Ys|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=r)}function xE(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=gd.transition;gd.transition={};try{e(!1),t()}finally{Ae=r,gd.transition=n}}function Cw(){return vr().memoizedState}function wE(e,t,r){var n=es(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nw(e))Ew(t,r);else if(r=aw(e,t,r,n),r!==null){var s=Mt();Rr(r,e,n,s),kw(r,t,n)}}function jE(e,t,r){var n=es(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nw(e))Ew(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Or(l,a)){var c=t.interleaved;c===null?(s.next=s,xm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=aw(e,t,s,n),r!==null&&(s=Mt(),Rr(r,e,n,s),kw(r,t,n))}}function Nw(e){var t=e.alternate;return e===We||t!==null&&t===We}function Ew(e,t){Xi=_c=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function kw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,om(e,r)}}var Cc={readContext:gr,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},bE={readContext:gr,useCallback:function(e,t){return Vr().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:rv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Kl(4194308,4,ww.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kl(4,2,e,t)},useMemo:function(e,t){var r=Vr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Vr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=wE.bind(null,We,e),[n.memoizedState,e]},useRef:function(e){var t=Vr();return e={current:e},t.memoizedState=e},useState:tv,useDebugValue:km,useDeferredValue:function(e){return Vr().memoizedState=e},useTransition:function(){var e=tv(!1),t=e[0];return e=xE.bind(null,e[1]),Vr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=We,s=Vr();if(Ve){if(r===void 0)throw Error(W(407));r=r()}else{if(r=t(),vt===null)throw Error(W(349));Js&30||hw(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,rv(mw.bind(null,n,o,e),[e]),n.flags|=2048,Ca(9,fw.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Vr(),t=vt.identifierPrefix;if(Ve){var r=cn,n=ln;r=(n&~(1<<32-Ar(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sa++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},SE={readContext:gr,useCallback:bw,useContext:gr,useEffect:Em,useImperativeHandle:jw,useInsertionEffect:yw,useLayoutEffect:xw,useMemo:Sw,useReducer:vd,useRef:vw,useState:function(){return vd(_a)},useDebugValue:km,useDeferredValue:function(e){var t=vr();return _w(t,ut.memoizedState,e)},useTransition:function(){var e=vd(_a)[0],t=vr().memoizedState;return[e,t]},useMutableSource:uw,useSyncExternalStore:dw,useId:Cw,unstable_isNewReconciler:!1},_E={readContext:gr,useCallback:bw,useContext:gr,useEffect:Em,useImperativeHandle:jw,useInsertionEffect:yw,useLayoutEffect:xw,useMemo:Sw,useReducer:yd,useRef:vw,useState:function(){return yd(_a)},useDebugValue:km,useDeferredValue:function(e){var t=vr();return ut===null?t.memoizedState=e:_w(t,ut.memoizedState,e)},useTransition:function(){var e=yd(_a)[0],t=vr().memoizedState;return[e,t]},useMutableSource:uw,useSyncExternalStore:dw,useId:Cw,unstable_isNewReconciler:!1};function Nr(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ih(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:qe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var iu={isMounted:function(e){return(e=e._reactInternals)?so(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Mt(),s=es(e),o=dn(n,s);o.payload=t,r!=null&&(o.callback=r),t=Qn(e,o,s),t!==null&&(Rr(t,e,s,n),Hl(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Mt(),s=es(e),o=dn(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Qn(e,o,s),t!==null&&(Rr(t,e,s,n),Hl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mt(),n=es(e),s=dn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Qn(e,s,n),t!==null&&(Rr(t,e,n,r),Hl(t,e,n))}};function nv(e,t,r,n,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!va(r,n)||!va(s,o):!0}function Tw(e,t,r){var n=!1,s=ls,o=t.contextType;return typeof o=="object"&&o!==null?o=gr(o):(s=qt(t)?Gs:At.current,n=t.contextTypes,o=(n=n!=null)?Qo(e,s):ls),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=iu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function sv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&iu.enqueueReplaceState(t,t.state,null)}function Lh(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},wm(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=gr(o):(o=qt(t)?Gs:At.current,s.context=Qo(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ih(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&iu.enqueueReplaceState(s,s.state,null),bc(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ri(e,t){try{var r="",n=t;do r+=QC(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function xd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Mh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var CE=typeof WeakMap=="function"?WeakMap:Map;function Pw(e,t,r){r=dn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ec||(Ec=!0,Hh=n),Mh(e,t)},r}function Aw(e,t,r){r=dn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Mh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Mh(e,t),typeof n!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function ov(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new CE;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=FE.bind(null,e,t,r),t.then(e,e))}function iv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function av(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=dn(-1,1),t.tag=2,Qn(r,t,1))),r.lanes|=1),e)}var NE=Sn.ReactCurrentOwner,zt=!1;function Lt(e,t,r,n){t.child=e===null?iw(t,null,r,n):ei(t,e.child,r,n)}function lv(e,t,r,n,s){r=r.render;var o=t.ref;return qo(t,s),n=Cm(e,t,r,n,o,s),r=Nm(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,yn(e,t,s)):(Ve&&r&&fm(t),t.flags|=1,Lt(e,t,n,s),t.child)}function cv(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Mm(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Rw(e,t,o,n,s)):(e=Ql(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:va,r(a,n)&&e.ref===t.ref)return yn(e,t,s)}return t.flags|=1,e=ts(o,n),e.ref=t.ref,e.return=t,t.child=e}function Rw(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(va(o,n)&&e.ref===t.ref)if(zt=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(zt=!0);else return t.lanes=e.lanes,yn(e,t,s)}return Dh(e,t,r,n,s)}function Ow(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Mo,Jt),Jt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(Mo,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ie(Mo,Jt),Jt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ie(Mo,Jt),Jt|=n;return Lt(e,t,s,r),t.child}function Iw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Dh(e,t,r,n,s){var o=qt(r)?Gs:At.current;return o=Qo(t,o),qo(t,s),r=Cm(e,t,r,n,o,s),n=Nm(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,yn(e,t,s)):(Ve&&n&&fm(t),t.flags|=1,Lt(e,t,r,s),t.child)}function uv(e,t,r,n,s){if(qt(r)){var o=!0;vc(t)}else o=!1;if(qo(t,s),t.stateNode===null)Jl(e,t),Tw(t,r,n),Lh(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=qt(r)?Gs:At.current,u=Qo(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&sv(t,a,n,u),Ln=!1;var f=t.memoizedState;a.state=f,bc(t,n,a,s),c=t.memoizedState,l!==n||f!==c||Wt.current||Ln?(typeof d=="function"&&(Ih(t,r,d,n),c=t.memoizedState),(l=Ln||nv(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,lw(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Nr(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=gr(c):(c=qt(r)?Gs:At.current,c=Qo(t,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&sv(t,a,n,c),Ln=!1,f=t.memoizedState,a.state=f,bc(t,n,a,s);var w=t.memoizedState;l!==h||f!==w||Wt.current||Ln?(typeof g=="function"&&(Ih(t,r,g,n),w=t.memoizedState),(u=Ln||nv(t,r,u,n,f,w,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),a.props=n,a.state=w,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return $h(e,t,r,n,o,s)}function $h(e,t,r,n,s,o){Iw(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Jg(t,r,!1),yn(e,t,o);n=t.stateNode,NE.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=ei(t,e.child,null,o),t.child=ei(t,null,l,o)):Lt(e,t,l,o),t.memoizedState=n.state,s&&Jg(t,r,!0),t.child}function Lw(e){var t=e.stateNode;t.pendingContext?Kg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kg(e,t.context,!1),jm(e,t.containerInfo)}function dv(e,t,r,n,s){return Zo(),pm(s),t.flags|=256,Lt(e,t,r,n),t.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function Vh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mw(e,t,r){var n=t.pendingProps,s=Be.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ie(Be,s&1),e===null)return Rh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=cu(a,n,0,null),e=Ws(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Vh(r),t.memoizedState=Fh,e):Tm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return EE(e,t,a,n,l,s,r);if(o){o=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ts(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ts(l,o):(o=Ws(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?Vh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Fh,n}return o=e.child,e=o.sibling,n=ts(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Tm(e,t){return t=cu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yl(e,t,r,n){return n!==null&&pm(n),ei(t,e.child,null,r),e=Tm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EE(e,t,r,n,s,o,a){if(r)return t.flags&256?(t.flags&=-257,n=xd(Error(W(422))),yl(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=cu({mode:"visible",children:n.children},s,0,null),o=Ws(o,s,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&ei(t,e.child,null,a),t.child.memoizedState=Vh(a),t.memoizedState=Fh,o);if(!(t.mode&1))return yl(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(W(419)),n=xd(o,n,void 0),yl(e,t,a,n)}if(l=(a&e.childLanes)!==0,zt||l){if(n=vt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,vn(e,s),Rr(n,e,s,-1))}return Lm(),n=xd(Error(W(421))),yl(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=VE.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Xt=Xn(s.nextSibling),Qt=t,Ve=!0,Pr=null,e!==null&&(ur[dr++]=ln,ur[dr++]=cn,ur[dr++]=Ks,ln=e.id,cn=e.overflow,Ks=t),t=Tm(t,n.children),t.flags|=4096,t)}function hv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Oh(e.return,t,r)}function wd(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function Dw(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Lt(e,t,n.children,r),n=Be.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hv(e,r,t);else if(e.tag===19)hv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ie(Be,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Sc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),wd(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Sc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}wd(t,!0,r,null,o);break;case"together":wd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ys|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,r=ts(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ts(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function kE(e,t,r){switch(t.tag){case 3:Lw(t),Zo();break;case 5:cw(t);break;case 1:qt(t.type)&&vc(t);break;case 4:jm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ie(wc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ie(Be,Be.current&1),t.flags|=128,null):r&t.child.childLanes?Mw(e,t,r):(Ie(Be,Be.current&1),e=yn(e,t,r),e!==null?e.sibling:null);Ie(Be,Be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Dw(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Be,Be.current),n)break;return null;case 22:case 23:return t.lanes=0,Ow(e,t,r)}return yn(e,t,r)}var $w,Uh,Fw,Vw;$w=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Uh=function(){};Fw=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Vs(qr.current);var o=null;switch(r){case"input":s=ch(e,s),n=ch(e,n),o=[];break;case"select":s=qe({},s,{value:void 0}),n=qe({},n,{value:void 0}),o=[];break;case"textarea":s=hh(e,s),n=hh(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pc)}mh(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ua.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ua.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$e("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Vw=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ai(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function TE(e,t,r){var n=t.pendingProps;switch(mm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return qt(t.type)&&gc(),kt(t),null;case 3:return n=t.stateNode,ti(),Fe(Wt),Fe(At),Sm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pr!==null&&(Jh(Pr),Pr=null))),Uh(e,t),kt(t),null;case 5:bm(t);var s=Vs(ba.current);if(r=t.type,e!==null&&t.stateNode!=null)Fw(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(W(166));return kt(t),null}if(e=Vs(qr.current),gl(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Ur]=t,n[wa]=o,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(s=0;s<Ui.length;s++)$e(Ui[s],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":jg(n,o),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},$e("invalid",n);break;case"textarea":Sg(n,o),$e("invalid",n)}mh(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&pl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&pl(n.textContent,l,e),s=["children",""+l]):ua.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&$e("scroll",n)}switch(r){case"input":al(n),bg(n,o,!0);break;case"textarea":al(n),_g(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=pc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=m0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Ur]=t,e[wa]=n,$w(e,t,!1,!1),t.stateNode=e;e:{switch(a=ph(r,n),r){case"dialog":$e("cancel",e),$e("close",e),s=n;break;case"iframe":case"object":case"embed":$e("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ui.length;s++)$e(Ui[s],e);s=n;break;case"source":$e("error",e),s=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),s=n;break;case"details":$e("toggle",e),s=n;break;case"input":jg(e,n),s=ch(e,n),$e("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=qe({},n,{value:void 0}),$e("invalid",e);break;case"textarea":Sg(e,n),s=hh(e,n),$e("invalid",e);break;default:s=n}mh(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?v0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&p0(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&da(e,c):typeof c=="number"&&da(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ua.hasOwnProperty(o)?c!=null&&o==="onScroll"&&$e("scroll",e):c!=null&&Zf(e,o,c,a))}switch(r){case"input":al(e),bg(e,n,!1);break;case"textarea":al(e),_g(e);break;case"option":n.value!=null&&e.setAttribute("value",""+as(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Uo(e,!!n.multiple,o,!1):n.defaultValue!=null&&Uo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=pc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)Vw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(W(166));if(r=Vs(ba.current),Vs(qr.current),gl(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ur]=t,(o=n.nodeValue!==r)&&(e=Qt,e!==null))switch(e.tag){case 3:pl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pl(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ur]=t,t.stateNode=n}return kt(t),null;case 13:if(Fe(Be),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Xt!==null&&t.mode&1&&!(t.flags&128))sw(),Zo(),t.flags|=98560,o=!1;else if(o=gl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(W(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(W(317));o[Ur]=t}else Zo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),o=!1}else Pr!==null&&(Jh(Pr),Pr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?dt===0&&(dt=3):Lm())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return ti(),Uh(e,t),e===null&&ya(t.stateNode.containerInfo),kt(t),null;case 10:return ym(t.type._context),kt(t),null;case 17:return qt(t.type)&&gc(),kt(t),null;case 19:if(Fe(Be),o=t.memoizedState,o===null)return kt(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Ai(o,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Sc(e),a!==null){for(t.flags|=128,Ai(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ie(Be,Be.current&1|2),t.child}e=e.sibling}o.tail!==null&&Je()>ni&&(t.flags|=128,n=!0,Ai(o,!1),t.lanes=4194304)}else{if(!n)if(e=Sc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ai(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ve)return kt(t),null}else 2*Je()-o.renderingStartTime>ni&&r!==1073741824&&(t.flags|=128,n=!0,Ai(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,r=Be.current,Ie(Be,n?r&1|2:r&1),t):(kt(t),null);case 22:case 23:return Im(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Jt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function PE(e,t){switch(mm(t),t.tag){case 1:return qt(t.type)&&gc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),Fe(Wt),Fe(At),Sm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bm(t),null;case 13:if(Fe(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));Zo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(Be),null;case 4:return ti(),null;case 10:return ym(t.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var xl=!1,Pt=!1,AE=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Lo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){He(e,t,n)}else r.current=null}function Bh(e,t,r){try{r()}catch(n){He(e,t,n)}}var fv=!1;function RE(e,t){if(Ch=hc,e=q0(),hm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===o&&++d===n&&(c=a),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nh={focusedElem:e,selectionRange:r},hc=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var m=w.memoizedProps,j=w.memoizedState,x=t.stateNode,v=x.getSnapshotBeforeUpdate(t.elementType===t.type?m:Nr(t.type,m),j);x.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(b){He(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return w=fv,fv=!1,w}function Qi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Bh(t,r,o)}s=s.next}while(s!==n)}}function au(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function zh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Uw(e){var t=e.alternate;t!==null&&(e.alternate=null,Uw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ur],delete t[wa],delete t[Th],delete t[mE],delete t[pE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Bw(e){return e.tag===5||e.tag===3||e.tag===4}function mv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pc));else if(n!==4&&(e=e.child,e!==null))for(Wh(e,t,r),e=e.sibling;e!==null;)Wh(e,t,r),e=e.sibling}function qh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(qh(e,t,r),e=e.sibling;e!==null;)qh(e,t,r),e=e.sibling}var wt=null,kr=!1;function Tn(e,t,r){for(r=r.child;r!==null;)zw(e,t,r),r=r.sibling}function zw(e,t,r){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Zc,r)}catch{}switch(r.tag){case 5:Pt||Lo(r,t);case 6:var n=wt,s=kr;wt=null,Tn(e,t,r),wt=n,kr=s,wt!==null&&(kr?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(kr?(e=wt,r=r.stateNode,e.nodeType===8?fd(e.parentNode,r):e.nodeType===1&&fd(e,r),pa(e)):fd(wt,r.stateNode));break;case 4:n=wt,s=kr,wt=r.stateNode.containerInfo,kr=!0,Tn(e,t,r),wt=n,kr=s;break;case 0:case 11:case 14:case 15:if(!Pt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Bh(r,t,a),s=s.next}while(s!==n)}Tn(e,t,r);break;case 1:if(!Pt&&(Lo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){He(r,t,l)}Tn(e,t,r);break;case 21:Tn(e,t,r);break;case 22:r.mode&1?(Pt=(n=Pt)||r.memoizedState!==null,Tn(e,t,r),Pt=n):Tn(e,t,r);break;default:Tn(e,t,r)}}function pv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new AE),t.forEach(function(n){var s=UE.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function br(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,kr=!1;break e;case 3:wt=l.stateNode.containerInfo,kr=!0;break e;case 4:wt=l.stateNode.containerInfo,kr=!0;break e}l=l.return}if(wt===null)throw Error(W(160));zw(o,a,s),wt=null,kr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){He(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ww(t,e),t=t.sibling}function Ww(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(br(t,e),Fr(e),n&4){try{Qi(3,e,e.return),au(3,e)}catch(m){He(e,e.return,m)}try{Qi(5,e,e.return)}catch(m){He(e,e.return,m)}}break;case 1:br(t,e),Fr(e),n&512&&r!==null&&Lo(r,r.return);break;case 5:if(br(t,e),Fr(e),n&512&&r!==null&&Lo(r,r.return),e.flags&32){var s=e.stateNode;try{da(s,"")}catch(m){He(e,e.return,m)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&h0(s,o),ph(l,a);var u=ph(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?v0(s,h):d==="dangerouslySetInnerHTML"?p0(s,h):d==="children"?da(s,h):Zf(s,d,h,u)}switch(l){case"input":uh(s,o);break;case"textarea":f0(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Uo(s,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?Uo(s,!!o.multiple,o.defaultValue,!0):Uo(s,!!o.multiple,o.multiple?[]:"",!1))}s[wa]=o}catch(m){He(e,e.return,m)}}break;case 6:if(br(t,e),Fr(e),n&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(m){He(e,e.return,m)}}break;case 3:if(br(t,e),Fr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pa(t.containerInfo)}catch(m){He(e,e.return,m)}break;case 4:br(t,e),Fr(e);break;case 13:br(t,e),Fr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Rm=Je())),n&4&&pv(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Pt=(u=Pt)||d,br(t,e),Pt=u):br(t,e),Fr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ee=e,d=e.child;d!==null;){for(h=ee=d;ee!==null;){switch(f=ee,g=f.child,f.tag){case 0:case 11:case 14:case 15:Qi(4,f,f.return);break;case 1:Lo(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(m){He(n,r,m)}}break;case 5:Lo(f,f.return);break;case 22:if(f.memoizedState!==null){vv(h);continue}}g!==null?(g.return=f,ee=g):vv(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=g0("display",a))}catch(m){He(e,e.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){He(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:br(t,e),Fr(e),n&4&&pv(e);break;case 21:break;default:br(t,e),Fr(e)}}function Fr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Bw(r)){var n=r;break e}r=r.return}throw Error(W(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(da(s,""),n.flags&=-33);var o=mv(e);qh(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=mv(e);Wh(e,l,a);break;default:throw Error(W(161))}}catch(c){He(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function OE(e,t,r){ee=e,qw(e)}function qw(e,t,r){for(var n=(e.mode&1)!==0;ee!==null;){var s=ee,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||xl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Pt;l=xl;var u=Pt;if(xl=a,(Pt=c)&&!u)for(ee=s;ee!==null;)a=ee,c=a.child,a.tag===22&&a.memoizedState!==null?yv(s):c!==null?(c.return=a,ee=c):yv(s);for(;o!==null;)ee=o,qw(o),o=o.sibling;ee=s,xl=l,Pt=u}gv(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ee=o):gv(e)}}function gv(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Pt||au(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Pt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Nr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&ev(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}ev(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&pa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}Pt||t.flags&512&&zh(t)}catch(f){He(t,t.return,f)}}if(t===e){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function vv(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function yv(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{au(4,t)}catch(c){He(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){He(t,s,c)}}var o=t.return;try{zh(t)}catch(c){He(t,o,c)}break;case 5:var a=t.return;try{zh(t)}catch(c){He(t,a,c)}}}catch(c){He(t,t.return,c)}if(t===e){ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ee=l;break}ee=t.return}}var IE=Math.ceil,Nc=Sn.ReactCurrentDispatcher,Pm=Sn.ReactCurrentOwner,fr=Sn.ReactCurrentBatchConfig,Te=0,vt=null,nt=null,bt=0,Jt=0,Mo=ms(0),dt=0,Na=null,Ys=0,lu=0,Am=0,Zi=null,Ut=null,Rm=0,ni=1/0,nn=null,Ec=!1,Hh=null,Zn=null,wl=!1,zn=null,kc=0,ea=0,Gh=null,Yl=-1,Xl=0;function Mt(){return Te&6?Je():Yl!==-1?Yl:Yl=Je()}function es(e){return e.mode&1?Te&2&&bt!==0?bt&-bt:vE.transition!==null?(Xl===0&&(Xl=T0()),Xl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:M0(e.type)),e):1}function Rr(e,t,r,n){if(50<ea)throw ea=0,Gh=null,Error(W(185));Ua(e,r,n),(!(Te&2)||e!==vt)&&(e===vt&&(!(Te&2)&&(lu|=r),dt===4&&Fn(e,bt)),Ht(e,n),r===1&&Te===0&&!(t.mode&1)&&(ni=Je()+500,su&&ps()))}function Ht(e,t){var r=e.callbackNode;vN(e,t);var n=dc(e,e===vt?bt:0);if(n===0)r!==null&&Eg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Eg(r),t===1)e.tag===0?gE(xv.bind(null,e)):tw(xv.bind(null,e)),hE(function(){!(Te&6)&&ps()}),r=null;else{switch(P0(n)){case 1:r=sm;break;case 4:r=E0;break;case 16:r=uc;break;case 536870912:r=k0;break;default:r=uc}r=Zw(r,Hw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Hw(e,t){if(Yl=-1,Xl=0,Te&6)throw Error(W(327));var r=e.callbackNode;if(Ho()&&e.callbackNode!==r)return null;var n=dc(e,e===vt?bt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Tc(e,n);else{t=n;var s=Te;Te|=2;var o=Kw();(vt!==e||bt!==t)&&(nn=null,ni=Je()+500,zs(e,t));do try{DE();break}catch(l){Gw(e,l)}while(1);vm(),Nc.current=o,Te=s,nt!==null?t=0:(vt=null,bt=0,t=dt)}if(t!==0){if(t===2&&(s=wh(e),s!==0&&(n=s,t=Kh(e,s))),t===1)throw r=Na,zs(e,0),Fn(e,n),Ht(e,Je()),r;if(t===6)Fn(e,n);else{if(s=e.current.alternate,!(n&30)&&!LE(s)&&(t=Tc(e,n),t===2&&(o=wh(e),o!==0&&(n=o,t=Kh(e,o))),t===1))throw r=Na,zs(e,0),Fn(e,n),Ht(e,Je()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(W(345));case 2:Rs(e,Ut,nn);break;case 3:if(Fn(e,n),(n&130023424)===n&&(t=Rm+500-Je(),10<t)){if(dc(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Mt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=kh(Rs.bind(null,e,Ut,nn),t);break}Rs(e,Ut,nn);break;case 4:if(Fn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Ar(n);o=1<<a,a=t[a],a>s&&(s=a),n&=~o}if(n=s,n=Je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*IE(n/1960))-n,10<n){e.timeoutHandle=kh(Rs.bind(null,e,Ut,nn),n);break}Rs(e,Ut,nn);break;case 5:Rs(e,Ut,nn);break;default:throw Error(W(329))}}}return Ht(e,Je()),e.callbackNode===r?Hw.bind(null,e):null}function Kh(e,t){var r=Zi;return e.current.memoizedState.isDehydrated&&(zs(e,t).flags|=256),e=Tc(e,t),e!==2&&(t=Ut,Ut=r,t!==null&&Jh(t)),e}function Jh(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function LE(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Or(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fn(e,t){for(t&=~Am,t&=~lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ar(t),n=1<<r;e[r]=-1,t&=~n}}function xv(e){if(Te&6)throw Error(W(327));Ho();var t=dc(e,0);if(!(t&1))return Ht(e,Je()),null;var r=Tc(e,t);if(e.tag!==0&&r===2){var n=wh(e);n!==0&&(t=n,r=Kh(e,n))}if(r===1)throw r=Na,zs(e,0),Fn(e,t),Ht(e,Je()),r;if(r===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rs(e,Ut,nn),Ht(e,Je()),null}function Om(e,t){var r=Te;Te|=1;try{return e(t)}finally{Te=r,Te===0&&(ni=Je()+500,su&&ps())}}function Xs(e){zn!==null&&zn.tag===0&&!(Te&6)&&Ho();var t=Te;Te|=1;var r=fr.transition,n=Ae;try{if(fr.transition=null,Ae=1,e)return e()}finally{Ae=n,fr.transition=r,Te=t,!(Te&6)&&ps()}}function Im(){Jt=Mo.current,Fe(Mo)}function zs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,dE(r)),nt!==null)for(r=nt.return;r!==null;){var n=r;switch(mm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gc();break;case 3:ti(),Fe(Wt),Fe(At),Sm();break;case 5:bm(n);break;case 4:ti();break;case 13:Fe(Be);break;case 19:Fe(Be);break;case 10:ym(n.type._context);break;case 22:case 23:Im()}r=r.return}if(vt=e,nt=e=ts(e.current,null),bt=Jt=t,dt=0,Na=null,Am=lu=Ys=0,Ut=Zi=null,Fs!==null){for(t=0;t<Fs.length;t++)if(r=Fs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}Fs=null}return e}function Gw(e,t){do{var r=nt;try{if(vm(),Gl.current=Cc,_c){for(var n=We.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_c=!1}if(Js=0,gt=ut=We=null,Xi=!1,Sa=0,Pm.current=null,r===null||r.return===null){dt=1,Na=t,nt=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=bt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=iv(a);if(g!==null){g.flags&=-257,av(g,a,l,o,t),g.mode&1&&ov(o,u,t),t=g,c=u;var w=t.updateQueue;if(w===null){var m=new Set;m.add(c),t.updateQueue=m}else w.add(c);break e}else{if(!(t&1)){ov(o,u,t),Lm();break e}c=Error(W(426))}}else if(Ve&&l.mode&1){var j=iv(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),av(j,a,l,o,t),pm(ri(c,l));break e}}o=c=ri(c,l),dt!==4&&(dt=2),Zi===null?Zi=[o]:Zi.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Pw(o,c,t);Zg(o,x);break e;case 1:l=c;var v=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Zn===null||!Zn.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=Aw(o,l,t);Zg(o,b);break e}}o=o.return}while(o!==null)}Yw(r)}catch(S){t=S,nt===r&&r!==null&&(nt=r=r.return);continue}break}while(1)}function Kw(){var e=Nc.current;return Nc.current=Cc,e===null?Cc:e}function Lm(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Ys&268435455)&&!(lu&268435455)||Fn(vt,bt)}function Tc(e,t){var r=Te;Te|=2;var n=Kw();(vt!==e||bt!==t)&&(nn=null,zs(e,t));do try{ME();break}catch(s){Gw(e,s)}while(1);if(vm(),Te=r,Nc.current=n,nt!==null)throw Error(W(261));return vt=null,bt=0,dt}function ME(){for(;nt!==null;)Jw(nt)}function DE(){for(;nt!==null&&!lN();)Jw(nt)}function Jw(e){var t=Qw(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Yw(e):nt=t,Pm.current=null}function Yw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=PE(r,t),r!==null){r.flags&=32767,nt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,nt=null;return}}else if(r=TE(r,t,Jt),r!==null){nt=r;return}if(t=t.sibling,t!==null){nt=t;return}nt=t=e}while(t!==null);dt===0&&(dt=5)}function Rs(e,t,r){var n=Ae,s=fr.transition;try{fr.transition=null,Ae=1,$E(e,t,r,n)}finally{fr.transition=s,Ae=n}return null}function $E(e,t,r,n){do Ho();while(zn!==null);if(Te&6)throw Error(W(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(yN(e,o),e===vt&&(nt=vt=null,bt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wl||(wl=!0,Zw(uc,function(){return Ho(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=fr.transition,fr.transition=null;var a=Ae;Ae=1;var l=Te;Te|=4,Pm.current=null,RE(e,r),Ww(r,e),sE(Nh),hc=!!Ch,Nh=Ch=null,e.current=r,OE(r),cN(),Te=l,Ae=a,fr.transition=o}else e.current=r;if(wl&&(wl=!1,zn=e,kc=s),o=e.pendingLanes,o===0&&(Zn=null),hN(r.stateNode),Ht(e,Je()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ec)throw Ec=!1,e=Hh,Hh=null,e;return kc&1&&e.tag!==0&&Ho(),o=e.pendingLanes,o&1?e===Gh?ea++:(ea=0,Gh=e):ea=0,ps(),null}function Ho(){if(zn!==null){var e=P0(kc),t=fr.transition,r=Ae;try{if(fr.transition=null,Ae=16>e?16:e,zn===null)var n=!1;else{if(e=zn,zn=null,kc=0,Te&6)throw Error(W(331));var s=Te;for(Te|=4,ee=e.current;ee!==null;){var o=ee,a=o.child;if(ee.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Qi(8,d,o)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var f=d.sibling,g=d.return;if(Uw(d),d===u){ee=null;break}if(f!==null){f.return=g,ee=f;break}ee=g}}}var w=o.alternate;if(w!==null){var m=w.child;if(m!==null){w.child=null;do{var j=m.sibling;m.sibling=null,m=j}while(m!==null)}}ee=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ee=a;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qi(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ee=x;break e}ee=o.return}}var v=e.current;for(ee=v;ee!==null;){a=ee;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,ee=y;else e:for(a=v;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:au(9,l)}}catch(S){He(l,l.return,S)}if(l===a){ee=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ee=b;break e}ee=l.return}}if(Te=s,ps(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Zc,e)}catch{}n=!0}return n}finally{Ae=r,fr.transition=t}}return!1}function wv(e,t,r){t=ri(r,t),t=Pw(e,t,1),e=Qn(e,t,1),t=Mt(),e!==null&&(Ua(e,1,t),Ht(e,t))}function He(e,t,r){if(e.tag===3)wv(e,e,r);else for(;t!==null;){if(t.tag===3){wv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zn===null||!Zn.has(n))){e=ri(r,e),e=Aw(t,e,1),t=Qn(t,e,1),e=Mt(),t!==null&&(Ua(t,1,e),Ht(t,e));break}}t=t.return}}function FE(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Mt(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(bt&r)===r&&(dt===4||dt===3&&(bt&130023424)===bt&&500>Je()-Rm?zs(e,0):Am|=r),Ht(e,t)}function Xw(e,t){t===0&&(e.mode&1?(t=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):t=1);var r=Mt();e=vn(e,t),e!==null&&(Ua(e,t,r),Ht(e,r))}function VE(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Xw(e,r)}function UE(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(t),Xw(e,r)}var Qw;Qw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)zt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zt=!1,kE(e,t,r);zt=!!(e.flags&131072)}else zt=!1,Ve&&t.flags&1048576&&rw(t,xc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Jl(e,t),e=t.pendingProps;var s=Qo(t,At.current);qo(t,r),s=Cm(null,t,n,e,s,r);var o=Nm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(n)?(o=!0,vc(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wm(t),s.updater=iu,t.stateNode=s,s._reactInternals=t,Lh(t,n,e,r),t=$h(null,t,n,!0,o,r)):(t.tag=0,Ve&&o&&fm(t),Lt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Jl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=zE(n),e=Nr(n,e),s){case 0:t=Dh(null,t,n,e,r);break e;case 1:t=uv(null,t,n,e,r);break e;case 11:t=lv(null,t,n,e,r);break e;case 14:t=cv(null,t,n,Nr(n.type,e),r);break e}throw Error(W(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),Dh(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),uv(e,t,n,s,r);case 3:e:{if(Lw(t),e===null)throw Error(W(387));n=t.pendingProps,o=t.memoizedState,s=o.element,lw(e,t),bc(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=ri(Error(W(423)),t),t=dv(e,t,n,r,s);break e}else if(n!==s){s=ri(Error(W(424)),t),t=dv(e,t,n,r,s);break e}else for(Xt=Xn(t.stateNode.containerInfo.firstChild),Qt=t,Ve=!0,Pr=null,r=iw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zo(),n===s){t=yn(e,t,r);break e}Lt(e,t,n,r)}t=t.child}return t;case 5:return cw(t),e===null&&Rh(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Eh(n,s)?a=null:o!==null&&Eh(n,o)&&(t.flags|=32),Iw(e,t),Lt(e,t,a,r),t.child;case 6:return e===null&&Rh(t),null;case 13:return Mw(e,t,r);case 4:return jm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ei(t,null,n,r):Lt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),lv(e,t,n,s,r);case 7:return Lt(e,t,t.pendingProps,r),t.child;case 8:return Lt(e,t,t.pendingProps.children,r),t.child;case 12:return Lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ie(wc,n._currentValue),n._currentValue=a,o!==null)if(Or(o.value,a)){if(o.children===s.children&&!Wt.current){t=yn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=dn(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Oh(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(W(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Oh(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Lt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,qo(t,r),s=gr(s),n=n(s),t.flags|=1,Lt(e,t,n,r),t.child;case 14:return n=t.type,s=Nr(n,t.pendingProps),s=Nr(n.type,s),cv(e,t,n,s,r);case 15:return Rw(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),Jl(e,t),t.tag=1,qt(n)?(e=!0,vc(t)):e=!1,qo(t,r),Tw(t,n,s),Lh(t,n,s,r),$h(null,t,n,!0,e,r);case 19:return Dw(e,t,r);case 22:return Ow(e,t,r)}throw Error(W(156,t.tag))};function Zw(e,t){return N0(e,t)}function BE(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(e,t,r,n){return new BE(e,t,r,n)}function Mm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function zE(e){if(typeof e=="function")return Mm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tm)return 11;if(e===rm)return 14}return 2}function ts(e,t){var r=e.alternate;return r===null?(r=hr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ql(e,t,r,n,s,o){var a=2;if(n=e,typeof e=="function")Mm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case No:return Ws(r.children,s,o,t);case em:a=8,s|=8;break;case oh:return e=hr(12,r,t,s|2),e.elementType=oh,e.lanes=o,e;case ih:return e=hr(13,r,t,s),e.elementType=ih,e.lanes=o,e;case ah:return e=hr(19,r,t,s),e.elementType=ah,e.lanes=o,e;case c0:return cu(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case a0:a=10;break e;case l0:a=9;break e;case tm:a=11;break e;case rm:a=14;break e;case In:a=16,n=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=hr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function Ws(e,t,r,n){return e=hr(7,e,n,t),e.lanes=r,e}function cu(e,t,r,n){return e=hr(22,e,n,t),e.elementType=c0,e.lanes=r,e.stateNode={isHidden:!1},e}function jd(e,t,r){return e=hr(6,e,null,t),e.lanes=r,e}function bd(e,t,r){return t=hr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function WE(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dm(e,t,r,n,s,o,a,l,c){return e=new WE(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=hr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(o),e}function qE(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function ej(e){if(!e)return ls;e=e._reactInternals;e:{if(so(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var r=e.type;if(qt(r))return ew(e,r,t)}return t}function tj(e,t,r,n,s,o,a,l,c){return e=Dm(r,n,!0,e,s,o,a,l,c),e.context=ej(null),r=e.current,n=Mt(),s=es(r),o=dn(n,s),o.callback=t??null,Qn(r,o,s),e.current.lanes=s,Ua(e,s,n),Ht(e,n),e}function uu(e,t,r,n){var s=t.current,o=Mt(),a=es(s);return r=ej(r),t.context===null?t.context=r:t.pendingContext=r,t=dn(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Qn(s,t,a),e!==null&&(Rr(e,s,a,o),Hl(e,s,a)),a}function Pc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $m(e,t){jv(e,t),(e=e.alternate)&&jv(e,t)}function HE(){return null}var rj=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fm(e){this._internalRoot=e}du.prototype.render=Fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));uu(e,t,null,null)};du.prototype.unmount=Fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xs(function(){uu(null,e,null,null)}),t[gn]=null}};function du(e){this._internalRoot=e}du.prototype.unstable_scheduleHydration=function(e){if(e){var t=O0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$n.length&&t!==0&&t<$n[r].priority;r++);$n.splice(r,0,e),r===0&&L0(e)}};function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bv(){}function GE(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=Pc(a);o.call(u)}}var a=tj(t,n,e,0,null,!1,!1,"",bv);return e._reactRootContainer=a,e[gn]=a.current,ya(e.nodeType===8?e.parentNode:e),Xs(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Pc(c);l.call(u)}}var c=Dm(e,0,!1,null,null,!1,!1,"",bv);return e._reactRootContainer=c,e[gn]=c.current,ya(e.nodeType===8?e.parentNode:e),Xs(function(){uu(t,c,r,n)}),c}function fu(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Pc(a);l.call(c)}}uu(t,a,e,s)}else a=GE(r,t,e,s,n);return Pc(a)}A0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vi(t.pendingLanes);r!==0&&(om(t,r|1),Ht(t,Je()),!(Te&6)&&(ni=Je()+500,ps()))}break;case 13:Xs(function(){var n=vn(e,1);if(n!==null){var s=Mt();Rr(n,e,1,s)}}),$m(e,1)}};im=function(e){if(e.tag===13){var t=vn(e,134217728);if(t!==null){var r=Mt();Rr(t,e,134217728,r)}$m(e,134217728)}};R0=function(e){if(e.tag===13){var t=es(e),r=vn(e,t);if(r!==null){var n=Mt();Rr(r,e,t,n)}$m(e,t)}};O0=function(){return Ae};I0=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};vh=function(e,t,r){switch(t){case"input":if(uh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=nu(n);if(!s)throw Error(W(90));d0(n),uh(n,s)}}}break;case"textarea":f0(e,r);break;case"select":t=r.value,t!=null&&Uo(e,!!r.multiple,t,!1)}};w0=Om;j0=Xs;var KE={usingClientEntryPoint:!1,Events:[za,Po,nu,y0,x0,Om]},Ri={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JE={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_0(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||HE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{Zc=jl.inject(JE),Wr=jl}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KE;ir.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(t))throw Error(W(200));return qE(e,t,null,r)};ir.createRoot=function(e,t){if(!Vm(e))throw Error(W(299));var r=!1,n="",s=rj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dm(e,1,!1,null,null,r,!1,n,s),e[gn]=t.current,ya(e.nodeType===8?e.parentNode:e),new Fm(t)};ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=_0(t),e=e===null?null:e.stateNode,e};ir.flushSync=function(e){return Xs(e)};ir.hydrate=function(e,t,r){if(!hu(t))throw Error(W(200));return fu(null,e,t,!0,r)};ir.hydrateRoot=function(e,t,r){if(!Vm(e))throw Error(W(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=rj;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=tj(t,null,e,1,r??null,s,!1,o,a),e[gn]=t.current,ya(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new du(t)};ir.render=function(e,t,r){if(!hu(t))throw Error(W(200));return fu(null,e,t,!1,r)};ir.unmountComponentAtNode=function(e){if(!hu(e))throw Error(W(40));return e._reactRootContainer?(Xs(function(){fu(null,null,e,!1,function(){e._reactRootContainer=null,e[gn]=null})}),!0):!1};ir.unstable_batchedUpdates=Om;ir.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!hu(r))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return fu(e,t,r,!1,n)};ir.version="18.3.1-next-f1338f8080-20240426";function nj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nj)}catch(e){console.error(e)}}nj(),n0.exports=ir;var oo=n0.exports;const YE=qx(oo);var Sv=oo;nh.createRoot=Sv.createRoot,nh.hydrateRoot=Sv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ea.apply(this,arguments)}var Wn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wn||(Wn={}));const _v="popstate";function XE(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:a,hash:l}=n.location;return Yh("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ac(s)}return ZE(t,r,null,e)}function Qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function QE(){return Math.random().toString(36).substr(2,8)}function Cv(e,t){return{usr:e.state,key:e.key,idx:t}}function Yh(e,t,r,n){return r===void 0&&(r=null),Ea({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fi(t):t,{state:r,key:t&&t.key||n||QE()})}function Ac(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function fi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ZE(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l=Wn.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ea({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Wn.Pop;let j=d(),x=j==null?null:j-u;u=j,c&&c({action:l,location:m.location,delta:x})}function f(j,x){l=Wn.Push;let v=Yh(m.location,j,x);r&&r(v,j),u=d()+1;let y=Cv(v,u),b=m.createHref(v);try{a.pushState(y,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(b)}o&&c&&c({action:l,location:m.location,delta:1})}function g(j,x){l=Wn.Replace;let v=Yh(m.location,j,x);r&&r(v,j),u=d();let y=Cv(v,u),b=m.createHref(v);a.replaceState(y,"",b),o&&c&&c({action:l,location:m.location,delta:0})}function w(j){let x=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof j=="string"?j:Ac(j);return v=v.replace(/ $/,"%20"),Qe(x,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,x)}let m={get action(){return l},get location(){return e(s,a)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(_v,h),c=j,()=>{s.removeEventListener(_v,h),c=null}},createHref(j){return t(s,j)},createURL:w,encodeLocation(j){let x=w(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:g,go(j){return a.go(j)}};return m}var Nv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Nv||(Nv={}));function ek(e,t,r){return r===void 0&&(r="/"),tk(e,t,r,!1)}function tk(e,t,r,n){let s=typeof t=="string"?fi(t):t,o=Um(s.pathname||"/",r);if(o==null)return null;let a=oj(e);rk(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=fk(o);l=dk(a[c],u,n)}return l}function oj(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=rs([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(Qe(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),oj(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:ck(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of ij(o.path))s(o,a,c)}),t}function ij(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let a=ij(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function rk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uk(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const nk=/^:[\w-]+$/,sk=3,ok=2,ik=1,ak=10,lk=-2,Ev=e=>e==="*";function ck(e,t){let r=e.split("/"),n=r.length;return r.some(Ev)&&(n+=lk),t&&(n+=ok),r.filter(s=>!Ev(s)).reduce((s,o)=>s+(nk.test(o)?sk:o===""?ik:ak),n)}function uk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function dk(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},o="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",h=kv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=kv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:rs([o,h.pathname]),pathnameBase:vk(rs([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=rs([o,h.pathnameBase]))}return a}function kv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=hk(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let m=l[h]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const w=l[h];return g&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function hk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),sj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function fk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Um(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function mk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?fi(e):e;return{pathname:r?r.startsWith("/")?r:pk(r,t):t,search:yk(n),hash:xk(s)}}function pk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Sd(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bm(e,t){let r=gk(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zm(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=fi(e):(s=Ea({},e),Qe(!s.pathname||!s.pathname.includes("?"),Sd("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),Sd("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),Sd("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=mk(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const rs=e=>e.join("/").replace(/\/\/+/g,"/"),vk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,xk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const aj=["post","put","patch","delete"];new Set(aj);const jk=["get",...aj];new Set(jk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(this,arguments)}const Wm=p.createContext(null),bk=p.createContext(null),gs=p.createContext(null),mu=p.createContext(null),Yr=p.createContext({outlet:null,matches:[],isDataRoute:!1}),lj=p.createContext(null);function Sk(e,t){let{relative:r}=t===void 0?{}:t;mi()||Qe(!1);let{basename:n,navigator:s}=p.useContext(gs),{hash:o,pathname:a,search:l}=uj(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:rs([n,a])),s.createHref({pathname:c,search:l,hash:o})}function mi(){return p.useContext(mu)!=null}function pi(){return mi()||Qe(!1),p.useContext(mu).location}function cj(e){p.useContext(gs).static||p.useLayoutEffect(e)}function qm(){let{isDataRoute:e}=p.useContext(Yr);return e?Fk():_k()}function _k(){mi()||Qe(!1);let e=p.useContext(Wm),{basename:t,future:r,navigator:n}=p.useContext(gs),{matches:s}=p.useContext(Yr),{pathname:o}=pi(),a=JSON.stringify(Bm(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return cj(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=zm(u,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:rs([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,o,e])}const Ck=p.createContext(null);function Nk(e){let t=p.useContext(Yr).outlet;return t&&p.createElement(Ck.Provider,{value:e},t)}function Ek(){let{matches:e}=p.useContext(Yr),t=e[e.length-1];return t?t.params:{}}function uj(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(gs),{matches:s}=p.useContext(Yr),{pathname:o}=pi(),a=JSON.stringify(Bm(s,n.v7_relativeSplatPath));return p.useMemo(()=>zm(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function kk(e,t){return Tk(e,t)}function Tk(e,t,r,n){mi()||Qe(!1);let{navigator:s}=p.useContext(gs),{matches:o}=p.useContext(Yr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=pi(),d;if(t){var h;let j=typeof t=="string"?fi(t):t;c==="/"||(h=j.pathname)!=null&&h.startsWith(c)||Qe(!1),d=j}else d=u;let f=d.pathname||"/",g=f;if(c!=="/"){let j=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(j.length).join("/")}let w=ek(e,{pathname:g}),m=Ik(w&&w.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:rs([c,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:rs([c,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,r,n);return t&&m?p.createElement(mu.Provider,{value:{location:ka({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Wn.Pop}},m):m}function Pk(){let e=$k(),t=wk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,o)}const Ak=p.createElement(Pk,null);class Rk extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Yr.Provider,{value:this.props.routeContext},p.createElement(lj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ok(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(Wm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Yr.Provider,{value:t},n)}function Ik(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||Qe(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=r,w=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let g,w=!1,m=null,j=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||Ak,c&&(u<0&&f===0?(Vk("route-fallback",!1),w=!0,j=null):u===f&&(w=!0,j=h.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,f+1)),v=()=>{let y;return g?y=m:w?y=j:h.route.Component?y=p.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,p.createElement(Ok,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:y})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(Rk,{location:r.location,revalidation:r.revalidation,component:m,error:g,children:v(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):v()},null)}var dj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(dj||{}),Rc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rc||{});function Lk(e){let t=p.useContext(Wm);return t||Qe(!1),t}function Mk(e){let t=p.useContext(bk);return t||Qe(!1),t}function Dk(e){let t=p.useContext(Yr);return t||Qe(!1),t}function hj(e){let t=Dk(),r=t.matches[t.matches.length-1];return r.route.id||Qe(!1),r.route.id}function $k(){var e;let t=p.useContext(lj),r=Mk(Rc.UseRouteError),n=hj(Rc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Fk(){let{router:e}=Lk(dj.UseNavigateStable),t=hj(Rc.UseNavigateStable),r=p.useRef(!1);return cj(()=>{r.current=!0}),p.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ka({fromRouteId:t},o)))},[e,t])}const Tv={};function Vk(e,t,r){!t&&!Tv[e]&&(Tv[e]=!0)}function Uk(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Oc(e){let{to:t,replace:r,state:n,relative:s}=e;mi()||Qe(!1);let{future:o,static:a}=p.useContext(gs),{matches:l}=p.useContext(Yr),{pathname:c}=pi(),u=qm(),d=zm(t,Bm(l,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function Bk(e){return Nk(e.context)}function mt(e){Qe(!1)}function zk(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Wn.Pop,navigator:o,static:a=!1,future:l}=e;mi()&&Qe(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:o,static:a,future:ka({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof n=="string"&&(n=fi(n));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:w="default"}=n,m=p.useMemo(()=>{let j=Um(d,c);return j==null?null:{location:{pathname:j,search:h,hash:f,state:g,key:w},navigationType:s}},[c,d,h,f,g,w,s]);return m==null?null:p.createElement(gs.Provider,{value:u},p.createElement(mu.Provider,{children:r,value:m}))}function Wk(e){let{children:t,location:r}=e;return kk(Xh(t),r)}new Promise(()=>{});function Xh(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let o=[...t,s];if(n.type===p.Fragment){r.push.apply(r,Xh(n.props.children,o));return}n.type!==mt&&Qe(!1),!n.props.index||!n.props.children||Qe(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Xh(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qh(){return Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qh.apply(this,arguments)}function qk(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Hk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Gk(e,t){return e.button===0&&(!t||t==="_self")&&!Hk(e)}const Kk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Jk="6";try{window.__reactRouterVersion=Jk}catch{}const Yk="startTransition",Pv=Yf[Yk];function Xk(e){let{basename:t,children:r,future:n,window:s}=e,o=p.useRef();o.current==null&&(o.current=XE({window:s,v5Compat:!0}));let a=o.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&Pv?Pv(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>a.listen(d),[a,d]),p.useEffect(()=>Uk(n),[n]),p.createElement(zk,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const Qk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Zk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Go=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=qk(t,Kk),{basename:g}=p.useContext(gs),w,m=!1;if(typeof u=="string"&&Zk.test(u)&&(w=u,Qk))try{let y=new URL(window.location.href),b=u.startsWith("//")?new URL(y.protocol+u):new URL(u),S=Um(b.pathname,g);b.origin===y.origin&&S!=null?u=S+b.search+b.hash:m=!0}catch{}let j=Sk(u,{relative:s}),x=e2(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function v(y){n&&n(y),y.defaultPrevented||x(y)}return p.createElement("a",Qh({},f,{href:w||j,onClick:m||o?n:v,ref:r,target:c}))});var Av;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Av||(Av={}));var Rv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rv||(Rv={}));function e2(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l}=t===void 0?{}:t,c=qm(),u=pi(),d=uj(e,{relative:a});return p.useCallback(h=>{if(Gk(h,r)){h.preventDefault();let f=n!==void 0?n:Ac(u)===Ac(d);c(e,{replace:f,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,d,n,s,r,e,o,a,l])}function fj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=fj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function mj(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=fj(e))&&(n&&(n+=" "),n+=t);return n}function t2(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=pj(t))&&(n&&(n+=" "),n+=r);return n}function pj(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=pj(e[n]))&&(r&&(r+=" "),r+=t);return r}var Hm="-";function r2(e){var t=s2(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,s=n===void 0?{}:n;function o(l){var c=l.split(Hm);return c[0]===""&&c.length!==1&&c.shift(),gj(c,t)||n2(l)}function a(l,c){var u=r[l]||[];return c&&s[l]?[].concat(u,s[l]):u}return{getClassGroupId:o,getConflictingClassGroupIds:a}}function gj(e,t){var a;if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),s=n?gj(e.slice(1),n):void 0;if(s)return s;if(t.validators.length!==0){var o=e.join(Hm);return(a=t.validators.find(function(l){var c=l.validator;return c(o)}))==null?void 0:a.classGroupId}}var Ov=/^\[(.+)\]$/;function n2(e){if(Ov.test(e)){var t=Ov.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function s2(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},s=i2(Object.entries(e.classGroups),r);return s.forEach(function(o){var a=o[0],l=o[1];Zh(l,n,a,t)}),n}function Zh(e,t,r,n){e.forEach(function(s){if(typeof s=="string"){var o=s===""?t:Iv(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(o2(s)){Zh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(a){var l=a[0],c=a[1];Zh(c,Iv(t,l),r,n)})})}function Iv(e,t){var r=e;return t.split(Hm).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function o2(e){return e.isThemeGetter}function i2(e,t){return t?e.map(function(r){var n=r[0],s=r[1],o=s.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):a});return[n,o]}):e}function a2(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function s(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return s(a,l),l},set:function(a,l){r.has(a)?r.set(a,l):s(a,l)}}}var vj="!";function l2(e){var t=e.separator||":",r=t.length===1,n=t[0],s=t.length;return function(a){for(var l=[],c=0,u=0,d,h=0;h<a.length;h++){var f=a[h];if(c===0){if(f===n&&(r||a.slice(h,h+s)===t)){l.push(a.slice(u,h)),u=h+s;continue}if(f==="/"){d=h;continue}}f==="["?c++:f==="]"&&c--}var g=l.length===0?a:a.substring(u),w=g.startsWith(vj),m=w?g.substring(1):g,j=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:m,maybePostfixModifierPosition:j}}}function c2(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var s=n[0]==="[";s?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function u2(e){return{cache:a2(e.cacheSize),splitModifiers:l2(e),...r2(e)}}var d2=/\s+/;function h2(e,t){var r=t.splitModifiers,n=t.getClassGroupId,s=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(d2).map(function(a){var l=r(a),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,h=l.maybePostfixModifierPosition,f=n(h?d.substring(0,h):d),g=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:a};if(f=n(d),!f)return{isTailwindClass:!1,originalClassName:a};g=!1}var w=c2(c).join(":"),m=u?w+vj:w;return{isTailwindClass:!0,modifierId:m,classGroupId:f,originalClassName:a,hasPostfixModifier:g}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,c=a.classGroupId,u=a.hasPostfixModifier,d=l+c;return o.has(d)?!1:(o.add(d),s(c,u).forEach(function(h){return o.add(l+h)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function f2(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,s,o,a=l;function l(u){var d=t[0],h=t.slice(1),f=h.reduce(function(g,w){return w(g)},d());return n=u2(f),s=n.cache.get,o=n.cache.set,a=c,c(u)}function c(u){var d=s(u);if(d)return d;var h=h2(u,n);return o(u,h),h}return function(){return a(t2.apply(null,arguments))}}function De(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var yj=/^\[(?:([a-z-]+):)?(.+)\]$/i,m2=/^\d+\/\d+$/,p2=new Set(["px","full","screen"]),g2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,v2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,y2=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Sr(e){return Us(e)||p2.has(e)||m2.test(e)||ef(e)}function ef(e){return io(e,"length",_2)}function x2(e){return io(e,"size",xj)}function w2(e){return io(e,"position",xj)}function j2(e){return io(e,"url",C2)}function bl(e){return io(e,"number",Us)}function Us(e){return!Number.isNaN(Number(e))}function b2(e){return e.endsWith("%")&&Us(e.slice(0,-1))}function Oi(e){return Lv(e)||io(e,"number",Lv)}function _e(e){return yj.test(e)}function Ii(){return!0}function Pn(e){return g2.test(e)}function S2(e){return io(e,"",N2)}function io(e,t,r){var n=yj.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function _2(e){return v2.test(e)}function xj(){return!1}function C2(e){return e.startsWith("url(")}function Lv(e){return Number.isInteger(Number(e))}function N2(e){return y2.test(e)}function E2(){var e=De("colors"),t=De("spacing"),r=De("blur"),n=De("brightness"),s=De("borderColor"),o=De("borderRadius"),a=De("borderSpacing"),l=De("borderWidth"),c=De("contrast"),u=De("grayscale"),d=De("hueRotate"),h=De("invert"),f=De("gap"),g=De("gradientColorStops"),w=De("gradientColorStopPositions"),m=De("inset"),j=De("margin"),x=De("opacity"),v=De("padding"),y=De("saturate"),b=De("scale"),S=De("sepia"),E=De("skew"),N=De("space"),_=De("translate"),C=function(){return["auto","contain","none"]},I=function(){return["auto","hidden","clip","visible","scroll"]},R=function(){return["auto",_e,t]},O=function(){return[_e,t]},z=function(){return["",Sr]},k=function(){return["auto",Us,_e]},$=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},F=function(){return["solid","dashed","dotted","double","none"]},A=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},T=function(){return["start","end","center","between","around","evenly","stretch"]},P=function(){return["","0",_e]},U=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},L=function(){return[Us,bl]},H=function(){return[Us,_e]};return{cacheSize:500,theme:{colors:[Ii],spacing:[Sr],blur:["none","",Pn,_e],brightness:L(),borderColor:[e],borderRadius:["none","","full",Pn,_e],borderSpacing:O(),borderWidth:z(),contrast:L(),grayscale:P(),hueRotate:H(),invert:P(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[b2,ef],inset:R(),margin:R(),opacity:L(),padding:O(),saturate:L(),scale:L(),sepia:P(),skew:H(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Pn]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat($(),[_e])}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oi]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Oi]}],"grid-cols":[{"grid-cols":[Ii]}],"col-start-end":[{col:["auto",{span:["full",Oi]},_e]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Ii]}],"row-start-end":[{row:["auto",{span:[Oi]},_e]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(T())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(T(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(T(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",_e,t]}],"min-w":[{"min-w":["min","max","fit",_e,Sr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Pn]},Pn,_e]}],h:[{h:[_e,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",_e,Sr]}],"max-h":[{"max-h":[_e,t,"min","max","fit"]}],"font-size":[{text:["base",Pn,ef]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bl]}],"font-family":[{font:[Ii]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Us,bl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_e,Sr]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(F(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Sr]}],"underline-offset":[{"underline-offset":["auto",_e,Sr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat($(),[w2])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",x2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},j2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat(F(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:F()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(F())}],"outline-offset":[{"outline-offset":[_e,Sr]}],"outline-w":[{outline:[Sr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Sr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Pn,S2]}],"shadow-color":[{shadow:[Ii]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":A()}],"bg-blend":[{"bg-blend":A()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pn,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Oi,_e]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Sr,bl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var k2=f2(E2);function Ce(...e){return k2(mj(e))}function ce(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Mv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function wj(...e){return t=>{let r=!1;const n=e.map(s=>{const o=Mv(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Mv(e[s],null)}}}}function Me(...e){return p.useCallback(wj(...e),e)}function T2(e,t){const r=p.createContext(t),n=o=>{const{children:a,...l}=o,c=p.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(o){const a=p.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function vs(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];const u=h=>{var x;const{scope:f,children:g,...w}=h,m=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,j=p.useMemo(()=>w,Object.values(w));return i.jsx(m.Provider,{value:j,children:g})};u.displayName=o+"Provider";function d(h,f){var m;const g=((m=f==null?void 0:f[e])==null?void 0:m[c])||l,w=p.useContext(g);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,P2(s,...t)]}function P2(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function si(e){const t=R2(e),r=p.forwardRef((n,s)=>{const{children:o,...a}=n,l=p.Children.toArray(o),c=l.find(I2);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...a,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return i.jsx(t,{...a,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}var A2=si("Slot");function R2(e){const t=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const a=M2(s),l=L2(o,s.props);return s.type!==p.Fragment&&(l.ref=n?wj(n,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var O2=Symbol("radix.slottable");function I2(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===O2}function L2(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function M2(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Gm(e){const t=e+"CollectionProvider",[r,n]=vs(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:j,children:x}=m,v=ue.useRef(null),y=ue.useRef(new Map).current;return i.jsx(s,{scope:j,itemMap:y,collectionRef:v,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=si(l),u=ue.forwardRef((m,j)=>{const{scope:x,children:v}=m,y=o(l,x),b=Me(j,y.collectionRef);return i.jsx(c,{ref:b,children:v})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=si(d),g=ue.forwardRef((m,j)=>{const{scope:x,children:v,...y}=m,b=ue.useRef(null),S=Me(j,b),E=o(d,x);return ue.useEffect(()=>(E.itemMap.set(b,{ref:b,...y}),()=>void E.itemMap.delete(b))),i.jsx(f,{[h]:"",ref:S,children:v})});g.displayName=d;function w(m){const j=o(e+"CollectionConsumer",m);return ue.useCallback(()=>{const v=j.collectionRef.current;if(!v)return[];const y=Array.from(v.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((E,N)=>y.indexOf(E.ref.current)-y.indexOf(N.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},w,n]}var D2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],me=D2.reduce((e,t)=>{const r=si(`Primitive.${t}`),n=p.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function jj(e,t){e&&oo.flushSync(()=>e.dispatchEvent(t))}function yr(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function $2(e,t=globalThis==null?void 0:globalThis.document){const r=yr(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var F2="DismissableLayer",tf="dismissableLayer.update",V2="dismissableLayer.pointerDownOutside",U2="dismissableLayer.focusOutside",Dv,bj=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pu=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(bj),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),w=Me(t,N=>h(N)),m=Array.from(u.layers),[j]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(j),v=d?m.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,b=v>=x,S=z2(N=>{const _=N.target,C=[...u.branches].some(I=>I.contains(_));!b||C||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},f),E=W2(N=>{const _=N.target;[...u.branches].some(I=>I.contains(_))||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},f);return $2(N=>{v===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Dv=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),$v(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=Dv)}},[d,f,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),$v())},[d,u]),p.useEffect(()=>{const N=()=>g({});return document.addEventListener(tf,N),()=>document.removeEventListener(tf,N)},[]),i.jsx(me.div,{...c,ref:w,style:{pointerEvents:y?b?"auto":"none":void 0,...e.style},onFocusCapture:ce(e.onFocusCapture,E.onFocusCapture),onBlurCapture:ce(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ce(e.onPointerDownCapture,S.onPointerDownCapture)})});pu.displayName=F2;var B2="DismissableLayerBranch",Sj=p.forwardRef((e,t)=>{const r=p.useContext(bj),n=p.useRef(null),s=Me(t,n);return p.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(me.div,{...e,ref:s})});Sj.displayName=B2;function z2(e,t=globalThis==null?void 0:globalThis.document){const r=yr(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){_j(V2,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function W2(e,t=globalThis==null?void 0:globalThis.document){const r=yr(e),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&_j(U2,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function $v(){const e=new CustomEvent(tf);document.dispatchEvent(e)}function _j(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?jj(s,o):s.dispatchEvent(o)}var q2=pu,H2=Sj,_t=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},G2="Portal",gu=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=p.useState(!1);_t(()=>o(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?YE.createPortal(i.jsx(me.div,{...n,ref:t}),a):null});gu.displayName=G2;function K2(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var gi=e=>{const{present:t,children:r}=e,n=J2(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=Me(n.ref,Y2(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};gi.displayName="Presence";function J2(e){const[t,r]=p.useState(),n=p.useRef(null),s=p.useRef(e),o=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=K2(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Sl(n.current);o.current=l==="mounted"?u:"none"},[l]),_t(()=>{const u=n.current,d=s.current;if(d!==e){const f=o.current,g=Sl(u);e?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),_t(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const m=Sl(n.current).includes(g.animationName);if(g.target===t&&m&&(c("ANIMATION_END"),!s.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},f=g=>{g.target===t&&(o.current=Sl(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Sl(e){return(e==null?void 0:e.animationName)||"none"}function Y2(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var X2=Yf[" useInsertionEffect ".trim().toString()]||_t;function Qs({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,o,a]=Q2({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=p.useCallback(d=>{var h;if(l){const f=Z2(d)?d(e):d;f!==e&&((h=a.current)==null||h.call(a,f))}else o(d)},[l,e,o,a]);return[c,u]}function Q2({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),s=p.useRef(r),o=p.useRef(t);return X2(()=>{o.current=t},[t]),p.useEffect(()=>{var a;s.current!==r&&((a=o.current)==null||a.call(o,r),s.current=r)},[r,s]),[r,n,o]}function Z2(e){return typeof e=="function"}var Cj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),eT="VisuallyHidden",Km=p.forwardRef((e,t)=>i.jsx(me.span,{...e,ref:t,style:{...Cj,...e.style}}));Km.displayName=eT;var Jm="ToastProvider",[Ym,tT,rT]=Gm("Toast"),[Nj,y3]=vs("Toast",[rT]),[nT,vu]=Nj(Jm),Ej=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jm}\`. Expected non-empty \`string\`.`),i.jsx(Ym.Provider,{scope:t,children:i.jsx(nT,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(g=>g+1),[]),onToastRemove:p.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};Ej.displayName=Jm;var kj="ToastViewport",sT=["F8"],rf="toast.viewportPause",nf="toast.viewportResume",Tj=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=sT,label:s="Notifications ({hotkey})",...o}=e,a=vu(kj,r),l=tT(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=Me(t,h,a.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;p.useEffect(()=>{const j=x=>{var y;n.length!==0&&n.every(b=>x[b]||x.code===b)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[n]),p.useEffect(()=>{const j=c.current,x=h.current;if(w&&j&&x){const v=()=>{if(!a.isClosePausedRef.current){const E=new CustomEvent(rf);x.dispatchEvent(E),a.isClosePausedRef.current=!0}},y=()=>{if(a.isClosePausedRef.current){const E=new CustomEvent(nf);x.dispatchEvent(E),a.isClosePausedRef.current=!1}},b=E=>{!j.contains(E.relatedTarget)&&y()},S=()=>{j.contains(document.activeElement)||y()};return j.addEventListener("focusin",v),j.addEventListener("focusout",b),j.addEventListener("pointermove",v),j.addEventListener("pointerleave",S),window.addEventListener("blur",v),window.addEventListener("focus",y),()=>{j.removeEventListener("focusin",v),j.removeEventListener("focusout",b),j.removeEventListener("pointermove",v),j.removeEventListener("pointerleave",S),window.removeEventListener("blur",v),window.removeEventListener("focus",y)}}},[w,a.isClosePausedRef]);const m=p.useCallback(({tabbingDirection:j})=>{const v=l().map(y=>{const b=y.ref.current,S=[b,...vT(b)];return j==="forwards"?S:S.reverse()});return(j==="forwards"?v.reverse():v).flat()},[l]);return p.useEffect(()=>{const j=h.current;if(j){const x=v=>{var S,E,N;const y=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!y){const _=document.activeElement,C=v.shiftKey;if(v.target===j&&C){(S=u.current)==null||S.focus();return}const O=m({tabbingDirection:C?"backwards":"forwards"}),z=O.findIndex(k=>k===_);_d(O.slice(z+1))?v.preventDefault():C?(E=u.current)==null||E.focus():(N=d.current)==null||N.focus()}};return j.addEventListener("keydown",x),()=>j.removeEventListener("keydown",x)}},[l,m]),i.jsxs(H2,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&i.jsx(sf,{ref:u,onFocusFromOutsideViewport:()=>{const j=m({tabbingDirection:"forwards"});_d(j)}}),i.jsx(Ym.Slot,{scope:r,children:i.jsx(me.ol,{tabIndex:-1,...o,ref:f})}),w&&i.jsx(sf,{ref:d,onFocusFromOutsideViewport:()=>{const j=m({tabbingDirection:"backwards"});_d(j)}})]})});Tj.displayName=kj;var Pj="ToastFocusProxy",sf=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=vu(Pj,r);return i.jsx(Km,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&n()}})});sf.displayName=Pj;var qa="Toast",oT="toast.swipeStart",iT="toast.swipeMove",aT="toast.swipeCancel",lT="toast.swipeEnd",Aj=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...a}=e,[l,c]=Qs({prop:n,defaultProp:s??!0,onChange:o,caller:qa});return i.jsx(gi,{present:r||l,children:i.jsx(dT,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:yr(e.onPause),onResume:yr(e.onResume),onSwipeStart:ce(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ce(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ce(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ce(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Aj.displayName=qa;var[cT,uT]=Nj(qa,{onClose(){}}),dT=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:g,...w}=e,m=vu(qa,r),[j,x]=p.useState(null),v=Me(t,k=>x(k)),y=p.useRef(null),b=p.useRef(null),S=s||m.duration,E=p.useRef(0),N=p.useRef(S),_=p.useRef(0),{onToastAdd:C,onToastRemove:I}=m,R=yr(()=>{var $;(j==null?void 0:j.contains(document.activeElement))&&(($=m.viewport)==null||$.focus()),a()}),O=p.useCallback(k=>{!k||k===1/0||(window.clearTimeout(_.current),E.current=new Date().getTime(),_.current=window.setTimeout(R,k))},[R]);p.useEffect(()=>{const k=m.viewport;if(k){const $=()=>{O(N.current),u==null||u()},F=()=>{const A=new Date().getTime()-E.current;N.current=N.current-A,window.clearTimeout(_.current),c==null||c()};return k.addEventListener(rf,F),k.addEventListener(nf,$),()=>{k.removeEventListener(rf,F),k.removeEventListener(nf,$)}}},[m.viewport,S,c,u,O]),p.useEffect(()=>{o&&!m.isClosePausedRef.current&&O(S)},[o,S,m.isClosePausedRef,O]),p.useEffect(()=>(C(),()=>I()),[C,I]);const z=p.useMemo(()=>j?$j(j):null,[j]);return m.viewport?i.jsxs(i.Fragment,{children:[z&&i.jsx(hT,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),i.jsx(cT,{scope:r,onClose:R,children:oo.createPortal(i.jsx(Ym.ItemSlot,{scope:r,children:i.jsx(q2,{asChild:!0,onEscapeKeyDown:ce(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||R(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...w,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ce(e.onKeyDown,k=>{k.key==="Escape"&&(l==null||l(k.nativeEvent),k.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:ce(e.onPointerDown,k=>{k.button===0&&(y.current={x:k.clientX,y:k.clientY})}),onPointerMove:ce(e.onPointerMove,k=>{if(!y.current)return;const $=k.clientX-y.current.x,F=k.clientY-y.current.y,A=!!b.current,T=["left","right"].includes(m.swipeDirection),P=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,U=T?P(0,$):0,L=T?0:P(0,F),H=k.pointerType==="touch"?10:2,oe={x:U,y:L},de={originalEvent:k,delta:oe};A?(b.current=oe,_l(iT,h,de,{discrete:!1})):Fv(oe,m.swipeDirection,H)?(b.current=oe,_l(oT,d,de,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs($)>H||Math.abs(F)>H)&&(y.current=null)}),onPointerUp:ce(e.onPointerUp,k=>{const $=b.current,F=k.target;if(F.hasPointerCapture(k.pointerId)&&F.releasePointerCapture(k.pointerId),b.current=null,y.current=null,$){const A=k.currentTarget,T={originalEvent:k,delta:$};Fv($,m.swipeDirection,m.swipeThreshold)?_l(lT,g,T,{discrete:!0}):_l(aT,f,T,{discrete:!0}),A.addEventListener("click",P=>P.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),hT=e=>{const{__scopeToast:t,children:r,...n}=e,s=vu(qa,t),[o,a]=p.useState(!1),[l,c]=p.useState(!1);return pT(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(gu,{asChild:!0,children:i.jsx(Km,{...n,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},fT="ToastTitle",Rj=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(me.div,{...n,ref:t})});Rj.displayName=fT;var mT="ToastDescription",Oj=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(me.div,{...n,ref:t})});Oj.displayName=mT;var Ij="ToastAction",Lj=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx(Dj,{altText:r,asChild:!0,children:i.jsx(Xm,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ij}\`. Expected non-empty \`string\`.`),null)});Lj.displayName=Ij;var Mj="ToastClose",Xm=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=uT(Mj,r);return i.jsx(Dj,{asChild:!0,children:i.jsx(me.button,{type:"button",...n,ref:t,onClick:ce(e.onClick,s.onClose)})})});Xm.displayName=Mj;var Dj=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function $j(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),gT(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...$j(n))}}),t}function _l(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?jj(s,o):s.dispatchEvent(o)}var Fv=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function pT(e=()=>{}){const t=yr(e);_t(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function gT(e){return e.nodeType===e.ELEMENT_NODE}function vT(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _d(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var yT=Ej,Fj=Tj,Vj=Aj,Uj=Rj,Bj=Oj,zj=Lj,Wj=Xm;const Vv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Uv=mj,yu=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Uv(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=o==null?void 0:o[u];if(d===null)return null;const f=Vv(d)||Vv(h);return s[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...g}=d;return Object.entries(g).every(w=>{let[m,j]=w;return Array.isArray(j)?j.includes({...o,...l}[m]):{...o,...l}[m]===j})?[...u,h,f]:u},[]);return Uv(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};var xT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const wT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),te=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:l,...c},u)=>p.createElement("svg",{ref:u,...xT,width:s,height:s,stroke:n,strokeWidth:a?Number(o)*24/Number(s):o,className:`lucide lucide-${wT(e)}`,...c},[...t.map(([d,h])=>p.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},Qm=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),jT=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Bv=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),qj=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),bT=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Hj=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),zv=te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ST=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Zm=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),_T=te("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Gj=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),CT=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),NT=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Kj=te("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]),Jj=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),xn=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Yj=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ET=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ep=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Ta=te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),kT=te("GalleryHorizontalEnd",[["path",{d:"M2 7v10",key:"a2pl2d"}],["path",{d:"M6 5v14",key:"1kq3d7"}],["rect",{width:"12",height:"18",x:"10",y:"3",rx:"2",key:"13i7bc"}]]),ta=te("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Cd=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),TT=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),PT=te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),of=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),AT=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),RT=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),OT=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ic=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),IT=te("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Hr=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ha=te("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Wv=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),LT=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),sr=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),af=te("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),qv=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Hv=te("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Xj=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),lf=te("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Pa=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),MT=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),cf=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),DT=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),$T=te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Aa=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ra=te("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),uf=te("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Gv=te("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),ao=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),FT=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),xu=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Kv=te("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Qj=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),qs=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hn=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),VT=te("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),df=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Oa=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),UT=yT,Zj=ue.forwardRef(({className:e,...t},r)=>i.jsx(Fj,{ref:r,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Zj.displayName=Fj.displayName;const BT=yu("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),eb=ue.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(Vj,{ref:n,className:Ce(BT({variant:t}),e),...r}));eb.displayName=Vj.displayName;const zT=ue.forwardRef(({className:e,...t},r)=>i.jsx(zj,{ref:r,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));zT.displayName=zj.displayName;const tb=ue.forwardRef(({className:e,...t},r)=>i.jsx(Wj,{ref:r,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Oa,{className:"h-4 w-4"})}));tb.displayName=Wj.displayName;const rb=ue.forwardRef(({className:e,...t},r)=>i.jsx(Uj,{ref:r,className:Ce("text-sm font-semibold",e),...t}));rb.displayName=Uj.displayName;const nb=ue.forwardRef(({className:e,...t},r)=>i.jsx(Bj,{ref:r,className:Ce("text-sm opacity-90",e),...t}));nb.displayName=Bj.displayName;const WT=1;let Nd=0;function qT(){return Nd=(Nd+1)%Number.MAX_VALUE,Nd.toString()}const Ot={state:{toasts:[]},listeners:[],getState:()=>Ot.state,setState:e=>{typeof e=="function"?Ot.state=e(Ot.state):Ot.state={...Ot.state,...e},Ot.listeners.forEach(t=>t(Ot.state))},subscribe:e=>(Ot.listeners.push(e),()=>{Ot.listeners=Ot.listeners.filter(t=>t!==e)})},HT=({...e})=>{const t=qT(),r=s=>Ot.setState(o=>({...o,toasts:o.toasts.map(a=>a.id===t?{...a,...s}:a)})),n=()=>Ot.setState(s=>({...s,toasts:s.toasts.filter(o=>o.id!==t)}));return Ot.setState(s=>({...s,toasts:[{...e,id:t,dismiss:n},...s.toasts].slice(0,WT)})),{id:t,dismiss:n,update:r}};function at(){const[e,t]=p.useState(Ot.getState());return p.useEffect(()=>Ot.subscribe(n=>{t(n)}),[]),p.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const s=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(s)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:HT,toasts:e.toasts}}function GT(){const{toasts:e}=at();return i.jsxs(UT,{children:[e.map(({id:t,title:r,description:n,action:s,dismiss:o,...a})=>i.jsxs(eb,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(rb,{children:r}),n&&i.jsx(nb,{children:n})]}),s,i.jsx(tb,{})]},t)),i.jsx(Zj,{})]})}const sb=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),wu=p.createContext({}),ju=p.createContext(null),bu=typeof document<"u",tp=bu?p.useLayoutEffect:p.useEffect,ob=p.createContext({strict:!1}),rp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),KT="framerAppearId",ib="data-"+rp(KT);function JT(e,t,r,n){const{visualElement:s}=p.useContext(wu),o=p.useContext(ob),a=p.useContext(ju),l=p.useContext(sb).reducedMotion,c=p.useRef();n=n||o.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;p.useInsertionEffect(()=>{u&&u.update(r,a)});const d=p.useRef(!!(r[ib]&&!window.HandoffComplete));return tp(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),p.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Do(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function YT(e,t,r){return p.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Do(r)&&(r.current=n))},[t])}function Ia(e){return typeof e=="string"||Array.isArray(e)}function Su(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const np=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sp=["initial",...np];function _u(e){return Su(e.animate)||sp.some(t=>Ia(e[t]))}function ab(e){return!!(_u(e)||e.variants)}function XT(e,t){if(_u(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Ia(r)?r:void 0,animate:Ia(n)?n:void 0}}return e.inherit!==!1?t:{}}function QT(e){const{initial:t,animate:r}=XT(e,p.useContext(wu));return p.useMemo(()=>({initial:t,animate:r}),[Jv(t),Jv(r)])}function Jv(e){return Array.isArray(e)?e.join(" "):e}const Yv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},La={};for(const e in Yv)La[e]={isEnabled:t=>Yv[e].some(r=>!!t[r])};function ZT(e){for(const t in e)La[t]={...La[t],...e[t]}}const op=p.createContext({}),lb=p.createContext({}),eP=Symbol.for("motionComponentSymbol");function tP({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&ZT(e);function o(l,c){let u;const d={...p.useContext(sb),...l,layoutId:rP(l)},{isStatic:h}=d,f=QT(l),g=n(l,h);if(!h&&bu){f.visualElement=JT(s,g,d,t);const w=p.useContext(lb),m=p.useContext(ob).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,m,e,w))}return p.createElement(wu.Provider,{value:f},u&&f.visualElement?p.createElement(u,{visualElement:f.visualElement,...d}):null,r(s,l,YT(g,f.visualElement,c),g,h,f.visualElement))}const a=p.forwardRef(o);return a[eP]=s,a}function rP({layoutId:e}){const t=p.useContext(op).id;return t&&e!==void 0?t+"-"+e:e}function nP(e){function t(n,s={}){return tP(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const sP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ip(e){return typeof e!="string"||e.includes("-")?!1:!!(sP.indexOf(e)>-1||/[A-Z]/.test(e))}const Lc={};function oP(e){Object.assign(Lc,e)}const Ga=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lo=new Set(Ga);function cb(e,{layout:t,layoutId:r}){return lo.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Lc[e]||e==="opacity")}const Kt=e=>!!(e&&e.getVelocity),iP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aP=Ga.length;function lP(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let o="";for(let a=0;a<aP;a++){const l=Ga[a];if(e[l]!==void 0){const c=iP[l]||l;o+=`${c}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(e,n?"":o):r&&n&&(o="none"),o}const ub=e=>t=>typeof t=="string"&&t.startsWith(e),db=ub("--"),hf=ub("var(--"),cP=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,uP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,cs=(e,t,r)=>Math.min(Math.max(r,e),t),co={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ra={...co,transform:e=>cs(0,1,e)},Cl={...co,default:1},na=e=>Math.round(e*1e5)/1e5,Cu=/(-)?([\d]*\.?[\d])+/g,hb=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,dP=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ka(e){return typeof e=="string"}const Ja=e=>({test:t=>Ka(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),An=Ja("deg"),Gr=Ja("%"),le=Ja("px"),hP=Ja("vh"),fP=Ja("vw"),Xv={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Qv={...co,transform:Math.round},fb={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,size:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,rotate:An,rotateX:An,rotateY:An,rotateZ:An,scale:Cl,scaleX:Cl,scaleY:Cl,scaleZ:Cl,skew:An,skewX:An,skewY:An,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:ra,originX:Xv,originY:Xv,originZ:le,zIndex:Qv,fillOpacity:ra,strokeOpacity:ra,numOctaves:Qv};function ap(e,t,r,n){const{style:s,vars:o,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(db(h)){o[h]=f;continue}const g=fb[h],w=uP(f,g);if(lo.has(h)){if(c=!0,a[h]=w,!d)continue;f!==(g.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=w):s[h]=w}if(t.transform||(c||n?s.transform=lP(e.transform,r,d,n):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=l;s.transformOrigin=`${h} ${f} ${g}`}}const lp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mb(e,t,r){for(const n in t)!Kt(t[n])&&!cb(n,r)&&(e[n]=t[n])}function mP({transformTemplate:e},t,r){return p.useMemo(()=>{const n=lp();return ap(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function pP(e,t,r){const n=e.style||{},s={};return mb(s,n,e),Object.assign(s,mP(e,t,r)),e.transformValues?e.transformValues(s):s}function gP(e,t,r){const n={},s=pP(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const vP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vP.has(e)}let pb=e=>!Mc(e);function yP(e){e&&(pb=t=>t.startsWith("on")?!Mc(t):e(t))}try{yP(require("@emotion/is-prop-valid").default)}catch{}function xP(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(pb(s)||r===!0&&Mc(s)||!t&&!Mc(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function Zv(e,t,r){return typeof e=="string"?e:le.transform(t+r*e)}function wP(e,t,r){const n=Zv(t,e.x,e.width),s=Zv(r,e.y,e.height);return`${n} ${s}`}const jP={offset:"stroke-dashoffset",array:"stroke-dasharray"},bP={offset:"strokeDashoffset",array:"strokeDasharray"};function SP(e,t,r=1,n=0,s=!0){e.pathLength=1;const o=s?jP:bP;e[o.offset]=le.transform(-n);const a=le.transform(t),l=le.transform(r);e[o.array]=`${a} ${l}`}function cp(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(ap(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:w,dimensions:m}=e;g.transform&&(m&&(w.transform=g.transform),delete g.transform),m&&(s!==void 0||o!==void 0||w.transform)&&(w.transformOrigin=wP(m,s!==void 0?s:.5,o!==void 0?o:.5)),t!==void 0&&(g.x=t),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),a!==void 0&&SP(g,a,l,c,!1)}const gb=()=>({...lp(),attrs:{}}),up=e=>typeof e=="string"&&e.toLowerCase()==="svg";function _P(e,t,r,n){const s=p.useMemo(()=>{const o=gb();return cp(o,t,{enableHardwareAcceleration:!1},up(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};mb(o,e.style,e),s.style={...o,...s.style}}return s}function CP(e=!1){return(r,n,s,{latestValues:o},a)=>{const c=(ip(r)?_P:gP)(n,o,a,r),d={...xP(n,typeof r=="string",e),...c,ref:s},{children:h}=n,f=p.useMemo(()=>Kt(h)?h.get():h,[h]);return p.createElement(r,{...d,children:f})}}function vb(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const o in r)e.style.setProperty(o,r[o])}const yb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xb(e,t,r,n){vb(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(yb.has(s)?s:rp(s),t.attrs[s])}function dp(e,t){const{style:r}=e,n={};for(const s in r)(Kt(r[s])||t.style&&Kt(t.style[s])||cb(s,e))&&(n[s]=r[s]);return n}function wb(e,t){const r=dp(e,t);for(const n in e)if(Kt(e[n])||Kt(t[n])){const s=Ga.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function hp(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function jb(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Dc=e=>Array.isArray(e),NP=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),EP=e=>Dc(e)?e[e.length-1]||0:e;function Zl(e){const t=Kt(e)?e.get():e;return NP(t)?t.toValue():t}function kP({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,o){const a={latestValues:TP(n,s,o,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const bb=e=>(t,r)=>{const n=p.useContext(wu),s=p.useContext(ju),o=()=>kP(e,t,n,s);return r?o():jb(o)};function TP(e,t,r,n){const s={},o=n(e,{});for(const f in o)s[f]=Zl(o[f]);let{initial:a,animate:l}=e;const c=_u(e),u=ab(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Su(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const w=hp(e,g);if(!w)return;const{transitionEnd:m,transition:j,...x}=w;for(const v in x){let y=x[v];if(Array.isArray(y)){const b=d?y.length-1:0;y=y[b]}y!==null&&(s[v]=y)}for(const v in m)s[v]=m[v]}),s}const Ge=e=>e;class ey{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function PP(e){let t=new ey,r=new ey,n=0,s=!1,o=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:r;return u&&a.add(c),f.add(c)&&h&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){o=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,o&&(o=!1,l.process(c))}};return l}const Nl=["prepare","read","update","preRender","render","postRender"],AP=40;function RP(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=Nl.reduce((h,f)=>(h[f]=PP(()=>r=!0),h),{}),a=h=>o[h].process(s),l=()=>{const h=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(h-s.timestamp,AP),1),s.timestamp=h,s.isProcessing=!0,Nl.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:Nl.reduce((h,f)=>{const g=o[f];return h[f]=(w,m=!1,j=!1)=>(r||c(),g.schedule(w,m,j)),h},{}),cancel:h=>Nl.forEach(f=>o[f].cancel(h)),state:s,steps:o}}const{schedule:Le,cancel:wn,state:Tt,steps:Ed}=RP(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ge,!0),OP={useVisualState:bb({scrapeMotionValuesFromProps:wb,createRenderState:gb,onMount:(e,t,{renderState:r,latestValues:n})=>{Le.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Le.render(()=>{cp(r,n,{enableHardwareAcceleration:!1},up(t.tagName),e.transformTemplate),xb(t,r)})}})},IP={useVisualState:bb({scrapeMotionValuesFromProps:dp,createRenderState:lp})};function LP(e,{forwardMotionProps:t=!1},r,n){return{...ip(e)?OP:IP,preloadedFeatures:r,useRender:CP(t),createVisualElement:n,Component:e}}function un(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const Sb=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Nu(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const MP=e=>t=>Sb(t)&&e(t,Nu(t));function fn(e,t,r,n){return un(e,t,MP(r),n)}const DP=(e,t)=>r=>t(e(r)),ns=(...e)=>e.reduce(DP);function _b(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const ty=_b("dragHorizontal"),ry=_b("dragVertical");function Cb(e){let t=!1;if(e==="y")t=ry();else if(e==="x")t=ty();else{const r=ty(),n=ry();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function Nb(){const e=Cb(!0);return e?(e(),!1):!0}class ys{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ny(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(o,a)=>{if(o.pointerType==="touch"||Nb())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Le.update(()=>l[n](o,a))};return fn(e.current,r,s,{passive:!e.getProps()[n]})}class $P extends ys{mount(){this.unmount=ns(ny(this.node,!0),ny(this.node,!1))}unmount(){}}class FP extends ys{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ns(un(this.node.current,"focus",()=>this.onFocus()),un(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Eb=(e,t)=>t?e===t?!0:Eb(e,t.parentElement):!1;function kd(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Nu(r))}class VP extends ys{constructor(){super(...arguments),this.removeStartListeners=Ge,this.removeEndListeners=Ge,this.removeAccessibleListeners=Ge,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=fn(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Le.update(()=>{!h&&!Eb(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=fn(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=ns(o,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||kd("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Le.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=un(this.node.current,"keyup",a),kd("down",(l,c)=>{this.startPress(l,c)})},r=un(this.node.current,"keydown",t),n=()=>{this.isPressing&&kd("cancel",(o,a)=>this.cancelPress(o,a))},s=un(this.node.current,"blur",n);this.removeAccessibleListeners=ns(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Le.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Nb()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Le.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=fn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=un(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ns(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ff=new WeakMap,Td=new WeakMap,UP=e=>{const t=ff.get(e.target);t&&t(e)},BP=e=>{e.forEach(UP)};function zP({root:e,...t}){const r=e||document;Td.has(r)||Td.set(r,{});const n=Td.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(BP,{root:e,...t})),n[s]}function WP(e,t,r){const n=zP(t);return ff.set(e,r),n.observe(e),()=>{ff.delete(e),n.unobserve(e)}}const qP={some:0,all:1};class HP extends ys{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:o}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:qP[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return WP(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(GP(t,r))&&this.startObserver()}unmount(){}}function GP({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const KP={inView:{Feature:HP},tap:{Feature:VP},focus:{Feature:FP},hover:{Feature:$P}};function kb(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function JP(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function YP(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Eu(e,t,r){const n=e.getProps();return hp(n,t,r!==void 0?r:n.custom,JP(e),YP(e))}let XP=Ge,fp=Ge;const ss=e=>e*1e3,mn=e=>e/1e3,QP={current:!1},Tb=e=>Array.isArray(e)&&typeof e[0]=="number";function Pb(e){return!!(!e||typeof e=="string"&&Ab[e]||Tb(e)||Array.isArray(e)&&e.every(Pb))}const Bi=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,Ab={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bi([0,.65,.55,1]),circOut:Bi([.55,0,1,.45]),backIn:Bi([.31,.01,.66,-.59]),backOut:Bi([.33,1.53,.69,.99])};function Rb(e){if(e)return Tb(e)?Bi(e):Array.isArray(e)?e.map(Rb):Ab[e]}function ZP(e,t,r,{delay:n=0,duration:s,repeat:o=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=Rb(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function eA(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const Ob=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,tA=1e-7,rA=12;function nA(e,t,r,n,s){let o,a,l=0;do a=t+(r-t)/2,o=Ob(a,n,s)-e,o>0?r=a:t=a;while(Math.abs(o)>tA&&++l<rA);return a}function Ya(e,t,r,n){if(e===t&&r===n)return Ge;const s=o=>nA(o,0,1,e,r);return o=>o===0||o===1?o:Ob(s(o),t,n)}const sA=Ya(.42,0,1,1),oA=Ya(0,0,.58,1),Ib=Ya(.42,0,.58,1),iA=e=>Array.isArray(e)&&typeof e[0]!="number",Lb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Mb=e=>t=>1-e(1-t),mp=e=>1-Math.sin(Math.acos(e)),Db=Mb(mp),aA=Lb(mp),$b=Ya(.33,1.53,.69,.99),pp=Mb($b),lA=Lb(pp),cA=e=>(e*=2)<1?.5*pp(e):.5*(2-Math.pow(2,-10*(e-1))),uA={linear:Ge,easeIn:sA,easeInOut:Ib,easeOut:oA,circIn:mp,circInOut:aA,circOut:Db,backIn:pp,backInOut:lA,backOut:$b,anticipate:cA},sy=e=>{if(Array.isArray(e)){fp(e.length===4);const[t,r,n,s]=e;return Ya(t,r,n,s)}else if(typeof e=="string")return uA[e];return e},gp=(e,t)=>r=>!!(Ka(r)&&dP.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),Fb=(e,t,r)=>n=>{if(!Ka(n))return n;const[s,o,a,l]=n.match(Cu);return{[e]:parseFloat(s),[t]:parseFloat(o),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},dA=e=>cs(0,255,e),Pd={...co,transform:e=>Math.round(dA(e))},Bs={test:gp("rgb","red"),parse:Fb("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Pd.transform(e)+", "+Pd.transform(t)+", "+Pd.transform(r)+", "+na(ra.transform(n))+")"};function hA(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const mf={test:gp("#"),parse:hA,transform:Bs.transform},$o={test:gp("hsl","hue"),parse:Fb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Gr.transform(na(t))+", "+Gr.transform(na(r))+", "+na(ra.transform(n))+")"},It={test:e=>Bs.test(e)||mf.test(e)||$o.test(e),parse:e=>Bs.test(e)?Bs.parse(e):$o.test(e)?$o.parse(e):mf.parse(e),transform:e=>Ka(e)?e:e.hasOwnProperty("red")?Bs.transform(e):$o.transform(e)},ze=(e,t,r)=>-r*e+r*t+e;function Ad(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function fA({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,o=0,a=0;if(!t)s=o=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Ad(c,l,e+1/3),o=Ad(c,l,e),a=Ad(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const Rd=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},mA=[mf,Bs,$o],pA=e=>mA.find(t=>t.test(e));function oy(e){const t=pA(e);let r=t.parse(e);return t===$o&&(r=fA(r)),r}const Vb=(e,t)=>{const r=oy(e),n=oy(t),s={...r};return o=>(s.red=Rd(r.red,n.red,o),s.green=Rd(r.green,n.green,o),s.blue=Rd(r.blue,n.blue,o),s.alpha=ze(r.alpha,n.alpha,o),Bs.transform(s))};function gA(e){var t,r;return isNaN(e)&&Ka(e)&&(((t=e.match(Cu))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(hb))===null||r===void 0?void 0:r.length)||0)>0}const Ub={regex:cP,countKey:"Vars",token:"${v}",parse:Ge},Bb={regex:hb,countKey:"Colors",token:"${c}",parse:It.parse},zb={regex:Cu,countKey:"Numbers",token:"${n}",parse:co.parse};function Od(e,{regex:t,countKey:r,token:n,parse:s}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(s)))}function $c(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Od(r,Ub),Od(r,Bb),Od(r,zb),r}function Wb(e){return $c(e).values}function qb(e){const{values:t,numColors:r,numVars:n,tokenised:s}=$c(e),o=t.length;return a=>{let l=s;for(let c=0;c<o;c++)c<n?l=l.replace(Ub.token,a[c]):c<n+r?l=l.replace(Bb.token,It.transform(a[c])):l=l.replace(zb.token,na(a[c]));return l}}const vA=e=>typeof e=="number"?0:e;function yA(e){const t=Wb(e);return qb(e)(t.map(vA))}const us={test:gA,parse:Wb,createTransformer:qb,getAnimatableNone:yA},Hb=(e,t)=>r=>`${r>0?t:e}`;function Gb(e,t){return typeof e=="number"?r=>ze(e,t,r):It.test(e)?Vb(e,t):e.startsWith("var(")?Hb(e,t):Jb(e,t)}const Kb=(e,t)=>{const r=[...e],n=r.length,s=e.map((o,a)=>Gb(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=s[a](o);return r}},xA=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Gb(e[s],t[s]));return s=>{for(const o in n)r[o]=n[o](s);return r}},Jb=(e,t)=>{const r=us.createTransformer(t),n=$c(e),s=$c(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?ns(Kb(n.values,s.values),r):Hb(e,t)},Ma=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},iy=(e,t)=>r=>ze(e,t,r);function wA(e){return typeof e=="number"?iy:typeof e=="string"?It.test(e)?Vb:Jb:Array.isArray(e)?Kb:typeof e=="object"?xA:iy}function jA(e,t,r){const n=[],s=r||wA(e[0]),o=e.length-1;for(let a=0;a<o;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Ge:t;l=ns(c,l)}n.push(l)}return n}function Yb(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const o=e.length;if(fp(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=jA(t,n,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=Ma(e[d],e[d+1],u);return a[d](h)};return r?u=>c(cs(e[0],e[o-1],u)):c}function bA(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Ma(0,t,n);e.push(ze(r,1,s))}}function SA(e){const t=[0];return bA(t,e.length-1),t}function _A(e,t){return e.map(r=>r*t)}function CA(e,t){return e.map(()=>t||Ib).splice(0,e.length-1)}function Fc({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=iA(n)?n.map(sy):sy(n),o={done:!1,value:t[0]},a=_A(r&&r.length===t.length?r:SA(t),e),l=Yb(a,t,{ease:Array.isArray(s)?s:CA(t,s)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}function Xb(e,t){return t?e*(1e3/t):0}const NA=5;function Qb(e,t,r){const n=Math.max(t-NA,0);return Xb(r-e(n),t-n)}const Id=.001,EA=.01,ay=10,kA=.05,TA=1;function PA({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,o;XP(e<=ss(ay));let a=1-t;a=cs(kA,TA,a),e=cs(EA,ay,mn(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-r,g=pf(u,a),w=Math.exp(-h);return Id-f/g*w},o=u=>{const h=u*a*e,f=h*r+r,g=Math.pow(a,2)*Math.pow(u,2)*e,w=Math.exp(-h),m=pf(Math.pow(u,2),a);return(-s(u)+Id>0?-1:1)*((f-g)*w)/m}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-Id+d*h},o=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=RA(s,o,l);if(e=ss(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const AA=12;function RA(e,t,r){let n=r;for(let s=1;s<AA;s++)n=n-e(n)/t(n);return n}function pf(e,t){return e*Math.sqrt(1-t*t)}const OA=["duration","bounce"],IA=["stiffness","damping","mass"];function ly(e,t){return t.some(r=>e[r]!==void 0)}function LA(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ly(e,IA)&&ly(e,OA)){const r=PA(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function Zb({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],o=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=LA({...n,velocity:-mn(n.velocity||0)}),g=h||0,w=c/(2*Math.sqrt(l*u)),m=o-s,j=mn(Math.sqrt(l/u)),x=Math.abs(m)<5;r||(r=x?.01:2),t||(t=x?.005:.5);let v;if(w<1){const y=pf(j,w);v=b=>{const S=Math.exp(-w*j*b);return o-S*((g+w*j*m)/y*Math.sin(y*b)+m*Math.cos(y*b))}}else if(w===1)v=y=>o-Math.exp(-j*y)*(m+(g+j*m)*y);else{const y=j*Math.sqrt(w*w-1);v=b=>{const S=Math.exp(-w*j*b),E=Math.min(y*b,300);return o-S*((g+w*j*m)*Math.sinh(E)+y*m*Math.cosh(E))/y}}return{calculatedDuration:f&&d||null,next:y=>{const b=v(y);if(f)a.done=y>=d;else{let S=g;y!==0&&(w<1?S=Qb(v,y,b):S=0);const E=Math.abs(S)<=r,N=Math.abs(o-b)<=t;a.done=E&&N}return a.value=a.done?o:b,a}}}function cy({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},g=_=>l!==void 0&&_<l||c!==void 0&&_>c,w=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let m=r*t;const j=h+m,x=a===void 0?j:a(j);x!==j&&(m=x-h);const v=_=>-m*Math.exp(-_/n),y=_=>x+v(_),b=_=>{const C=v(_),I=y(_);f.done=Math.abs(C)<=u,f.value=f.done?x:I};let S,E;const N=_=>{g(f.value)&&(S=_,E=Zb({keyframes:[f.value,w(f.value)],velocity:Qb(y,_,f.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:_=>{let C=!1;return!E&&S===void 0&&(C=!0,b(_),N(_)),S!==void 0&&_>S?E.next(_-S):(!C&&b(_),f)}}}const MA=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Le.update(t,!0),stop:()=>wn(t),now:()=>Tt.isProcessing?Tt.timestamp:performance.now()}},uy=2e4;function dy(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<uy;)t+=r,n=e.next(t);return t>=uy?1/0:t}const DA={decay:cy,inertia:cy,tween:Fc,keyframes:Fc,spring:Zb};function Vc({autoplay:e=!0,delay:t=0,driver:r=MA,keyframes:n,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let g=1,w=!1,m,j;const x=()=>{j=new Promise(L=>{m=L})};x();let v;const y=DA[s]||Fc;let b;y!==Fc&&typeof n[0]!="number"&&(b=Yb([0,100],n,{clamp:!1}),n=[0,100]);const S=y({...f,keyframes:n});let E;l==="mirror"&&(E=y({...f,keyframes:[...n].reverse(),velocity:-(f.velocity||0)}));let N="idle",_=null,C=null,I=null;S.calculatedDuration===null&&o&&(S.calculatedDuration=dy(S));const{calculatedDuration:R}=S;let O=1/0,z=1/0;R!==null&&(O=R+a,z=O*(o+1)-a);let k=0;const $=L=>{if(C===null)return;g>0&&(C=Math.min(C,L)),g<0&&(C=Math.min(L-z/g,C)),_!==null?k=_:k=Math.round(L-C)*g;const H=k-t*(g>=0?1:-1),oe=g>=0?H<0:H>z;k=Math.max(H,0),N==="finished"&&_===null&&(k=z);let de=k,Ne=S;if(o){const Ee=Math.min(k,z)/O;let B=Math.floor(Ee),ie=Ee%1;!ie&&Ee>=1&&(ie=1),ie===1&&B--,B=Math.min(B,o+1),!!(B%2)&&(l==="reverse"?(ie=1-ie,a&&(ie-=a/O)):l==="mirror"&&(Ne=E)),de=cs(0,1,ie)*O}const ae=oe?{done:!1,value:n[0]}:Ne.next(de);b&&(ae.value=b(ae.value));let{done:Y}=ae;!oe&&R!==null&&(Y=g>=0?k>=z:k<=0);const X=_===null&&(N==="finished"||N==="running"&&Y);return h&&h(ae.value),X&&T(),ae},F=()=>{v&&v.stop(),v=void 0},A=()=>{N="idle",F(),m(),x(),C=I=null},T=()=>{N="finished",d&&d(),F(),m()},P=()=>{if(w)return;v||(v=r($));const L=v.now();c&&c(),_!==null?C=L-_:(!C||N==="finished")&&(C=L),N==="finished"&&x(),I=C,_=null,N="running",v.start()};e&&P();const U={then(L,H){return j.then(L,H)},get time(){return mn(k)},set time(L){L=ss(L),k=L,_!==null||!v||g===0?_=L:C=v.now()-L/g},get duration(){const L=S.calculatedDuration===null?dy(S):S.calculatedDuration;return mn(L)},get speed(){return g},set speed(L){L===g||!v||(g=L,U.time=mn(k))},get state(){return N},play:P,pause:()=>{N="paused",_=k},stop:()=>{w=!0,N!=="idle"&&(N="idle",u&&u(),A())},cancel:()=>{I!==null&&$(I),A()},complete:()=>{N="finished"},sample:L=>(C=0,$(L))};return U}function $A(e){let t;return()=>(t===void 0&&(t=e()),t)}const FA=$A(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),VA=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),El=10,UA=2e4,BA=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Pb(t.ease);function zA(e,t,{onUpdate:r,onComplete:n,...s}){if(!(FA()&&VA.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(y=>{l=y})};d();let{keyframes:h,duration:f=300,ease:g,times:w}=s;if(BA(t,s)){const y=Vc({...s,repeat:0,delay:0});let b={done:!1,value:h[0]};const S=[];let E=0;for(;!b.done&&E<UA;)b=y.sample(E),S.push(b.value),E+=El;w=void 0,h=S,f=E-El,g="linear"}const m=ZP(e.owner.current,t,h,{...s,duration:f,ease:g,times:w}),j=()=>{u=!1,m.cancel()},x=()=>{u=!0,Le.update(j),l(),d()};return m.onfinish=()=>{u||(e.set(eA(h,s)),n&&n(),x())},{then(y,b){return c.then(y,b)},attachTimeline(y){return m.timeline=y,m.onfinish=null,Ge},get time(){return mn(m.currentTime||0)},set time(y){m.currentTime=ss(y)},get speed(){return m.playbackRate},set speed(y){m.playbackRate=y},get duration(){return mn(f)},play:()=>{a||(m.play(),wn(j))},pause:()=>m.pause(),stop:()=>{if(a=!0,m.playState==="idle")return;const{currentTime:y}=m;if(y){const b=Vc({...s,autoplay:!1});e.setWithVelocity(b.sample(y-El).value,b.sample(y).value,El)}x()},complete:()=>{u||m.finish()},cancel:x}}function WA({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Ge,pause:Ge,stop:Ge,then:o=>(o(),Promise.resolve()),cancel:Ge,complete:Ge});return t?Vc({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const qA={type:"spring",stiffness:500,damping:25,restSpeed:10},HA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),GA={type:"keyframes",duration:.8},KA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},JA=(e,{keyframes:t})=>t.length>2?GA:lo.has(e)?e.startsWith("scale")?HA(t[1]):qA:KA,gf=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(us.test(t)||t==="0")&&!t.startsWith("url(")),YA=new Set(["brightness","contrast","saturate","opacity"]);function XA(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Cu)||[];if(!n)return e;const s=r.replace(n,"");let o=YA.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+s+")"}const QA=/([a-z-]*)\(.*?\)/g,vf={...us,getAnimatableNone:e=>{const t=e.match(QA);return t?t.map(XA).join(" "):e}},ZA={...fb,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:vf,WebkitFilter:vf},vp=e=>ZA[e];function e1(e,t){let r=vp(e);return r!==vf&&(r=us),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const t1=e=>/^0[^.\s]+$/.test(e);function eR(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||t1(e)}function tR(e,t,r,n){const s=gf(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?a:o[u-1]),eR(o[u])&&c.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(l=o[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];o[d]=e1(t,l)}return o}function rR({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function yp(e,t){return e[t]||e.default||e}const nR={skipAnimations:!1},xp=(e,t,r,n={})=>s=>{const o=yp(n,e)||{},a=o.delay||n.delay||0;let{elapsed:l=0}=n;l=l-ss(a);const c=tR(t,e,r,o),u=c[0],d=c[c.length-1],h=gf(e,u),f=gf(e,d);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:w=>{t.set(w),o.onUpdate&&o.onUpdate(w)},onComplete:()=>{s(),o.onComplete&&o.onComplete()}};if(rR(o)||(g={...g,...JA(e,g)}),g.duration&&(g.duration=ss(g.duration)),g.repeatDelay&&(g.repeatDelay=ss(g.repeatDelay)),!h||!f||QP.current||o.type===!1||nR.skipAnimations)return WA(g);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const w=zA(t,e,g);if(w)return w}return Vc(g)};function Uc(e){return!!(Kt(e)&&e.add)}const r1=e=>/^\-?\d*\.?\d+$/.test(e);function wp(e,t){e.indexOf(t)===-1&&e.push(t)}function jp(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class bp{constructor(){this.subscriptions=[]}add(t){return wp(this.subscriptions,t),()=>jp(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sR=e=>!isNaN(parseFloat(e));class oR{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=Tt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Le.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Le.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=sR(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new bp);const n=this.events[t].add(r);return t==="change"?()=>{n(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Xb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oi(e,t){return new oR(e,t)}const n1=e=>t=>t.test(e),iR={test:e=>e==="auto",parse:e=>e},s1=[co,le,Gr,An,fP,hP,iR],Li=e=>s1.find(n1(e)),aR=[...s1,It,us],lR=e=>aR.find(n1(e));function cR(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,oi(r))}function uR(e,t){const r=Eu(e,t);let{transitionEnd:n={},transition:s={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const a in o){const l=EP(o[a]);cR(e,a,l)}}function dR(e,t,r){var n,s;const o=Object.keys(t).filter(l=>!e.hasValue(l)),a=o.length;if(a)for(let l=0;l<a;l++){const c=o[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(r1(d)||t1(d))?d=parseFloat(d):!lR(d)&&us.test(u)&&(d=e1(c,u)),e.addValue(c,oi(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function hR(e,t){return t?(t[e]||t.default||t).from:void 0}function fR(e,t,r){const n={};for(const s in e){const o=hR(s,t);if(o!==void 0)n[s]=o;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function mR({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function pR(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function o1(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(o=n);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),g=l[h];if(!f||g===void 0||d&&mR(d,h))continue;const w={delay:r,elapsed:0,...yp(o||{},h)};if(window.HandoffAppearAnimations){const x=e.getProps()[ib];if(x){const v=window.HandoffAppearAnimations(x,h,f,Le);v!==null&&(w.elapsed=v,w.isHandoff=!0)}}let m=!w.isHandoff&&!pR(f,g);if(w.type==="spring"&&(f.getVelocity()||w.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(xp(h,f,g,e.shouldReduceMotion&&lo.has(h)?{type:!1}:w));const j=f.animation;Uc(c)&&(c.add(h),j.then(()=>c.remove(h))),u.push(j)}return a&&Promise.all(u).then(()=>{a&&uR(e,a)}),u}function yf(e,t,r={}){const n=Eu(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(o1(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return gR(e,t,u+c,d,h,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function gR(e,t,r=0,n=0,s=1,o){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(vR).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(yf(u,t,{...o,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function vR(e,t){return e.sortNodePosition(t)}function yR(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(o=>yf(e,o,r));n=Promise.all(s)}else if(typeof t=="string")n=yf(e,t,r);else{const s=typeof t=="function"?Eu(e,t,r.custom):t;n=Promise.all(o1(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const xR=[...np].reverse(),wR=np.length;function jR(e){return t=>Promise.all(t.map(({animation:r,options:n})=>yR(e,r,n)))}function bR(e){let t=jR(e);const r=_R();let n=!0;const s=(c,u)=>{const d=Eu(e,u);if(d){const{transition:h,transitionEnd:f,...g}=d;c={...c,...g,...f}}return c};function o(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],g=new Set;let w={},m=1/0;for(let x=0;x<wR;x++){const v=xR[x],y=r[v],b=d[v]!==void 0?d[v]:h[v],S=Ia(b),E=v===u?y.isActive:null;E===!1&&(m=x);let N=b===h[v]&&b!==d[v]&&S;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),y.protectedKeys={...w},!y.isActive&&E===null||!b&&!y.prevProp||Su(b)||typeof b=="boolean")continue;let C=SR(y.prevProp,b)||v===u&&y.isActive&&!N&&S||x>m&&S,I=!1;const R=Array.isArray(b)?b:[b];let O=R.reduce(s,{});E===!1&&(O={});const{prevResolvedValues:z={}}=y,k={...z,...O},$=F=>{C=!0,g.has(F)&&(I=!0,g.delete(F)),y.needsAnimating[F]=!0};for(const F in k){const A=O[F],T=z[F];if(w.hasOwnProperty(F))continue;let P=!1;Dc(A)&&Dc(T)?P=!kb(A,T):P=A!==T,P?A!==void 0?$(F):g.add(F):A!==void 0&&g.has(F)?$(F):y.protectedKeys[F]=!0}y.prevProp=b,y.prevResolvedValues=O,y.isActive&&(w={...w,...O}),n&&e.blockInitialAnimation&&(C=!1),C&&(!N||I)&&f.push(...R.map(F=>({animation:F,options:{type:v,...c}})))}if(g.size){const x={};g.forEach(v=>{const y=e.getBaseTarget(v);y!==void 0&&(x[v]=y)}),f.push({animation:x})}let j=!!f.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(j=!1),n=!1,j?t(f):Promise.resolve()}function l(c,u,d){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(g=>{var w;return(w=g.animationState)===null||w===void 0?void 0:w.setActive(c,u)}),r[c].isActive=u;const f=a(d,c);for(const g in r)r[g].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>r}}function SR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!kb(t,e):!1}function Ts(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function _R(){return{animate:Ts(!0),whileInView:Ts(),whileHover:Ts(),whileTap:Ts(),whileDrag:Ts(),whileFocus:Ts(),exit:Ts()}}class CR extends ys{constructor(t){super(t),t.animationState||(t.animationState=bR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Su(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let NR=0;class ER extends ys{constructor(){super(...arguments),this.id=NR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const kR={animation:{Feature:CR},exit:{Feature:ER}},hy=(e,t)=>Math.abs(e-t);function TR(e,t){const r=hy(e.x,t.x),n=hy(e.y,t.y);return Math.sqrt(r**2+n**2)}class i1{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Md(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=TR(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:w}=h,{timestamp:m}=Tt;this.history.push({...w,timestamp:m});const{onStart:j,onMove:x}=this.handlers;f||(j&&j(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ld(f,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Md(h.type==="pointercancel"?this.lastMoveEventInfo:Ld(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,j),w&&w(h,j)},!Sb(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=Nu(t),l=Ld(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Tt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,Md(l,this.history)),this.removeListeners=ns(fn(this.contextWindow,"pointermove",this.handlePointerMove),fn(this.contextWindow,"pointerup",this.handlePointerUp),fn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wn(this.updatePoint)}}function Ld(e,t){return t?{point:t(e.point)}:e}function fy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Md({point:e},t){return{point:e,delta:fy(e,a1(t)),offset:fy(e,PR(t)),velocity:AR(t,.1)}}function PR(e){return e[0]}function a1(e){return e[e.length-1]}function AR(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=a1(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>ss(t)));)r--;if(!n)return{x:0,y:0};const o=mn(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function or(e){return e.max-e.min}function xf(e,t=0,r=.01){return Math.abs(e-t)<=r}function my(e,t,r,n=.5){e.origin=n,e.originPoint=ze(t.min,t.max,e.origin),e.scale=or(r)/or(t),(xf(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ze(r.min,r.max,e.origin)-e.originPoint,(xf(e.translate)||isNaN(e.translate))&&(e.translate=0)}function sa(e,t,r,n){my(e.x,t.x,r.x,n?n.originX:void 0),my(e.y,t.y,r.y,n?n.originY:void 0)}function py(e,t,r){e.min=r.min+t.min,e.max=e.min+or(t)}function RR(e,t,r){py(e.x,t.x,r.x),py(e.y,t.y,r.y)}function gy(e,t,r){e.min=t.min-r.min,e.max=e.min+or(t)}function oa(e,t,r){gy(e.x,t.x,r.x),gy(e.y,t.y,r.y)}function OR(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ze(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ze(r,e,n.max):Math.min(e,r)),e}function vy(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function IR(e,{top:t,left:r,bottom:n,right:s}){return{x:vy(e.x,r,s),y:vy(e.y,t,n)}}function yy(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function LR(e,t){return{x:yy(e.x,t.x),y:yy(e.y,t.y)}}function MR(e,t){let r=.5;const n=or(e),s=or(t);return s>n?r=Ma(t.min,t.max-n,e.min):n>s&&(r=Ma(e.min,e.max-s,t.min)),cs(0,1,r)}function DR(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const wf=.35;function $R(e=wf){return e===!1?e=0:e===!0&&(e=wf),{x:xy(e,"left","right"),y:xy(e,"top","bottom")}}function xy(e,t,r){return{min:wy(e,t),max:wy(e,r)}}function wy(e,t){return typeof e=="number"?e:e[t]||0}const jy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fo=()=>({x:jy(),y:jy()}),by=()=>({min:0,max:0}),rt=()=>({x:by(),y:by()});function cr(e){return[e("x"),e("y")]}function l1({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function FR({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function VR(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Dd(e){return e===void 0||e===1}function jf({scale:e,scaleX:t,scaleY:r}){return!Dd(e)||!Dd(t)||!Dd(r)}function Os(e){return jf(e)||c1(e)||e.z||e.rotate||e.rotateX||e.rotateY}function c1(e){return Sy(e.x)||Sy(e.y)}function Sy(e){return e&&e!=="0%"}function Bc(e,t,r){const n=e-r,s=t*n;return r+s}function _y(e,t,r,n,s){return s!==void 0&&(e=Bc(e,s,n)),Bc(e,r,n)+t}function bf(e,t=0,r=1,n,s){e.min=_y(e.min,t,r,n,s),e.max=_y(e.max,t,r,n,s)}function u1(e,{x:t,y:r}){bf(e.x,t.translate,t.scale,t.originPoint),bf(e.y,r.translate,r.scale,r.originPoint)}function UR(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let o,a;for(let l=0;l<s;l++){o=r[l],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Vo(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,u1(e,a)),n&&Os(o.latestValues)&&Vo(e,o.latestValues))}t.x=Cy(t.x),t.y=Cy(t.y)}function Cy(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Mn(e,t){e.min=e.min+t,e.max=e.max+t}function Ny(e,t,[r,n,s]){const o=t[s]!==void 0?t[s]:.5,a=ze(e.min,e.max,o);bf(e,t[r],t[n],a,t.scale)}const BR=["x","scaleX","originX"],zR=["y","scaleY","originY"];function Vo(e,t){Ny(e.x,t,BR),Ny(e.y,t,zR)}function d1(e,t){return l1(VR(e.getBoundingClientRect(),t))}function WR(e,t,r){const n=d1(e,r),{scroll:s}=t;return s&&(Mn(n.x,s.offset.x),Mn(n.y,s.offset.y)),n}const h1=({current:e})=>e?e.ownerDocument.defaultView:null,qR=new WeakMap;class HR{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rt(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Nu(d,"page").point)},o=(d,h)=>{const{drag:f,dragPropagation:g,onDragStart:w}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Cb(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cr(j=>{let x=this.getAxisMotionValue(j).get()||0;if(Gr.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const y=v.layout.layoutBox[j];y&&(x=or(y)*(parseFloat(x)/100))}}this.originPoint[j]=x}),w&&Le.update(()=>w(d,h),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:w,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:j}=h;if(g&&this.currentDirection===null){this.currentDirection=GR(j),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",h.point,j),this.updateAxis("y",h.point,j),this.visualElement.render(),m&&m(d,h)},l=(d,h)=>this.stop(d,h),c=()=>cr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new i1(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:h1(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Le.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!kl(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=OR(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&Do(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=IR(s.layoutBox,r):this.constraints=!1,this.elastic=$R(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&cr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=DR(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Do(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=WR(n,s.root,this.visualElement.getTransformPagePoint());let a=LR(s.layout.layoutBox,o);if(r){const l=r(FR(a));this.hasMutatedConstraints=!!l,l&&(a=l1(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=cr(d=>{if(!kl(d,r,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,w={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(xp(t,n,0,r))}stopAnimation(){cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cr(r=>{const{drag:n}=this.getProps();if(!kl(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];o.set(t[r]-ze(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Do(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cr(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=MR({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cr(a=>{if(!kl(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(ze(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;qR.set(this.visualElement,this);const t=this.visualElement.current,r=fn(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Do(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=un(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=wf,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function kl(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function GR(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class KR extends ys{constructor(t){super(t),this.removeGroupControls=Ge,this.removeListeners=Ge,this.controls=new HR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ge}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ey=e=>(t,r)=>{e&&Le.update(()=>e(t,r))};class JR extends ys{constructor(){super(...arguments),this.removePointerDownListener=Ge}onPointerDown(t){this.session=new i1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:h1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Ey(t),onStart:Ey(r),onMove:n,onEnd:(o,a)=>{delete this.session,s&&Le.update(()=>s(o,a))}}}mount(){this.removePointerDownListener=fn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function YR(){const e=p.useContext(ju);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=p.useId();return p.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const ec={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ky(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(le.test(e))e=parseFloat(e);else return e;const r=ky(e,t.target.x),n=ky(e,t.target.y);return`${r}% ${n}%`}},XR={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=us.parse(e);if(s.length>5)return n;const o=us.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=ze(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}};class QR extends ue.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=t;oP(ZR),o&&(r.group&&r.group.add(o),n&&n.register&&s&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ec.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||Le.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function f1(e){const[t,r]=YR(),n=p.useContext(op);return ue.createElement(QR,{...e,layoutGroup:n,switchLayoutGroup:p.useContext(lb),isPresent:t,safeToRemove:r})}const ZR={borderRadius:{...Mi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mi,borderTopRightRadius:Mi,borderBottomLeftRadius:Mi,borderBottomRightRadius:Mi,boxShadow:XR},m1=["TopLeft","TopRight","BottomLeft","BottomRight"],eO=m1.length,Ty=e=>typeof e=="string"?parseFloat(e):e,Py=e=>typeof e=="number"||le.test(e);function tO(e,t,r,n,s,o){s?(e.opacity=ze(0,r.opacity!==void 0?r.opacity:1,rO(n)),e.opacityExit=ze(t.opacity!==void 0?t.opacity:1,0,nO(n))):o&&(e.opacity=ze(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<eO;a++){const l=`border${m1[a]}Radius`;let c=Ay(t,l),u=Ay(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Py(c)===Py(u)?(e[l]=Math.max(ze(Ty(c),Ty(u),n),0),(Gr.test(u)||Gr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=ze(t.rotate||0,r.rotate||0,n))}function Ay(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const rO=p1(0,.5,Db),nO=p1(.5,.95,Ge);function p1(e,t,r){return n=>n<e?0:n>t?1:r(Ma(e,t,n))}function Ry(e,t){e.min=t.min,e.max=t.max}function lr(e,t){Ry(e.x,t.x),Ry(e.y,t.y)}function Oy(e,t,r,n,s){return e-=t,e=Bc(e,1/r,n),s!==void 0&&(e=Bc(e,1/s,n)),e}function sO(e,t=0,r=1,n=.5,s,o=e,a=e){if(Gr.test(t)&&(t=parseFloat(t),t=ze(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=ze(o.min,o.max,n);e===o&&(l-=t),e.min=Oy(e.min,t,r,l,s),e.max=Oy(e.max,t,r,l,s)}function Iy(e,t,[r,n,s],o,a){sO(e,t[r],t[n],t[s],t.scale,o,a)}const oO=["x","scaleX","originX"],iO=["y","scaleY","originY"];function Ly(e,t,r,n){Iy(e.x,t,oO,r?r.x:void 0,n?n.x:void 0),Iy(e.y,t,iO,r?r.y:void 0,n?n.y:void 0)}function My(e){return e.translate===0&&e.scale===1}function g1(e){return My(e.x)&&My(e.y)}function aO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function v1(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Dy(e){return or(e.x)/or(e.y)}class lO{constructor(){this.members=[]}add(t){wp(this.members,t),t.scheduleRender()}remove(t){if(jp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $y(e,t,r){let n="";const s=e.x.translate/t.x,o=e.y.translate/t.y;if((s||o)&&(n=`translate3d(${s}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const cO=(e,t)=>e.depth-t.depth;class uO{constructor(){this.children=[],this.isDirty=!1}add(t){wp(this.children,t),this.isDirty=!0}remove(t){jp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(cO),this.isDirty=!1,this.children.forEach(t)}}function dO(e,t){const r=performance.now(),n=({timestamp:s})=>{const o=s-r;o>=t&&(wn(n),e(o-t))};return Le.read(n,!0),()=>wn(n)}function hO(e){window.MotionDebug&&window.MotionDebug.record(e)}function fO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function mO(e,t,r){const n=Kt(e)?e:oi(e);return n.start(xp("",n,t,r)),n.animation}const Fy=["","X","Y","Z"],pO={visibility:"hidden"},Vy=1e3;let gO=0;const Is={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function y1({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=gO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Is.totalNodes=Is.resolvedTargetDeltas=Is.recalculatedProjection=0,this.nodes.forEach(xO),this.nodes.forEach(_O),this.nodes.forEach(CO),this.nodes.forEach(wO),hO(Is)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new uO)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new bp),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=fO(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=dO(f,250),ec.hasAnimatedSinceResize&&(ec.hasAnimatedSinceResize=!1,this.nodes.forEach(By))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||PO,{onLayoutAnimationStart:j,onLayoutAnimationComplete:x}=d.getProps(),v=!this.targetLayout||!v1(this.targetLayout,w)||g,y=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||f&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,y);const b={...yp(m,"layout"),onPlay:j,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||By(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(NO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uy);return}this.isUpdating||this.nodes.forEach(bO),this.isUpdating=!1,this.nodes.forEach(SO),this.nodes.forEach(vO),this.nodes.forEach(yO),this.clearAllSnapshots();const l=performance.now();Tt.delta=cs(0,1e3/60,l-Tt.timestamp),Tt.timestamp=l,Tt.isProcessing=!0,Ed.update.process(Tt),Ed.preRender.process(Tt),Ed.render.process(Tt),Tt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(jO),this.sharedNodes.forEach(EO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=rt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!g1(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||Os(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),AO(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return rt();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Mn(l.x,c.offset.x),Mn(l.y,c.offset.y)),l}removeElementScroll(a){const l=rt();lr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){lr(l,a);const{scroll:f}=this.root;f&&(Mn(l.x,-f.offset.x),Mn(l.y,-f.offset.y))}Mn(l.x,d.offset.x),Mn(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=rt();lr(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Vo(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Os(d.latestValues)&&Vo(c,d.latestValues)}return Os(this.latestValues)&&Vo(c,this.latestValues),c}removeTransform(a){const l=rt();lr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Os(u.latestValues))continue;jf(u.latestValues)&&u.updateSnapshot();const d=rt(),h=u.measurePageBox();lr(d,h),Ly(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Os(this.latestValues)&&Ly(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Tt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),oa(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=rt(),this.targetWithTransforms=rt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),u1(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rt(),this.relativeTargetOrigin=rt(),oa(this.relativeTargetOrigin,this.target,g.target),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Is.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jf(this.parent.latestValues)||c1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Tt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;lr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;UR(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:w}=l;if(!w){this.projectionTransform&&(this.projectionDelta=Fo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Fo(),this.projectionDeltaWithTransform=Fo());const m=this.projectionTransform;sa(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=$y(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Is.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Fo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=rt(),g=c?c.source:void 0,w=this.layout?this.layout.source:void 0,m=g!==w,j=this.getStack(),x=!j||j.members.length<=1,v=!!(m&&!x&&this.options.crossfade===!0&&!this.path.some(TO));this.animationProgress=0;let y;this.mixTargetDelta=b=>{const S=b/1e3;zy(h.x,a.x,S),zy(h.y,a.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kO(this.relativeTarget,this.relativeTargetOrigin,f,S),y&&aO(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=rt()),lr(y,this.relativeTarget)),m&&(this.animationValues=d,tO(d,u,this.latestValues,S,v,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{ec.hasAnimatedSinceResize=!0,this.currentAnimation=mO(0,Vy,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Vy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&x1(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||rt();const h=or(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=or(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}lr(l,c),Vo(l,d),sa(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new lO),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Fy.length;d++){const h="rotate"+Fy[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return pO;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Zl(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Zl(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Os(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=$y(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:g,y:w}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in Lc){if(f[m]===void 0)continue;const{correct:j,applyTo:x}=Lc[m],v=u.transform==="none"?f[m]:j(f[m],h);if(x){const y=x.length;for(let b=0;b<y;b++)u[x[b]]=v}else u[m]=v}return this.options.layoutId&&(u.pointerEvents=h===this?Zl(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Uy),this.root.sharedNodes.clear()}}}function vO(e){e.updateLayout()}function yO(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:o}=e.options,a=r.source!==e.layout.source;o==="size"?cr(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],g=or(f);f.min=n[h].min,f.max=f.min+g}):x1(o,r.layoutBox,n)&&cr(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],g=or(n[h]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const l=Fo();sa(l,n,r.layoutBox);const c=Fo();a?sa(c,e.applyTransform(s,!0),r.measuredBox):sa(c,n,r.layoutBox);const u=!g1(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const w=rt();oa(w,r.layoutBox,f.layoutBox);const m=rt();oa(m,n,g.layoutBox),v1(w,m)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=w,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function xO(e){Is.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jO(e){e.clearSnapshot()}function Uy(e){e.clearMeasurements()}function bO(e){e.isLayoutDirty=!1}function SO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function By(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _O(e){e.resolveTargetDelta()}function CO(e){e.calcProjection()}function NO(e){e.resetRotation()}function EO(e){e.removeLeadSnapshot()}function zy(e,t,r){e.translate=ze(t.translate,0,r),e.scale=ze(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Wy(e,t,r,n){e.min=ze(t.min,r.min,n),e.max=ze(t.max,r.max,n)}function kO(e,t,r,n){Wy(e.x,t.x,r.x,n),Wy(e.y,t.y,r.y,n)}function TO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const PO={duration:.45,ease:[.4,0,.1,1]},qy=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Hy=qy("applewebkit/")&&!qy("chrome/")?Math.round:Ge;function Gy(e){e.min=Hy(e.min),e.max=Hy(e.max)}function AO(e){Gy(e.x),Gy(e.y)}function x1(e,t,r){return e==="position"||e==="preserve-aspect"&&!xf(Dy(t),Dy(r),.2)}const RO=y1({attachResizeListener:(e,t)=>un(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$d={current:void 0},w1=y1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$d.current){const e=new RO({});e.mount(window),e.setOptions({layoutScroll:!0}),$d.current=e}return $d.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),OO={pan:{Feature:JR},drag:{Feature:KR,ProjectionNode:w1,MeasureLayout:f1}},IO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function LO(e){const t=IO.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function Sf(e,t,r=1){const[n,s]=LO(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const a=o.trim();return r1(a)?parseFloat(a):a}else return hf(s)?Sf(s,t,r+1):s}function MO(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const o=s.get();if(!hf(o))return;const a=Sf(o,n);a&&s.set(a)});for(const s in t){const o=t[s];if(!hf(o))continue;const a=Sf(o,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=o))}return{target:t,transitionEnd:r}}const DO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),j1=e=>DO.has(e),$O=e=>Object.keys(e).some(j1),Ky=e=>e===co||e===le,Jy=(e,t)=>parseFloat(e.split(", ")[t]),Yy=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return Jy(s[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?Jy(o[1],e):0}},FO=new Set(["x","y","z"]),VO=Ga.filter(e=>!FO.has(e));function UO(e){const t=[];return VO.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const ii={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Yy(4,13),y:Yy(5,14)};ii.translateX=ii.x;ii.translateY=ii.y;const BO=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,o=getComputedStyle(s),{display:a}=o,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=ii[u](n,o)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=ii[u](c,o)}),e},zO=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(j1);let o=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],h=Li(d);const f=t[c];let g;if(Dc(f)){const w=f.length,m=f[0]===null?1:0;d=f[m],h=Li(d);for(let j=m;j<w&&f[j]!==null;j++)g?fp(Li(f[j])===g):g=Li(f[j])}else g=Li(f);if(h!==g)if(Ky(h)&&Ky(g)){const w=u.get();typeof w=="string"&&u.set(parseFloat(w)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&g===le&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(d===0||f===0)?d===0?u.set(g.transform(d)):t[c]=h.transform(f):(a||(o=UO(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=BO(t,e,l);return o.length&&o.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),bu&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function WO(e,t,r,n){return $O(t)?zO(e,t,r,n):{target:t,transitionEnd:n}}const qO=(e,t,r,n)=>{const s=MO(e,t,n);return t=s.target,n=s.transitionEnd,WO(e,t,r,n)},_f={current:null},b1={current:!1};function HO(){if(b1.current=!0,!!bu)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_f.current=e.matches;e.addListener(t),t()}else _f.current=!1}function GO(e,t,r){const{willChange:n}=t;for(const s in t){const o=t[s],a=r[s];if(Kt(o))e.addValue(s,o),Uc(n)&&n.add(s);else if(Kt(a))e.addValue(s,oi(o,{owner:e})),Uc(n)&&n.remove(s);else if(a!==o)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(s);e.addValue(s,oi(l!==void 0?l:o,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const Xy=new WeakMap,S1=Object.keys(La),KO=S1.length,Qy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],JO=sp.length;class YO{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Le.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=_u(r),this.isVariantNode=ab(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const h in d){const f=d[h];l[h]!==void 0&&Kt(f)&&(f.set(l[h],!1),Uc(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,Xy.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),b1.current||HO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_f.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xy.delete(this.current),this.projection&&this.projection.unmount(),wn(this.notifyUpdate),wn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=lo.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Le.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,o){let a,l;for(let c=0;c<KO;c++){const u=S1[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:g}=La[u];f&&(a=f),d(r)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:g}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Do(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:f,layoutRoot:g})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Qy.length;n++){const s=Qy[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o=t["on"+s];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=GO(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<JO;n++){const s=sp[n],o=this.props[s];(Ia(o)||o===!1)&&(r[s]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=oi(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=hp(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Kt(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new bp),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class _1 extends YO{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},o){let a=fR(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),o){dR(this,n,a);const l=qO(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function XO(e){return window.getComputedStyle(e)}class QO extends _1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(lo.has(r)){const n=vp(r);return n&&n.default||0}else{const n=XO(t),s=(db(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return d1(t,r)}build(t,r,n,s){ap(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return dp(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){vb(t,r,n,s)}}class ZO extends _1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(lo.has(r)){const n=vp(r);return n&&n.default||0}return r=yb.has(r)?r:rp(r),t.getAttribute(r)}measureInstanceViewportBox(){return rt()}scrapeMotionValuesFromProps(t,r){return wb(t,r)}build(t,r,n,s){cp(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){xb(t,r,n,s)}mount(t){this.isSVGTag=up(t.tagName),super.mount(t)}}const eI=(e,t)=>ip(e)?new ZO(t,{enableHardwareAcceleration:!1}):new QO(t,{enableHardwareAcceleration:!0}),tI={layout:{ProjectionNode:w1,MeasureLayout:f1}},rI={...kR,...KP,...OO,...tI},xs=nP((e,t)=>LP(e,t,rI,eI));function C1(){const e=p.useRef(!1);return tp(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function nI(){const e=C1(),[t,r]=p.useState(0),n=p.useCallback(()=>{e.current&&r(t+1)},[t]);return[p.useCallback(()=>Le.postRender(n),[n]),t]}class sI extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function oI({children:e,isPresent:t}){const r=p.useId(),n=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(t||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),p.createElement(sI,{isPresent:t,childRef:n,sizeRef:s},p.cloneElement(e,{ref:n}))}const Fd=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=jb(iI),c=p.useId(),u=p.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),o?void 0:[r]);return p.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=p.createElement(oI,{isPresent:r},e)),p.createElement(ju.Provider,{value:u},e)};function iI(){return new Map}function aI(e){return p.useEffect(()=>()=>e(),[])}const Ls=e=>e.key||"";function lI(e,t){e.forEach(r=>{const n=Ls(r);t.set(n,r)})}function cI(e){const t=[];return p.Children.forEach(e,r=>{p.isValidElement(r)&&t.push(r)}),t}const uI=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=p.useContext(op).forceRender||nI()[0],c=C1(),u=cI(e);let d=u;const h=p.useRef(new Map).current,f=p.useRef(d),g=p.useRef(new Map).current,w=p.useRef(!0);if(tp(()=>{w.current=!1,lI(u,g),f.current=d}),aI(()=>{w.current=!0,g.clear(),h.clear()}),w.current)return p.createElement(p.Fragment,null,d.map(v=>p.createElement(Fd,{key:Ls(v),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:a},v)));d=[...d];const m=f.current.map(Ls),j=u.map(Ls),x=m.length;for(let v=0;v<x;v++){const y=m[v];j.indexOf(y)===-1&&!h.has(y)&&h.set(y,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((v,y)=>{if(j.indexOf(y)!==-1)return;const b=g.get(y);if(!b)return;const S=m.indexOf(y);let E=v;if(!E){const N=()=>{h.delete(y);const _=Array.from(g.keys()).filter(C=>!j.includes(C));if(_.forEach(C=>g.delete(C)),f.current=u.filter(C=>{const I=Ls(C);return I===y||_.includes(I)}),!h.size){if(c.current===!1)return;l(),n&&n()}};E=p.createElement(Fd,{key:Ls(b),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:o,mode:a},b),h.set(y,E)}d.splice(S,0,E)}),d=d.map(v=>{const y=v.key;return h.has(y)?v:p.createElement(Fd,{key:Ls(v),isPresent:!0,presenceAffectsLayout:o,mode:a},v)}),p.createElement(p.Fragment,null,h.size?d:d.map(v=>p.cloneElement(v)))},dI=yu("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),D=ue.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const a=n?A2:"button";return i.jsx(a,{className:Ce(dI({variant:t,size:r,className:e})),ref:o,...s})});D.displayName="Button";const q=ue.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));q.displayName="Input";var hI="Label",N1=p.forwardRef((e,t)=>i.jsx(me.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));N1.displayName=hI;var E1=N1;const fI=yu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),V=ue.forwardRef(({className:e,...t},r)=>i.jsx(E1,{ref:r,className:Ce(fI(),e),...t}));V.displayName=E1.displayName;const re=ue.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("rounded-lg border bg-gray-800 text-white shadow-sm",e),...t}));re.displayName="Card";const ye=ue.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("flex flex-col space-y-1.5 p-6",e),...t}));ye.displayName="CardHeader";const xe=ue.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));xe.displayName="CardTitle";const k1=ue.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:Ce("text-sm text-gray-400",e),...t}));k1.displayName="CardDescription";const se=ue.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("p-6 pt-0",e),...t}));se.displayName="CardContent";const mI=ue.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("flex items-center p-6 pt-0",e),...t}));mI.displayName="CardFooter";const pI="modulepreload",gI=function(e){return"/"+e},Zy={},os=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=gI(o),o in Zy)return;Zy[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":pI,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},vI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Sp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class yI extends Sp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ex extends Sp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class tx extends Sp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cf||(Cf={}));var xI=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class wI{constructor(t,{headers:r={},customFetch:n,region:s=Cf.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=vI(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return xI(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(m=>{throw new yI(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new ex(h);if(!h.ok)throw new tx(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield h.json():g==="application/octet-stream"?w=yield h.blob():g==="text/event-stream"?w=h:g==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof tx||s instanceof ex?s.context:void 0}}})}}var Bt={},_p={},ku={},Xa={},Tu={},Pu={},jI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ai=jI();const bI=ai.fetch,T1=ai.fetch.bind(ai),P1=ai.Headers,SI=ai.Request,_I=ai.Response,vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:P1,Request:SI,Response:_I,default:T1,fetch:bI},Symbol.toStringTag,{value:"Module"})),CI=_C(vi);var Au={};Object.defineProperty(Au,"__esModule",{value:!0});let NI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Au.default=NI;var A1=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pu,"__esModule",{value:!0});const EI=A1(CI),kI=A1(Au);let TI=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=EI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,c,u;let d=null,h=null,f=null,g=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const v=await o.text();v===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=v:h=JSON.parse(v))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await o.text();try{d=JSON.parse(j),Array.isArray(d)&&o.status===404&&(h=[],d=null,g=200,w="OK")}catch{o.status===404&&j===""?(g=204,w="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,w="OK"),d&&this.shouldThrowOnError)throw new kI.default(d)}return{error:d,data:h,count:f,status:g,statusText:w}});return this.shouldThrowOnError||(s=s.catch(o=>{var a,l,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Pu.default=TI;var PI=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tu,"__esModule",{value:!0});const AI=PI(Pu);let RI=class extends AI.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Tu.default=RI;var OI=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});const II=OI(Tu);let LI=class extends II.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Xa.default=LI;var MI=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ku,"__esModule",{value:!0});const Di=MI(Xa);let DI=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Di.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Di.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Di.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};ku.default=DI;var R1=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_p,"__esModule",{value:!0});const $I=R1(ku),FI=R1(Xa);let VI=class O1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new $I.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new O1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new FI.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};_p.default=VI;var yi=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.PostgrestError=Bt.PostgrestBuilder=Bt.PostgrestTransformBuilder=Bt.PostgrestFilterBuilder=Bt.PostgrestQueryBuilder=Bt.PostgrestClient=void 0;const I1=yi(_p);Bt.PostgrestClient=I1.default;const L1=yi(ku);Bt.PostgrestQueryBuilder=L1.default;const M1=yi(Xa);Bt.PostgrestFilterBuilder=M1.default;const D1=yi(Tu);Bt.PostgrestTransformBuilder=D1.default;const $1=yi(Pu);Bt.PostgrestBuilder=$1.default;const F1=yi(Au);Bt.PostgrestError=F1.default;var UI=Bt.default={PostgrestClient:I1.default,PostgrestQueryBuilder:L1.default,PostgrestFilterBuilder:M1.default,PostgrestTransformBuilder:D1.default,PostgrestBuilder:$1.default,PostgrestError:F1.default};const{PostgrestClient:BI,PostgrestQueryBuilder:C3,PostgrestFilterBuilder:N3,PostgrestTransformBuilder:E3,PostgrestBuilder:k3,PostgrestError:T3}=UI;function zI(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const WI=zI(),qI="2.12.2",HI=`realtime-js/${qI}`,GI="1.0.0",V1=1e4,KI=1e3;var ia;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ia||(ia={}));var xt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xt||(xt={}));var Tr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Tr||(Tr={}));var Nf;(function(e){e.websocket="websocket"})(Nf||(Nf={}));var Ds;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ds||(Ds={}));class JI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+o));a=a+o;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class U1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Oe||(Oe={}));const rx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,a)=>(o[a]=YI(a,e,t,s),o),{})},YI=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,a=r[e];return o&&!n.includes(o)?B1(o,a):Ef(a)},B1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return eL(t,r)}switch(e){case Oe.bool:return XI(t);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return QI(t);case Oe.json:case Oe.jsonb:return ZI(t);case Oe.timestamp:return tL(t);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return Ef(t);default:return Ef(t)}},Ef=e=>e,XI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},QI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ZI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},eL=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const a=e.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>B1(t,l))}return e},tL=e=>typeof e=="string"?e.replace(" ","T"):e,z1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Vd{constructor(t,r,n={},s=V1){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nx||(nx={}));class aa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=aa.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=aa.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=aa.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=o[u];if(h){const f=d.map(j=>j.presence_ref),g=h.map(j=>j.presence_ref),w=d.filter(j=>g.indexOf(j.presence_ref)<0),m=h.filter(j=>f.indexOf(j.presence_ref)<0);w.length>0&&(l[u]=w),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sx||(sx={}));var zc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zc||(zc={}));var sn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sn||(sn={}));class Cp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Vd(this,Tr.join,this.params,this.timeout),this.rejoinTimer=new U1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new aa(this),this.broadcastEndpointURL=z1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[zc.PRESENCE],d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(sn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(sn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(sn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,m=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,j=[];for(let x=0;x<m;x++){const v=w[x],{filter:{event:y,schema:b,table:S,filter:E}}=v,N=f&&f[x];if(N&&N.event===y&&N.schema===b&&N.table===S&&N.filter===E)j.push(Object.assign(Object.assign({},v),{id:N.id}));else{this.unsubscribe(),this.state=xt.errored,t==null||t(sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(sn.SUBSCRIBED);return}}).receive("error",f=>{this.state=xt.errored,t==null||t(sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xt.joined&&t===zc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Vd(this,Tr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vd(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Tr;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var w,m,j;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((j=(m=g.filter)===null||m===void 0?void 0:m.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(g=>g.callback(f,n)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var w,m,j,x,v,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const b=g.id,S=(w=g.filter)===null||w===void 0?void 0:w.event;return b&&((m=r.ids)===null||m===void 0?void 0:m.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const b=(v=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return b==="*"||b===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:m,table:j,commit_timestamp:x,type:v,errors:y}=w;f=Object.assign(Object.assign({},{schema:m,table:j,commit_timestamp:x,eventType:v,new:{},old:{},errors:y}),this._getPayloadRecords(w))}g.callback(f,n)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Cp.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Tr.close,{},t)}_onError(t){this._on(Tr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=rx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=rx(t.columns,t.old_record)),r}}const ox=()=>{},rL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class nL{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=V1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ox,this.ref=0,this.logger=ox,this.conn=null,this.sendBuffer=[],this.serializer=new JI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${Nf.websocket}`,this.httpEndpoint=z1(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,a)=>a(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new U1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(setTimeout(()=>{this.setAuth().catch(t=>{this.log("error","error setting auth",t)})},0),!this.conn){if(this.transport||(this.transport=WI),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:GI}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ia.connecting:return Ds.Connecting;case ia.open:return Ds.Open;case ia.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Cp(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:HI};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Tr.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(KI,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,o,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Tr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([rL],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Np extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class sL extends Np{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kf extends Np{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var oL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const W1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},iL=()=>oL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield os(()=>Promise.resolve().then(()=>vi),void 0)).Response:Response}),Tf=e=>{if(Array.isArray(e))return e.map(r=>Tf(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Tf(n)}),t},aL=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var uo=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ud=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lL=(e,t,r)=>uo(void 0,void 0,void 0,function*(){const n=yield iL();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,a=(s==null?void 0:s.statusCode)||o+"";t(new sL(Ud(s),o,a))}).catch(s=>{t(new kf(Ud(s),s))}):t(new kf(Ud(e),e))}),cL=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(aL(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function Qa(e,t,r,n,s,o){return uo(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,cL(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>lL(c,l,n))})})}function Wc(e,t,r,n){return uo(this,void 0,void 0,function*(){return Qa(e,"GET",t,r,n)})}function on(e,t,r,n,s){return uo(this,void 0,void 0,function*(){return Qa(e,"POST",t,n,s,r)})}function Pf(e,t,r,n,s){return uo(this,void 0,void 0,function*(){return Qa(e,"PUT",t,n,s,r)})}function uL(e,t,r,n){return uo(this,void 0,void 0,function*(){return Qa(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function q1(e,t,r,n,s){return uo(this,void 0,void 0,function*(){return Qa(e,"DELETE",t,n,s,r)})}var Vt=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const dL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ix={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hL{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=W1(s)}uploadOrUpdate(t,r,n,s){return Vt(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},ix),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Pf:on)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}upload(t,r,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Vt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ix.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Pf(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(pt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Vt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield on(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Np("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield on(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Vt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield on(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Vt(this,void 0,void 0,function*(){try{const s=yield on(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}download(t,r){return Vt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Wc(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(pt(l))return{data:null,error:l};throw l}})}info(t){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Wc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Tf(n),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}exists(t){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield uL(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(pt(n)&&n instanceof kf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Vt(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Vt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},dL),r),{prefix:t||""});return{data:yield on(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const fL="2.10.2",mL={"X-Client-Info":`storage-js/${fL}`};var go=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class pL{constructor(t,r={},n,s){const o=new URL(t);if(s!=null&&s.useNewHostname){const a=/supabase\.(co|in|red)$/.test(o.hostname),l="/storage";a&&!o.hostname.includes("storage.supabase.")&&o.pathname.startsWith(l)&&(o.pathname=o.pathname.substring(l.length),o.hostname=o.hostname.replace("supabase.","storage.supabase."))}this.url=o.href,this.headers=Object.assign(Object.assign({},mL),r),this.fetch=W1(n)}listBuckets(){return go(this,void 0,void 0,function*(){try{return{data:yield Wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}getBucket(t){return go(this,void 0,void 0,function*(){try{return{data:yield Wc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return go(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return go(this,void 0,void 0,function*(){try{return{data:yield Pf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return go(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return go(this,void 0,void 0,function*(){try{return{data:yield q1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}}class gL extends pL{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new hL(this.url,this.headers,t,this.fetch)}}const vL="2.39.0";let zi="";typeof Deno<"u"?zi="deno":typeof document<"u"?zi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zi="react-native":zi="node";const yL={"X-Client-Info":`supabase-js-${zi}/${vL}`};var xL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const wL=e=>{let t;return e?t=e:typeof fetch>"u"?t=T1:t=fetch,(...r)=>t(...r)},jL=()=>typeof Headers>"u"?P1:Headers,bL=(e,t,r)=>{const n=wL(r),s=jL();return(o,a)=>xL(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:u}))})};function SL(e){return e.replace(/\/$/,"")}function _L(e,t){const{db:r,auth:n,realtime:s,global:o}=e,{db:a,auth:l,realtime:c,global:u}=t;return{db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),o)}}const H1="2.70.0",_o=30*1e3,Af=3,Bd=Af*_o,CL="http://localhost:9999",NL="supabase.auth.token",EL={"X-Client-Info":`gotrue-js/${H1}`},Rf="X-Supabase-Api-Version",G1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TL=6e5;class Ep extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class PL extends Ep{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function AL(e){return fe(e)&&e.name==="AuthApiError"}class K1 extends Ep{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ws extends Ep{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Rn extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RL(e){return fe(e)&&e.name==="AuthSessionMissingError"}class Tl extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Pl extends ws{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Al extends ws{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function OL(e){return fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class ax extends ws{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Of extends ws{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function zd(e){return fe(e)&&e.name==="AuthRetryableFetchError"}class lx extends ws{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class la extends ws{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cx=` 	
\r=`.split(""),IL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<cx.length;t+=1)e[cx[t].charCodeAt(0)]=-2;for(let t=0;t<qc.length;t+=1)e[qc[t].charCodeAt(0)]=t;return e})();function ux(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(qc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(qc[n]),t.queuedBits-=6}}function J1(e,t,r){const n=IL[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function dx(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{DL(a,n,r)};for(let a=0;a<e.length;a+=1)J1(e.charCodeAt(a),s,o);return t.join("")}function LL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ML(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}LL(n,t)}}function DL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function $L(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)J1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function FL(e){const t=[];return ML(e,r=>t.push(r)),new Uint8Array(t)}function VL(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ux(s,r,n)),ux(null,r,n),t.join("")}function UL(e){return Math.round(Date.now()/1e3)+e}function BL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const _r=()=>typeof window<"u"&&typeof document<"u",Ps={tested:!1,writable:!1},ca=()=>{if(!_r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ps.tested)return Ps.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ps.tested=!0,Ps.writable=!0}catch{Ps.tested=!0,Ps.writable=!1}return Ps.writable};function zL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Y1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},WL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",X1=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Rl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ol=async(e,t)=>{await e.removeItem(t)};class Ru{constructor(){this.promise=new Ru.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ru.promiseConstructor=Promise;function Wd(e){const t=e.split(".");if(t.length!==3)throw new la("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!kL.test(t[n]))throw new la("JWT not in base64url format");return{header:JSON.parse(dx(t[0])),payload:JSON.parse(dx(t[1])),signature:$L(t[2]),raw:{header:t[0],payload:t[1]}}}async function qL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function HL(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){n(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function GL(e){return("0"+e.toString(16)).substr(-2)}function KL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,GL).join("")}async function JL(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function YL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await JL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vo(e,t,r=!1){const n=KL();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await X1(e,`${t}-code-verifier`,s);const o=await YL(n);return[o,n===o?"plain":"s256"]}const XL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function QL(e){const t=e.headers.get(Rf);if(!t||!t.match(XL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ZL(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function eM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yo(e){if(!tM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var rM=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),nM=[502,503,504];async function hx(e){var t;if(!WL(e))throw new Of(Ms(e),0);if(nM.includes(e.status))throw new Of(Ms(e),e.status);let r;try{r=await e.json()}catch(o){throw new K1(Ms(o),o)}let n;const s=QL(e);if(s&&s.getTime()>=G1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new lx(Ms(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Rn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new lx(Ms(r),e.status,r.weak_password.reasons);throw new PL(Ms(r),e.status||500,n)}const sM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function je(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Rf]||(o[Rf]=G1["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await oM(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function oM(e,t,r,n,s,o){const a=sM(t,n,s,o);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Of(Ms(c),0)}if(l.ok||await hx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await hx(c)}}function rn(e){var t;let r=null;cM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=UL(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function fx(e){const t=rn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Vn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function iM(e){return{data:e,error:null}}function aM(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,a=rM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function lM(e){return e}function cM(e){return e.access_token&&e.refresh_token&&e.expires_in}const qd=["global","local","others"];var uM=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class dM{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Y1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=qd[0]){if(qd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qd.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=uM(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:aM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Vn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:lM});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(w=>{const m=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);u[`${j}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){yo(t);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Vn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){yo(t);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Vn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){yo(t);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){yo(t.userId);try{const{data:r,error:n}=await je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){yo(t.userId),yo(t.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}}const hM={getItem:e=>ca()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ca()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ca()&&globalThis.localStorage.removeItem(e)}};function mx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function fM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xo={debug:!!(globalThis&&ca()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Q1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class mM extends Q1{}async function pM(e,t,r){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new mM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}fM();const gM={url:CL,storageKey:NL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:EL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function px(e,t,r){return await r()}class Da{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Da.nextInstanceID,Da.nextInstanceID+=1,this.instanceID>0&&_r()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},gM),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new dM({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Y1(s.fetch),this.lock=s.lock||px,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_r()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=pM:this.lock=px,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ca()?this.storage=hM:(this.memoryStorage={},this.storage=mx(this.memoryStorage)):(this.memoryStorage={},this.storage=mx(this.memoryStorage)),_r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${H1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=zL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),_r()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),OL(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return fe(r)?{error:r}:{error:new K1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:rn}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:d,password:h,options:f}=t;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await vo(this.storage,this.storageKey)),o=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:w},xform:rn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;o=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rn})}else throw new Pl("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:a,options:l}=t;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fx})}else if("phone"in t){const{phone:o,password:a,options:l}=t;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fx})}else throw new Pl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Tl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,a,l,c,u,d,h,f,g;let w,m;if("message"in t)w=t.message,m=t.signature;else{const{chain:j,wallet:x,statement:v,options:y}=t;let b;if(_r())if(typeof x=="object")b=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))b=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const S=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const E=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),v?{statement:v}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),m=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await b.signMessage(new TextEncoder().encode(w),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:j,error:x}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:VL(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:rn});if(x)throw x;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Tl}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:x})}catch(j){if(fe(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await Rl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:a}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:rn});if(await Ol(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Tl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(fe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:a}=t,l=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Tl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vo(this.storage,this.storageKey));const{error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Pl("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:rn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await vo(this.storage,this.storageKey)),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:iM})}catch(o){if(fe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Rn;const{error:s}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:a}=await je(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:a,error:l}=await je(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Pl("You must provide either an email or phone number and a type")}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Rl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Bd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Vn}):await this._useSession(async r=>{var n,s,o;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rn}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Vn})})}catch(r){if(fe(r))return RL(r)&&(await this._removeSession(),await Ol(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Rn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vo(this.storage,this.storageKey));const{data:u,error:d}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Vn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rn;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:a}=Wd(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Rn;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!_r())throw new Al("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Al(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ax("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Al("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ax("No code detected.");const{data:v,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!a||!u)throw new Al("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const g=f-d;g*1e3<=_o&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:m,error:j}=await this._getUser(o);if(j)throw j;const x={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Rl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(AL(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ol(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=BL(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await vo(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(fe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var a,l,c,u,d;const{data:h,error:f}=o;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _r()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(fe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)throw a;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await HL(async s=>(s>0&&await qL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rn})),(s,o)=>{const a=200*Math.pow(2,s);return o&&zd(o)&&Date.now()+a-n<_o})}catch(n){if(this._debug(r,"error",n),fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),_r()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Rl(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Bd;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Bd}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),zd(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ru;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Rn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),fe(o)){const a={session:null,error:o};return zd(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await X1(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ol(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_r()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_o);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/_o);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_o}ms, refresh threshold is ${Af} ticks`),s<=Af&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Q1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_r()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await vo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:a,error:l}=await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wd(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n||(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+TL>Date.now()))return n;const{data:s,error:o}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new la("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===t),!n)throw new la("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:g,error:w}=await this.getSession();if(w||!g.session)return{data:null,error:w};n=g.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=Wd(n);if(ZL(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:o,header:s,signature:a},error:null}}const u=eM(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,FL(`${l}.${c}`)))throw new la("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}}Da.nextInstanceID=0;class vM extends Da{constructor(t){super(t)}}var yM=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const xM={headers:yL},wM={schema:"public"},jM={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bM={};class SM{constructor(t,r,n){var s,o,a,l,c,u,d,h;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const f=SL(t);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,w={db:wM,realtime:bM,auth:Object.assign(Object.assign({},jM),{storageKey:g}),global:xM},m=_L(n??{},w);this.storageKey=(o=(s=m.auth)===null||s===void 0?void 0:s.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=(a=m.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,(u=m.global)===null||u===void 0?void 0:u.fetch),this.fetch=bL(r,this._getAccessToken.bind(this),(d=m.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new BI(`${f}/rest/v1`,{headers:this.headers,schema:(h=m.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new wI(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gL(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return yM(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new vM({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,debug:l,fetch:u})}_initRealtimeClient(t){return new nL(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _M=(e,t,r)=>new SM(e,t,r),CM="https://ovpfcyqudltassvckvxk.supabase.co",NM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im92cGZjeXF1ZGx0YXNzdmNrdnhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNzc0NTMsImV4cCI6MjA2NTg1MzQ1M30.0VVPA3XWy0nk5BQFa9e2KlFxqoMhU7MVkbBXq_q8XrM",Q=_M(CM,NM),jt={ADMIN:"admin",MANAGER:"manager",CASHIER:"cashier",STOCK:"stock",SALESPERSON:"salesperson",NONE:"none"},J={MANAGE_USERS:"manage_users",MANAGE_PRODUCTS:"manage_products",MANAGE_CATEGORIES:"manage_categories",MANAGE_STOCK:"manage_stock",MANAGE_SALES:"manage_sales",MANAGE_REPORTS:"manage_reports",VIEW_REPORTS:"view_reports",PROCESS_SALES:"process_sales",CASH_REGISTER_MANAGEMENT:"cash_register_management",MANAGE_CUSTOMERS:"manage_customers",MANAGE_FISCAL_DOCUMENTS:"manage_fiscal_documents",VIEW_ALL_STORES_DATA:"view_all_stores_data",SHARE_STOCK:"share_stock",APPLY_DISCOUNTS:"apply_discounts",CANCEL_SALES:"cancel_sales"},tc={admin:[J.MANAGE_USERS,J.MANAGE_PRODUCTS,J.MANAGE_CATEGORIES,J.MANAGE_STOCK,J.MANAGE_SALES,J.MANAGE_REPORTS,J.VIEW_REPORTS,J.PROCESS_SALES,J.CASH_REGISTER_MANAGEMENT,J.MANAGE_CUSTOMERS,J.MANAGE_FISCAL_DOCUMENTS,J.VIEW_ALL_STORES_DATA,J.SHARE_STOCK,J.APPLY_DISCOUNTS,J.CANCEL_SALES],manager:[J.MANAGE_PRODUCTS,J.MANAGE_CATEGORIES,J.MANAGE_STOCK,J.MANAGE_SALES,J.MANAGE_REPORTS,J.VIEW_REPORTS,J.PROCESS_SALES,J.CASH_REGISTER_MANAGEMENT,J.MANAGE_CUSTOMERS,J.MANAGE_FISCAL_DOCUMENTS,J.SHARE_STOCK,J.APPLY_DISCOUNTS,J.CANCEL_SALES],cashier:[J.PROCESS_SALES,J.CASH_REGISTER_MANAGEMENT,J.MANAGE_CUSTOMERS],stock:[J.MANAGE_STOCK,J.MANAGE_PRODUCTS,J.MANAGE_CATEGORIES,J.SHARE_STOCK],salesperson:[J.PROCESS_SALES],none:[]},Gt=(e,t)=>{var r;return((r=tc[e])==null?void 0:r.includes(t))||!1},it=()=>{const e=localStorage.getItem("currentUser");return e?JSON.parse(e):null},gx=e=>{localStorage.setItem("currentUser",JSON.stringify(e))},If=()=>{localStorage.removeItem("currentUser")},Z1=async()=>{try{console.log("🔄 Buscando usuários...");const e=await fetch("/api/usuarios",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Erro ao buscar usuários");const t=await e.json();console.log("👥 Usuários do backend:",t.users.length);const{data:r,error:n}=await Q.from("user_roles").select("*");if(n)return console.error("Erro ao buscar roles:",n),[];console.log("🏪 Roles encontradas:",r.length),console.log("🏪 Detalhes das roles:",r);const{data:s,error:o}=await Q.from("stores").select("*");if(o)return console.error("Erro ao buscar stores:",o),[];console.log("🏪 Stores encontradas:",s.length);const a={};return s.forEach(c=>{a[c.id]=c}),t.users.map(c=>{var f,g,w;console.log("🔍 Processando usuário:",c.id,"Nome:",((f=c.user_metadata)==null?void 0:f.name)||c.email.split("@")[0]);const u=r.find(m=>m.user_id===c.id);console.log("🔍 Role encontrada para usuário:",c.id,":",u);const d=u!=null&&u.store_id?a[u.store_id]:null;console.log("🔍 Store encontrada para usuário:",c.id,"store_id:",u==null?void 0:u.store_id,"store:",d);const h={id:c.id,username:c.email,name:((g=c.user_metadata)==null?void 0:g.name)||c.email.split("@")[0],role:u?u.role:"none",store_id:u?u.store_id:null,active:u?u.active:!0,created_at:c.created_at,stores:d};return console.log("👤 Usuário processado:",h.name,"Role:",h.role,"Loja:",((w=h.stores)==null?void 0:w.name)||"Não definida","Ativo:",h.active),h})}catch(e){return console.error("Erro ao buscar usuários:",e),[]}},EM=async(e,t)=>{var r;try{const{data:n,error:s}=await Q.auth.signInWithPassword({email:e,password:t});if(s||!(n!=null&&n.user))return console.error("[AUTH] Erro ao autenticar:",s),null;let o="none";return n.user.email==="admin@server.com"&&(o="admin"),{id:n.user.id,email:n.user.email,name:((r=n.user.user_metadata)==null?void 0:r.name)||e.split("@")[0],role:o,store_id:null,active:!0,created_at:n.user.created_at,stores:null}}catch(n){return console.error("[AUTH] Erro inesperado:",n),null}},kM=async(e,t)=>{try{const r=await fetch(`/api/usuarios/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,role:t.role,store_id:t.store_id,password:t.password||void 0})});if(!r.ok){const s=await r.json();throw console.error("❌ Erro do backend (update):",s),new Error(s.error||"Erro ao atualizar usuário")}return await r.json()}catch(r){throw console.error("❌ Erro na comunicação (update):",r),new Error(`Erro na comunicação com o backend: ${r.message}`)}},TM=async e=>{try{const t=await fetch(`/api/usuarios/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Erro ao deletar usuário")}return await t.json()}catch(t){throw new Error(`Erro na comunicação com o backend: ${t.message}`)}},js=async(e=!1)=>{let t=Q.from("stores").select("*").order("name",{ascending:!0});e&&(t=t.eq("is_online_store",!1));const{data:r,error:n}=await t;return n?[]:r},PM=async(e,t)=>{try{const r=await fetch(`/api/usuarios/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})});if(!r.ok){const s=await r.json();throw console.error("❌ Erro do backend:",s),new Error(s.error||"Erro ao alterar status do usuário")}return await r.json()}catch(r){throw console.error("❌ Erro na comunicação:",r),new Error(`Erro na comunicação com o backend: ${r.message}`)}},AM=({onLogin:e})=>{const[t,r]=p.useState(""),[n,s]=p.useState(""),[o,a]=p.useState(!1),{toast:l}=at(),c=async u=>{u.preventDefault(),console.log("[LOGIN] handleSubmit chamado"),a(!0);try{console.log("[LOGIN] Antes do authenticateUser");const d=await EM(t,n);console.log("[LOGIN] Resultado do login:",d),d?d.role==="none"?(l({title:"Acesso restrito",description:"Seu usuário ainda não possui permissão de acesso. Solicite a um administrador para atribuir uma função (role).",variant:"destructive"}),console.warn("[LOGIN] Usuário sem role, acesso bloqueado:",d)):(l({title:"Login realizado com sucesso!",description:`Bem-vindo, ${d.email}!`}),e(d)):(l({title:"Erro no login",description:"Usuário ou senha incorretos, ou usuário sem permissão ativa.",variant:"destructive"}),console.error("[LOGIN] Falha no login: usuário não encontrado ou sem permissão."))}catch(d){console.error("[LOGIN] Erro inesperado:",d),l({title:"Erro no sistema",description:"Ocorreu um problema ao tentar fazer login. Tente novamente.",variant:"destructive"})}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center gradient-bg-fdg p-4",children:i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:i.jsxs(re,{className:"glass-effect neon-glow",children:[i.jsxs(ye,{className:"text-center",children:[i.jsx("img",{src:"/images/logobranca fdg.png",alt:"Fio de Gala",className:"mx-auto mb-4 w-32 h-32 object-contain"}),i.jsx(xe,{className:"text-2xl font-bold text-white",children:"FDG System"}),i.jsx(k1,{className:"text-gray-300",children:"Faça login para acessar o sistema"})]}),i.jsxs(se,{children:[i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"email",className:"text-white",children:"E-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(q,{id:"email",type:"email",placeholder:"Digite seu e-mail",value:t,onChange:u=>r(u.target.value),className:"pl-10 bg-background/50 border-gray-600 text-white placeholder:text-gray-400",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"password",className:"text-white",children:"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(of,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(q,{id:"password",type:"password",placeholder:"Digite sua senha",value:n,onChange:u=>s(u.target.value),className:"pl-10 bg-background/50 border-gray-600 text-white placeholder:text-gray-400",required:!0})]})]}),i.jsx(D,{type:"submit",className:"w-full bg-[#3B657B] hover:bg-[#33566a] text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105",disabled:o,children:o?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Entrando..."]}):"Entrar"})]}),i.jsxs("div",{className:"mt-6 p-4 bg-background/20 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Use o e-mail cadastrado no Supabase Authentication:"}),i.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[i.jsx("div",{children:"Exemplo: admin@admin.com / sua senha"}),i.jsx("div",{children:"Exemplo: gerente@empresa.com / sua senha"})]})]})]})]})})})},RM=({onLogout:e})=>{var g;const[t,r]=p.useState(!1),n=it(),s=qm(),o=pi(),l=[{id:"pos",label:"Frente de Caixa",icon:Aa,path:"/pos",permission:J.PROCESS_SALES},{id:"products",label:"Produtos",icon:Hr,path:"/products",permission:J.MANAGE_PRODUCTS},{id:"categories",label:"Categorias",icon:uf,path:"/categories",permission:J.MANAGE_CATEGORIES},{id:"stock",label:"Estoque",icon:VT,path:"/stock",permission:J.MANAGE_STOCK},{id:"customers",label:"Clientes",icon:hn,path:"/customers",permission:J.MANAGE_PRODUCTS},{id:"customer-groups",label:"Níveis de Comprador",icon:Qj,path:"/customer-groups",permission:J.MANAGE_PRODUCTS},{id:"reports",label:"Relatórios",icon:qj,path:"/reports",permission:J.VIEW_REPORTS},{id:"users",label:"Usuários",icon:cf,path:"/users",permission:J.MANAGE_USERS},{id:"cash-register",label:"Controle de Caixa",icon:xn,path:"/cash-register",permission:J.CASH_REGISTER_MANAGEMENT},{id:"peripherals",label:"Periféricos",icon:af,path:"/peripherals",permission:J.MANAGE_USERS},{id:"interest-rates",label:"Taxas de Juros",icon:Jj,path:"/interest-rates",permission:J.MANAGE_USERS}].filter(w=>Gt(n==null?void 0:n.role,w.permission)),c=()=>{If(),e(),s("/login")},u=()=>{const w=o.pathname==="/"?"/pos":o.pathname,m=l.find(j=>j.path===w);return(m==null?void 0:m.label)||"Dashboard"};p.useEffect(()=>{const w=()=>{window.innerWidth>=1024?r(!0):r(!1)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const d={open:{x:0},closed:{x:"-100%"}},h={type:"spring",stiffness:300,damping:30},f=((g=n==null?void 0:n.stores)==null?void 0:g.name)||(Gt(n==null?void 0:n.role,J.VIEW_ALL_STORES_DATA)?"Todas as Lojas":"Loja não definida");return i.jsxs("div",{className:"min-h-screen bg-background flex",children:[i.jsx(uI,{children:t&&i.jsx(xs.div,{variants:d,initial:"closed",animate:"open",exit:"closed",transition:h,className:"fixed inset-y-0 left-0 z-50 w-64 bg-card border-r border-border shadow-lg lg:static lg:translate-x-0",children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsxs(Go,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("img",{src:"/images/logobranca fdg.png",alt:"FDG System",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-bold text-lg",children:"FDG System"})]}),i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"lg:hidden",children:i.jsx(Oa,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex-1 p-4",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Logado como:"}),i.jsx("p",{className:"font-semibold",children:n==null?void 0:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:n==null?void 0:n.role}),i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[i.jsx(Ra,{className:"w-3 h-3 mr-1"}),i.jsx("span",{children:f})]})]}),i.jsx("nav",{className:"space-y-2",children:l.map(w=>{const m=w.icon,j=o.pathname===w.path||o.pathname==="/"&&w.path==="/pos";return i.jsx(D,{variant:j?"default":"ghost",className:`w-full justify-start ${j?"bg-primary text-primary-foreground":""}`,asChild:!0,onClick:()=>{window.innerWidth<1024&&r(!1)},children:i.jsxs(Go,{to:w.path,children:[i.jsx(m,{className:"w-5 h-5 mr-3"}),w.label]})},w.id)})})]}),i.jsx("div",{className:"p-4 border-t border-border",children:i.jsxs(D,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:c,children:[i.jsx(AT,{className:"w-5 h-5 mr-3"}),"Sair"]})})]})},"sidebar")}),t&&window.innerWidth<1024&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>r(!1)}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[i.jsxs("header",{className:"bg-card border-b border-border p-4 flex items-center justify-between sticky top-0 z-30",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>r(!0),className:"lg:hidden",children:i.jsx(OT,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-xl font-semibold",children:u()}),i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[i.jsx(Ra,{className:"w-3 h-3 mr-1"}),i.jsx("span",{children:f})]})]})]}),Gt(J.MANAGE_FISCAL_DOCUMENTS)&&i.jsxs(Go,{to:"/fiscal-documents",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50 ${o.pathname==="/fiscal-documents"?"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-50":""}`,children:[i.jsx(Ta,{className:"h-4 w-4"}),"Documentos Fiscais"]})]}),i.jsx("main",{className:"flex-1 p-6 overflow-auto",children:i.jsx(Bk,{})})]})]})},OM=async()=>{var s;const e=it();let t=Q.from("stock_movements").select(`
      *,
      products (name, barcode),
      stores (name, is_online_store),
      product_store_stock (id)
    `).order("created_at",{ascending:!1});e&&e.store_id&&!((s=e.stores)!=null&&s.is_online_store)&&!Gt(e.role,J.VIEW_ALL_STORES_DATA)&&(t=t.or(`store_id.eq.${e.store_id},stock_type.eq.online`));const{data:r,error:n}=await t;return n?(console.error("Error fetching stock movements:",n),[]):r.map(o=>{var a,l;return{...o,productName:((a=o.products)==null?void 0:a.name)||"Produto Desconhecido",userName:"Usuário do Sistema",storeName:((l=o.stores)==null?void 0:l.name)||(o.stock_type==="online"?"Estoque Online":"Loja Desconhecida")}})},rc=async e=>{const t=it();let r={...e};if(r.user_id=r.user_id||(t==null?void 0:t.id),!r.store_id&&r.stock_type!=="online")r.store_id=t==null?void 0:t.store_id;else if(r.stock_type==="online"){const a=(await js()).find(l=>l.is_online_store);a&&(r.store_id=a.id)}if(!r.store_id&&r.stock_type==="physical_store"&&!Gt(t==null?void 0:t.role,J.VIEW_ALL_STORES_DATA))throw console.error("Error: store_id is required for this user to add stock movement for a physical store."),new Error("store_id é obrigatório para movimentação em loja física.");const{data:n,error:s}=await Q.from("stock_movements").insert([r]).select().single();if(s)throw console.error("Error adding stock movement:",s),s;return n},eS=async(e=!1)=>{it();let t=Q.from("products").select("*, stores(name, is_online_store)").eq("active",!0).order("name",{ascending:!0});const{data:r,error:n}=await t;if(n)return console.error("Error fetching products:",n),[];if(e&&r){for(let s of r)if(s.product_type==="variable"){const{data:o,error:a}=await Q.from("product_variations").select("*").eq("product_id",s.id);a&&console.error(`Error fetching variations for product ${s.id}:`,a),s.variations=o||[]}}return r},IM=async(e=!1)=>{console.log("🔍 getAllProducts iniciado, includeVariations:",e);let t=Q.from("products").select("*, stores(name, is_online_store)").order("name",{ascending:!0});const{data:r,error:n}=await t;if(n)return console.error("❌ Erro ao buscar todos os produtos:",n),[];if(console.log("📋 Produtos encontrados:",(r==null?void 0:r.length)||0),e&&r){for(let s of r)if(s.product_type==="variable"){const{data:o,error:a}=await Q.from("product_variations").select("*").eq("product_id",s.id);a&&console.error(`❌ Erro ao buscar variações do produto ${s.id}:`,a),s.variations=o||[]}}return console.log("✅ getAllProducts concluído"),r},LM=async e=>{console.log("🔄 addProduct iniciado com dados:",e);const t=it();console.log("👤 Usuário atual:",t);const{variations:r,...n}=e;let s={...n};if(console.log("📦 Dados principais para inserção:",s),!s.store_id){console.log("🏪 Buscando loja online...");const l=await js();console.log("🏪 Lojas disponíveis:",l);const c=l.find(u=>u.is_online_store);if(c)s.store_id=c.id,console.log("✅ Loja online associada:",c.id);else throw console.error("❌ Loja online principal não encontrada para associar o produto."),new Error("Loja online principal não encontrada.")}console.log("📝 Inserindo produto no Supabase...");const{data:o,error:a}=await Q.from("products").insert([s]).select("*, stores(name, is_online_store)").single();if(a)throw console.error("❌ Erro ao inserir produto:",a),a;if(console.log("✅ Produto inserido com sucesso:",o),o&&o.product_type==="variable"&&r&&r.length>0){console.log("🔄 Inserindo variações...");const l=r.map(u=>({...u,product_id:o.id}));console.log("📦 Variações para inserir:",l);const{error:c}=await Q.from("product_variations").insert(l);if(c)throw console.error("❌ Erro ao inserir variações:",c),await Q.from("products").delete().eq("id",o.id),c;console.log("✅ Variações inseridas com sucesso")}return console.log("🎉 Produto criado completamente:",o),o},nc=async(e,t)=>{const{variations:r,...n}=t,{data:s,error:o}=await Q.from("products").update(n).eq("id",e).select("*, stores(name, is_online_store)").single();if(o)throw console.error("Error updating product:",o),o;if(s&&s.product_type==="variable"){if(await Q.from("product_variations").delete().eq("product_id",e),r&&r.length>0){const a=r.map(c=>{const{id:u,...d}=c;return{...d,product_id:e}}),{error:l}=await Q.from("product_variations").insert(a);if(l)throw console.error("Error updating product variations:",l),l}}else s&&s.product_type==="simple"&&await Q.from("product_variations").delete().eq("product_id",e);return s},MM=async e=>{const{data:t,error:r}=await Q.from("products").select("*, stores(name, is_online_store)").eq("id",e).single();if(r||!t)return console.error("Erro ao buscar produto por ID:",r),null;if(t.product_type==="variable"){const{data:n,error:s}=await Q.from("product_variations").select("*").eq("product_id",e);s&&console.error("Erro ao buscar variações:",s),t.variations=n||[]}else t.variations=[];if(Q.from("product_images")){const{data:n,error:s}=await Q.from("product_images").select("*").eq("product_id",e);s||(t.images=n)}return t},li=async(e,t=null,r=null)=>{let n=Q.from("product_store_stock").select("*, stores(name, is_online_store), product_variations(id, attributes)").eq("product_id",e);t&&(n=n.eq("store_id",t)),r&&(n=n.eq("variation_id",r));const{data:s,error:o}=await n;return o?(console.error("Error fetching product store stock:",o),t&&r?null:[]):t&&r?s[0]||null:s},DM=async(e,t,r,n=null)=>{const s=await li(e,t,n);let o,a=s==null?void 0:s.id;if(s){o=s.quantity+r;const{error:l}=await Q.from("product_store_stock").update({quantity:o}).eq("id",s.id);if(l)throw l}else{o=r;const{data:l,error:c}=await Q.from("product_store_stock").insert({product_id:e,store_id:t,variation_id:n,quantity:o}).select("id").single();if(c)throw c;a=l==null?void 0:l.id}return await tS(e),await rc({product_id:e,variation_id:n,store_id:t,type:"transfer_in",quantity:r,previous_stock:s?s.quantity:0,new_stock:o,reason:"Compartilhamento de estoque para loja física.",stock_type:"physical_store",product_store_stock_id:a}),{success:!0}},tS=async e=>{const{data:t,error:r}=await Q.from("products").select("product_type, stock").eq("id",e).single();if(r||!t){console.error("Error fetching product for stock recalculation:",r);return}let n=0;if(t.product_type==="variable"){const{data:s,error:o}=await Q.from("product_variations").select("stock").eq("product_id",e);if(o){console.error("Error fetching variations for stock recalculation:",o);return}n=s.reduce((a,l)=>a+l.stock,0)}else{const{data:s,error:o}=await Q.from("product_store_stock").select("quantity").eq("product_id",e).is("variation_id",null);if(o){console.error("Error fetching physical stocks for simple product:",o);return}n=s.reduce((a,l)=>a+l.quantity,0)}if(t.stock!==n){const{error:s}=await Q.from("products").update({stock:n}).eq("id",e);s&&console.error("Error updating online/general stock:",s)}},$M=async e=>{await Q.from("products").delete().eq("id",e),await Q.from("product_variations").delete().eq("product_id",e),Q.from("product_images")&&await Q.from("product_images").delete().eq("product_id",e)},FM=(e,t=null,r={specificStoreId:null})=>{var o;const n=it(),s=t?`${t}.`:"";return r.specificStoreId?e.eq(`${s}store_id`,r.specificStoreId):n&&n.store_id&&!((o=n.stores)!=null&&o.is_online_store)&&!Gt(n.role,J.VIEW_ALL_STORES_DATA)?e.eq(`${s}store_id`,n.store_id):e},rS=async()=>{let e=Q.from("sales").select("*, customers(name), stores(name, is_online_store)").order("created_at",{ascending:!1});e=FM(e,"sales");const{data:t,error:r}=await e;return r?(console.error("Error fetching sales:",r),[]):t},nS=async()=>{const{data:e,error:t}=await Q.from("customers").select(`
      *,
      customer_groups (
        id,
        name,
        average_ticket
      )
    `).order("name",{ascending:!0});return t?(console.error("Error fetching customers:",t),[]):e},sS=async e=>{const{data:t,error:r}=await Q.from("customers").insert([e]).select();return r?(console.error("Error adding customer:",r),null):t?t[0]:null},VM=async(e,t)=>{const{data:r,error:n}=await Q.from("customers").update(t).eq("id",e).select();return n?(console.error("Error updating customer:",n),null):r?r[0]:null},UM=async e=>{const{error:t}=await Q.from("customers").delete().eq("id",e);return t?(console.error("Error deleting customer:",t),!1):!0},BM=async()=>{var a,l;const e=it();let t=Q.from("cash_register_logs").select("*, stores(name, is_online_store)").order("created_at",{ascending:!1}),r=null;if(e&&e.store_id&&!((a=e.stores)!=null&&a.is_online_store)&&!Gt(e.role,J.VIEW_ALL_STORES_DATA))r=e.store_id;else if(e&&((l=e.stores)!=null&&l.is_online_store))r=e.store_id;else if(e&&e.role===jt.ADMIN&&!e.store_id){const u=(await js()).find(d=>d.is_online_store);u&&(r=u.id)}if(r)t=t.eq("store_id",r);else if(!Gt(e==null?void 0:e.role,J.VIEW_ALL_STORES_DATA))return console.warn("Usuário sem loja definida e sem permissão para ver todos os caixas. Retornando caixa fechado."),{isOpen:!1,openingAmount:0,currentAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:null,store:null};const{data:n,error:s}=await t.limit(1).maybeSingle();if(s)return console.error("Error fetching current cash register state:",s),{isOpen:!1,openingAmount:0,currentAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:null,store:null};if(!n)return{isOpen:!1,openingAmount:0,currentAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:r,store:e==null?void 0:e.stores};const o=n.type!=="close";return{id:n.id,isOpen:o,openingAmount:n.type==="open"||o?n.initial_amount:0,currentAmount:n.current_amount,openedBy:o&&n.type==="open"||o?n.user_id:null,openedAt:o&&n.type==="open"||o?n.created_at:null,closedAt:n.type==="close"?n.created_at:null,store_id:n.store_id,store:n.stores}},oS="http://localhost:4000/api",Lf=async(e,t=null,r="varejo")=>{try{const n=new URLSearchParams;n.append("code",e),t&&n.append("store_id",t),r&&n.append("modalidade",r);const s=await fetch(`${oS}/sales/products/barcode/${e}?${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){const o=await s.json();throw new Error(o.error||"Erro ao buscar produto")}return await s.json()}catch(n){throw new Error(`Erro na comunicação com o backend: ${n.message}`)}},zM=async e=>{try{const t=await fetch(`${oS}/sales`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Erro ao criar venda")}return await t.json()}catch(t){throw new Error(`Erro na comunicação com o backend: ${t.message}`)}};class WM{constructor(){this.baseUrl="/api/peripherals"}async testPrinter(t){try{const r=await fetch(`${this.baseUrl}/test-printer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({printerConfig:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao testar impressora");return n}catch(r){throw console.error("Erro no teste da impressora:",r),r}}async testScanner(t){try{const r=await fetch(`${this.baseUrl}/test-scanner`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scannerConfig:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao testar scanner");return n}catch(r){throw console.error("Erro no teste do scanner:",r),r}}async scanBarcode(t){try{const r=await fetch(`${this.baseUrl}/scan-barcode`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scannerConfig:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao ler código de barras");return n}catch(r){throw console.error("Erro na leitura do código de barras:",r),r}}async printReceipt(t,r){try{const n=await fetch(`${this.baseUrl}/print-receipt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({saleData:t,printerConfig:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao imprimir recibo");return s}catch(n){throw console.error("Erro na impressão:",n),n}}async getConfig(){try{const t=await fetch(`${this.baseUrl}/config`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.error||"Erro ao obter configurações");return r.config}catch(t){throw console.error("Erro ao obter configurações:",t),t}}async saveConfig(t){try{const r=await fetch(`${this.baseUrl}/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao salvar configurações");return n}catch(r){throw console.error("Erro ao salvar configurações:",r),r}}async detectDevices(){try{const t=await fetch(`${this.baseUrl}/detect-devices`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.error||"Erro ao detectar dispositivos");return r.devices}catch(t){throw console.error("Erro ao detectar dispositivos:",t),t}}generateReceiptPreview(t){const r=new Date,n=r.toLocaleDateString("pt-BR"),s=r.toLocaleTimeString("pt-BR");return`
================================
    ${t.store_name||"LOJA"}
================================
Data: ${n}
Hora: ${s}
Venda: #${t.id}
================================
${t.items.map(o=>`${o.name}
${o.quantity}x R$ ${o.price.toFixed(2)} = R$ ${o.subtotal.toFixed(2)}`).join(`
`)}
================================
Subtotal: R$ ${t.subtotal.toFixed(2)}
Desconto: R$ ${(t.discount||0).toFixed(2)}
TOTAL: R$ ${t.total.toFixed(2)}
================================
${t.payments.map(o=>`${o.method}: R$ ${o.amount.toFixed(2)}`).join(`
`)}
================================
Obrigado pela preferência!
================================
    `.trim()}}const Dn=new WM;class qM{constructor(){this.baseUrl="/api/fiscal"}async getConfig(){try{const t=await fetch(`${this.baseUrl}/config`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.error||"Erro ao obter configurações fiscais");return r.config}catch(t){throw console.error("Erro ao obter configurações fiscais:",t),t}}async saveConfig(t){try{const r=await fetch(`${this.baseUrl}/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao salvar configurações fiscais");return n}catch(r){throw console.error("Erro ao salvar configurações fiscais:",r),r}}async generateNFe(t,r){try{const n=await fetch(`${this.baseUrl}/generate-nfe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({saleData:t,fiscalConfig:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao gerar NF-e");return s}catch(n){throw console.error("Erro ao gerar NF-e:",n),n}}async generateSAT(t,r){try{const n=await fetch(`${this.baseUrl}/generate-sat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({saleData:t,fiscalConfig:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao gerar SAT");return s}catch(n){throw console.error("Erro ao gerar SAT:",n),n}}async sendDocument(t,r){try{const n=await fetch(`${this.baseUrl}/send-document`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:t,documentType:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao enviar documento fiscal");return s}catch(n){throw console.error("Erro ao enviar documento fiscal:",n),n}}async getDocuments(t={}){try{const r=new URLSearchParams;Object.keys(t).forEach(o=>{t[o]&&r.append(o,t[o])});const n=await fetch(`${this.baseUrl}/documents?${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao obter documentos fiscais");return s.documents}catch(r){throw console.error("Erro ao obter documentos fiscais:",r),r}}async generateFiscalDocument(t){try{const r=await this.getConfig();if(r.nfe.enabled)return await this.generateNFe(t,r);if(r.sat.enabled)return await this.generateSAT(t,r);throw new Error("Nenhum sistema fiscal habilitado")}catch(r){throw console.error("Erro ao gerar documento fiscal:",r),r}}validateCNPJ(t){if(t=t.replace(/[^\d]/g,""),t.length!==14||/^(\d)\1+$/.test(t))return!1;let r=0,n=2;for(let o=11;o>=0;o--)r+=parseInt(t.charAt(o))*n,n=n===9?2:n+1;let s=11-r%11;if(s>9&&(s=0),parseInt(t.charAt(12))!==s)return!1;r=0,n=2;for(let o=12;o>=0;o--)r+=parseInt(t.charAt(o))*n,n=n===9?2:n+1;return s=11-r%11,s>9&&(s=0),parseInt(t.charAt(13))===s}formatCNPJ(t){return t.replace(/[^\d]/g,"").replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")}}const qn=new qM;class HM{async getInterestRate(){try{const{data:t,error:r}=await Q.from("interest_rates_config").select("credit_card_interest, updated_at, updated_by").order("updated_at",{ascending:!1}).limit(1).single();return r?(console.error("Erro ao buscar taxa de juros:",r),{credit_card_interest:2.99}):t||{credit_card_interest:2.99}}catch(t){return console.error("Erro ao buscar taxa de juros:",t),{credit_card_interest:2.99}}}async saveInterestRate(t){try{const{data:{user:r}}=await Q.auth.getUser();if(!r)throw new Error("Usuário não autenticado");const{data:n}=await Q.from("interest_rates_config").select("id").limit(1).single();let s;if(n){const{data:o,error:a}=await Q.from("interest_rates_config").update({credit_card_interest:t,updated_by:r.id,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(a)throw console.error("Erro ao atualizar taxa de juros:",a),a;s=o}else{const{data:o,error:a}=await Q.from("interest_rates_config").insert({credit_card_interest:t,created_by:r.id,updated_by:r.id}).select().single();if(a)throw console.error("Erro ao criar taxa de juros:",a),a;s=o}return s}catch(r){throw console.error("Erro ao salvar taxa de juros:",r),r}}async getCurrentConfigWithAudit(){try{const{data:t,error:r}=await Q.from("interest_rates_config").select(`
          credit_card_interest,
          created_at,
          updated_at,
          created_by,
          updated_by
        `).limit(1).single();return r?(console.error("Erro ao buscar configuração:",r),null):t}catch(t){return console.error("Erro ao buscar configuração:",t),null}}async canManageInterestRates(){try{const{data:{user:t}}=await Q.auth.getUser();if(!t)return!1;const{data:r,error:n}=await Q.from("user_roles").select("role").eq("user_id",t.id).in("role",["admin","manager"]).single();return n?!1:!!r}catch(t){return console.error("Erro ao verificar permissão:",t),!1}}}const Wi=new HM;var GM=Yf[" useId ".trim().toString()]||(()=>{}),KM=0;function is(e){const[t,r]=p.useState(GM());return _t(()=>{e||r(n=>n??String(KM++))},[e]),e||(t?`radix-${t}`:"")}var Hd="focusScope.autoFocusOnMount",Gd="focusScope.autoFocusOnUnmount",vx={bubbles:!1,cancelable:!0},JM="FocusScope",kp=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=yr(s),d=yr(o),h=p.useRef(null),f=Me(t,m=>c(m)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let m=function(y){if(g.paused||!l)return;const b=y.target;l.contains(b)?h.current=b:On(h.current,{select:!0})},j=function(y){if(g.paused||!l)return;const b=y.relatedTarget;b!==null&&(l.contains(b)||On(h.current,{select:!0}))},x=function(y){if(document.activeElement===document.body)for(const S of y)S.removedNodes.length>0&&On(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",j);const v=new MutationObserver(x);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",j),v.disconnect()}}},[n,l,g.paused]),p.useEffect(()=>{if(l){xx.add(g);const m=document.activeElement;if(!l.contains(m)){const x=new CustomEvent(Hd,vx);l.addEventListener(Hd,u),l.dispatchEvent(x),x.defaultPrevented||(YM(tD(iS(l)),{select:!0}),document.activeElement===m&&On(l))}return()=>{l.removeEventListener(Hd,u),setTimeout(()=>{const x=new CustomEvent(Gd,vx);l.addEventListener(Gd,d),l.dispatchEvent(x),x.defaultPrevented||On(m??document.body,{select:!0}),l.removeEventListener(Gd,d),xx.remove(g)},0)}}},[l,u,d,g]);const w=p.useCallback(m=>{if(!r&&!n||g.paused)return;const j=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(j&&x){const v=m.currentTarget,[y,b]=XM(v);y&&b?!m.shiftKey&&x===b?(m.preventDefault(),r&&On(y,{select:!0})):m.shiftKey&&x===y&&(m.preventDefault(),r&&On(b,{select:!0})):x===v&&m.preventDefault()}},[r,n,g.paused]);return i.jsx(me.div,{tabIndex:-1,...a,ref:f,onKeyDown:w})});kp.displayName=JM;function YM(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(On(n,{select:t}),document.activeElement!==r)return}function XM(e){const t=iS(e),r=yx(t,e),n=yx(t.reverse(),e);return[r,n]}function iS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function yx(e,t){for(const r of e)if(!QM(r,{upTo:t}))return r}function QM(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ZM(e){return e instanceof HTMLInputElement&&"select"in e}function On(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&ZM(e)&&t&&e.select()}}var xx=eD();function eD(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=wx(e,t),e.unshift(t)},remove(t){var r;e=wx(e,t),(r=e[0])==null||r.resume()}}}function wx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function tD(e){return e.filter(t=>t.tagName!=="A")}var Kd=0;function aS(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jx()),document.body.insertAdjacentElement("beforeend",e[1]??jx()),Kd++,()=>{Kd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Kd--}},[])}function jx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Br=function(){return Br=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Br.apply(this,arguments)};function lS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function rD(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var sc="right-scroll-bar-position",oc="width-before-scroll-bar",nD="with-scroll-bars-hidden",sD="--removed-body-scroll-bar-size";function Jd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function oD(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var iD=typeof window<"u"?p.useLayoutEffect:p.useEffect,bx=new WeakMap;function aD(e,t){var r=oD(t||null,function(n){return e.forEach(function(s){return Jd(s,n)})});return iD(function(){var n=bx.get(r);if(n){var s=new Set(n),o=new Set(e),a=r.current;s.forEach(function(l){o.has(l)||Jd(l,null)}),o.forEach(function(l){s.has(l)||Jd(l,a)})}bx.set(r,e)},[e]),r}function lD(e){return e}function cD(e,t){t===void 0&&(t=lD);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var a=t(o,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(o),a=r}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function uD(e){e===void 0&&(e={});var t=cD(null);return t.options=Br({async:!0,ssr:!1},e),t}var cS=function(e){var t=e.sideCar,r=lS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,Br({},r))};cS.isSideCarExport=!0;function dD(e,t){return e.useMedium(t),cS}var uS=uD(),Yd=function(){},Ou=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:Yd,onWheelCapture:Yd,onTouchMoveCapture:Yd}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,g=e.noRelative,w=e.noIsolation,m=e.inert,j=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,y=e.gapMode,b=lS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=aD([r,t]),N=Br(Br({},b),s);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:uS,removeScrollBar:u,shards:h,noRelative:g,noIsolation:w,inert:m,setCallbacks:o,allowPinchZoom:!!j,lockRef:r,gapMode:y}),a?p.cloneElement(p.Children.only(l),Br(Br({},N),{ref:E})):p.createElement(v,Br({},N,{className:c,ref:E}),l))});Ou.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ou.classNames={fullWidth:oc,zeroRight:sc};var Sx,hD=function(){if(Sx)return Sx;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=hD();return t&&e.setAttribute("nonce",t),e}function mD(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pD(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var gD=function(){var e=0,t=null;return{add:function(r){e==0&&(t=fD())&&(mD(t,r),pD(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},vD=function(){var e=gD();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},dS=function(){var e=vD(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},yD={left:0,top:0,right:0,gap:0},Xd=function(e){return parseInt(e||"",10)||0},xD=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Xd(r),Xd(n),Xd(s)]},wD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return yD;var t=xD(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},jD=dS(),Ko="data-scroll-locked",bD=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(nD,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ko,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(oc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(sc," .").concat(sc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(oc," .").concat(oc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ko,`] {
    `).concat(sD,": ").concat(l,`px;
  }
`)},_x=function(){var e=parseInt(document.body.getAttribute(Ko)||"0",10);return isFinite(e)?e:0},SD=function(){p.useEffect(function(){return document.body.setAttribute(Ko,(_x()+1).toString()),function(){var e=_x()-1;e<=0?document.body.removeAttribute(Ko):document.body.setAttribute(Ko,e.toString())}},[])},_D=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;SD();var o=p.useMemo(function(){return wD(s)},[s]);return p.createElement(jD,{styles:bD(o,!t,s,r?"":"!important")})},Mf=!1;if(typeof window<"u")try{var Il=Object.defineProperty({},"passive",{get:function(){return Mf=!0,!0}});window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Mf=!1}var wo=Mf?{passive:!1}:!1,CD=function(e){return e.tagName==="TEXTAREA"},hS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!CD(e)&&r[t]==="visible")},ND=function(e){return hS(e,"overflowY")},ED=function(e){return hS(e,"overflowX")},Cx=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=fS(e,n);if(s){var o=mS(e,n),a=o[1],l=o[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},kD=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},TD=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},fS=function(e,t){return e==="v"?ND(t):ED(t)},mS=function(e,t){return e==="v"?kD(t):TD(t)},PD=function(e,t){return e==="h"&&t==="rtl"?-1:1},AD=function(e,t,r,n,s){var o=PD(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,d=a>0,h=0,f=0;do{if(!l)break;var g=mS(e,l),w=g[0],m=g[1],j=g[2],x=m-j-o*w;(w||x)&&fS(e,l)&&(h+=x,f+=w);var v=l.parentNode;l=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(s&&Math.abs(h)<1||!s&&a>h)||!d&&(s&&Math.abs(f)<1||!s&&-a>f))&&(u=!0),u},Ll=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Nx=function(e){return[e.deltaX,e.deltaY]},Ex=function(e){return e&&"current"in e?e.current:e},RD=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ID=0,jo=[];function LD(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(ID++)[0],o=p.useState(dS)[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=rD([e.lockRef.current],(e.shards||[]).map(Ex),!0).filter(Boolean);return m.forEach(function(j){return j.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(m,j){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var x=Ll(m),v=r.current,y="deltaX"in m?m.deltaX:v[0]-x[0],b="deltaY"in m?m.deltaY:v[1]-x[1],S,E=m.target,N=Math.abs(y)>Math.abs(b)?"h":"v";if("touches"in m&&N==="h"&&E.type==="range")return!1;var _=Cx(N,E);if(!_)return!0;if(_?S=N:(S=N==="v"?"h":"v",_=Cx(N,E)),!_)return!1;if(!n.current&&"changedTouches"in m&&(y||b)&&(n.current=S),!S)return!0;var C=n.current||S;return AD(C,j,m,C==="h"?y:b,!0)},[]),c=p.useCallback(function(m){var j=m;if(!(!jo.length||jo[jo.length-1]!==o)){var x="deltaY"in j?Nx(j):Ll(j),v=t.current.filter(function(S){return S.name===j.type&&(S.target===j.target||j.target===S.shadowParent)&&RD(S.delta,x)})[0];if(v&&v.should){j.cancelable&&j.preventDefault();return}if(!v){var y=(a.current.shards||[]).map(Ex).filter(Boolean).filter(function(S){return S.contains(j.target)}),b=y.length>0?l(j,y[0]):!a.current.noIsolation;b&&j.cancelable&&j.preventDefault()}}},[]),u=p.useCallback(function(m,j,x,v){var y={name:m,delta:j,target:x,should:v,shadowParent:MD(x)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(b){return b!==y})},1)},[]),d=p.useCallback(function(m){r.current=Ll(m),n.current=void 0},[]),h=p.useCallback(function(m){u(m.type,Nx(m),m.target,l(m,e.lockRef.current))},[]),f=p.useCallback(function(m){u(m.type,Ll(m),m.target,l(m,e.lockRef.current))},[]);p.useEffect(function(){return jo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,wo),document.addEventListener("touchmove",c,wo),document.addEventListener("touchstart",d,wo),function(){jo=jo.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,wo),document.removeEventListener("touchmove",c,wo),document.removeEventListener("touchstart",d,wo)}},[]);var g=e.removeScrollBar,w=e.inert;return p.createElement(p.Fragment,null,w?p.createElement(o,{styles:OD(s)}):null,g?p.createElement(_D,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function MD(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const DD=dD(uS,LD);var pS=p.forwardRef(function(e,t){return p.createElement(Ou,Br({},e,{ref:t,sideCar:DD}))});pS.classNames=Ou.classNames;const gS=pS;var $D=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bo=new WeakMap,Ml=new WeakMap,Dl={},Qd=0,vS=function(e){return e&&(e.host||vS(e.parentNode))},FD=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=vS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},VD=function(e,t,r,n){var s=FD(t,Array.isArray(e)?e:[e]);Dl[r]||(Dl[r]=new WeakMap);var o=Dl[r],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var g=f.getAttribute(n),w=g!==null&&g!=="false",m=(bo.get(f)||0)+1,j=(o.get(f)||0)+1;bo.set(f,m),o.set(f,j),a.push(f),m===1&&w&&Ml.set(f,!0),j===1&&f.setAttribute(r,"true"),w||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(t),l.clear(),Qd++,function(){a.forEach(function(h){var f=bo.get(h)-1,g=o.get(h)-1;bo.set(h,f),o.set(h,g),f||(Ml.has(h)||h.removeAttribute(n),Ml.delete(h)),g||h.removeAttribute(r)}),Qd--,Qd||(bo=new WeakMap,bo=new WeakMap,Ml=new WeakMap,Dl={})}},yS=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=t||$D(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),VD(n,s,r,"aria-hidden")):function(){return null}},Iu="Dialog",[xS,P3]=vs(Iu),[UD,Mr]=xS(Iu),wS=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Qs({prop:n,defaultProp:s??!1,onChange:o,caller:Iu});return i.jsx(UD,{scope:t,triggerRef:l,contentRef:c,contentId:is(),titleId:is(),descriptionId:is(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:a,children:r})};wS.displayName=Iu;var jS="DialogTrigger",bS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(jS,r),o=Me(t,s.triggerRef);return i.jsx(me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Ap(s.open),...n,ref:o,onClick:ce(e.onClick,s.onOpenToggle)})});bS.displayName=jS;var Tp="DialogPortal",[BD,SS]=xS(Tp,{forceMount:void 0}),_S=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=Mr(Tp,t);return i.jsx(BD,{scope:t,forceMount:r,children:p.Children.map(n,a=>i.jsx(gi,{present:r||o.open,children:i.jsx(gu,{asChild:!0,container:s,children:a})}))})};_S.displayName=Tp;var Hc="DialogOverlay",CS=p.forwardRef((e,t)=>{const r=SS(Hc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Mr(Hc,e.__scopeDialog);return o.modal?i.jsx(gi,{present:n||o.open,children:i.jsx(WD,{...s,ref:t})}):null});CS.displayName=Hc;var zD=si("DialogOverlay.RemoveScroll"),WD=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(Hc,r);return i.jsx(gS,{as:zD,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(me.div,{"data-state":Ap(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Zs="DialogContent",NS=p.forwardRef((e,t)=>{const r=SS(Zs,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Mr(Zs,e.__scopeDialog);return i.jsx(gi,{present:n||o.open,children:o.modal?i.jsx(qD,{...s,ref:t}):i.jsx(HD,{...s,ref:t})})});NS.displayName=Zs;var qD=p.forwardRef((e,t)=>{const r=Mr(Zs,e.__scopeDialog),n=p.useRef(null),s=Me(t,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return yS(o)},[]),i.jsx(ES,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ce(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:ce(e.onFocusOutside,o=>o.preventDefault())})}),HD=p.forwardRef((e,t)=>{const r=Mr(Zs,e.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(ES,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),ES=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=Mr(Zs,r),c=p.useRef(null),u=Me(t,c);return aS(),i.jsxs(i.Fragment,{children:[i.jsx(kp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(pu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Ap(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(GD,{titleId:l.titleId}),i.jsx(JD,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Pp="DialogTitle",kS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(Pp,r);return i.jsx(me.h2,{id:s.titleId,...n,ref:t})});kS.displayName=Pp;var TS="DialogDescription",PS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(TS,r);return i.jsx(me.p,{id:s.descriptionId,...n,ref:t})});PS.displayName=TS;var AS="DialogClose",RS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(AS,r);return i.jsx(me.button,{type:"button",...n,ref:t,onClick:ce(e.onClick,()=>s.onOpenChange(!1))})});RS.displayName=AS;function Ap(e){return e?"open":"closed"}var OS="DialogTitleWarning",[A3,IS]=T2(OS,{contentName:Zs,titleName:Pp,docsSlug:"dialog"}),GD=({titleId:e})=>{const t=IS(OS),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},KD="DialogDescriptionWarning",JD=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IS(KD).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},YD=wS,XD=bS,QD=_S,LS=CS,MS=NS,DS=kS,$S=PS,ZD=RS;const mr=YD,Jo=XD,e4=QD,FS=ue.forwardRef(({className:e,...t},r)=>i.jsx(LS,{ref:r,className:Ce("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));FS.displayName=LS.displayName;const Zt=ue.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(e4,{children:[i.jsx(FS,{}),i.jsxs(MS,{ref:n,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(ZD,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Oa,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zt.displayName=MS.displayName;const er=({className:e,...t})=>i.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});er.displayName="DialogHeader";const tr=ue.forwardRef(({className:e,...t},r)=>i.jsx(DS,{ref:r,className:Ce("text-lg font-semibold leading-none tracking-tight",e),...t}));tr.displayName=DS.displayName;const VS=ue.forwardRef(({className:e,...t},r)=>i.jsx($S,{ref:r,className:Ce("text-sm text-muted-foreground",e),...t}));VS.displayName=$S.displayName;function kx(e,[t,r]){return Math.min(r,Math.max(t,e))}var t4=p.createContext(void 0);function Rp(e){const t=p.useContext(t4);return e||t||"ltr"}const r4=["top","right","bottom","left"],ds=Math.min,Yt=Math.max,Gc=Math.round,$l=Math.floor,Kr=e=>({x:e,y:e}),n4={left:"right",right:"left",bottom:"top",top:"bottom"},s4={start:"end",end:"start"};function Df(e,t,r){return Yt(e,ds(t,r))}function jn(e,t){return typeof e=="function"?e(t):e}function bn(e){return e.split("-")[0]}function xi(e){return e.split("-")[1]}function Op(e){return e==="x"?"y":"x"}function Ip(e){return e==="y"?"height":"width"}const o4=new Set(["top","bottom"]);function zr(e){return o4.has(bn(e))?"y":"x"}function Lp(e){return Op(zr(e))}function i4(e,t,r){r===void 0&&(r=!1);const n=xi(e),s=Lp(e),o=Ip(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Kc(a)),[a,Kc(a)]}function a4(e){const t=Kc(e);return[$f(e),t,$f(t)]}function $f(e){return e.replace(/start|end/g,t=>s4[t])}const Tx=["left","right"],Px=["right","left"],l4=["top","bottom"],c4=["bottom","top"];function u4(e,t,r){switch(e){case"top":case"bottom":return r?t?Px:Tx:t?Tx:Px;case"left":case"right":return t?l4:c4;default:return[]}}function d4(e,t,r,n){const s=xi(e);let o=u4(bn(e),r==="start",n);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map($f)))),o}function Kc(e){return e.replace(/left|right|bottom|top/g,t=>n4[t])}function h4(e){return{top:0,right:0,bottom:0,left:0,...e}}function US(e){return typeof e!="number"?h4(e):{top:e,right:e,bottom:e,left:e}}function Jc(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Ax(e,t,r){let{reference:n,floating:s}=e;const o=zr(t),a=Lp(t),l=Ip(a),c=bn(t),u=o==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-s.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-s.width,y:h};break;default:g={x:n.x,y:n.y}}switch(xi(t)){case"start":g[a]-=f*(r&&u?-1:1);break;case"end":g[a]+=f*(r&&u?-1:1);break}return g}const f4=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Ax(u,n,c),f=n,g={},w=0;for(let m=0;m<l.length;m++){const{name:j,fn:x}=l[m],{x:v,y,data:b,reset:S}=await x({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:e,floating:t}});d=v??d,h=y??h,g={...g,[j]:{...g[j],...b}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:h}=Ax(u,f,c)),m=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:g}};async function $a(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:g=0}=jn(t,e),w=US(g),j=l[f?h==="floating"?"reference":"floating":h],x=Jc(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(j)))==null||r?j:j.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},S=Jc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:y,strategy:c}):v);return{top:(x.top-S.top+w.top)/b.y,bottom:(S.bottom-x.bottom+w.bottom)/b.y,left:(x.left-S.left+w.left)/b.x,right:(S.right-x.right+w.right)/b.x}}const m4=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=jn(e,t)||{};if(u==null)return{};const h=US(d),f={x:r,y:n},g=Lp(s),w=Ip(g),m=await a.getDimensions(u),j=g==="y",x=j?"top":"left",v=j?"bottom":"right",y=j?"clientHeight":"clientWidth",b=o.reference[w]+o.reference[g]-f[g]-o.floating[w],S=f[g]-o.reference[g],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=E?E[y]:0;(!N||!await(a.isElement==null?void 0:a.isElement(E)))&&(N=l.floating[y]||o.floating[w]);const _=b/2-S/2,C=N/2-m[w]/2-1,I=ds(h[x],C),R=ds(h[v],C),O=I,z=N-m[w]-R,k=N/2-m[w]/2+_,$=Df(O,k,z),F=!c.arrow&&xi(s)!=null&&k!==$&&o.reference[w]/2-(k<O?I:R)-m[w]/2<0,A=F?k<O?k-O:k-z:0;return{[g]:f[g]+A,data:{[g]:$,centerOffset:k-$-A,...F&&{alignmentOffset:A}},reset:F}}}),p4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:m=!0,...j}=jn(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const x=bn(s),v=zr(l),y=bn(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=f||(y||!m?[Kc(l)]:a4(l)),E=w!=="none";!f&&E&&S.push(...d4(l,m,w,b));const N=[l,...S],_=await $a(t,j),C=[];let I=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&C.push(_[x]),h){const k=i4(s,a,b);C.push(_[k[0]],_[k[1]])}if(I=[...I,{placement:s,overflows:C}],!C.every(k=>k<=0)){var R,O;const k=(((R=o.flip)==null?void 0:R.index)||0)+1,$=N[k];if($&&(!(h==="alignment"?v!==zr($):!1)||I.every(T=>T.overflows[0]>0&&zr(T.placement)===v)))return{data:{index:k,overflows:I},reset:{placement:$}};let F=(O=I.filter(A=>A.overflows[0]<=0).sort((A,T)=>A.overflows[1]-T.overflows[1])[0])==null?void 0:O.placement;if(!F)switch(g){case"bestFit":{var z;const A=(z=I.filter(T=>{if(E){const P=zr(T.placement);return P===v||P==="y"}return!0}).map(T=>[T.placement,T.overflows.filter(P=>P>0).reduce((P,U)=>P+U,0)]).sort((T,P)=>T[1]-P[1])[0])==null?void 0:z[0];A&&(F=A);break}case"initialPlacement":F=l;break}if(s!==F)return{reset:{placement:F}}}return{}}}};function Rx(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ox(e){return r4.some(t=>e[t]>=0)}const g4=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=jn(e,t);switch(n){case"referenceHidden":{const o=await $a(t,{...s,elementContext:"reference"}),a=Rx(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Ox(a)}}}case"escaped":{const o=await $a(t,{...s,altBoundary:!0}),a=Rx(o,r.floating);return{data:{escapedOffsets:a,escaped:Ox(a)}}}default:return{}}}}},BS=new Set(["left","top"]);async function v4(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=bn(r),l=xi(r),c=zr(r)==="y",u=BS.has(a)?-1:1,d=o&&c?-1:1,h=jn(t,e);let{mainAxis:f,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*d,y:f*u}:{x:f*u,y:g*d}}const y4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await v4(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},x4=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:j=>{let{x,y:v}=j;return{x,y:v}}},...c}=jn(e,t),u={x:r,y:n},d=await $a(t,c),h=zr(bn(s)),f=Op(h);let g=u[f],w=u[h];if(o){const j=f==="y"?"top":"left",x=f==="y"?"bottom":"right",v=g+d[j],y=g-d[x];g=Df(v,g,y)}if(a){const j=h==="y"?"top":"left",x=h==="y"?"bottom":"right",v=w+d[j],y=w-d[x];w=Df(v,w,y)}const m=l.fn({...t,[f]:g,[h]:w});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:o,[h]:a}}}}}},w4=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=jn(e,t),d={x:r,y:n},h=zr(s),f=Op(h);let g=d[f],w=d[h];const m=jn(l,t),j=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const y=f==="y"?"height":"width",b=o.reference[f]-o.floating[y]+j.mainAxis,S=o.reference[f]+o.reference[y]-j.mainAxis;g<b?g=b:g>S&&(g=S)}if(u){var x,v;const y=f==="y"?"width":"height",b=BS.has(bn(s)),S=o.reference[h]-o.floating[y]+(b&&((x=a.offset)==null?void 0:x[h])||0)+(b?0:j.crossAxis),E=o.reference[h]+o.reference[y]+(b?0:((v=a.offset)==null?void 0:v[h])||0)-(b?j.crossAxis:0);w<S?w=S:w>E&&(w=E)}return{[f]:g,[h]:w}}}},j4=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=jn(e,t),d=await $a(t,u),h=bn(s),f=xi(s),g=zr(s)==="y",{width:w,height:m}=o.floating;let j,x;h==="top"||h==="bottom"?(j=h,x=f===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,j=f==="end"?"top":"bottom");const v=m-d.top-d.bottom,y=w-d.left-d.right,b=ds(m-d[j],v),S=ds(w-d[x],y),E=!t.middlewareData.shift;let N=b,_=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(_=y),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=v),E&&!f){const I=Yt(d.left,0),R=Yt(d.right,0),O=Yt(d.top,0),z=Yt(d.bottom,0);g?_=w-2*(I!==0||R!==0?I+R:Yt(d.left,d.right)):N=m-2*(O!==0||z!==0?O+z:Yt(d.top,d.bottom))}await c({...t,availableWidth:_,availableHeight:N});const C=await a.getDimensions(l.floating);return w!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function Lu(){return typeof window<"u"}function wi(e){return zS(e)?(e.nodeName||"").toLowerCase():"#document"}function rr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xr(e){var t;return(t=(zS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zS(e){return Lu()?e instanceof Node||e instanceof rr(e).Node:!1}function Ir(e){return Lu()?e instanceof Element||e instanceof rr(e).Element:!1}function Jr(e){return Lu()?e instanceof HTMLElement||e instanceof rr(e).HTMLElement:!1}function Ix(e){return!Lu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rr(e).ShadowRoot}const b4=new Set(["inline","contents"]);function Za(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Lr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!b4.has(s)}const S4=new Set(["table","td","th"]);function _4(e){return S4.has(wi(e))}const C4=[":popover-open",":modal"];function Mu(e){return C4.some(t=>{try{return e.matches(t)}catch{return!1}})}const N4=["transform","translate","scale","rotate","perspective"],E4=["transform","translate","scale","rotate","perspective","filter"],k4=["paint","layout","strict","content"];function Mp(e){const t=Dp(),r=Ir(e)?Lr(e):e;return N4.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||E4.some(n=>(r.willChange||"").includes(n))||k4.some(n=>(r.contain||"").includes(n))}function T4(e){let t=hs(e);for(;Jr(t)&&!ci(t);){if(Mp(t))return t;if(Mu(t))return null;t=hs(t)}return null}function Dp(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const P4=new Set(["html","body","#document"]);function ci(e){return P4.has(wi(e))}function Lr(e){return rr(e).getComputedStyle(e)}function Du(e){return Ir(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hs(e){if(wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ix(e)&&e.host||Xr(e);return Ix(t)?t.host:t}function WS(e){const t=hs(e);return ci(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jr(t)&&Za(t)?t:WS(t)}function Fa(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=WS(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=rr(s);if(o){const l=Ff(a);return t.concat(a,a.visualViewport||[],Za(s)?s:[],l&&r?Fa(l):[])}return t.concat(s,Fa(s,[],r))}function Ff(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qS(e){const t=Lr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Jr(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Gc(r)!==o||Gc(n)!==a;return l&&(r=o,n=a),{width:r,height:n,$:l}}function $p(e){return Ir(e)?e:e.contextElement}function Yo(e){const t=$p(e);if(!Jr(t))return Kr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=qS(t);let a=(o?Gc(r.width):r.width)/n,l=(o?Gc(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const A4=Kr(0);function HS(e){const t=rr(e);return!Dp()||!t.visualViewport?A4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function R4(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==rr(e)?!1:t}function eo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=$p(e);let a=Kr(1);t&&(n?Ir(n)&&(a=Yo(n)):a=Yo(e));const l=R4(o,r,n)?HS(o):Kr(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(o){const f=rr(o),g=n&&Ir(n)?rr(n):n;let w=f,m=Ff(w);for(;m&&n&&g!==w;){const j=Yo(m),x=m.getBoundingClientRect(),v=Lr(m),y=x.left+(m.clientLeft+parseFloat(v.paddingLeft))*j.x,b=x.top+(m.clientTop+parseFloat(v.paddingTop))*j.y;c*=j.x,u*=j.y,d*=j.x,h*=j.y,c+=y,u+=b,w=rr(m),m=Ff(w)}}return Jc({width:d,height:h,x:c,y:u})}function Fp(e,t){const r=Du(e).scrollLeft;return t?t.left+r:eo(Xr(e)).left+r}function GS(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Fp(e,n)),o=n.top+t.scrollTop;return{x:s,y:o}}function O4(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",a=Xr(n),l=t?Mu(t.floating):!1;if(n===a||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=Kr(1);const d=Kr(0),h=Jr(n);if((h||!h&&!o)&&((wi(n)!=="body"||Za(a))&&(c=Du(n)),Jr(n))){const g=eo(n);u=Yo(n),d.x=g.x+n.clientLeft,d.y=g.y+n.clientTop}const f=a&&!h&&!o?GS(a,c,!0):Kr(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function I4(e){return Array.from(e.getClientRects())}function L4(e){const t=Xr(e),r=Du(e),n=e.ownerDocument.body,s=Yt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Yt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Fp(e);const l=-r.scrollTop;return Lr(n).direction==="rtl"&&(a+=Yt(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:l}}function M4(e,t){const r=rr(e),n=Xr(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=Dp();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}const D4=new Set(["absolute","fixed"]);function $4(e,t){const r=eo(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=Jr(e)?Yo(e):Kr(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:a,height:l,x:c,y:u}}function Lx(e,t,r){let n;if(t==="viewport")n=M4(e,r);else if(t==="document")n=L4(Xr(e));else if(Ir(t))n=$4(t,r);else{const s=HS(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Jc(n)}function KS(e,t){const r=hs(e);return r===t||!Ir(r)||ci(r)?!1:Lr(r).position==="fixed"||KS(r,t)}function F4(e,t){const r=t.get(e);if(r)return r;let n=Fa(e,[],!1).filter(l=>Ir(l)&&wi(l)!=="body"),s=null;const o=Lr(e).position==="fixed";let a=o?hs(e):e;for(;Ir(a)&&!ci(a);){const l=Lr(a),c=Mp(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&D4.has(s.position)||Za(a)&&!c&&KS(e,a))?n=n.filter(d=>d!==a):s=l,a=hs(a)}return t.set(e,n),n}function V4(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?Mu(t)?[]:F4(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const h=Lx(t,d,s);return u.top=Yt(h.top,u.top),u.right=ds(h.right,u.right),u.bottom=ds(h.bottom,u.bottom),u.left=Yt(h.left,u.left),u},Lx(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function U4(e){const{width:t,height:r}=qS(e);return{width:t,height:r}}function B4(e,t,r){const n=Jr(t),s=Xr(t),o=r==="fixed",a=eo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Kr(0);function u(){c.x=Fp(s)}if(n||!n&&!o)if((wi(t)!=="body"||Za(s))&&(l=Du(t)),n){const g=eo(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?GS(s,l):Kr(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function Zd(e){return Lr(e).position==="static"}function Mx(e,t){if(!Jr(e)||Lr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Xr(e)===r&&(r=r.ownerDocument.body),r}function JS(e,t){const r=rr(e);if(Mu(e))return r;if(!Jr(e)){let s=hs(e);for(;s&&!ci(s);){if(Ir(s)&&!Zd(s))return s;s=hs(s)}return r}let n=Mx(e,t);for(;n&&_4(n)&&Zd(n);)n=Mx(n,t);return n&&ci(n)&&Zd(n)&&!Mp(n)?r:n||T4(e)||r}const z4=async function(e){const t=this.getOffsetParent||JS,r=this.getDimensions,n=await r(e.floating);return{reference:B4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function W4(e){return Lr(e).direction==="rtl"}const q4={convertOffsetParentRelativeRectToViewportRelativeRect:O4,getDocumentElement:Xr,getClippingRect:V4,getOffsetParent:JS,getElementRects:z4,getClientRects:I4,getDimensions:U4,getScale:Yo,isElement:Ir,isRTL:W4};function YS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function H4(e,t){let r=null,n;const s=Xr(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:g}=u;if(l||t(),!f||!g)return;const w=$l(h),m=$l(s.clientWidth-(d+f)),j=$l(s.clientHeight-(h+g)),x=$l(d),y={rootMargin:-w+"px "+-m+"px "+-j+"px "+-x+"px",threshold:Yt(0,ds(1,c))||1};let b=!0;function S(E){const N=E[0].intersectionRatio;if(N!==c){if(!b)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!YS(u,e.getBoundingClientRect())&&a(),b=!1}try{r=new IntersectionObserver(S,{...y,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,y)}r.observe(e)}return a(!0),o}function G4(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=$p(e),d=s||o?[...u?Fa(u):[],...Fa(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),o&&x.addEventListener("resize",r)});const h=u&&l?H4(u,r):null;let f=-1,g=null;a&&(g=new ResizeObserver(x=>{let[v]=x;v&&v.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=g)==null||y.observe(t)})),r()}),u&&!c&&g.observe(u),g.observe(t));let w,m=c?eo(e):null;c&&j();function j(){const x=eo(e);m&&!YS(m,x)&&r(),m=x,w=requestAnimationFrame(j)}return r(),()=>{var x;d.forEach(v=>{s&&v.removeEventListener("scroll",r),o&&v.removeEventListener("resize",r)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const K4=y4,J4=x4,Y4=p4,X4=j4,Q4=g4,Dx=m4,Z4=w4,e$=(e,t,r)=>{const n=new Map,s={platform:q4,...r},o={...s.platform,_c:n};return f4(e,t,{...s,platform:o})};var t$=typeof document<"u",r$=function(){},ic=t$?p.useLayoutEffect:r$;function Yc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Yc(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Yc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function XS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $x(e,t){const r=XS(e);return Math.round(t*r)/r}function eh(e){const t=p.useRef(e);return ic(()=>{t.current=e}),t}function n$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,g]=p.useState(n);Yc(f,n)||g(n);const[w,m]=p.useState(null),[j,x]=p.useState(null),v=p.useCallback(T=>{T!==E.current&&(E.current=T,m(T))},[]),y=p.useCallback(T=>{T!==N.current&&(N.current=T,x(T))},[]),b=o||w,S=a||j,E=p.useRef(null),N=p.useRef(null),_=p.useRef(d),C=c!=null,I=eh(c),R=eh(s),O=eh(u),z=p.useCallback(()=>{if(!E.current||!N.current)return;const T={placement:t,strategy:r,middleware:f};R.current&&(T.platform=R.current),e$(E.current,N.current,T).then(P=>{const U={...P,isPositioned:O.current!==!1};k.current&&!Yc(_.current,U)&&(_.current=U,oo.flushSync(()=>{h(U)}))})},[f,t,r,R,O]);ic(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const k=p.useRef(!1);ic(()=>(k.current=!0,()=>{k.current=!1}),[]),ic(()=>{if(b&&(E.current=b),S&&(N.current=S),b&&S){if(I.current)return I.current(b,S,z);z()}},[b,S,z,I,C]);const $=p.useMemo(()=>({reference:E,floating:N,setReference:v,setFloating:y}),[v,y]),F=p.useMemo(()=>({reference:b,floating:S}),[b,S]),A=p.useMemo(()=>{const T={position:r,left:0,top:0};if(!F.floating)return T;const P=$x(F.floating,d.x),U=$x(F.floating,d.y);return l?{...T,transform:"translate("+P+"px, "+U+"px)",...XS(F.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:P,top:U}},[r,l,F.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:z,refs:$,elements:F,floatingStyles:A}),[d,z,$,F,A])}const s$=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?Dx({element:n.current,padding:s}).fn(r):{}:n?Dx({element:n,padding:s}).fn(r):{}}}},o$=(e,t)=>({...K4(e),options:[e,t]}),i$=(e,t)=>({...J4(e),options:[e,t]}),a$=(e,t)=>({...Z4(e),options:[e,t]}),l$=(e,t)=>({...Y4(e),options:[e,t]}),c$=(e,t)=>({...X4(e),options:[e,t]}),u$=(e,t)=>({...Q4(e),options:[e,t]}),d$=(e,t)=>({...s$(e),options:[e,t]});var h$="Arrow",QS=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return i.jsx(me.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});QS.displayName=h$;var f$=QS;function ZS(e){const[t,r]=p.useState(void 0);return _t(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Vp="Popper",[e_,t_]=vs(Vp),[m$,r_]=e_(Vp),n_=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return i.jsx(m$,{scope:t,anchor:n,onAnchorChange:s,children:r})};n_.displayName=Vp;var s_="PopperAnchor",o_=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=r_(s_,r),a=p.useRef(null),l=Me(t,a);return p.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:i.jsx(me.div,{...s,ref:l})});o_.displayName=s_;var Up="PopperContent",[p$,g$]=e_(Up),i_=p.forwardRef((e,t)=>{var Y,X,Ee,B,ie,we;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:w,...m}=e,j=r_(Up,r),[x,v]=p.useState(null),y=Me(t,lt=>v(lt)),[b,S]=p.useState(null),E=ZS(b),N=(E==null?void 0:E.width)??0,_=(E==null?void 0:E.height)??0,C=n+(o!=="center"?"-"+o:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},R=Array.isArray(u)?u:[u],O=R.length>0,z={padding:I,boundary:R.filter(y$),altBoundary:O},{refs:k,floatingStyles:$,placement:F,isPositioned:A,middlewareData:T}=n$({strategy:"fixed",placement:C,whileElementsMounted:(...lt)=>G4(...lt,{animationFrame:g==="always"}),elements:{reference:j.anchor},middleware:[o$({mainAxis:s+_,alignmentAxis:a}),c&&i$({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?a$():void 0,...z}),c&&l$({...z}),c$({...z,apply:({elements:lt,rects:Ct,availableWidth:Dr,availableHeight:xr})=>{const{width:wr,height:_n}=Ct.reference,Cn=lt.floating.style;Cn.setProperty("--radix-popper-available-width",`${Dr}px`),Cn.setProperty("--radix-popper-available-height",`${xr}px`),Cn.setProperty("--radix-popper-anchor-width",`${wr}px`),Cn.setProperty("--radix-popper-anchor-height",`${_n}px`)}}),b&&d$({element:b,padding:l}),x$({arrowWidth:N,arrowHeight:_}),f&&u$({strategy:"referenceHidden",...z})]}),[P,U]=c_(F),L=yr(w);_t(()=>{A&&(L==null||L())},[A,L]);const H=(Y=T.arrow)==null?void 0:Y.x,oe=(X=T.arrow)==null?void 0:X.y,de=((Ee=T.arrow)==null?void 0:Ee.centerOffset)!==0,[Ne,ae]=p.useState();return _t(()=>{x&&ae(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:A?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(B=T.transformOrigin)==null?void 0:B.x,(ie=T.transformOrigin)==null?void 0:ie.y].join(" "),...((we=T.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(p$,{scope:r,placedSide:P,onArrowChange:S,arrowX:H,arrowY:oe,shouldHideArrow:de,children:i.jsx(me.div,{"data-side":P,"data-align":U,...m,ref:y,style:{...m.style,animation:A?void 0:"none"}})})})});i_.displayName=Up;var a_="PopperArrow",v$={top:"bottom",right:"left",bottom:"top",left:"right"},l_=p.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=g$(a_,n),a=v$[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(f$,{...s,ref:r,style:{...s.style,display:"block"}})})});l_.displayName=a_;function y$(e){return e!==null}var x$=e=>({name:"transformOrigin",options:e,fn(t){var j,x,v;const{placement:r,rects:n,middlewareData:s}=t,a=((j=s.arrow)==null?void 0:j.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=c_(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let w="",m="";return u==="bottom"?(w=a?h:`${f}px`,m=`${-c}px`):u==="top"?(w=a?h:`${f}px`,m=`${n.floating.height+c}px`):u==="right"?(w=`${-c}px`,m=a?h:`${g}px`):u==="left"&&(w=`${n.floating.width+c}px`,m=a?h:`${g}px`),{data:{x:w,y:m}}}});function c_(e){const[t,r="center"]=e.split("-");return[t,r]}var w$=n_,j$=o_,b$=i_,S$=l_;function u_(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var _$=[" ","Enter","ArrowUp","ArrowDown"],C$=[" ","Enter"],to="Select",[$u,Fu,N$]=Gm(to),[ji,R3]=vs(to,[N$,t_]),Vu=t_(),[E$,bs]=ji(to),[k$,T$]=ji(to),d_=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:g,form:w}=e,m=Vu(t),[j,x]=p.useState(null),[v,y]=p.useState(null),[b,S]=p.useState(!1),E=Rp(u),[N,_]=Qs({prop:n,defaultProp:s??!1,onChange:o,caller:to}),[C,I]=Qs({prop:a,defaultProp:l,onChange:c,caller:to}),R=p.useRef(null),O=j?w||!!j.closest("form"):!0,[z,k]=p.useState(new Set),$=Array.from(z).map(F=>F.props.value).join(";");return i.jsx(w$,{...m,children:i.jsxs(E$,{required:g,scope:t,trigger:j,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:is(),value:C,onValueChange:I,open:N,onOpenChange:_,dir:E,triggerPointerDownPosRef:R,disabled:f,children:[i.jsx($u.Provider,{scope:t,children:i.jsx(k$,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(F=>{k(A=>new Set(A).add(F))},[]),onNativeOptionRemove:p.useCallback(F=>{k(A=>{const T=new Set(A);return T.delete(F),T})},[]),children:r})}),O?i.jsxs(L_,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:F=>I(F.target.value),disabled:f,form:w,children:[C===void 0?i.jsx("option",{value:""}):null,Array.from(z)]},$):null]})})};d_.displayName=to;var h_="SelectTrigger",f_=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=Vu(r),a=bs(h_,r),l=a.disabled||n,c=Me(t,a.onTriggerChange),u=Fu(r),d=p.useRef("touch"),[h,f,g]=D_(m=>{const j=u().filter(y=>!y.disabled),x=j.find(y=>y.value===a.value),v=$_(j,m,x);v!==void 0&&a.onValueChange(v.value)}),w=m=>{l||(a.onOpenChange(!0),g()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return i.jsx(j$,{asChild:!0,...o,children:i.jsx(me.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":M_(a.value)?"":void 0,...s,ref:c,onClick:ce(s.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&w(m)}),onPointerDown:ce(s.onPointerDown,m=>{d.current=m.pointerType;const j=m.target;j.hasPointerCapture(m.pointerId)&&j.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(w(m),m.preventDefault())}),onKeyDown:ce(s.onKeyDown,m=>{const j=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(j&&m.key===" ")&&_$.includes(m.key)&&(w(),m.preventDefault())})})})});f_.displayName=h_;var m_="SelectValue",p_=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:a="",...l}=e,c=bs(m_,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Me(t,c.onValueNodeChange);return _t(()=>{u(d)},[u,d]),i.jsx(me.span,{...l,ref:h,style:{pointerEvents:"none"},children:M_(c.value)?i.jsx(i.Fragment,{children:a}):o})});p_.displayName=m_;var P$="SelectIcon",g_=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(me.span,{"aria-hidden":!0,...s,ref:t,children:n||"▼"})});g_.displayName=P$;var A$="SelectPortal",v_=e=>i.jsx(gu,{asChild:!0,...e});v_.displayName=A$;var ro="SelectContent",y_=p.forwardRef((e,t)=>{const r=bs(ro,e.__scopeSelect),[n,s]=p.useState();if(_t(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?oo.createPortal(i.jsx(x_,{scope:e.__scopeSelect,children:i.jsx($u.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(w_,{...e,ref:t})});y_.displayName=ro;var Cr=10,[x_,Ss]=ji(ro),R$="SelectContentImpl",O$=si("SelectContent.RemoveScroll"),w_=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:g,sticky:w,hideWhenDetached:m,avoidCollisions:j,...x}=e,v=bs(ro,r),[y,b]=p.useState(null),[S,E]=p.useState(null),N=Me(t,Y=>b(Y)),[_,C]=p.useState(null),[I,R]=p.useState(null),O=Fu(r),[z,k]=p.useState(!1),$=p.useRef(!1);p.useEffect(()=>{if(y)return yS(y)},[y]),aS();const F=p.useCallback(Y=>{const[X,...Ee]=O().map(we=>we.ref.current),[B]=Ee.slice(-1),ie=document.activeElement;for(const we of Y)if(we===ie||(we==null||we.scrollIntoView({block:"nearest"}),we===X&&S&&(S.scrollTop=0),we===B&&S&&(S.scrollTop=S.scrollHeight),we==null||we.focus(),document.activeElement!==ie))return},[O,S]),A=p.useCallback(()=>F([_,y]),[F,_,y]);p.useEffect(()=>{z&&A()},[z,A]);const{onOpenChange:T,triggerPointerDownPosRef:P}=v;p.useEffect(()=>{if(y){let Y={x:0,y:0};const X=B=>{var ie,we;Y={x:Math.abs(Math.round(B.pageX)-(((ie=P.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(B.pageY)-(((we=P.current)==null?void 0:we.y)??0))}},Ee=B=>{Y.x<=10&&Y.y<=10?B.preventDefault():y.contains(B.target)||T(!1),document.removeEventListener("pointermove",X),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[y,T,P]),p.useEffect(()=>{const Y=()=>T(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[T]);const[U,L]=D_(Y=>{const X=O().filter(ie=>!ie.disabled),Ee=X.find(ie=>ie.ref.current===document.activeElement),B=$_(X,Y,Ee);B&&setTimeout(()=>B.ref.current.focus())}),H=p.useCallback((Y,X,Ee)=>{const B=!$.current&&!Ee;(v.value!==void 0&&v.value===X||B)&&(C(Y),B&&($.current=!0))},[v.value]),oe=p.useCallback(()=>y==null?void 0:y.focus(),[y]),de=p.useCallback((Y,X,Ee)=>{const B=!$.current&&!Ee;(v.value!==void 0&&v.value===X||B)&&R(Y)},[v.value]),Ne=n==="popper"?Vf:j_,ae=Ne===Vf?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:g,sticky:w,hideWhenDetached:m,avoidCollisions:j}:{};return i.jsx(x_,{scope:r,content:y,viewport:S,onViewportChange:E,itemRefCallback:H,selectedItem:_,onItemLeave:oe,itemTextRefCallback:de,focusSelectedItem:A,selectedItemText:I,position:n,isPositioned:z,searchRef:U,children:i.jsx(gS,{as:O$,allowPinchZoom:!0,children:i.jsx(kp,{asChild:!0,trapped:v.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:ce(s,Y=>{var X;(X=v.trigger)==null||X.focus({preventScroll:!0}),Y.preventDefault()}),children:i.jsx(pu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:i.jsx(Ne,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:Y=>Y.preventDefault(),...x,...ae,onPlaced:()=>k(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ce(x.onKeyDown,Y=>{const X=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!X&&Y.key.length===1&&L(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let B=O().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(B=B.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const ie=Y.target,we=B.indexOf(ie);B=B.slice(we+1)}setTimeout(()=>F(B)),Y.preventDefault()}})})})})})})});w_.displayName=R$;var I$="SelectItemAlignedPosition",j_=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=bs(ro,r),a=Ss(ro,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Me(t,N=>d(N)),f=Fu(r),g=p.useRef(!1),w=p.useRef(!0),{viewport:m,selectedItem:j,selectedItemText:x,focusSelectedItem:v}=a,y=p.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&m&&j&&x){const N=o.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),C=o.valueNode.getBoundingClientRect(),I=x.getBoundingClientRect();if(o.dir!=="rtl"){const ie=I.left-_.left,we=C.left-ie,lt=N.left-we,Ct=N.width+lt,Dr=Math.max(Ct,_.width),xr=window.innerWidth-Cr,wr=kx(we,[Cr,Math.max(Cr,xr-Dr)]);l.style.minWidth=Ct+"px",l.style.left=wr+"px"}else{const ie=_.right-I.right,we=window.innerWidth-C.right-ie,lt=window.innerWidth-N.right-we,Ct=N.width+lt,Dr=Math.max(Ct,_.width),xr=window.innerWidth-Cr,wr=kx(we,[Cr,Math.max(Cr,xr-Dr)]);l.style.minWidth=Ct+"px",l.style.right=wr+"px"}const R=f(),O=window.innerHeight-Cr*2,z=m.scrollHeight,k=window.getComputedStyle(u),$=parseInt(k.borderTopWidth,10),F=parseInt(k.paddingTop,10),A=parseInt(k.borderBottomWidth,10),T=parseInt(k.paddingBottom,10),P=$+F+z+T+A,U=Math.min(j.offsetHeight*5,P),L=window.getComputedStyle(m),H=parseInt(L.paddingTop,10),oe=parseInt(L.paddingBottom,10),de=N.top+N.height/2-Cr,Ne=O-de,ae=j.offsetHeight/2,Y=j.offsetTop+ae,X=$+F+Y,Ee=P-X;if(X<=de){const ie=R.length>0&&j===R[R.length-1].ref.current;l.style.bottom="0px";const we=u.clientHeight-m.offsetTop-m.offsetHeight,lt=Math.max(Ne,ae+(ie?oe:0)+we+A),Ct=X+lt;l.style.height=Ct+"px"}else{const ie=R.length>0&&j===R[0].ref.current;l.style.top="0px";const lt=Math.max(de,$+m.offsetTop+(ie?H:0)+ae)+Ee;l.style.height=lt+"px",m.scrollTop=X-de+m.offsetTop}l.style.margin=`${Cr}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[f,o.trigger,o.valueNode,l,u,m,j,x,o.dir,n]);_t(()=>y(),[y]);const[b,S]=p.useState();_t(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const E=p.useCallback(N=>{N&&w.current===!0&&(y(),v==null||v(),w.current=!1)},[y,v]);return i.jsx(M$,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:i.jsx(me.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});j_.displayName=I$;var L$="SelectPopperPosition",Vf=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Cr,...o}=e,a=Vu(r);return i.jsx(b$,{...a,...o,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vf.displayName=L$;var[M$,Bp]=ji(ro,{}),Uf="SelectViewport",b_=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,o=Ss(Uf,r),a=Bp(Uf,r),l=Me(t,o.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx($u.Slot,{scope:r,children:i.jsx(me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ce(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const w=window.innerHeight-Cr*2,m=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),x=Math.max(m,j);if(x<w){const v=x+g,y=Math.min(w,v),b=v-y;h.style.height=y+"px",h.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});b_.displayName=Uf;var S_="SelectGroup",[D$,$$]=ji(S_),F$=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=is();return i.jsx(D$,{scope:r,id:s,children:i.jsx(me.div,{role:"group","aria-labelledby":s,...n,ref:t})})});F$.displayName=S_;var __="SelectLabel",C_=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=$$(__,r);return i.jsx(me.div,{id:s.id,...n,ref:t})});C_.displayName=__;var Xc="SelectItem",[V$,N_]=ji(Xc),E_=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...a}=e,l=bs(Xc,r),c=Ss(Xc,r),u=l.value===n,[d,h]=p.useState(o??""),[f,g]=p.useState(!1),w=Me(t,v=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,v,n,s)}),m=is(),j=p.useRef("touch"),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(V$,{scope:r,value:n,disabled:s,textId:m,isSelected:u,onItemTextChange:p.useCallback(v=>{h(y=>y||((v==null?void 0:v.textContent)??"").trim())},[]),children:i.jsx($u.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:i.jsx(me.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:ce(a.onFocus,()=>g(!0)),onBlur:ce(a.onBlur,()=>g(!1)),onClick:ce(a.onClick,()=>{j.current!=="mouse"&&x()}),onPointerUp:ce(a.onPointerUp,()=>{j.current==="mouse"&&x()}),onPointerDown:ce(a.onPointerDown,v=>{j.current=v.pointerType}),onPointerMove:ce(a.onPointerMove,v=>{var y;j.current=v.pointerType,s?(y=c.onItemLeave)==null||y.call(c):j.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ce(a.onPointerLeave,v=>{var y;v.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:ce(a.onKeyDown,v=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&v.key===" "||(C$.includes(v.key)&&x(),v.key===" "&&v.preventDefault())})})})})});E_.displayName=Xc;var qi="SelectItemText",k_=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,a=bs(qi,r),l=Ss(qi,r),c=N_(qi,r),u=T$(qi,r),[d,h]=p.useState(null),f=Me(t,x=>h(x),c.onItemTextChange,x=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,x,c.value,c.disabled)}),g=d==null?void 0:d.textContent,w=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:m,onNativeOptionRemove:j}=u;return _t(()=>(m(w),()=>j(w)),[m,j,w]),i.jsxs(i.Fragment,{children:[i.jsx(me.span,{id:c.textId,...o,ref:f}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?oo.createPortal(o.children,a.valueNode):null]})});k_.displayName=qi;var T_="SelectItemIndicator",P_=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return N_(T_,r).isSelected?i.jsx(me.span,{"aria-hidden":!0,...n,ref:t}):null});P_.displayName=T_;var Bf="SelectScrollUpButton",A_=p.forwardRef((e,t)=>{const r=Ss(Bf,e.__scopeSelect),n=Bp(Bf,e.__scopeSelect),[s,o]=p.useState(!1),a=Me(t,n.onScrollButtonChange);return _t(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(O_,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});A_.displayName=Bf;var zf="SelectScrollDownButton",R_=p.forwardRef((e,t)=>{const r=Ss(zf,e.__scopeSelect),n=Bp(zf,e.__scopeSelect),[s,o]=p.useState(!1),a=Me(t,n.onScrollButtonChange);return _t(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(O_,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});R_.displayName=zf;var O_=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=Ss("SelectScrollButton",r),a=p.useRef(null),l=Fu(r),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),_t(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(me.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ce(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:ce(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:ce(s.onPointerLeave,()=>{c()})})}),U$="SelectSeparator",I_=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(me.div,{"aria-hidden":!0,...n,ref:t})});I_.displayName=U$;var Wf="SelectArrow",B$=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Vu(r),o=bs(Wf,r),a=Ss(Wf,r);return o.open&&a.position==="popper"?i.jsx(S$,{...s,...n,ref:t}):null});B$.displayName=Wf;var z$="SelectBubbleInput",L_=p.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=p.useRef(null),o=Me(n,s),a=u_(t);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[a,t]),i.jsx(me.select,{...r,style:{...Cj,...r.style},ref:o,defaultValue:t})});L_.displayName=z$;function M_(e){return e===""||e===void 0}function D_(e){const t=yr(e),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function $_(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=W$(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function W$(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var q$=d_,F_=f_,H$=p_,G$=g_,K$=v_,V_=y_,J$=b_,U_=C_,B_=E_,Y$=k_,X$=P_,z_=A_,W_=R_,q_=I_;const st=q$,ot=H$,Ye=ue.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(F_,{ref:n,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(G$,{asChild:!0,children:i.jsx(Gj,{className:"h-4 w-4 opacity-50"})})]}));Ye.displayName=F_.displayName;const H_=ue.forwardRef(({className:e,...t},r)=>i.jsx(z_,{ref:r,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(CT,{className:"h-4 w-4"})}));H_.displayName=z_.displayName;const G_=ue.forwardRef(({className:e,...t},r)=>i.jsx(W_,{ref:r,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Gj,{className:"h-4 w-4"})}));G_.displayName=W_.displayName;const Xe=ue.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(K$,{children:i.jsxs(V_,{ref:s,className:Ce("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(H_,{}),i.jsx(J$,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(G_,{})]})}));Xe.displayName=V_.displayName;const Q$=ue.forwardRef(({className:e,...t},r)=>i.jsx(U_,{ref:r,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Q$.displayName=U_.displayName;const be=ue.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(B_,{ref:n,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(X$,{children:i.jsx(_T,{className:"h-4 w-4"})})}),i.jsx(Y$,{children:t})]}));be.displayName=B_.displayName;const Z$=ue.forwardRef(({className:e,...t},r)=>i.jsx(q_,{ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));Z$.displayName=q_.displayName;class eF{async getCustomerGroups(){try{const{data:t,error:r}=await Q.from("customer_groups").select("*").order("name");if(r)throw r;return t||[]}catch(t){throw console.error("Erro ao buscar grupos de clientes:",t),t}}async getCustomerGroup(t){try{const{data:r,error:n}=await Q.from("customer_groups").select("*").eq("id",t).single();if(n)throw n;return r}catch(r){throw console.error("Erro ao buscar grupo de cliente:",r),r}}async createCustomerGroup(t){try{const{data:r,error:n}=await Q.from("customer_groups").insert([t]).select().single();if(n)throw n;return r}catch(r){throw console.error("Erro ao criar grupo de cliente:",r),r}}async updateCustomerGroup(t,r){try{const{data:n,error:s}=await Q.from("customer_groups").update(r).eq("id",t).select().single();if(s)throw s;return n}catch(n){throw console.error("Erro ao atualizar grupo de cliente:",n),n}}async deleteCustomerGroup(t){try{const{error:r}=await Q.from("customer_groups").delete().eq("id",t);if(r)throw r;return!0}catch(r){throw console.error("Erro ao deletar grupo de cliente:",r),r}}async isGroupInUse(t){try{const{data:r,error:n}=await Q.from("customers").select("id").eq("group_id",t).limit(1);if(n)throw n;return r&&r.length>0}catch(r){throw console.error("Erro ao verificar uso do grupo:",r),r}}}const Hs=new eF,tF=({open:e,onOpenChange:t,onCustomerCreated:r})=>{const{toast:n}=at(),[s,o]=p.useState({name:"",cpf:"",cnpj:"",phone:"",email:"",category:"",group_id:"",cep:"",street:"",bairro:"",cidade:"",estado:"",complemento:""}),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState([]);p.useEffect(()=>{e&&o({name:"",cpf:"",cnpj:"",phone:"",email:"",category:"",group_id:"",cep:"",street:"",bairro:"",cidade:"",estado:"",complemento:""})},[e]),p.useEffect(()=>{(async()=>{try{const v=await Hs.getCustomerGroups();h(v)}catch(v){console.error("Erro ao buscar grupos:",v)}})()},[]);const f=x=>x.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),g=x=>{const v=x.replace(/\D/g,"");return v.length<=10?v.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):v.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},w=async x=>{const v=x.target.value.replace(/\D/g,"");if(v.length===8){u(!0);try{const b=await(await fetch(`https://viacep.com.br/ws/${v}/json/`)).json();b.erro||o({...s,cep:b.cep,street:b.logradouro,bairro:b.bairro,cidade:b.localidade,estado:b.uf,complemento:b.complemento})}finally{u(!1)}}},m=s.category==="Atacado"||s.category==="Cliente Exclusivo",j=async x=>{if(x.preventDefault(),!s.name||!s.phone||!s.category){n({title:"Campos obrigatórios",description:"Nome, telefone e categoria são obrigatórios.",variant:"destructive"});return}if(m&&(!s.cnpj||!s.razao_social)){n({title:"Campos obrigatórios",description:"CNPJ e Razão Social são obrigatórios para empresas.",variant:"destructive"});return}l(!0);try{const v=await sS(s);v?(n({title:"Cliente criado com sucesso!",description:`${s.name} foi adicionado à lista de clientes.`,variant:"default"}),r&&r(v),t(!1)):n({title:"Erro ao criar cliente",description:"Tente novamente.",variant:"destructive"})}catch(v){console.error("Erro ao criar cliente:",v),n({title:"Erro ao criar cliente",description:v.message||"Tente novamente.",variant:"destructive"})}finally{l(!1)}};return i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(er,{children:i.jsxs(tr,{className:"flex items-center gap-2",children:[i.jsx(sr,{className:"w-5 h-5"}),"Cadastrar Novo Cliente"]})}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"name",children:"Nome Completo *"}),i.jsx(q,{id:"name",value:s.name,onChange:x=>o({...s,name:x.target.value}),placeholder:"Nome completo do cliente"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cpf",children:"CPF"}),i.jsx(q,{id:"cpf",placeholder:"000.000.000-00",value:s.cpf,onChange:x=>o({...s,cpf:f(x.target.value)})})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"phone",children:"Telefone *"}),i.jsx(q,{id:"phone",placeholder:"(00) 00000-0000",value:s.phone,onChange:x=>o({...s,phone:g(x.target.value)})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"email",children:"E-mail"}),i.jsx(q,{id:"email",type:"email",value:s.email,onChange:x=>o({...s,email:x.target.value}),placeholder:"email@exemplo.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"category",children:"Categoria *"}),i.jsxs(st,{value:s.category,onValueChange:x=>o({...s,category:x}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione a categoria..."})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"Varejo",children:"Varejo"}),i.jsx(be,{value:"Atacado",children:"Atacado"}),i.jsx(be,{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"group_id",children:"Nível de Comprador"}),i.jsxs(st,{value:s.group_id,onValueChange:x=>o({...s,group_id:x}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione um grupo..."})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"",children:"Nenhum grupo"}),d.map(x=>i.jsxs(be,{value:x.id,children:[x.name," - ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.average_ticket)]},x.id))]})]})]}),m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cnpj",children:"CNPJ *"}),i.jsx(q,{id:"cnpj",placeholder:"00.000.000/0000-00",value:s.cnpj,onChange:x=>o({...s,cnpj:x.target.value})})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"razao_social",children:"Razão Social *"}),i.jsx(q,{id:"razao_social",value:s.razao_social,onChange:x=>o({...s,razao_social:x.target.value}),placeholder:"Razão social da empresa"})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cep",children:"CEP"}),i.jsx(q,{id:"cep",placeholder:"00000-000",value:s.cep,onChange:x=>o({...s,cep:x.target.value}),onBlur:w,disabled:c})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"street",children:"Rua"}),i.jsx(q,{id:"street",value:s.street,onChange:x=>o({...s,street:x.target.value}),placeholder:"Nome da rua"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"bairro",children:"Bairro"}),i.jsx(q,{id:"bairro",value:s.bairro,onChange:x=>o({...s,bairro:x.target.value}),placeholder:"Nome do bairro"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cidade",children:"Cidade"}),i.jsx(q,{id:"cidade",value:s.cidade,onChange:x=>o({...s,cidade:x.target.value}),placeholder:"Nome da cidade"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"estado",children:"Estado"}),i.jsx(q,{id:"estado",value:s.estado,onChange:x=>o({...s,estado:x.target.value}),placeholder:"UF"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"complemento",children:"Complemento"}),i.jsx(q,{id:"complemento",value:s.complemento,onChange:x=>o({...s,complemento:x.target.value}),placeholder:"Apartamento, bloco, etc."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(D,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:a,children:"Cancelar"}),i.jsx(D,{type:"submit",disabled:a,children:a?"Criando...":"Criar Cliente"})]})]})]})})},rF=({onProductFound:e})=>{const[t,r]=p.useState(""),{toast:n}=at(),s=async a=>{if(a.preventDefault(),!!t.trim())try{const l=await Lf(t);l&&l.product?(e(l.product),r("")):n({title:"Produto não encontrado",description:`Código de barras: ${t}`,variant:"destructive"})}catch(l){n({title:"Erro ao buscar produto",description:l.message,variant:"destructive"})}},o=async a=>{try{const l=await Lf(a);l&&l.product?e(l.product):n({title:"Produto de teste não encontrado",description:`Código: ${a}`,variant:"destructive"})}catch(l){n({title:"Erro ao buscar produto de teste",description:l.message,variant:"destructive"})}};return i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(lf,{className:"w-5 h-5"}),i.jsx("span",{children:"Leitor de Código de Barras"})]})}),i.jsxs(se,{children:[i.jsxs("form",{onSubmit:s,className:"flex space-x-2",children:[i.jsx(q,{placeholder:"Escaneie ou digite o código de barras",value:t,onChange:a=>r(a.target.value),className:"flex-1 barcode-scanner",autoFocus:!0}),i.jsx(D,{type:"submit",children:i.jsx(sr,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-2",children:[i.jsx(D,{variant:"outline",onClick:()=>o("6307CB"),className:"text-sm",children:"Camiseta Básica"}),i.jsx(D,{variant:"outline",onClick:()=>o("7182CSR"),className:"text-sm",children:"Calça com Regulagem"}),i.jsx(D,{variant:"outline",onClick:()=>o("4411GM"),className:"text-sm",children:"Gola Média"})]})]})]})},nF=({cart:e,onUpdateQuantity:t,onRemoveFromCart:r,onClearCart:n})=>i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Aa,{className:"w-5 h-5"}),i.jsxs("span",{children:["Carrinho (",e.length," itens)"]})]}),e.length>0&&i.jsx(D,{variant:"outline",size:"sm",onClick:n,children:"Limpar"})]})}),i.jsx(se,{children:e.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Aa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Carrinho vazio"}),i.jsx("p",{className:"text-sm",children:"Escaneie um produto para começar"})]}):i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map(s=>i.jsxs(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium",children:s.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["R$ ",s.price.toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(D,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>t(s.id,s.quantity-1),children:i.jsx(Ic,{className:"w-3 h-3"})}),i.jsx("span",{className:"w-8 text-center",children:s.quantity}),i.jsx(D,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>t(s.id,s.quantity+1),children:i.jsx(sr,{className:"w-3 h-3"})}),i.jsxs("span",{className:"w-20 text-right font-medium",children:["R$ ",s.subtotal.toFixed(2)]}),i.jsx(D,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>r(s.id),children:i.jsx(ao,{className:"w-3 h-3"})})]})]},s.id))})})]}),sF=({subtotal:e,discountAmount:t,total:r,onApplyDiscount:n,discount:s})=>{const o=it(),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(""),f=x=>{u(x),h("")},g=()=>{if(c==="percentage"){const x=parseFloat(d);!isNaN(x)&&x>=0&&x<=100&&(n({type:"percentage",value:x}),l(!1),u(null),h(""))}else if(c==="fixed"){const x=parseFloat(d.replace(",","."));!isNaN(x)&&x>=0&&x<=e&&(n({type:"fixed",value:x}),l(!1),u(null),h(""))}},w=()=>{l(!1),u(null),h("")},m=()=>{n({type:"none",value:0})},j=x=>x.replace(/[^\d,]/g,"");return i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(Hj,{className:"w-5 h-5"}),i.jsx("span",{children:"Totais"})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["R$ ",e.toFixed(2)]})]}),t>0&&i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsxs("span",{children:["Desconto ",(s==null?void 0:s.type)==="percentage"?`(${s.value}%)`:"(R$)",":"]}),i.jsxs("span",{children:["- R$ ",t.toFixed(2)]})]}),i.jsx("div",{className:"border-t pt-2",children:i.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["R$ ",r.toFixed(2)]})]})}),Gt(o==null?void 0:o.role,J.APPLY_DISCOUNTS)&&i.jsxs("div",{className:"pt-2 border-t space-y-3",children:[a?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(D,{variant:c==="percentage"?"default":"outline",size:"sm",className:"flex-1 hover:bg-gray-700 hover:text-white border-gray-600 text-gray-300",onClick:()=>f("percentage"),children:[i.jsx(Wv,{className:"w-3 h-3 mr-1"}),"%"]}),i.jsxs(D,{variant:c==="fixed"?"default":"outline",size:"sm",className:"flex-1 hover:bg-gray-700 hover:text-white border-gray-600 text-gray-300",onClick:()=>f("fixed"),children:[i.jsx(xn,{className:"w-3 h-3 mr-1"}),"R$"]})]}),c&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(q,{type:"text",placeholder:c==="percentage"?"Ex: 10":"Ex: 10,50",value:d,onChange:x=>{h(c==="percentage"?x.target.value.replace(/[^\d]/g,""):j(x.target.value))},className:"text-center border-gray-600 bg-gray-800 text-white placeholder-gray-400"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(D,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:g,disabled:!d||c==="percentage"&&(parseFloat(d)<0||parseFloat(d)>100)||c==="fixed"&&(parseFloat(d.replace(",","."))<0||parseFloat(d.replace(",","."))>e),children:"Aplicar"}),i.jsx(D,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",onClick:w,children:i.jsx(Oa,{className:"w-4 h-4"})})]})]})]}):i.jsxs(D,{variant:"outline",size:"sm",className:"w-full hover:bg-gray-700 hover:text-white border-gray-600 text-gray-300",onClick:()=>l(!0),children:[i.jsx(Wv,{className:"w-4 h-4 mr-2"}),"Aplicar Desconto"]}),t>0&&!a&&i.jsxs(D,{variant:"outline",size:"sm",className:"w-full border-red-600 text-red-400 hover:bg-red-600 hover:text-white",onClick:m,children:[i.jsx(Oa,{className:"w-4 h-4 mr-2"}),"Remover Desconto"]})]})]})]})},Fl={CASH:"cash",DEBIT:"debit",CREDIT:"credit",PIX:"pix"},tn={[Fl.CASH]:"Dinheiro",[Fl.DEBIT]:"Cartão Débito",[Fl.CREDIT]:"Cartão Crédito",[Fl.PIX]:"PIX"},oF="/images/pixicon.png",Fx="/images/debito card.png",iF="/images/crediticon.png",Vx="/images/dinheiroicon.png",Ux=[{value:"varejo",label:"Varejo"},{value:"atacado",label:"Atacado"},{value:"cliente_exclusivo",label:"Cliente Exclusivo"}],Bx=Array.from({length:10},(e,t)=>t+1),tt=e=>{if(!e)return 0;let t=e.toString().replace(/[^\d,.]/g,"");t.includes(",")&&t.includes(".")?t=t.replace(",",""):t.includes(",")&&!t.includes(".")&&(t=t.replace(",","."));const r=parseFloat(t);return isNaN(r)?0:r},ct=e=>{if(!e&&e!==0)return"R$ 0,00";const t=parseFloat(e);return isNaN(t)?"R$ 0,00":t.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})},zx=()=>{const e=M=>{try{localStorage.setItem("pos_sale_state",JSON.stringify(M))}catch(G){console.error("Erro ao salvar estado da venda:",G)}},t=()=>{try{const M=localStorage.getItem("pos_sale_state");return M?JSON.parse(M):null}catch(M){return console.error("Erro ao carregar estado da venda:",M),null}},r=()=>{try{localStorage.removeItem("pos_sale_state")}catch(M){console.error("Erro ao limpar estado da venda:",M)}},n=t(),[s,o]=p.useState((n==null?void 0:n.cart)||[]),[a,l]=p.useState((n==null?void 0:n.discount)||{type:"percentage",value:0}),[c,u]=p.useState((n==null?void 0:n.payments)||[]),[d,h]=p.useState({isOpen:!1,currentAmount:0,openingAmount:0,id:null,store_id:null}),[f,g]=p.useState(null),{toast:w}=at(),m=it(),j=!!(m!=null&&m.store_id)&&!Gt(m.role,J.VIEW_ALL_STORES_DATA),[x,v]=p.useState((n==null?void 0:n.step)||0),[y,b]=p.useState((n==null?void 0:n.modalidade)||""),[S,E]=p.useState((n==null?void 0:n.vendedor)||null),[N,_]=p.useState([]),[C,I]=p.useState(!1),[R,O]=p.useState((n==null?void 0:n.cliente)||null),[z,k]=p.useState([]),[$,F]=p.useState(!1),[A,T]=p.useState(!1),[P,U]=p.useState(""),[L,H]=p.useState("all"),[oe,de]=p.useState(!1),[Ne,ae]=p.useState(1),Y=()=>R?i.jsxs("div",{className:"p-3 bg-green-600 rounded-lg text-white",children:[i.jsx("div",{className:"font-medium text-green-100 mb-1",children:"✓ Cliente selecionado"}),i.jsxs("div",{className:"text-sm text-green-100",children:[i.jsx("strong",{className:"text-white",children:R.name})," - ",R.category||"Cliente",R.cpf&&i.jsxs("span",{children:[" - CPF: ",R.cpf]}),R.cnpj&&i.jsxs("span",{children:[" - CNPJ: ",R.cnpj]}),R.phone&&i.jsxs("span",{children:[" - Tel: ",R.phone]})]})]}):null,[X,Ee]=p.useState((n==null?void 0:n.numPagamentos)||1),[B,ie]=p.useState((n==null?void 0:n.pagamentosWizard)||[{method:"",amount:"",parcelas:void 0},{method:"",amount:"",parcelas:void 0}]),[we,lt]=p.useState((n==null?void 0:n.isTroca)||!1),[Ct,Dr]=p.useState(!1),[xr,wr]=p.useState(!!n),[_n,Cn]=p.useState(2.99);p.useEffect(()=>{zu()},[]);const zu=async()=>{try{const M=await Wi.getInterestRate();Cn(M.credit_card_interest)}catch(M){console.error("Erro ao carregar taxa de juros:",M)}};p.useEffect(()=>{e({cart:s,discount:a,payments:c,step:x,modalidade:y,vendedor:S,cliente:R,numPagamentos:X,pagamentosWizard:B,isTroca:we})},[s,a,c,x,y,S,R,X,B,we]),p.useEffect(()=>{var M,G,ge,he,Ue,et,yt,Pe,Cs;if(B.length>0&&((M=B[0])!=null&&M.method)){const Qr=ke(),Re=[...B];if(X===1)if(((G=Re[0])==null?void 0:G.method)==="credit"){const Zr=((ge=Re[0])==null?void 0:ge.parcelas)||1;Re[0]={...Re[0],amount:Ze(Qr,Zr).toFixed(2)}}else Re[0]={...Re[0],amount:Qr.toFixed(2)};else if(X===2&&((he=Re[0])!=null&&he.amount)&&((Ue=Re[1])!=null&&Ue.method)){const Zr=tt(Re[0].amount),Ns=tt(Re[1].amount),Nn=Zr+Ns,Es=Zr/Nn,ks=Ns/Nn,En=Qr*Es,_i=Qr*ks;if(((et=Re[0])==null?void 0:et.method)==="credit"){const fo=((yt=Re[0])==null?void 0:yt.parcelas)||1;Re[0]={...Re[0],amount:Ze(En,fo).toFixed(2)}}else Re[0]={...Re[0],amount:En.toFixed(2)};if(((Pe=Re[1])==null?void 0:Pe.method)==="credit"){const fo=((Cs=Re[1])==null?void 0:Cs.parcelas)||1;Re[1]={...Re[1],amount:Ze(_i,fo).toFixed(2)}}else Re[1]={...Re[1],amount:_i.toFixed(2)}}ie(Re)}},[a]),p.useEffect(()=>{if(xr){const M=setTimeout(()=>{wr(!1)},5e3);return()=>clearTimeout(M)}},[xr]);const Wu=()=>xr?i.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"✓ Venda restaurada automaticamente"}),i.jsx("button",{onClick:()=>wr(!1),className:"text-white hover:text-green-200",children:"×"})]})}):null,qu=()=>{var M;return i.jsxs("div",{className:"space-y-6 max-w-2xl",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resumo da Venda"}),i.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Modalidade:"})," ",(M=Ux.find(G=>G.value===y))==null?void 0:M.label]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Vendedor:"})," ",S==null?void 0:S.name]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Cliente:"})," ",R==null?void 0:R.name]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Tipo de venda:"})," ",we?"Troca":"Normal"]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Itens:"}),i.jsx("ul",{className:"ml-4 list-disc",children:s.map(G=>i.jsxs("li",{children:[G.name," - ",G.quantity," x ",ct(G.price)," = ",ct(G.price*G.quantity)]},G.id))})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Total:"})," ",ct(ke())]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Pagamentos:"}),i.jsx("ul",{className:"ml-4 list-disc",children:B.slice(0,X).map((G,ge)=>i.jsxs("li",{children:[tn[G.method]," - ",ct(tt(G.amount)),G.method==="credit"&&G.parcelas>1&&i.jsxs("div",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:["• Valor original: ",ct(tt(G.amount)),i.jsx("br",{}),"• Juros (",_n,"% ao mês): ",ct(Ze(tt(G.amount),G.parcelas)-tt(G.amount)),i.jsx("br",{}),"• Valor por parcela: ",ct(Ze(tt(G.amount),G.parcelas)/G.parcelas),i.jsx("br",{}),"• ",G.parcelas,"x de ",ct(Ze(tt(G.amount),G.parcelas)/G.parcelas)]}),G.method==="credit"&&G.parcelas===1&&` (${G.parcelas}x)`]},ge))})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("input",{type:"checkbox",id:"troca",checked:we,onChange:G=>lt(G.target.checked)}),i.jsxs("label",{htmlFor:"troca",className:"text-sm",children:["Esta venda é uma ",i.jsx("b",{children:"troca"})]})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(D,{onClick:async()=>{Dr(!0);try{const G={items:s.map(he=>({productId:he.productId,name:he.name,price:he.price,barcode:he.barcode,quantity:he.quantity,subtotal:he.subtotal})),subtotal:Z(),discount:pe(),total:ke(),payments:B.slice(0,X).map(he=>({method:he.method,amount:tt(he.amount),parcelas:he.method==="credit"?he.parcelas:void 0})),cashier:m==null?void 0:m.name,cashierId:m==null?void 0:m.id,customerId:R==null?void 0:R.id,store_id:(f==null?void 0:f.id)||(m==null?void 0:m.store_id)||null,modalidade:y,vendedor_id:S==null?void 0:S.id,tipo_venda:we?"troca":"normal"},ge=await zM(G);try{const he=await Dn.getConfig();if(he.printer.enabled){const Ue={...ge.sale,items:G.items,payments:G.payments,store_name:(f==null?void 0:f.name)||"Loja",user_id:m==null?void 0:m.id,store_id:(f==null?void 0:f.id)||(m==null?void 0:m.store_id)};await Dn.printReceipt(Ue,he.printer),w({title:"Venda finalizada e recibo impresso!",description:`Venda #${ge.sale.id} criada e recibo impresso automaticamente.`,variant:"default"})}else w({title:"Venda finalizada com sucesso!",description:`Venda #${ge.sale.id} criada.`,variant:"default"})}catch(he){console.error("Erro ao imprimir recibo:",he),w({title:"Venda finalizada com sucesso!",description:`Venda #${ge.sale.id} criada. (Erro na impressão: ${he.message})`,variant:"default"})}try{const he=await qn.getConfig();if(he.nfe.enabled||he.sat.enabled){const Ue={...ge.sale,items:G.items,payments:G.payments,store_name:(f==null?void 0:f.name)||"Loja",user_id:m==null?void 0:m.id,store_id:(f==null?void 0:f.id)||(m==null?void 0:m.store_id)},et=await qn.generateFiscalDocument(Ue);w({title:"Documento fiscal gerado!",description:`Documento fiscal gerado automaticamente para venda #${ge.sale.id}.`,variant:"default"})}}catch(he){console.error("Erro ao gerar documento fiscal:",he)}K(),lt(!1),v(0),E(null),ie([{method:"",amount:"",parcelas:void 0},{method:"",amount:"",parcelas:void 0}]),Ee(1)}catch(G){w({title:"Erro ao finalizar venda",description:G.message||"Tente novamente.",variant:"destructive"})}finally{Dr(!1)}},disabled:Ct,children:Ct?"Finalizando...":"Finalizar Venda"}),i.jsx(D,{variant:"ghost",onClick:()=>v(3),disabled:Ct,children:"Voltar"})]})]})};p.useEffect(()=>{x===1&&N.length===0&&(I(!0),Z1().then(M=>{const G=M.filter(ge=>["manager","cashier","admin"].includes(ge.role));_(G)}).finally(()=>I(!1)))},[x,N.length]),p.useEffect(()=>{x===2&&z.length===0&&(F(!0),nS().then(M=>{k(M||[])}).catch(M=>{console.error("Erro ao carregar clientes:",M),k([])}).finally(()=>F(!1)))},[x,z.length]);const Hu=M=>{k(G=>[...G,M]),O(M)};p.useEffect(()=>{x!==2&&(U(""),H("all"),de(!1),ae(1))},[x]),p.useEffect(()=>{ae(1)},[P,L]);const ho=p.useCallback(async()=>{const M=await BM();h(M),j&&(m!=null&&m.store_id)?g({id:m.store_id,name:m.store_name||"Loja Física"}):g({id:null,name:"Loja Online"})},[j,m==null?void 0:m.store_id,m==null?void 0:m.store_name]);p.useEffect(()=>{ho()},[ho]);const Gu=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsx(Y,{}),i.jsx(rF,{onProductFound:Ju,getProductByBarcode:Lf}),i.jsx(nF,{cart:s,onUpdateQuantity:rl,onRemoveFromCart:bi,onClearCart:K}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(D,{onClick:()=>s.length>0&&v(4),disabled:s.length===0,children:"Avançar"}),i.jsx(D,{variant:"ghost",onClick:()=>v(2),children:"Voltar"})]})]}),Ku=M=>y==="varejo"&&M.price_varejo!=null?M.price_varejo:y==="atacado"&&M.price_atacado!=null?M.price_atacado:y==="cliente_exclusivo"&&M.price_atacarejo!=null?M.price_atacarejo:M.price,Ju=async M=>{var he,Ue;if(j&&M.is_physical_store_stock&&(!M.stock||M.stock<=0)){w({title:"Sem estoque na sua loja",description:`O produto ${M.name} não tem estoque disponível na sua loja.`,variant:"warning"});return}if(!j&&(!M.stock||M.stock<=0)){w({title:"Sem estoque online",description:`O produto ${M.name} não tem estoque online disponível.`,variant:"warning"});return}const G=Ku(M),ge=s.find(et=>et.productId===M.id);if(ge)rl(ge.id,ge.quantity+1,M.stock);else{const et={id:`${M.id}-${Date.now()}`,productId:M.id,name:M.name,price:G,barcode:M.barcode,quantity:1,size:((he=M.sizes)==null?void 0:he[0])||null,color:((Ue=M.colors)==null?void 0:Ue[0])||null,subtotal:G,product_main_store_id:M.store_id,max_available_stock:M.stock};o(yt=>[...yt,et])}w({title:"Produto adicionado",description:`${M.name} adicionado ao carrinho. Estoque disponível: ${M.stock}`})},rl=(M,G,ge)=>{const he=s.find(et=>et.id===M);if(!he)return;const Ue=ge!==void 0?ge:he.max_available_stock;if(G>Ue&&(w({title:"Quantidade excede estoque",description:`Máximo de ${Ue} unidades disponíveis.`,variant:"warning"}),G=Ue),G<=0){bi(M);return}o(et=>et.map(yt=>yt.id===M?{...yt,quantity:G,subtotal:yt.price*G}:yt))},bi=M=>{o(G=>G.filter(ge=>ge.id!==M))},K=()=>{o([]),u([]),l({type:"percentage",value:0}),r()},Z=()=>s.reduce((M,G)=>M+G.subtotal,0),pe=()=>{const M=Z();return a.type==="percentage"?M*a.value/100:Math.min(a.value,M)},ke=()=>Z()-pe(),Ke=M=>{if(!Gt(m==null?void 0:m.role,J.APPLY_DISCOUNTS)){w({title:"Sem permissão",description:"Você não tem permissão para aplicar descontos",variant:"destructive"});return}if(M.type==="none"){l({type:"none",value:0}),w({title:"Desconto removido",description:"Desconto foi removido com sucesso."});return}M.type==="percentage"?(l({type:"percentage",value:M.value}),w({title:"Desconto aplicado",description:`${M.value}% de desconto.`})):M.type==="fixed"&&(l({type:"fixed",value:M.value}),w({title:"Desconto aplicado",description:`R$ ${M.value.toFixed(2)} de desconto.`}))},ht=()=>{o([]),l({type:"none",value:0}),u([]),v(0),b(""),E(null),O(null),Ee(1),ie([{method:"",amount:"",parcelas:void 0},{method:"",amount:"",parcelas:void 0}]),lt(!1),r(),w({title:"Venda encerrada",description:"Nova venda iniciada. Todos os dados foram limpos.",variant:"default"})},jr=()=>B.reduce((M,G)=>M+(tt(G.amount)||0),0),Ze=(M,G)=>{if(G<=1)return M;const ge=_n/100,he=Math.pow(1+ge,G-1)-1;return M*(1+he)},_s=()=>{var M,G;if(s.length===0||!((M=B[0])!=null&&M.method))return!1;if(X===1)return!0;for(let ge=0;ge<X;ge++)if(!((G=B[ge])!=null&&G.amount)||tt(B[ge].amount)<=0)return!1;return Math.abs(jr()-ke())<=.01},Si=(M,G,ge)=>{console.log("handlePagamentoChange:",M,G,ge),ie(he=>{const Ue=he.map((et,yt)=>yt===M?{...et,[G]:ge}:et);return console.log("Novo estado:",Ue),Ue})},nl=()=>{var ge,he,Ue,et,yt,Pe,Cs,Qr,Re,Zr,Ns,Nn,Es,ks,En,_i,fo,Gp,Kp,Jp;const M=ke(),G={cash:Vx,credit:iF,debit:Fx,pix:oF,transfer:Fx,check:Vx};return i.jsxs("div",{className:"space-y-6 max-w-2xl",children:[i.jsx(Y,{}),i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Formas de Pagamento"}),i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-6 bg-gray-50 dark:bg-gray-800",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:Object.entries(tn).map(([ft,ne])=>{var en;return i.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 text-center ${((en=B[0])==null?void 0:en.method)===ft?"border-blue-500 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200":"border-gray-400 hover:border-gray-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,onClick:()=>{const kn=[...B];kn[0]={...kn[0],method:ft,amount:X===1?M.toFixed(2):kn[0].amount,parcelas:ft==="credit"?kn[0].parcelas||1:void 0},ie(kn)},children:[i.jsx("div",{className:"mb-2",children:i.jsx("img",{src:G[ft],alt:ne,className:"w-12 h-12 mx-auto object-contain"})}),i.jsx("div",{className:"font-medium",children:ne})]},ft)})}),i.jsx("div",{className:"flex gap-4 mb-6",children:X===1?i.jsx(D,{variant:"outline",onClick:()=>{var ft;if(Ee(2),(ft=B[0])!=null&&ft.method){const ne=[...B];ne[0]={...ne[0],amount:"",parcelas:ne[0].parcelas||1},ne[1]={method:"",amount:"",parcelas:void 0},ie(ne)}},className:"w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-gray-400 dark:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white",children:"2 Formas de Pagamento"}):i.jsx(D,{variant:"outline",onClick:()=>{var ft;if(Ee(1),(ft=B[0])!=null&&ft.method){const ne=[...B];ne[0]={...ne[0],amount:M.toFixed(2),parcelas:ne[0].parcelas||1},ne[1]={method:"",amount:"",parcelas:void 0},ie(ne)}},className:"w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-gray-400 dark:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white",children:"Voltar para 1 Forma"})}),((ge=B[0])==null?void 0:ge.method)&&X===1&&((he=B[0])==null?void 0:he.method)!=="credit"&&i.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-green-50 dark:bg-green-900/20",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:G[(Ue=B[0])==null?void 0:Ue.method],alt:tn[(et=B[0])==null?void 0:et.method],className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:tn[(yt=B[0])==null?void 0:yt.method]}),i.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:ct(M)})]})}),((Pe=B[0])==null?void 0:Pe.method)==="credit"&&X===1&&i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/20",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("img",{src:G[(Cs=B[0])==null?void 0:Cs.method],alt:tn[(Qr=B[0])==null?void 0:Qr.method],className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:tn[(Re=B[0])==null?void 0:Re.method]})]}),i.jsx("div",{className:"flex gap-3 items-center mb-3",children:i.jsxs(st,{value:(((Zr=B[0])==null?void 0:Zr.parcelas)||1).toString(),onValueChange:ft=>{const ne=parseInt(ft);console.log("Mudando parcelas para:",ne);const en=[...B];en[0]={...en[0],parcelas:ne,amount:Ze(M,ne).toFixed(2)},ie(en)},children:[i.jsx(Ye,{className:"w-32 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600",children:i.jsx(ot,{placeholder:"Parcelas"})}),i.jsx(Xe,{className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600",children:Bx.map(ft=>i.jsxs(be,{value:ft.toString(),className:"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600",children:[ft,"x"]},ft))})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor original:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(M)})]}),(((Ns=B[0])==null?void 0:Ns.parcelas)||1)>1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Juros (",_n,"% ao mês):"]}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:ct(Ze(M,((Nn=B[0])==null?void 0:Nn.parcelas)||1)-M)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor por parcela:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(Ze(M,((Es=B[0])==null?void 0:Es.parcelas)||1)/(((ks=B[0])==null?void 0:ks.parcelas)||1))})]})]}),i.jsxs("div",{className:"border-t pt-2",children:[i.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[i.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"Total a pagar:"}),i.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:ct(Ze(M,((En=B[0])==null?void 0:En.parcelas)||1))})]}),(((_i=B[0])==null?void 0:_i.parcelas)||1)>1&&i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:[((fo=B[0])==null?void 0:fo.parcelas)||1,"x de ",ct(Ze(M,((Gp=B[0])==null?void 0:Gp.parcelas)||1)/(((Kp=B[0])==null?void 0:Kp.parcelas)||1))]})]})]})})]}),X===2&&i.jsx("div",{className:"space-y-4",children:[...Array(X)].map((ft,ne)=>{var en,kn,Yp,Xp,Qp,Zp,eg,tg,rg,ng,sg,og,ig,ag,lg,cg,ug,dg,hg,fg,mg;return i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-white dark:bg-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("img",{src:G[(en=B[ne])==null?void 0:en.method],alt:tn[(kn=B[ne])==null?void 0:kn.method],className:"w-8 h-8 object-contain"}),i.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[tn[(Yp=B[ne])==null?void 0:Yp.method]," (",ne+1,")"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Valor:"}),i.jsx(q,{type:"text",placeholder:"0,00",className:`w-40 border-gray-300 text-gray-800 focus:ring-0 focus:border-gray-300 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 ${X===2&&ne===1?"bg-gray-100 cursor-not-allowed":"bg-white"}`,value:((Xp=B[ne])==null?void 0:Xp.amount)||"",disabled:X===2&&ne===1,onChange:Nt=>{var $r;if(X===2&&ne===1)return;const Ft=Nt.target.value;console.log("Digitando valor:",Ft,"no índice:",ne,"valor atual:",($r=B[ne])==null?void 0:$r.amount),Si(ne,"amount",Ft)},onBlur:Nt=>{if(X===2&&ne===0){const Ft=tt(Nt.target.value)||0,$r=M-Ft;if($r>=0){const mo=[...B];mo[1]={...mo[1],amount:$r.toFixed(2)},ie(mo)}}}})]}),((Qp=B[ne])==null?void 0:Qp.amount)&&tt(B[ne].amount)>0&&i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Forma:"}),i.jsxs(st,{value:((Zp=B[ne])==null?void 0:Zp.method)||"",onValueChange:Nt=>{if(Si(ne,"method",Nt),Nt==="credit"){const Ft=[...B];Ft[ne]={...Ft[ne],method:Nt,parcelas:1},ie(Ft)}},children:[i.jsx(Ye,{className:"w-40 bg-white border-gray-300 text-gray-800 focus:ring-0 focus:border-gray-300 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0",children:i.jsx(ot,{placeholder:"Escolher forma"})}),i.jsx(Xe,{className:"bg-white border-gray-300",children:Object.entries(tn).map(([Nt,Ft])=>i.jsx(be,{value:Nt,className:"text-gray-800 hover:bg-gray-100",children:Ft},Nt))})]})]}),((eg=B[ne])==null?void 0:eg.method)==="credit"&&i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Parcelas:"}),i.jsxs(st,{value:(((tg=B[ne])==null?void 0:tg.parcelas)||1).toString(),onValueChange:Nt=>{var mo;const Ft=parseInt(Nt);console.log("Mudando parcelas para:",Ft,"no índice:",ne);const $r=[...B];$r[ne]={...$r[ne],parcelas:Ft},((mo=B[ne])==null?void 0:mo.method)==="credit"&&($r[ne].parcelas=Ft),ie($r)},children:[i.jsx(Ye,{className:"w-32 bg-white border-gray-300 text-gray-800 focus:ring-0 focus:border-gray-300 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0",children:i.jsx(ot,{placeholder:"Parcelas"})}),i.jsx(Xe,{className:"bg-white border-gray-300",children:Bx.map(Nt=>i.jsxs(be,{value:Nt.toString(),className:"text-gray-800 hover:bg-gray-100",children:[Nt,"x"]},Nt))})]})]})]}),((rg=B[ne])==null?void 0:rg.method)==="credit"&&X===2&&(((ng=B[ne])==null?void 0:ng.parcelas)||1)>1&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Valor original:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(tt((sg=B[ne])==null?void 0:sg.amount))})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-blue-800 dark:text-blue-200",children:["Juros (",_n,"% ao mês):"]}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:ct(Ze(tt((og=B[ne])==null?void 0:og.amount),((ig=B[ne])==null?void 0:ig.parcelas)||1)-tt((ag=B[ne])==null?void 0:ag.amount))})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Valor por parcela:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(Ze(tt((lg=B[ne])==null?void 0:lg.amount),((cg=B[ne])==null?void 0:cg.parcelas)||1)/(((ug=B[ne])==null?void 0:ug.parcelas)||1))})]}),i.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:[((dg=B[ne])==null?void 0:dg.parcelas)||1,"x de ",ct(Ze(tt((hg=B[ne])==null?void 0:hg.amount),((fg=B[ne])==null?void 0:fg.parcelas)||1)/(((mg=B[ne])==null?void 0:mg.parcelas)||1))]})]})})]},ne)})})]}),!_s&&((Jp=B[0])==null?void 0:Jp.method)&&i.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:"⚠️ Preencha todas as formas de pagamento corretamente e o valor total deve bater com o total da venda."}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(D,{onClick:()=>_s&&v(5),disabled:!_s,children:"Avançar"}),i.jsx(D,{variant:"ghost",onClick:()=>v(3),children:"Voltar"})]})]})},sl=()=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione a modalidade da venda"}),i.jsx("div",{className:"flex gap-4 mb-4",children:Ux.map(M=>i.jsx(D,{variant:y===M.value?"default":"outline",onClick:()=>b(M.value),className:"min-w-[120px]",children:M.label},M.value))}),i.jsx(D,{onClick:()=>y&&v(1),disabled:!y,className:"mt-2",children:"Avançar"})]}),Yu=()=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione o vendedor responsável"}),C?i.jsx("div",{children:"Carregando vendedores..."}):i.jsx("div",{className:"flex flex-col gap-2 mb-4 max-w-md",children:N.map(M=>i.jsxs(D,{variant:(S==null?void 0:S.id)===M.id?"default":"outline",onClick:()=>E(M),className:"justify-start",children:[M.name," ",i.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",M.role,")"]})]},M.id))}),i.jsx(D,{onClick:()=>S&&v(2),disabled:!S,className:"mt-2",children:"Avançar"}),i.jsx(D,{variant:"ghost",className:"mt-2 ml-2",onClick:()=>v(0),children:"Voltar"})]}),bC=()=>{const M=L||"all",G=z.filter(Pe=>{var Nn,Es,ks,En;const Cs=(Nn=Pe.name)==null?void 0:Nn.toLowerCase().includes(P.toLowerCase()),Qr=(Es=Pe.cpf)==null?void 0:Es.includes(P),Re=(ks=Pe.cnpj)==null?void 0:ks.includes(P),Zr=(En=Pe.phone)==null?void 0:En.includes(P),Ns=M!=="all"?Pe.category===M:!0;return(Cs||Qr||Re||Zr)&&Ns}),ge=10,he=Math.ceil(G.length/ge),Ue=(Ne-1)*ge,et=Ue+ge,yt=oe?G:G.slice(Ue,et);return i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione o cliente"}),i.jsxs("div",{className:"mb-4",children:[i.jsx(q,{placeholder:"Buscar por nome, CPF, CNPJ ou telefone...",value:P,onChange:Pe=>U(Pe.target.value),className:"mb-2"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs(st,{value:M,onValueChange:H,children:[i.jsx(Ye,{className:"w-48",children:i.jsx(ot,{placeholder:"Todas as categorias"})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"all",children:"Todas as categorias"}),i.jsx(be,{value:"Varejo",children:"Varejo"}),i.jsx(be,{value:"Atacado",children:"Atacado"}),i.jsx(be,{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]})]}),i.jsx(D,{variant:"outline",onClick:()=>de(!oe),children:oe?"Mostrar menos":"Mostrar todos"}),i.jsxs(D,{variant:"default",onClick:()=>T(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Cadastrar Cliente"]})]})]}),$?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando clientes..."}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto border border-gray-700 rounded-lg p-2",children:yt.length===0?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:P?"Nenhum cliente encontrado com essa busca.":"Nenhum cliente cadastrado."}):yt.map(Pe=>i.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors border ${(R==null?void 0:R.id)===Pe.id?"bg-blue-600 border-blue-500 text-white":"bg-gray-800 border-gray-700 hover:bg-gray-700 text-gray-200"}`,onClick:()=>O(Pe),children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:`font-medium ${(R==null?void 0:R.id)===Pe.id?"text-white":"text-gray-200"}`,children:Pe.name}),i.jsxs("div",{className:`text-sm mt-1 ${(R==null?void 0:R.id)===Pe.id?"text-blue-100":"text-gray-400"}`,children:[i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${Pe.category==="Varejo"?"bg-green-600 text-green-100":Pe.category==="Atacado"?"bg-blue-600 text-blue-100":Pe.category==="Cliente Exclusivo"?"bg-purple-600 text-purple-100":"bg-gray-600 text-gray-100"}`,children:Pe.category||"Cliente"}),Pe.cpf&&i.jsxs("span",{className:"ml-2",children:["• CPF: ",Pe.cpf]}),Pe.cnpj&&i.jsxs("span",{className:"ml-2",children:["• CNPJ: ",Pe.cnpj]}),Pe.phone&&i.jsxs("span",{className:"ml-2",children:["• Tel: ",Pe.phone]})]})]}),(R==null?void 0:R.id)===Pe.id&&i.jsx("div",{className:"text-white text-sm font-medium bg-white bg-opacity-20 px-3 py-1 rounded-full",children:"✓ Selecionado"})]})},Pe.id))}),!$&&G.length>ge&&!oe&&i.jsxs("div",{className:"flex justify-between items-center mt-4 p-3 bg-gray-800 border border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"text-sm text-gray-300 font-medium",children:["Mostrando ",Ue+1,"-",Math.min(et,G.length)," de ",G.length," clientes"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(D,{variant:"outline",size:"sm",onClick:()=>ae(Math.max(1,Ne-1)),disabled:Ne===1,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:"← Anterior"}),i.jsxs("span",{className:"px-4 py-2 text-sm bg-gray-700 border border-gray-600 rounded-lg font-medium text-gray-200",children:[Ne," de ",he]}),i.jsx(D,{variant:"outline",size:"sm",onClick:()=>ae(Math.min(he,Ne+1)),disabled:Ne===he,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Próxima →"})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(D,{onClick:()=>R&&v(3),disabled:!R,children:"Avançar"}),i.jsx(D,{variant:"ghost",onClick:()=>v(1),children:"Voltar"})]})]})};return ke(),B.slice(0,X).reduce((M,G)=>M+(tt(G.amount)||0),0),B.slice(0,X).every(M=>M.method&&M.amount&&!isNaN(tt(M.amount))&&(M.method!=="credit"||M.parcelas)),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[i.jsx(Wu,{}),i.jsx(tF,{open:A,onOpenChange:T,onCustomerCreated:Hu}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[x===0&&sl(),x===1&&Yu(),x===2&&bC(),x===3&&Gu(),x===4&&nl(),x===5&&qu()]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(sF,{subtotal:Z(),discountAmount:pe(),total:ke(),onApplyDiscount:Ke,discount:a}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"w-5 h-5"}),i.jsx("span",{children:"Status do Caixa"})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),i.jsx("p",{className:`font-bold ${d.isOpen?"text-green-600":"text-red-600"}`,children:d.isOpen?"ABERTO":"FECHADO"}),d.isOpen&&i.jsx("p",{className:"text-lg font-bold",children:ct(d.currentAmount)})]}),i.jsx("div",{className:"text-center",children:i.jsx(D,{variant:"outline",size:"sm",onClick:()=>window.location.href="/cash-register",className:"w-full",children:"Gerenciar Caixa"})})]})]}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"pt-6",children:i.jsx(D,{variant:"outline",size:"lg",className:"w-full border-red-600 text-red-400 hover:bg-red-600 hover:text-white",onClick:ht,children:"Encerrar Venda"})})})]})]})},aF=({products:e,onEdit:t,onDelete:r,stores:n,currentUser:s})=>{if(e.length===0)return i.jsx(re,{children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(Hr,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum produto encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os termos de busca ou crie seu primeiro produto."})]})});const o=a=>{var l;return((l=n.find(c=>c.id===a))==null?void 0:l.name)||"Loja Desconhecida"};return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{var u,d,h;let l=a.stock,c="Est. Online/Geral";if(s&&s.store_id&&!((u=s.stores)!=null&&u.is_online_store)){const f=(d=a.physicalStocks)==null?void 0:d.find(g=>g.store_id===s.store_id);f?(l=f.quantity,c=`Est. ${s.stores.name}`):(l=0,c=`Est. ${s.stores.name}`)}return i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-hover",children:i.jsxs(re,{className:"glass-effect flex flex-col h-full",children:[i.jsxs(ye,{children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[a.image_url?i.jsx("img",{src:a.image_url,alt:a.name,className:"w-10 h-10 object-cover rounded-md border",onError:f=>{console.log("❌ Erro ao carregar imagem:",a.image_url,"para produto:",a.name),f.target.style.display="none",f.target.nextSibling.style.display="block"},onLoad:()=>{console.log("✅ Imagem carregada com sucesso:",a.image_url,"para produto:",a.name)}}):null,i.jsx(Hr,{className:`w-5 h-5 text-primary ${a.image_url?"hidden":"block"}`}),i.jsx(xe,{className:"text-lg",children:a.name})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(Go,{to:`/products/${a.id}`,children:i.jsx(D,{variant:"ghost",size:"icon",children:i.jsx(ep,{className:"w-4 h-4"})})}),i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>t(a),children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>r(a),className:"text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground pt-1",children:["Cód: ",a.barcode]}),i.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:["Tipo: ",a.product_type==="variable"?"Variável":"Simples"]}),a.store_id&&i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[i.jsx(Ra,{className:"w-3 h-3 mr-1"}),i.jsxs("span",{children:["Cadastrado em: ",o(a.store_id)]})]})]}),i.jsxs(se,{className:"space-y-3 flex-grow flex flex-col justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Categoria:"}),i.jsx("p",{children:a.category||"-"})]})}),s&&(((h=s.stores)==null?void 0:h.is_online_store)||s.role==="admin")&&a.physicalStocks&&a.physicalStocks.length>0&&i.jsxs("div",{className:"mt-3 pt-2 border-t border-dashed",children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Estoque nas Lojas Físicas:"}),i.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto text-xs",children:a.physicalStocks.map(f=>{var g;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Kj,{className:"w-3 h-3 mr-1 text-muted-foreground"}),i.jsxs("span",{children:[((g=f.stores)==null?void 0:g.name)||o(f.store_id),":"]})]}),i.jsxs("span",{children:[f.quantity," un."]})]},f.id)})})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[i.jsxs("span",{className:"text-xl font-bold text-primary",children:["R$ ",a.price.toFixed(2)]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`text-sm font-medium ${l<=a.min_stock?"text-orange-600":"text-green-600"}`,children:[c,": ",l]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Alerta Mín: ",a.min_stock]})]})]})]})]})},a.id)})})},lF=async()=>{try{const e=it();let t=Q.from("categories").select("*").order("name");(e==null?void 0:e.role)!=="admin"&&(e!=null&&e.store_id)?t=t.eq("store_id",e.store_id):(e==null?void 0:e.role)!=="admin"&&(t=t.is("store_id",null));const{data:r,error:n}=await t;if(n)throw console.error("Erro ao buscar categorias:",n),new Error("Erro ao buscar categorias");return r||[]}catch(e){throw console.error("Erro em getCategories:",e),e}},cF=async e=>{try{const t=it(),r={...e,store_id:(t==null?void 0:t.store_id)||null},{data:n,error:s}=await Q.from("categories").insert([r]).select().single();if(s)throw console.error("Erro ao adicionar categoria:",s),new Error("Erro ao adicionar categoria");return n}catch(t){throw console.error("Erro em addCategory:",t),t}},uF=async(e,t)=>{try{const{data:r,error:n}=await Q.from("categories").update(t).eq("id",e).select().single();if(n)throw console.error("Erro ao atualizar categoria:",n),new Error("Erro ao atualizar categoria");return r}catch(r){throw console.error("Erro em updateCategory:",r),r}},dF=async e=>{try{const{error:t}=await Q.from("categories").delete().eq("id",e);if(t)throw console.error("Erro ao deletar categoria:",t),new Error("Erro ao deletar categoria");return!0}catch(t){throw console.error("Erro em deleteCategory:",t),t}},hF=async()=>{try{const e=it();let t=Q.from("categories").select("*").eq("active",!0).order("name");(e==null?void 0:e.role)!=="admin"&&(e!=null&&e.store_id)?t=t.eq("store_id",e.store_id):(e==null?void 0:e.role)!=="admin"&&(t=t.is("store_id",null));const{data:r,error:n}=await t;if(n)throw console.error("Erro ao buscar categorias ativas:",n),new Error("Erro ao buscar categorias ativas");return r||[]}catch(e){throw console.error("Erro em getActiveCategories:",e),e}},fF=async e=>{try{const{data:t,error:r}=await Q.from("products").select("id, name").eq("category",e).limit(1);if(r)throw console.error("Erro ao verificar uso da categoria:",r),new Error("Erro ao verificar uso da categoria");return t.length>0}catch(t){throw console.error("Erro em checkCategoryUsage:",t),t}},Er={SIMPLE:"simple",VARIABLE:"variable"},mF=({formData:e,handleInputChange:t,handleProductTypeChange:r,categories:n=[]})=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"name",children:"Nome do Produto *"}),i.jsx(q,{id:"name",name:"name",value:e.name,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"category",children:"Categoria"}),i.jsxs(st,{name:"category",value:e.category,onValueChange:s=>t({target:{name:"category",value:s}}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione a categoria"})}),i.jsx(Xe,{children:n.map(s=>i.jsx(be,{value:s.name,children:s.name},s.id))})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"barcode",children:"Código de Barras Principal *"}),i.jsx(q,{id:"barcode",name:"barcode",value:e.barcode,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"price",children:"Preço Principal *"}),i.jsx(q,{id:"price",name:"price",type:"number",step:"0.01",value:e.price,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"price_varejo",children:"Preço de Varejo"}),i.jsx(q,{id:"price_varejo",name:"price_varejo",type:"number",step:"0.01",value:e.price_varejo||"",onChange:t})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"price_atacado",children:"Preço de Atacado"}),i.jsx(q,{id:"price_atacado",name:"price_atacado",type:"number",step:"0.01",value:e.price_atacado||"",onChange:t})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"price_atacarejo",children:"Cliente Exclusivo"}),i.jsx(q,{id:"price_atacarejo",name:"price_atacarejo",type:"number",step:"0.01",value:e.price_atacarejo||"",onChange:t})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"product_type",children:"Tipo de Produto *"}),i.jsxs(st,{name:"product_type",value:e.product_type,onValueChange:r,children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione o tipo"})}),i.jsxs(Xe,{children:[i.jsx(be,{value:Er.SIMPLE,children:"Produto Simples"}),i.jsx(be,{value:Er.VARIABLE,children:"Produto Variável"})]})]})]}),e.product_type===Er.SIMPLE&&i.jsxs("div",{children:[i.jsx(V,{htmlFor:"stock",children:"Estoque (Simples) *"}),i.jsx(q,{id:"stock",name:"stock",type:"number",value:e.stock,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"referencia",children:"Referência *"}),i.jsx(q,{id:"referencia",name:"referencia",value:e.referencia||"",onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"min_stock",children:"Estoque Mínimo Global (Alerta)"}),i.jsx(q,{id:"min_stock",name:"min_stock",type:"number",value:e.min_stock,onChange:t})]})]}),i.jsxs("div",{className:"pt-4 border-t mt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Dimensões e Peso (para frete)"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"weight",children:"Peso (kg)"}),i.jsx(q,{id:"weight",name:"weight",type:"number",step:"0.01",value:e.weight,onChange:t})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"length",children:"Comprimento (cm)"}),i.jsx(q,{id:"length",name:"length",type:"number",step:"0.1",value:e.length,onChange:t})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"height",children:"Altura (cm)"}),i.jsx(q,{id:"height",name:"height",type:"number",step:"0.1",value:e.height,onChange:t})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"width",children:"Largura (cm)"}),i.jsx(q,{id:"width",name:"width",type:"number",step:"0.1",value:e.width,onChange:t})]})]})]})]}),K_=({title:e,imageUrlPreview:t,handleImageChange:r,imageInputRef:n,idPrefix:s="main"})=>i.jsxs("div",{className:"pt-4 border-t mt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:e}),i.jsx(q,{type:"file",accept:"image/*",onChange:r,ref:n,className:"mb-2",id:`${s}_image_upload`}),t&&i.jsx("img",{src:t,alt:`Preview ${e}`,className:"w-32 h-32 object-cover rounded-md border"})]}),pF=({variations:e,handleVariationChange:t,handleVariationAttributeChange:r,removeVariation:n,addVariation:s,handleVariationImageChange:o,variationImageUrlPreviews:a})=>!e||e.length===0?i.jsx("div",{className:"pt-4 border-t mt-6",children:i.jsxs(D,{type:"button",variant:"outline",onClick:s,children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Adicionar Primeira Variação"]})}):i.jsxs("div",{className:"pt-4 border-t mt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Variações do Produto"}),e.map((l,c)=>i.jsxs("div",{className:"p-4 border rounded-md mb-4 space-y-3 bg-muted/20 relative",children:[i.jsx(D,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 text-destructive",onClick:()=>n(c),children:i.jsx(ao,{className:"w-4 h-4"})}),i.jsxs("p",{className:"font-semibold text-md",children:["Variação ",c+1]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(l.attributes||[{name:"",value:""}]).map((u,d)=>i.jsxs(ue.Fragment,{children:[i.jsxs("div",{children:[i.jsxs(V,{htmlFor:`variation_${c}_attribute_name_${d}`,children:["Nome do Atributo ",d+1," (Ex: Cor, Tamanho)"]}),i.jsx(q,{id:`variation_${c}_attribute_name_${d}`,value:u.name,onChange:h=>r(c,d,"name",h.target.value)})]}),i.jsxs("div",{children:[i.jsxs(V,{htmlFor:`variation_${c}_attribute_value_${d}`,children:["Valor do Atributo ",d+1," (Ex: Azul, M)"]}),i.jsx(q,{id:`variation_${c}_attribute_value_${d}`,value:u.value,onChange:h=>r(c,d,"value",h.target.value)})]})]},d))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_sku_${c}`,children:"SKU da Variação"}),i.jsx(q,{id:`variation_sku_${c}`,value:l.sku||"",onChange:u=>t(c,"sku",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_barcode_${c}`,children:"Cód. Barras Variação"}),i.jsx(q,{id:`variation_barcode_${c}`,value:l.barcode||"",onChange:u=>t(c,"barcode",u.target.value),onKeyDown:u=>{var d;if(u.key==="Enter"){u.preventDefault(),u.stopPropagation();const h=(d=u.target.closest("form"))==null?void 0:d.querySelector(`#variation_referencia_${c}`);h&&h.focus()}}})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_referencia_${c}`,children:"Referência"}),i.jsx(q,{id:`variation_referencia_${c}`,value:l.referencia||"",onChange:u=>t(c,"referencia",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_price_${c}`,children:"Preço Variação (opcional)"}),i.jsx(q,{id:`variation_price_${c}`,type:"number",step:"0.01",value:l.price||"",onChange:u=>t(c,"price",u.target.value),placeholder:"Usar preço principal"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_price_varejo_${c}`,children:"Preço Varejo"}),i.jsx(q,{id:`variation_price_varejo_${c}`,type:"number",step:"0.01",value:l.price_varejo||"",onChange:u=>t(c,"price_varejo",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_price_atacado_${c}`,children:"Preço Atacado"}),i.jsx(q,{id:`variation_price_atacado_${c}`,type:"number",step:"0.01",value:l.price_atacado||"",onChange:u=>t(c,"price_atacado",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_price_atacarejo_${c}`,children:"Cliente Exclusivo"}),i.jsx(q,{id:`variation_price_atacarejo_${c}`,type:"number",step:"0.01",value:l.price_atacarejo||"",onChange:u=>t(c,"price_atacarejo",u.target.value)})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:`variation_stock_${c}`,children:"Estoque da Variação *"}),i.jsx(q,{id:`variation_stock_${c}`,type:"number",value:l.stock||"0",onChange:u=>t(c,"stock",u.target.value),required:!0})]}),i.jsx(K_,{title:"Imagem da Variação (opcional)",imageUrlPreview:a[c],handleImageChange:u=>o(c,u),idPrefix:`variation_${c}`})]},c)),i.jsxs(D,{type:"button",variant:"outline",onClick:s,children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Adicionar Variação"]})]});var Uu="Switch",[gF,O3]=vs(Uu),[vF,yF]=gF(Uu),J_=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,g]=p.useState(null),w=Me(t,y=>g(y)),m=p.useRef(!1),j=f?d||!!f.closest("form"):!0,[x,v]=Qs({prop:s,defaultProp:o??!1,onChange:u,caller:Uu});return i.jsxs(vF,{scope:r,checked:x,disabled:l,children:[i.jsx(me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":Z_(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:w,onClick:ce(e.onClick,y=>{v(b=>!b),j&&(m.current=y.isPropagationStopped(),m.current||y.stopPropagation())})}),j&&i.jsx(Q_,{control:f,bubbles:!m.current,name:n,value:c,checked:x,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});J_.displayName=Uu;var Y_="SwitchThumb",X_=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=yF(Y_,r);return i.jsx(me.span,{"data-state":Z_(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});X_.displayName=Y_;var xF="SwitchBubbleInput",Q_=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},o)=>{const a=p.useRef(null),l=Me(a,o),c=u_(r),u=ZS(t);return p.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&g){const w=new Event("click",{bubbles:n});g.call(d,r),d.dispatchEvent(w)}},[c,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q_.displayName=xF;function Z_(e){return e?"checked":"unchecked"}var eC=J_,wF=X_;const Un=ue.forwardRef(({className:e,...t},r)=>i.jsx(eC,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(wF,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Un.displayName=eC.displayName;class tC{constructor(){this.baseURL="https://fiodegala.com.br",this.consumerKey="ck_5e67006c47937098df701a162be25fbb74e9d5c0",this.consumerSecret="cs_6bf2fe2d2bb181c962c053cc6c8276df208b48f2",this.apiVersion="wc/v3"}getAuthHeader(){const t=`${this.consumerKey}:${this.consumerSecret}`;return`Basic ${btoa(t)}`}async createProduct(t){try{let r=null;t.category&&(r=await this.getOrCreateCategory(t.category));const n={name:t.name,type:"simple",regular_price:t.price.toString(),description:t.description||"",short_description:t.short_description||"",sku:t.barcode||"",manage_stock:!0,stock_quantity:t.stock||0,stock_status:(t.stock||0)>0?"instock":"outofstock",weight:t.weight?t.weight.toString():"",dimensions:{length:t.length?t.length.toString():"",width:t.width?t.width.toString():"",height:t.height?t.height.toString():""},categories:r?[{id:r}]:[],images:t.images?t.images.map(a=>({src:a,position:0})):[],attributes:this.mapAttributes(t),status:"publish"},s=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(n)});if(!s.ok){const a=await s.json();throw new Error(`Erro ao criar produto no WooCommerce: ${a.message||s.statusText}`)}const o=await s.json();return console.log("Produto criado no WooCommerce:",o),o}catch(r){throw console.error("Erro na integração WooCommerce:",r),r}}async updateProduct(t,r){try{let n=null;r.category&&(n=await this.getOrCreateCategory(r.category));const s={name:r.name,regular_price:r.price.toString(),description:r.description||"",short_description:r.short_description||"",sku:r.barcode||"",manage_stock:!0,stock_quantity:r.stock||0,stock_status:(r.stock||0)>0?"instock":"outofstock",weight:r.weight?r.weight.toString():"",dimensions:{length:r.length?r.length.toString():"",width:r.width?r.width.toString():"",height:r.height?r.height.toString():""},categories:n?[{id:n}]:[],images:r.images?r.images.map(l=>({src:l,position:0})):[],attributes:this.mapAttributes(r)},o=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(s)});if(!o.ok){const l=await o.json();throw new Error(`Erro ao atualizar produto no WooCommerce: ${l.message||o.statusText}`)}const a=await o.json();return console.log("Produto atualizado no WooCommerce:",a),a}catch(n){throw console.error("Erro na atualização WooCommerce:",n),n}}async updateStock(t,r){try{const n={stock_quantity:r,stock_status:r>0?"instock":"outofstock"},s=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(n)});if(!s.ok){const a=await s.json();throw new Error(`Erro ao atualizar estoque no WooCommerce: ${a.message||s.statusText}`)}const o=await s.json();return console.log("Estoque atualizado no WooCommerce:",o),o}catch(n){throw console.error("Erro na atualização de estoque:",n),n}}async deleteProduct(t){try{const r=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/${t}`,{method:"DELETE",headers:{Authorization:this.getAuthHeader()}});if(!r.ok){const n=await r.json();throw new Error(`Erro ao deletar produto no WooCommerce: ${n.message||r.statusText}`)}return console.log("Produto deletado no WooCommerce"),!0}catch(r){throw console.error("Erro ao deletar produto:",r),r}}async getProductBySKU(t){try{const r=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products?sku=${t}`,{headers:{Authorization:this.getAuthHeader()}});if(!r.ok)throw new Error(`Erro ao buscar produto no WooCommerce: ${r.statusText}`);const n=await r.json();return n.length>0?n[0]:null}catch(r){throw console.error("Erro ao buscar produto por SKU:",r),r}}mapAttributes(t){const r=[];return t.color&&r.push({name:"Cor",position:0,visible:!0,variation:!0,options:[t.color]}),t.size&&r.push({name:"Tamanho",position:1,visible:!0,variation:!0,options:[t.size]}),t.brand&&r.push({name:"Marca",position:2,visible:!0,variation:!1,options:[t.brand]}),r}async getOrCreateCategory(t){try{const r=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/categories?search=${encodeURIComponent(t)}`,{headers:{Authorization:this.getAuthHeader()}});if(r.ok){const a=(await r.json()).find(l=>l.name.toLowerCase()===t.toLowerCase());if(a)return console.log("Categoria encontrada:",a.name,"ID:",a.id),a.id}const n=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify({name:t,slug:t.toLowerCase().replace(/\s+/g,"-")})});if(!n.ok){const o=await n.json();throw new Error(`Erro ao criar categoria: ${o.message||n.statusText}`)}const s=await n.json();return console.log("Nova categoria criada:",s.name,"ID:",s.id),s.id}catch(r){throw console.error("Erro ao buscar/criar categoria:",r),r}}async testConnection(){try{const t=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products?per_page=1`,{headers:{Authorization:this.getAuthHeader()}});if(!t.ok)throw new Error(`Erro na conexão: ${t.statusText}`);return!0}catch(t){throw console.error("Erro no teste de conexão:",t),t}}}const th=Object.freeze(Object.defineProperty({__proto__:null,default:tC},Symbol.toStringTag,{value:"Module"})),jF=({open:e,onOpenChange:t,formData:r,setFormData:n,onSubmit:s,editingProduct:o,resetForm:a,onStockShared:l})=>{const[c,u]=p.useState([]),[d,h]=p.useState([]),[f,g]=p.useState(!1),[w,m]=p.useState(""),[j,x]=p.useState(""),[v,y]=p.useState([]),[b,S]=p.useState([]),[E,N]=p.useState(null),[_,C]=p.useState(""),[I,R]=p.useState({}),[O,z]=p.useState({}),[k,$]=p.useState([]),[F,A]=p.useState([]),[T,P]=p.useState(!1),[U,L]=p.useState(r.medidas||{ombro:"",busto:"",cintura:"",quadril:"",comprimento:"",manga:"",tornozelo:""}),[H,oe]=p.useState(!1),[de,Ne]=p.useState(""),[ae,Y]=p.useState(!1);p.useRef(null);const{toast:X}=at(),Ee=it(),B={name:"",category:"",barcode:"",price:"",price_varejo:"",price_atacado:"",price_atacarejo:"",referencia:"",stock:"0",min_stock:"0",active:!0,weight:"",length:"",height:"",width:"",product_type:Er.SIMPLE,image_url:""};p.useEffect(()=>{var K,Z,pe,ke,Ke,ht,jr,Ze,_s,Si;if(o){n({name:o.name||"",category:o.category||"",barcode:o.barcode||"",price:((K=o.price)==null?void 0:K.toString())||"",price_varejo:((Z=o.price_varejo)==null?void 0:Z.toString())||"",price_atacado:((pe=o.price_atacado)==null?void 0:pe.toString())||"",price_atacarejo:((ke=o.price_atacarejo)==null?void 0:ke.toString())||"",referencia:o.referencia||"",stock:o.product_type===Er.SIMPLE&&((Ke=o.stock)==null?void 0:Ke.toString())||"0",min_stock:((ht=o.min_stock)==null?void 0:ht.toString())||"0",active:o.active!==void 0?o.active:!0,weight:((jr=o.weight)==null?void 0:jr.toString())||"",length:((Ze=o.length)==null?void 0:Ze.toString())||"",height:((_s=o.height)==null?void 0:_s.toString())||"",width:((Si=o.width)==null?void 0:Si.toString())||"",product_type:o.product_type||Er.SIMPLE,image_url:o.image_url||""}),S(o.variations||[]),C(o.image_url||"");const nl={};(o.variations||[]).forEach((sl,Yu)=>{sl.image_url&&(nl[Yu]=sl.image_url)}),z(nl)}else n(B),S([]),C(""),z({})},[o,e,n]),p.useEffect(()=>{L(r.medidas||{ombro:"",busto:"",cintura:"",quadril:"",comprimento:"",manga:"",tornozelo:""})},[r.medidas]);const ie=async()=>{try{await new tC().testConnection(),Y(!0),X({title:"Conexão OK",description:"Conexão com WooCommerce estabelecida com sucesso!",variant:"default"})}catch{Y(!1),X({title:"Erro de Conexão",description:"Não foi possível conectar com o WooCommerce. Verifique as configurações.",variant:"destructive"})}},we=()=>{const K=r.category,Z=["Camiseta","Gola Média","Camisa","Blazer","Jaqueta","Súeter"],pe=["Calças","Bermudas"];return Z.includes(K)?[{name:"tamanho",label:"Tamanho"},{name:"comprimento",label:"Comprimento"},{name:"busto",label:"Busto"},{name:"cintura",label:"Cintura"},{name:"ombro",label:"Ombro"},{name:"manga",label:"Manga"}]:pe.includes(K)?[{name:"tamanho",label:"Tamanho"},{name:"comprimento",label:"Comprimento"},{name:"cintura",label:"Cintura"},{name:"tornozelo",label:"Tornozelo"}]:[]};p.useEffect(()=>{(async()=>{const Z=await js(!0);u(Z||[])})()},[]),p.useEffect(()=>{(async()=>{try{const Z=await hF();h(Z||[])}catch(Z){console.error("Erro ao buscar categorias:",Z)}})()},[]),p.useEffect(()=>{e&&o&&(async()=>{if(o&&o.id){const Z=await li(o.id);y(Z||[])}else y([])})()},[e,o]);const lt=K=>{const{name:Z,value:pe}=K.target;n(ke=>({...ke,[Z]:pe}))},Ct=K=>{const{name:Z,value:pe}=K.target;L(ke=>({...ke,[Z]:pe}))},Dr=()=>{n(K=>({...K,medidas:U})),P(!1)},xr=K=>{n(Z=>({...Z,product_type:K,stock:K===Er.SIMPLE?Z.stock:"0"})),K===Er.SIMPLE?S([]):b.length===0&&wr()},wr=()=>{S(K=>[...K,{attributes:[{name:"Cor",value:""},{name:"Tamanho",value:""}],sku:"",barcode:"",price:"",stock:"0",image_url:""}])},_n=(K,Z,pe)=>{const ke=[...b];ke[K][Z]=pe,S(ke)},Cn=(K,Z,pe,ke)=>{const Ke=[...b];Ke[K].attributes||(Ke[K].attributes=[]),Ke[K].attributes[Z]||(Ke[K].attributes[Z]={name:"",value:""}),Ke[K].attributes[Z][pe]=ke,S(Ke)},zu=K=>{S(Z=>Z.filter((pe,ke)=>ke!==K)),R(Z=>{const pe={...Z};return delete pe[K],pe}),z(Z=>{const pe={...Z};return delete pe[K],pe})},Wu=K=>{const Z=K.target.files[0];Z&&(N(Z),C(URL.createObjectURL(Z)))},qu=(K,Z)=>{const pe=Z.target.files[0];pe&&(R(ke=>({...ke,[K]:pe})),z(ke=>({...ke,[K]:URL.createObjectURL(pe)})))},Hu=K=>{const Z=Array.from(K.target.files);$(Z),A(Z.map(pe=>URL.createObjectURL(pe)))},ho=async(K,Z="img-products")=>{if(!K)return null;const pe=`${Date.now()}_${K.name.replace(/\s/g,"_")}`,{data:ke,error:Ke}=await Q.storage.from(Z).upload(pe,K);if(Ke)throw X({title:"Erro no Upload da Imagem",description:Ke.message,variant:"destructive"}),Ke;const{data:{publicUrl:ht}}=Q.storage.from(Z).getPublicUrl(pe);return ht},Gu=async K=>{K.preventDefault(),await Ku()},Ku=async()=>{let K=r.image_url;if(E)try{K=await ho(E)}catch{return}let Z=[];k.length>0&&(Z=await Promise.all(k.map(async ht=>{try{return await ho(ht)}catch{return null}})),Z=Z.filter(Boolean));const pe=await Promise.all(b.map(async(ht,jr)=>{let Ze=ht.image_url;if(I[jr])try{Ze=await ho(I[jr])}catch{throw new Error(`Erro ao fazer upload da imagem para variação ${jr+1}.`)}return{...ht,image_url:Ze,price:parseFloat(ht.price)||null,stock:parseInt(ht.stock)||0}})).catch(ht=>(X({title:"Erro no processamento de variações",description:ht.message,variant:"destructive"}),null));if(!pe&&b.length>0)return;const ke={...r,referencia:r.referencia,image_url:K,variations:r.product_type===Er.VARIABLE?pe:[],price:parseFloat(r.price)||0,price_varejo:parseFloat(r.price_varejo)||0,price_atacado:parseFloat(r.price_atacado)||0,price_atacarejo:parseFloat(r.price_atacarejo)||0,weight:parseFloat(r.weight)||null,length:parseFloat(r.length)||null,height:parseFloat(r.height)||null,width:parseFloat(r.width)||null};ke.product_type===Er.VARIABLE?ke.stock=(pe||[]).reduce((ht,jr)=>ht+(parseInt(jr.stock)||0),0):ke.stock=parseInt(r.stock)||0;const Ke={...ke,syncWithWooCommerce:H&&ae,uploadedImageUrls:Z};s(Ke,Z)},Ju=async()=>{if(!o||!w||!j){X({title:"Erro",description:"Selecione produto, loja e quantidade para compartilhar.",variant:"destructive"});return}const K=parseInt(j);if(isNaN(K)||K<=0){X({title:"Erro",description:"Quantidade inválida.",variant:"destructive"});return}try{await DM(o.id,w,K,null),X({title:"Estoque Compartilhado!",description:`${K} unidades compartilhadas com sucesso.`}),m(""),x(""),g(!1);const Z=await li(o.id);y(Z||[]),l&&l()}catch(Z){X({title:"Erro ao compartilhar",description:Z.message,variant:"destructive"})}},rl=Ee&&Gt(Ee.role,J.SHARE_STOCK),bi=()=>{t(!1),a(),g(!1),m(""),x(""),y([]),S([]),N(null),C(""),R({}),z({})};return i.jsxs(mr,{open:e,onOpenChange:K=>{K?t(!0):bi()},children:[i.jsx(Jo,{asChild:!0,children:i.jsxs(D,{children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Novo Produto"]})}),i.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsx(er,{children:i.jsx(tr,{children:o?"Editar Produto":"Novo Produto"})}),i.jsxs("form",{id:"product-form",onSubmit:Gu,className:"flex-1 overflow-y-auto space-y-6 p-2 pr-4",children:[i.jsx(mF,{formData:r,handleInputChange:lt,handleProductTypeChange:xr,categories:d}),i.jsx(K_,{title:"Imagem Principal (opcional)",imageUrlPreview:_,handleImageChange:Wu,idPrefix:"main"}),i.jsxs("div",{className:"mt-4",children:[i.jsx(V,{children:"Imagens do Produto (várias)"}),i.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[F.map((K,Z)=>i.jsxs("div",{className:`relative group rounded-lg shadow-md border bg-background ${Z===0?"ring-2 ring-primary":""}`,children:[i.jsx("img",{src:K,alt:`Imagem ${Z+1}`,className:"w-24 h-24 object-cover rounded-lg transition-transform group-hover:scale-105"}),Z===0&&i.jsx("span",{className:"absolute top-1 left-1 bg-primary text-xs text-white px-2 py-0.5 rounded shadow",children:"Destaque"}),i.jsx("button",{type:"button",className:"absolute top-1 right-1 bg-destructive text-white rounded-full p-1 opacity-80 hover:opacity-100",onClick:()=>{$(pe=>pe.filter((ke,Ke)=>Ke!==Z)),A(pe=>pe.filter((ke,Ke)=>Ke!==Z))},title:"Remover imagem",children:"×"})]},Z)),i.jsxs("label",{className:"flex flex-col items-center justify-center w-24 h-24 border-2 border-dashed border-muted-foreground rounded-lg cursor-pointer hover:bg-muted transition",children:[i.jsx("span",{className:"text-3xl text-muted-foreground",children:"+"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:Hu})]})]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"A primeira imagem será a de destaque."})]}),r.product_type===Er.VARIABLE&&i.jsx(pF,{variations:b,handleVariationChange:_n,handleVariationAttributeChange:Cn,removeVariation:zu,addVariation:wr,handleVariationImageChange:qu,variationImageUrlPreviews:O}),i.jsxs("div",{className:"pt-4 border-t mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Integração WooCommerce"}),i.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:ie,children:"Testar Conexão"})]}),i.jsxs("div",{className:"p-4 border rounded-md bg-muted/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Un,{checked:H,onCheckedChange:oe,disabled:!ae}),i.jsx(V,{children:"Sincronizar com WooCommerce"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${ae?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:"text-sm text-muted-foreground",children:ae?"Conectado":"Desconectado"})]})]}),de&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID WooCommerce: ",de]}),!ae&&i.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:'Clique em "Testar Conexão" para verificar a integração com WooCommerce.'})]})]}),o&&rl&&i.jsxs("div",{className:"pt-4 border-t mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Compartilhar Estoque com Lojas Físicas"}),i.jsxs(D,{type:"button",variant:"outline",size:"sm",onClick:()=>g(!f),children:[i.jsx(DT,{className:"w-4 h-4 mr-2"}),f?"Fechar":"Abrir"," Compartilhamento"]})]}),f&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-md bg-muted/30",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"shareStoreId",children:"Loja Física"}),i.jsxs(st,{value:w,onValueChange:m,children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione a loja"})}),i.jsx(Xe,{children:c.map(K=>i.jsx(be,{value:K.id,children:K.name},K.id))})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"shareQuantity",children:"Qtd. a Compartilhar"}),i.jsx("input",{id:"shareQuantity",type:"number",min:"1",value:j,onChange:K=>x(K.target.value),className:"input w-full border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 rounded-md"})]}),i.jsx("div",{className:"md:self-end",children:i.jsx(D,{type:"button",onClick:Ju,className:"w-full",children:"Compartilhar"})})]}),v.length>0&&i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Estoque Compartilhado:"}),v.map(K=>{var Z;return i.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background rounded-md",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Kj,{className:"w-4 h-4 mr-2 text-muted-foreground"}),i.jsx("span",{children:((Z=K.stores)==null?void 0:Z.name)||"Loja desconhecida"})]}),i.jsxs("span",{children:[K.quantity," unidades"]})]},K.id)})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t mt-4 bg-background",children:[i.jsx(D,{type:"button",variant:"outline",onClick:bi,children:"Cancelar"}),i.jsxs(D,{type:"submit",form:"product-form",children:[o?"Atualizar":"Criar"," Produto"]})]}),i.jsx(D,{type:"button",variant:"outline",className:"mt-2",onClick:()=>P(!0),children:"Adicionar Medidas"}),i.jsx(mr,{open:T,onOpenChange:P,children:i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Medidas da Peça"})}),r.category?i.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:we().map(K=>i.jsxs("div",{children:[i.jsx(V,{children:K.label}),i.jsx(q,{name:K.name,value:U[K.name]||"",onChange:Ct})]},K.name))}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Selecione uma categoria primeiro para ver os campos de medidas disponíveis."}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(D,{type:"button",variant:"ghost",onClick:()=>P(!1),children:"Cancelar"}),i.jsx(D,{type:"button",onClick:Dr,children:"Salvar"})]})]})})]})]})},bF=({products:e})=>e.length===0?null:i.jsxs(re,{className:"border-orange-500 bg-orange-50 dark:bg-orange-950",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2 text-orange-700 dark:text-orange-300",children:[i.jsx(jT,{className:"w-5 h-5"}),i.jsx("span",{children:"Produtos com Estoque Baixo"})]})}),i.jsx(se,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:e.map(t=>i.jsxs("div",{className:"text-sm p-2 bg-orange-100 dark:bg-orange-900/50 rounded",children:[i.jsx("span",{className:"font-medium",children:t.name}),i.jsxs("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:["(Estoque: ",t.stock," / Mín: ",t.min_stock,")"]})]},t.id))})})]}),SF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(""),[s,o]=p.useState(null),[a,l]=p.useState(!1),[c,u]=p.useState(!0),[d,h]=p.useState([]),{toast:f}=at(),g=it(),[w,m]=p.useState({name:"",category:"",brand:"",barcode:"",sizes:"",colors:"",price:"",stock:"",min_stock:"",active:!0}),[j,x]=p.useState({barcode:"",sku:"",referencia:"",name:""}),v=R=>{const{name:O,value:z}=R.target;x(k=>({...k,[O]:z}))},y=e.filter(R=>{var O,z,k,$;return(!j.barcode||((O=R.barcode)==null?void 0:O.toLowerCase().includes(j.barcode.toLowerCase())))&&(!j.sku||((z=R.sku)==null?void 0:z.toLowerCase().includes(j.sku.toLowerCase()))||R.variations&&R.variations.some(F=>{var A;return(A=F.sku)==null?void 0:A.toLowerCase().includes(j.sku.toLowerCase())}))&&(!j.referencia||((k=R.referencia)==null?void 0:k.toLowerCase().includes(j.referencia.toLowerCase()))||R.variations&&R.variations.some(F=>{var A;return(A=F.referencia)==null?void 0:A.toLowerCase().includes(j.referencia.toLowerCase())}))&&(!j.name||(($=R.name)==null?void 0:$.toLowerCase().includes(j.name.toLowerCase())))}),b=p.useCallback(async()=>{u(!0);try{const[R,O]=await Promise.all([eS(),js()]),z=await Promise.all((R||[]).map(async k=>{const $=await li(k.id);return{...k,physicalStocks:$||[]}}));t(z),h(O||[])}catch(R){f({title:"Erro ao carregar produtos ou lojas",description:R.message,variant:"destructive"})}finally{u(!1)}},[f,g==null?void 0:g.store_id,g==null?void 0:g.role]);p.useEffect(()=>{b()},[b]);const S=()=>{m({name:"",category:"",brand:"",barcode:"",sizes:"",colors:"",price:"",stock:"",min_stock:"",active:!0}),o(null)},E=async R=>{var z,k;console.log("🚀 Iniciando criação de produto..."),console.log("📋 Dados recebidos:",R);const O={...R,price:parseFloat(R.price)||0,stock:parseInt(R.stock)||0,min_stock:parseInt(R.min_stock)||0,sizes:R.sizes?R.sizes.split(",").map($=>$.trim()).filter($=>$):[],colors:R.colors?R.colors.split(",").map($=>$.trim()).filter($=>$):[]};if(console.log("📦 Dados processados:",O),!O.name||!O.barcode||!O.price||isNaN(O.stock)){console.log("❌ Erro de validação:",{name:O.name,barcode:O.barcode,price:O.price,stock:O.stock}),f({title:"Erro de Validação",description:"Nome, Código de Barras, Preço e Estoque Online são obrigatórios.",variant:"destructive"});return}u(!0);try{if(console.log("🏪 Verificando loja..."),!s&&!((z=g==null?void 0:g.stores)!=null&&z.is_online_store)){const $=d.find(F=>F.is_online_store);if(console.log("🏪 Loja online encontrada:",$),$)O.store_id=$.id;else{console.log("❌ Loja online não encontrada"),f({title:"Erro",description:"Loja online principal não encontrada para cadastro.",variant:"destructive"}),u(!1);return}}else s?O.store_id=s.store_id:(k=g==null?void 0:g.stores)!=null&&k.is_online_store&&(O.store_id=g.store_id);if(console.log("📦 Dados finais antes de salvar:",O),s){console.log("✏️ Atualizando produto...");const{syncWithWooCommerce:$,uploadedImageUrls:F,...A}=O,T=await nc(s.id,A);if(console.log("✅ Produto atualizado com sucesso:",T),R.syncWithWooCommerce&&s.woocommerce_id)try{const P=(await os(()=>Promise.resolve().then(()=>th),void 0)).default,U=new P,L={name:T.name,price:T.price,description:T.description||"",short_description:T.short_description||"",barcode:T.barcode,stock:T.stock,category:T.category,images:R.uploadedImageUrls||[],weight:T.weight,length:T.length,height:T.height,width:T.width},H=await U.updateProduct(s.woocommerce_id,L);console.log("✅ Produto atualizado no WooCommerce:",H),f({title:"Produto atualizado e sincronizado!",description:`${O.name} foi atualizado no PDV e no WooCommerce.`})}catch(P){console.error("❌ Erro na sincronização WooCommerce:",P),f({title:"Produto atualizado (erro WooCommerce)",description:`${O.name} foi atualizado no PDV, mas houve erro na sincronização com WooCommerce.`,variant:"destructive"})}else f({title:"Produto atualizado!",description:`${O.name} foi atualizado.`})}else{console.log("🔍 Verificando código de barras duplicado...");const $=await IM();if(console.log("📋 Produtos existentes:",$.length),$.some(U=>U.barcode===O.barcode)){console.log("❌ Código de barras já existe:",O.barcode),f({title:"Erro de Validação",description:"Código de barras já existe.",variant:"destructive"}),u(!1);return}console.log("✅ Criando produto...");const{syncWithWooCommerce:F,uploadedImageUrls:A,...T}=O,P=await LM(T);if(console.log("✅ Produto criado com sucesso:",P),R.syncWithWooCommerce)try{const U=(await os(()=>Promise.resolve().then(()=>th),void 0)).default,L=new U,H={name:P.name,price:P.price,description:P.description||"",short_description:P.short_description||"",barcode:P.barcode,stock:P.stock,category:P.category,images:R.uploadedImageUrls||[],weight:P.weight,length:P.length,height:P.height,width:P.width},oe=await L.createProduct(H);console.log("✅ Produto sincronizado com WooCommerce:",oe),f({title:"Produto criado e sincronizado!",description:`${O.name} foi criado no PDV e no WooCommerce.`})}catch(U){console.error("❌ Erro na sincronização WooCommerce:",U),f({title:"Produto criado (erro WooCommerce)",description:`${O.name} foi criado no PDV, mas houve erro na sincronização com WooCommerce.`,variant:"destructive"})}else f({title:"Produto criado!",description:`${O.name} foi criado.`})}b(),l(!1),S()}catch($){console.error("❌ Erro ao salvar produto:",$),f({title:"Erro ao salvar produto",description:$.message,variant:"destructive"})}finally{u(!1)}},N=async R=>{var O,z;u(!0);try{const k=await MM(R.id);o(k),m({name:k.name,category:k.category||"",brand:k.brand||"",barcode:k.barcode,sizes:((O=k.sizes)==null?void 0:O.join(", "))||"",colors:((z=k.colors)==null?void 0:z.join(", "))||"",price:k.price.toString(),stock:k.stock.toString(),min_stock:k.min_stock.toString(),active:k.active}),l(!0)}catch(k){f({title:"Erro ao buscar produto para edição",description:k.message,variant:"destructive"})}finally{u(!1)}},_=async R=>{if(window.confirm("Deseja realmente excluir este produto? Esta ação é irreversível!")){u(!0);try{if(await $M(R.id),R.woocommerce_id)try{const O=(await os(()=>Promise.resolve().then(()=>th),void 0)).default;await new O().deleteProduct(R.woocommerce_id),console.log("✅ Produto excluído do WooCommerce"),f({title:"Produto excluído!",description:"O produto foi removido do PDV e do WooCommerce."})}catch(O){console.error("❌ Erro ao excluir do WooCommerce:",O),f({title:"Produto excluído (erro WooCommerce)",description:"O produto foi removido do PDV, mas houve erro ao excluir do WooCommerce.",variant:"destructive"})}else f({title:"Produto excluído!",description:"O produto foi removido do sistema."});b()}catch(O){f({title:"Erro ao excluir produto",description:O.message,variant:"destructive"})}finally{u(!1)}}},C=()=>e.filter(R=>R.active&&R.stock<=R.min_stock),I=()=>{b()};return c&&e.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx(q,{placeholder:"Buscar por Código de Barras",name:"barcode",value:j.barcode,onChange:v,className:"w-44"}),i.jsx(q,{placeholder:"Buscar por SKU",name:"sku",value:j.sku,onChange:v,className:"w-36"}),i.jsx(q,{placeholder:"Buscar por Referência",name:"referencia",value:j.referencia,onChange:v,className:"w-32"}),i.jsx(q,{placeholder:"Buscar por Nome",name:"name",value:j.name,onChange:v,className:"w-44"})]}),i.jsx(jF,{open:a,onOpenChange:l,formData:w,setFormData:m,onSubmit:E,editingProduct:s,resetForm:S,onStockShared:I})]}),i.jsx(bF,{products:C()}),i.jsx(re,{children:i.jsx(se,{className:"pt-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(Pa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(q,{placeholder:"Buscar produtos por nome, categoria, marca ou código...",value:r,onChange:R=>n(R.target.value),className:"pl-10"})]})})}),e.length>0?i.jsx(aF,{products:y,onEdit:N,onDelete:_,stores:d,currentUser:g}):i.jsx(re,{className:"mt-6",children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(IT,{className:"w-16 h-16 mx-auto mb-6 text-muted-foreground opacity-50"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nenhum produto encontrado"}),i.jsxs("p",{className:"text-muted-foreground mb-6",children:[r?"Tente ajustar sua busca ou ":"",'Clique em "Novo Produto" para começar a cadastrar.']})]})})]})},_F=()=>{var N;const{id:e}=Ek(),[t,r]=p.useState(null),[n,s]=p.useState([]),[o,a]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!0),[h,f]=p.useState([]),[g,w]=p.useState(null),[m,j]=p.useState(!1),{toast:x}=at(),v=p.useCallback(async()=>{d(!0);try{const{data:_,error:C}=await Q.from("products").select("*").eq("id",e).single();if(C)throw C;r(_);const I=[];if(_.image_url&&I.push({id:"main",image_url:_.image_url,is_featured:!0}),f(I),console.log("🖼️ Imagens encontradas:",I),_.product_type==="variable"){const{data:z,error:k}=await Q.from("product_variations").select("*").eq("product_id",e);if(k)throw k;s(z||[]),console.log("🔄 Variações encontradas:",z)}const R=await li(e);a(R||[]);const O=await js();c(O||[])}catch(_){x({title:"Erro ao buscar detalhes do produto",description:_.message,variant:"destructive"}),r(null)}finally{d(!1)}},[e,x]);p.useEffect(()=>{v()},[v]);const y=_=>{var C;return((C=l.find(I=>I.id===_))==null?void 0:C.name)||"Loja Desconhecida"},b=_=>{w(_),j(!0)},S=()=>{j(!1),w(null)};if(u)return i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsx("div",{className:"loading-spinner"})});if(!t)return i.jsxs("div",{className:"container mx-auto p-6 text-center",children:[i.jsx(Hr,{className:"w-24 h-24 mx-auto text-muted-foreground mb-4"}),i.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Produto não encontrado"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"O produto que você está procurando não existe ou foi removido."}),i.jsx(D,{asChild:!0,variant:"outline",children:i.jsxs(Go,{to:"/products",children:[i.jsx(Bv,{className:"mr-2 h-4 w-4"})," Voltar para Produtos"]})})]});const E=t.product_type==="variable"?n.reduce((_,C)=>_+C.stock,0):t.stock;return i.jsxs("div",{className:"container mx-auto p-4 md:p-8 space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(D,{asChild:!0,variant:"outline",size:"sm",children:i.jsxs(Go,{to:"/products",children:[i.jsx(Bv,{className:"mr-2 h-4 w-4"})," Voltar para Produtos"]})}),i.jsx("h1",{className:"text-3xl font-bold text-center flex-grow",children:t.name}),i.jsx("div",{className:"w-24"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(kT,{className:"mr-2 text-primary"})," Imagens do Produto"]})}),i.jsx(se,{children:h.length>0?i.jsxs("div",{children:[i.jsx("img",{src:h[0].image_url,alt:"Destaque",className:"w-full h-64 object-cover rounded-lg border mb-2 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>b(h[0]),onError:_=>{console.log("❌ Erro ao carregar imagem principal:",h[0].image_url),_.target.style.display="none",_.target.nextSibling.style.display="flex"},onLoad:()=>{console.log("✅ Imagem principal carregada:",h[0].image_url)}}),i.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center hidden",children:i.jsx(Cd,{className:"w-16 h-16 text-muted-foreground"})}),i.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:h.map((_,C)=>i.jsx("img",{src:_.image_url,alt:`Imagem ${C+1}`,className:`w-16 h-16 object-cover rounded border cursor-pointer hover:opacity-90 transition-opacity ${C===0?"ring-2 ring-primary":""}`,title:_.is_featured?"Destaque":"",onClick:()=>b(_),onError:I=>{console.log("❌ Erro ao carregar miniatura:",_.image_url),I.target.style.display="none"},onLoad:()=>{console.log("✅ Miniatura carregada:",_.image_url)}},_.id))})]}):i.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center",children:i.jsx(Cd,{className:"w-16 h-16 text-muted-foreground"})})})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(TT,{className:"mr-2 text-primary"})," Dados Principais"]})}),i.jsxs(se,{className:"space-y-3 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nome:"})," ",t.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Referência:"})," ",t.referencia||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Categoria:"})," ",t.category||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Código de Barras:"})," ",t.barcode]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Tipo:"})," ",i.jsx("span",{className:"capitalize",children:t.product_type==="variable"?"Produto Variável":"Produto Simples"})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Status:"})," ",t.active?"Ativo":"Inativo"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Data de Cadastro:"})," ",t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"]})]})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(xn,{className:"mr-2 text-primary"})," Preços"]})}),i.jsxs(se,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Principal:"})," R$ ",(N=t.price)==null?void 0:N.toFixed(2)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Varejo:"})," ",t.price_varejo?`R$ ${t.price_varejo.toFixed(2)}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Atacado:"})," ",t.price_atacado?`R$ ${t.price_atacado.toFixed(2)}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Cliente Exclusivo:"})," ",t.price_atacarejo?`R$ ${t.price_atacarejo.toFixed(2)}`:"N/A"]})]})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(Hv,{className:"mr-2 text-primary"})," Dimensões e Peso"]})}),i.jsxs(se,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Peso:"})," ",t.weight?`${t.weight} kg`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Comprimento:"})," ",t.length?`${t.length} cm`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Altura:"})," ",t.height?`${t.height} cm`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Largura:"})," ",t.width?`${t.width} cm`:"N/A"]})]})]}),t.medidas&&i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(Hv,{className:"mr-2 text-primary"})," Medidas da Peça"]})}),i.jsx(se,{className:"space-y-2 text-sm",children:Object.entries(t.medidas).map(([_,C])=>i.jsxs("p",{children:[i.jsxs("strong",{children:[_.charAt(0).toUpperCase()+_.slice(1),":"]})," ",C||"N/A"]},_))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx($T,{className:"mr-2 text-primary"})," Estoque"]})}),i.jsxs(se,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Estoque Mínimo Global:"})," ",t.min_stock," unidades"]}),i.jsxs("p",{className:`font-semibold ${E<=t.min_stock?"text-orange-500":"text-green-500"}`,children:["Estoque Online/Geral Total: ",E," unidades"]})]})]}),o.length>0&&i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(Ra,{className:"mr-2 text-primary"})," Estoque nas Lojas Físicas"]})}),i.jsx(se,{className:"space-y-2",children:o.map(_=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-background/30 rounded-md text-sm",children:[i.jsx("p",{children:i.jsxs("strong",{children:[y(_.store_id),":"]})}),i.jsxs("p",{children:[_.quantity," unidades ",_.variation_id?`(Variação ID: ${_.variation_id.substring(0,8)}...)`:"(Produto Simples/Agregado)"]})]},_.id))})]}),o.length===0&&i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6 text-center text-muted-foreground",children:"Este produto (ou suas variações) ainda não teve estoque compartilhado com lojas físicas."})}),t.product_type==="variable"&&n.length>0&&i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center",children:[i.jsx(PT,{className:"mr-2 text-primary"})," Variações do Produto (",n.length,")"]})}),i.jsx(se,{className:"space-y-4",children:n.map((_,C)=>{var I;return i.jsx(re,{className:"bg-background/30 p-4 rounded-md",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[i.jsxs("div",{className:"md:col-span-1",children:[_.image_url?i.jsx("img",{src:_.image_url,alt:`Variação ${C+1}`,className:"w-full h-auto object-cover rounded border aspect-square cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>b({image_url:_.image_url,id:_.id}),onError:R=>{console.log("❌ Erro ao carregar imagem da variação:",_.image_url),R.target.style.display="none",R.target.nextSibling.style.display="flex"},onLoad:()=>{console.log("✅ Imagem da variação carregada:",_.image_url)}}):null,i.jsx("div",{className:"w-full h-32 bg-muted rounded flex items-center justify-center",style:{display:_.image_url?"none":"flex"},children:i.jsx(Cd,{className:"w-10 h-10 text-muted-foreground"})})]}),i.jsxs("div",{className:"md:col-span-2 space-y-2 text-sm",children:[i.jsx("p",{className:"font-semibold text-base",children:((I=_.attributes)==null?void 0:I.map(R=>`${R.name}: ${R.value}`).join(" / "))||`Variação ${C+1}`}),_.sku&&i.jsxs("p",{children:[i.jsx("strong",{children:"SKU:"})," ",_.sku]}),_.barcode&&i.jsxs("p",{children:[i.jsx("strong",{children:"Cód. Barras:"})," ",_.barcode]}),_.referencia&&i.jsxs("p",{children:[i.jsx("strong",{children:"Referência:"})," ",_.referencia]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Específico:"})," ",_.price?`R$ ${_.price.toFixed(2)}`:"Usar preço principal"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Varejo:"})," ",_.price_varejo?`R$ ${_.price_varejo}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Atacado:"})," ",_.price_atacado?`R$ ${_.price_atacado}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preço Cliente Exclusivo:"})," ",_.price_atacarejo?`R$ ${_.price_atacarejo}`:"N/A"]}),i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Estoque da Variação:"})," ",_.stock," unidades"]}),_.medidas&&i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"font-semibold",children:"Medidas:"}),i.jsx("ul",{className:"ml-4 list-disc",children:Object.entries(_.medidas).map(([R,O])=>i.jsxs("li",{children:[i.jsxs("strong",{children:[R.charAt(0).toUpperCase()+R.slice(1),":"]})," ",O||"N/A"]},R))})]})]})]})},_.id||C)})})]}),t.product_type==="variable"&&n.length===0&&i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6 text-center text-muted-foreground",children:"Nenhuma variação cadastrada para este produto."})})]})]}),m&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:S,children:i.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[i.jsx("button",{onClick:S,className:"absolute top-4 right-4 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full p-2 transition-all z-10",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("img",{src:g.image_url,alt:"Visualização",className:"max-w-full max-h-full object-contain rounded-lg",onClick:_=>_.stopPropagation()})]})})]})},ve={IN:"in",OUT:"out",ADJUSTMENT:"adjustment",SALE_ONLINE:"sale_online_physical_debit",SALE_PHYSICAL:"sale_physical_store",TRANSFER_IN:"transfer_in",TRANSFER_OUT:"transfer_out",TRANSFER_TO_STORE:"transfer_to_store"},Vl={[ve.IN]:"Entrada Manual",[ve.OUT]:"Saída Manual",[ve.ADJUSTMENT]:"Ajuste Manual",[ve.SALE_ONLINE]:"Venda Online (Débito Físico)",[ve.SALE_PHYSICAL]:"Venda Loja Física",[ve.TRANSFER_IN]:"Transferência (Entrada Loja)",[ve.TRANSFER_OUT]:"Transferência (Saída Online)",[ve.TRANSFER_TO_STORE]:"Transferência para Loja"},CF=()=>{var F;const[e,t]=p.useState([]),[r,n]=p.useState([]),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(null),[f,g]=p.useState([]),[w,m]=p.useState(!0),[j,x]=p.useState(null),{toast:v}=at(),y=it(),[b,S]=p.useState({type:"",quantity:"",reason:"",target_store_id:""}),E=p.useCallback(async()=>{m(!0),x(null);try{console.log("[STOCK] Iniciando carregamento de dados...");const[A,T,P]=await Promise.all([eS(),OM(),js()]);console.log("[STOCK] Dados carregados:",{products:(A==null?void 0:A.length)||0,movements:(T==null?void 0:T.length)||0,stores:(P==null?void 0:P.length)||0});const U=await Promise.all((A||[]).map(async L=>{try{const H=await li(L.id);return{...L,physicalStocks:H||[]}}catch(H){return console.error("[STOCK] Erro ao carregar estoque físico para produto:",L.id,H),{...L,physicalStocks:[]}}}));t(U),n(T||[]),g(P||[]),console.log("[STOCK] Dados processados com sucesso")}catch(A){console.error("[STOCK] Erro ao carregar dados:",A),x(A.message),v({title:"Erro ao carregar dados de estoque",description:A.message,variant:"destructive"})}finally{m(!1)}},[v,y==null?void 0:y.store_id]);if(p.useEffect(()=>{E()},[E]),j)return i.jsx("div",{className:"min-h-screen bg-background p-8",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Hr,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Erro ao Carregar Estoque"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:j}),i.jsx(D,{onClick:E,className:"bg-red-600 hover:bg-red-700",children:"Tentar Novamente"})]})})});if(w)return i.jsx("div",{className:"min-h-screen bg-background p-8",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"loading-spinner w-12 h-12 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Carregando Estoque..."}),i.jsx("p",{className:"text-muted-foreground",children:"Aguarde enquanto carregamos os dados"})]})})});const N=e.filter(A=>{var T,P,U;return A.active&&(((T=A.name)==null?void 0:T.toLowerCase().includes(s.toLowerCase()))||((P=A.category)==null?void 0:P.toLowerCase().includes(s.toLowerCase()))||((U=A.barcode)==null?void 0:U.includes(s)))}),_=async A=>{var P;if(A.preventDefault(),!c||!b.type||!b.quantity){v({title:"Erro",description:"Produto, tipo e quantidade são obrigatórios.",variant:"destructive"});return}const T=parseInt(b.quantity);if(isNaN(T)||T<=0){v({title:"Erro",description:"Quantidade deve ser um número positivo.",variant:"destructive"});return}m(!0);try{let U,L,H=b.target_store_id||c.store_id,oe="online",de=null;if(b.type===ve.TRANSFER_TO_STORE){if(!b.target_store_id){v({title:"Erro",description:"Selecione uma loja de destino para a transferência.",variant:"destructive"}),m(!1);return}if(c.stock<T){v({title:"Erro",description:"Estoque online insuficiente para esta transferência.",variant:"destructive"}),m(!1);return}const Ne=c.stock-T;await nc(c.id,{stock:Ne});const ae=c.physicalStocks.find(X=>X.store_id===b.target_store_id);let Y;if(ae)Y=ae.quantity+T,await Q.from("product_store_stock").update({quantity:Y}).eq("id",ae.id),de=ae.id;else{Y=T;const{data:X}=await Q.from("product_store_stock").insert({product_id:c.id,store_id:b.target_store_id,quantity:Y}).select("id").single();de=X==null?void 0:X.id}await rc({product_id:c.id,type:ve.TRANSFER_TO_STORE,quantity:T,previous_stock:c.stock,new_stock:Ne,reason:`Transferência para ${I(b.target_store_id)} - ${b.reason}`,user_id:y==null?void 0:y.id,store_id:b.target_store_id,stock_type:"physical_store",product_store_stock_id:de}),v({title:"Transferência realizada!",description:`${T} unidades transferidas para ${I(b.target_store_id)}.`}),E(),l(!1),S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null),m(!1);return}if(b.target_store_id){if(b.type===ve.OUT){if(c.stock<T){v({title:"Erro",description:"Estoque online insuficiente para esta transferência.",variant:"destructive"}),m(!1);return}const ae=c.stock-T;await nc(c.id,{stock:ae});const Y=c.physicalStocks.find(Ee=>Ee.store_id===b.target_store_id);let X;if(Y)X=Y.quantity+T,await Q.from("product_store_stock").update({quantity:X}).eq("id",Y.id),de=Y.id;else{X=T;const{data:Ee}=await Q.from("product_store_stock").insert({product_id:c.id,store_id:b.target_store_id,quantity:X}).select("id").single();de=Ee==null?void 0:Ee.id}await rc({product_id:c.id,type:ve.TRANSFER_TO_STORE,quantity:T,previous_stock:c.stock,new_stock:ae,reason:`Transferência para ${I(b.target_store_id)} - ${b.reason}`,user_id:y==null?void 0:y.id,store_id:b.target_store_id,stock_type:"physical_store",product_store_stock_id:de}),v({title:"Transferência realizada!",description:`${T} unidades transferidas para ${I(b.target_store_id)}.`}),E(),l(!1),S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null),m(!1);return}oe="physical_store";const Ne=c.physicalStocks.find(ae=>ae.store_id===b.target_store_id);if(U=Ne?Ne.quantity:0,de=Ne?Ne.id:null,b.type===ve.IN?L=U+T:b.type===ve.ADJUSTMENT&&(L=T),L<0&&b.type!==ve.ADJUSTMENT){v({title:"Erro",description:"Estoque da loja física não pode ficar negativo.",variant:"destructive"}),m(!1);return}if(b.type===ve.ADJUSTMENT&&L<0&&(L=0),Ne)await Q.from("product_store_stock").update({quantity:L}).eq("id",Ne.id);else{const{data:ae}=await Q.from("product_store_stock").insert({product_id:c.id,store_id:b.target_store_id,quantity:L}).select("id").single();de=ae==null?void 0:ae.id}await tS(c.id)}else{if(!((P=y==null?void 0:y.stores)!=null&&P.is_online_store)&&(y==null?void 0:y.role)!==jt.ADMIN){v({title:"Ação não permitida",description:"Selecione uma loja física para esta movimentação ou realize no estoque Online (se admin/online).",variant:"destructive"}),m(!1);return}if(H=c.store_id,U=c.stock,b.type===ve.IN?L=U+T:b.type===ve.OUT?L=U-T:b.type===ve.ADJUSTMENT&&(L=T),L<0&&b.type!==ve.ADJUSTMENT){v({title:"Erro",description:"Estoque online/geral não pode ficar negativo.",variant:"destructive"}),m(!1);return}b.type===ve.ADJUSTMENT&&L<0&&(L=0),await nc(c.id,{stock:L})}await rc({product_id:c.id,type:b.type,quantity:T,previous_stock:U,new_stock:L,reason:b.reason,user_id:y==null?void 0:y.id,store_id:H,stock_type:oe,product_store_stock_id:oe==="physical_store"?de:null}),v({title:"Movimentação registrada!",description:`${Vl[b.type]||b.type} de ${T} unidades para ${c.name}.`}),E(),l(!1),S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null)}catch(U){v({title:"Erro ao registrar movimentação",description:U.message,variant:"destructive"})}finally{m(!1)}},C=(A,T,P=null)=>{var U;u(A),h(P),S({...b,type:T,target_store_id:P?P.id:(U=y==null?void 0:y.stores)!=null&&U.is_online_store||(y==null?void 0:y.role)===jt.ADMIN?"":y==null?void 0:y.store_id}),l(!0)},I=A=>{var T;return((T=f.find(P=>P.id===A))==null?void 0:T.name)||"N/A"},R=()=>e.filter(A=>A.active&&A.stock<=A.min_stock).length,O=()=>e.filter(A=>A.active).length,z=()=>e.filter(A=>A.active).reduce((A,T)=>A+T.stock,0),k=A=>e.reduce((T,P)=>{var L;const U=(L=P.physicalStocks)==null?void 0:L.find(H=>H.store_id===A);return T+(U?U.quantity:0)},0),$=f.filter(A=>!A.is_online_store);return i.jsx("div",{className:"min-h-screen bg-background p-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Controle de Estoque"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie o estoque dos seus produtos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(Hr,{className:"w-7 h-7 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:O()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Produtos Ativos"})]})]}),i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(xu,{className:"w-7 h-7 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:z()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Estoque Online"})]})]}),i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(FT,{className:"w-7 h-7 text-orange-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:R()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Estoque Baixo"})]})]}),i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(ta,{className:"w-7 h-7 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Movimentações"})]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4 text-center",children:"Estoque por Loja"}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-auto",children:[i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-xs",children:"O"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-bold text-foreground",children:"Loja Online"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[z()," un."]})]})]}),$.map(A=>i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-xs",children:A.name.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-bold text-foreground",children:A.name}),i.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[k(A.id)," un."]})]})]},A.id))]})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs("div",{className:"relative max-w-md mx-auto",children:[i.jsx(Pa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(q,{placeholder:"Buscar produtos...",value:s,onChange:A=>o(A.target.value),className:"pl-10"})]})}),i.jsx("div",{className:"space-y-4 mt-8",children:N.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Hr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Nenhum produto encontrado"})]}):N.map(A=>i.jsxs(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl bg-card border border-border p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-sm hover:shadow-lg transition",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-lg font-bold text-foreground",children:A.name}),A.stock<=A.min_stock&&i.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Baixo estoque"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.category," • ",A.barcode]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[i.jsxs("span",{className:"text-xs text-foreground bg-muted rounded px-2 py-0.5",children:["Online: ",i.jsx("b",{children:A.stock})," un."]}),$.map(T=>{var L;const P=(L=A.physicalStocks)==null?void 0:L.find(H=>H.store_id===T.id),U=P?P.quantity:0;return i.jsxs("span",{className:"text-xs text-foreground bg-muted rounded px-2 py-0.5",children:[T.name,": ",i.jsx("b",{children:U})," un."]},T.id)})]})]}),i.jsxs("div",{className:"flex flex-col md:items-end gap-1",children:[i.jsxs("span",{className:`text-base font-semibold ${A.stock<=A.min_stock?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:["Online: ",A.stock," un."]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Mín. Online: ",A.min_stock]})]}),i.jsxs("div",{className:"flex gap-2 mt-2 md:mt-0",children:[i.jsxs(D,{variant:"outline",size:"sm",onClick:()=>C(A,ve.IN),children:[i.jsx(sr,{className:"w-4 h-4 mr-1"}),"Entrada"]}),i.jsxs(D,{variant:"outline",size:"sm",onClick:()=>C(A,ve.OUT),children:[i.jsx(Ic,{className:"w-4 h-4 mr-1"}),"Saída"]}),i.jsx(D,{variant:"outline",size:"sm",onClick:()=>C(A,ve.ADJUSTMENT),children:"Ajuste"})]})]},A.id))}),i.jsxs("div",{className:"mt-10",children:[i.jsxs("h3",{className:"text-lg font-bold text-foreground mb-2 flex items-center gap-2",children:[i.jsx(ta,{className:"w-5 h-5 text-purple-500"}),"Histórico de Movimentações"]}),i.jsx("div",{className:"rounded-xl bg-card border border-border p-4 max-h-96 overflow-y-auto",children:r.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(ta,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma movimentação registrada"})]}):i.jsx("div",{className:"space-y-3",children:r.slice(0,20).map(A=>{var T,P;return i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-muted/50 transition text-sm",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-semibold text-foreground",children:[A.productName||((T=A.products)==null?void 0:T.name)," (",(P=A.products)==null?void 0:P.barcode,")"]}),i.jsxs("p",{className:"text-muted-foreground",children:[Vl[A.type]||A.type," • ",A.storeName]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.userName," • ",new Date(A.created_at).toLocaleString()," • ",A.reason]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`font-medium ${A.type===ve.IN||A.type===ve.TRANSFER_IN?"text-green-600 dark:text-green-400":A.type===ve.OUT||A.type===ve.TRANSFER_OUT||A.type===ve.SALE_ONLINE||A.type===ve.SALE_PHYSICAL?"text-red-600 dark:text-red-400":"text-purple-600 dark:text-purple-400"}`,children:[A.type===ve.IN||A.type===ve.TRANSFER_IN?"+":A.type===ve.OUT||A.type===ve.TRANSFER_OUT||A.type===ve.SALE_ONLINE||A.type===ve.SALE_PHYSICAL?"-":"=",A.quantity]}),i.jsxs("p",{className:"text-muted-foreground",children:[A.previous_stock," → ",A.new_stock]})]})]},A.id)})})})]}),i.jsx(mr,{open:a,onOpenChange:A=>{l(A),A||(S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null))},children:i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:b.type&&`${Vl[b.type]||b.type} de Estoque`})}),c&&i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(V,{children:"Produto"}),i.jsx(q,{value:c.name,disabled:!0})]}),(b.type===ve.TRANSFER_TO_STORE||b.type===ve.OUT&&(((F=y==null?void 0:y.stores)==null?void 0:F.is_online_store)||(y==null?void 0:y.role)===jt.ADMIN))&&i.jsxs("div",{children:[i.jsx(V,{htmlFor:"target_store_id",children:"Loja de Destino"}),i.jsxs(st,{value:b.target_store_id,onValueChange:A=>S({...b,target_store_id:A}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione a loja de destino"})}),i.jsx(Xe,{children:$.map(A=>i.jsx(be,{value:A.id,children:A.name},A.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.type===ve.TRANSFER_TO_STORE?"Transferir estoque do online para esta loja":"Movimentar estoque nesta loja específica"})]}),i.jsxs("div",{children:[i.jsx(V,{children:"Estoque Atual"}),i.jsx(q,{value:`${c.stock} unidades (Online)`,disabled:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"quantity",children:b.type===ve.ADJUSTMENT?"Novo Estoque":"Quantidade da Movimentação"}),i.jsx(q,{id:"quantity",type:"number",min:"1",value:b.quantity,onChange:A=>S({...b,quantity:A.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"reason",children:"Motivo/Observação"}),i.jsx(q,{id:"reason",placeholder:"Descreva o motivo da movimentação",value:b.reason,onChange:A=>S({...b,reason:A.target.value}),required:!0})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(D,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),i.jsx(D,{type:"submit",disabled:w,children:w?"Salvando...":`Confirmar ${Vl[b.type]||b.type}`})]})]})]})})]})})},NF=yu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),zp=ue.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,className:Ce(NF({variant:t}),e),...r}));zp.displayName="Badge";const EF=({categories:e,onEdit:t,onDelete:r,loading:n})=>n?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(uf,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Nenhuma categoria encontrada"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Crie sua primeira categoria para organizar seus produtos"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((s,o)=>i.jsxs(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color||"#3B82F6"}}),i.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),i.jsx(zp,{variant:s.active?"default":"secondary",children:s.active?"Ativa":"Inativa"})]}),s.description&&i.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[i.jsx(uf,{className:"w-3 h-3"}),i.jsxs("span",{children:["Criada em ",new Date(s.created_at).toLocaleDateString("pt-BR")]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(D,{variant:"ghost",size:"sm",onClick:()=>t(s),className:"h-8 w-8 p-0",children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(D,{variant:"ghost",size:"sm",onClick:()=>r(s),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})]},s.id))}),Wp=ue.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Wp.displayName="Textarea";const kF=({open:e,onOpenChange:t,formData:r,setFormData:n,onSubmit:s,editingCategory:o})=>{const a=(u,d)=>{n(h=>({...h,[u]:d}))},l=[{value:"tag",label:"Tag"},{value:"shirt",label:"Camisa"},{value:"footprints",label:"Calçados"},{value:"watch",label:"Relógio"},{value:"dumbbell",label:"Esportes"},{value:"baby",label:"Infantil"},{value:"home",label:"Casa"},{value:"gift",label:"Presente"},{value:"heart",label:"Coração"},{value:"star",label:"Estrela"},{value:"bookmark",label:"Marcador"},{value:"package",label:"Pacote"}],c=[{value:"#3B82F6",label:"Azul"},{value:"#10B981",label:"Verde"},{value:"#F59E0B",label:"Amarelo"},{value:"#EF4444",label:"Vermelho"},{value:"#8B5CF6",label:"Roxo"},{value:"#06B6D4",label:"Ciano"},{value:"#F97316",label:"Laranja"},{value:"#EC4899",label:"Rosa"},{value:"#6B7280",label:"Cinza"},{value:"#000000",label:"Preto"}];return i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"sm:max-w-[500px]",children:[i.jsx(er,{children:i.jsx(tr,{children:o?"Editar Categoria":"Nova Categoria"})}),i.jsxs("form",{onSubmit:s,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"name",children:"Nome da Categoria *"}),i.jsx(q,{id:"name",value:r.name,onChange:u=>a("name",u.target.value),placeholder:"Ex: Roupas, Calçados, Acessórios",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"description",children:"Descrição"}),i.jsx(Wp,{id:"description",value:r.description,onChange:u=>a("description",u.target.value),placeholder:"Descreva brevemente esta categoria...",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"icon",children:"Ícone"}),i.jsxs(st,{value:r.icon,onValueChange:u=>a("icon",u),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione um ícone"})}),i.jsx(Xe,{children:l.map(u=>i.jsx(be,{value:u.value,children:u.label},u.value))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"color",children:"Cor"}),i.jsxs(st,{value:r.color,onValueChange:u=>a("color",u),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione uma cor"})}),i.jsx(Xe,{children:c.map(u=>i.jsx(be,{value:u.value,children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:u.value}}),i.jsx("span",{children:u.label})]})},u.value))})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Un,{id:"active",checked:r.active,onCheckedChange:u=>a("active",u)}),i.jsx(V,{htmlFor:"active",children:"Categoria ativa"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(D,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),i.jsxs(D,{type:"submit",children:[o?"Atualizar":"Criar"," Categoria"]})]})]})]})})},TF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(""),[s,o]=p.useState(null),[a,l]=p.useState(!1),[c,u]=p.useState(!0),{toast:d}=at();it();const[h,f]=p.useState({name:"",description:"",color:"#3B82F6",icon:"tag",active:!0}),g=p.useCallback(async()=>{u(!0);try{const y=await lF();t(y||[])}catch(y){d({title:"Erro ao carregar categorias",description:y.message,variant:"destructive"})}finally{u(!1)}},[d]);p.useEffect(()=>{g()},[g]);const w=e.filter(y=>{var b,S;return((b=y.name)==null?void 0:b.toLowerCase().includes(r.toLowerCase()))||((S=y.description)==null?void 0:S.toLowerCase().includes(r.toLowerCase()))}),m=async y=>{if(y.preventDefault(),!h.name.trim()){d({title:"Erro",description:"Nome da categoria é obrigatório",variant:"destructive"});return}try{s?(await uF(s.id,h),d({title:"Sucesso",description:"Categoria atualizada com sucesso!"})):(await cF(h),d({title:"Sucesso",description:"Categoria criada com sucesso!"})),l(!1),o(null),f({name:"",description:"",color:"#3B82F6",icon:"tag",active:!0}),g()}catch(b){d({title:"Erro",description:b.message,variant:"destructive"})}},j=y=>{o(y),f({name:y.name,description:y.description||"",color:y.color||"#3B82F6",icon:y.icon||"tag",active:y.active}),l(!0)},x=async y=>{try{if(await fF(y.id)){d({title:"Não é possível deletar",description:"Esta categoria está sendo usada por produtos. Remova a associação primeiro.",variant:"destructive"});return}window.confirm(`Tem certeza que deseja deletar a categoria "${y.name}"?`)&&(await dF(y.id),d({title:"Sucesso",description:"Categoria deletada com sucesso!"}),g())}catch(b){d({title:"Erro",description:b.message,variant:"destructive"})}},v=()=>{o(null),f({name:"",description:"",color:"#3B82F6",icon:"tag",active:!0}),l(!0)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Categorias"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie as categorias dos seus produtos"})]}),i.jsxs("button",{onClick:v,className:"inline-flex items-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Nova Categoria"]})]}),i.jsx(re,{children:i.jsxs(se,{className:"p-6",children:[i.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),i.jsx(q,{placeholder:"Buscar categorias...",value:r,onChange:y=>n(y.target.value),className:"pl-10"})]})}),i.jsx(EF,{categories:w,onEdit:j,onDelete:x,loading:c})]})}),i.jsx(kF,{open:a,onOpenChange:l,formData:h,setFormData:f,onSubmit:m,editingCategory:s})]})},PF=({customers:e,onEdit:t,onDelete:r,onViewHistory:n,getCustomerPurchases:s,getCustomerTotalSpent:o,formatCPF:a,formatPhone:l})=>e.length===0?i.jsx(re,{children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(qs,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum cliente encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os termos de busca ou crie seu primeiro cliente."})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(c=>{const u=s(c.id),d=o(c.id);return i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-5 h-5 text-primary"}),i.jsx(xe,{className:"text-lg",children:c.name})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>n(c),title:"Ver Histórico",children:i.jsx(Ta,{className:"w-4 h-4"})}),i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>t(c),title:"Editar Cliente",children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>r(c.id),className:"text-destructive hover:text-destructive",title:"Remover Cliente",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[c.cpf&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(qs,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{children:a(c.cpf)})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(LT,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{children:l(c.phone)})]}),c.email&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(RT,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"truncate",children:c.email})]}),c.customer_groups&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(Qj,{className:"w-3 h-3 text-blue-600"}),i.jsx("span",{className:"text-blue-600 font-medium",children:c.customer_groups.name})]})]}),i.jsx("div",{className:"pt-3 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-bold text-primary",children:u.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Compras"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-lg font-bold text-green-600",children:["R$ ",d.toFixed(2)]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Gasto"})]})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cliente desde: ",new Date(c.created_at||c.createdAt).toLocaleDateString()]})]})]})},c.id)})}),AF=({open:e,onOpenChange:t,formData:r,setFormData:n,onSubmit:s,editingCustomer:o,formatCPF:a,formatPhone:l,resetForm:c})=>{const[u,d]=p.useState(!1),[h,f]=p.useState([]);p.useEffect(()=>{(async()=>{try{const j=await Hs.getCustomerGroups();f(j)}catch(j){console.error("Erro ao buscar grupos:",j)}})()},[]);const g=async m=>{const j=m.target.value.replace(/\D/g,"");if(j.length===8){d(!0);try{const v=await(await fetch(`https://viacep.com.br/ws/${j}/json/`)).json();v.erro||n({...r,cep:v.cep,street:v.logradouro,bairro:v.bairro,cidade:v.localidade,estado:v.uf,complemento:v.complemento})}finally{d(!1)}}},w=r.category==="Atacado"||r.category==="Cliente Exclusivo";return i.jsxs(mr,{open:e,onOpenChange:m=>{t(m),m||c()},children:[i.jsx(Jo,{asChild:!0,children:i.jsxs(D,{children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})}),i.jsxs(Zt,{className:"max-w-2xl",children:[i.jsx(er,{children:i.jsx(tr,{children:o?"Editar Cliente":"Novo Cliente"})}),i.jsxs("form",{onSubmit:s,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"name",children:"Nome Completo *"}),i.jsx(q,{id:"name",value:r.name,onChange:m=>n({...r,name:m.target.value})})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cpf",children:"CPF"}),i.jsx(q,{id:"cpf",placeholder:"000.000.000-00",value:r.cpf,onChange:m=>n({...r,cpf:a(m.target.value)})})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"phone",children:"Telefone *"}),i.jsx(q,{id:"phone",placeholder:"(00) 00000-0000",value:r.phone,onChange:m=>n({...r,phone:l(m.target.value)})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"email",children:"E-mail"}),i.jsx(q,{id:"email",type:"email",value:r.email,onChange:m=>n({...r,email:m.target.value})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"category",children:"Categoria *"}),i.jsxs("select",{id:"category",value:r.category||"",onChange:m=>n({...r,category:m.target.value}),className:"bg-background/70 border-none text-white rounded-xl px-3 py-2 w-full",required:!0,children:[i.jsx("option",{value:"",children:"Selecione..."}),i.jsx("option",{value:"Varejo",children:"Varejo"}),i.jsx("option",{value:"Atacado",children:"Atacado"}),i.jsx("option",{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"group_id",children:"Nível de Comprador"}),i.jsxs(st,{value:r.group_id||"",onValueChange:m=>n({...r,group_id:m}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione um grupo..."})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"",children:"Nenhum grupo"}),h.map(m=>i.jsxs(be,{value:m.id,children:[m.name," - ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m.average_ticket)]},m.id))]})]})]}),w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cnpj",children:"CNPJ *"}),i.jsx(q,{id:"cnpj",placeholder:"00.000.000/0000-00",value:r.cnpj||"",onChange:m=>n({...r,cnpj:m.target.value}),required:w})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"razao_social",children:"Razão Social *"}),i.jsx(q,{id:"razao_social",value:r.razao_social||"",onChange:m=>n({...r,razao_social:m.target.value}),required:w})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"inscricao_estadual",children:"Inscrição Estadual *"}),i.jsx(q,{id:"inscricao_estadual",value:r.inscricao_estadual||"",onChange:m=>n({...r,inscricao_estadual:m.target.value}),required:w})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"nome_fantasia",children:"Nome Fantasia"}),i.jsx(q,{id:"nome_fantasia",value:r.nome_fantasia||"",onChange:m=>n({...r,nome_fantasia:m.target.value})})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cep",children:"CEP *"}),i.jsx(q,{id:"cep",placeholder:"00000-000",value:r.cep||"",onChange:m=>n({...r,cep:m.target.value}),onBlur:g,required:!0,disabled:u})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"street",children:"Rua *"}),i.jsx(q,{id:"street",value:r.street||"",onChange:m=>n({...r,street:m.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"bairro",children:"Bairro *"}),i.jsx(q,{id:"bairro",value:r.bairro||"",onChange:m=>n({...r,bairro:m.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cidade",children:"Cidade *"}),i.jsx(q,{id:"cidade",value:r.cidade||"",onChange:m=>n({...r,cidade:m.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"estado",children:"Estado *"}),i.jsx(q,{id:"estado",value:r.estado||"",onChange:m=>n({...r,estado:m.target.value}),required:!0})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(V,{htmlFor:"complemento",children:"Complemento"}),i.jsx(q,{id:"complemento",value:r.complemento||"",onChange:m=>n({...r,complemento:m.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(D,{type:"button",variant:"outline",onClick:()=>{t(!1),c()},children:"Cancelar"}),i.jsxs(D,{type:"submit",children:[o?"Atualizar":"Criar"," Cliente"]})]})]})]})]})},RF=({open:e,onOpenChange:t,customer:r,purchases:n})=>r?i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"max-w-2xl",children:[i.jsx(er,{children:i.jsxs(tr,{children:["Histórico de Compras: ",r.name]})}),i.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 p-1",children:n.length===0?i.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma compra encontrada para este cliente."}):n.map(s=>i.jsxs(re,{className:"bg-background/50",children:[i.jsx(ye,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(xe,{className:"text-base",children:["Venda #",s.id]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.created_at||s.date).toLocaleString()})]})}),i.jsxs(se,{children:[i.jsx("ul",{className:"text-sm space-y-1",children:(s.items||s.sale_items||[]).map(o=>{var a;return i.jsxs("li",{className:"flex justify-between",children:[i.jsxs("span",{children:[o.quantity,"x ",o.name||((a=o.products)==null?void 0:a.name)||"Produto Indisponível"]}),i.jsxs("span",{children:["R$ ",(o.subtotal||o.quantity*o.unit_price).toFixed(2)]})]},o.id||o.product_id)})}),i.jsxs("div",{className:"border-t mt-2 pt-2 flex justify-between font-semibold",children:[i.jsx("span",{children:"Total da Venda:"}),i.jsxs("span",{children:["R$ ",(s.total_amount||s.total).toFixed(2)]})]})]})]},s.id))})]})}):null,OF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[s,o]=p.useState(""),[a,l]=p.useState(null),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,g]=p.useState(null),[w,m]=p.useState(!0),{toast:j}=at(),[x,v]=p.useState({name:"",cpf:"",phone:"",email:"",address:""}),y=p.useCallback(async()=>{m(!0);try{const L=await nS(),H=await rS();t(L||[]),n(H||[])}catch(L){j({title:"Erro ao carregar dados",description:L.message,variant:"destructive"})}finally{m(!1)}},[j]);p.useEffect(()=>{y()},[y]);const b=e.filter(L=>L.category==="Varejo").length,S=e.filter(L=>L.category==="Atacado").length,E=e.filter(L=>L.category==="Cliente Exclusivo").length,[N,_]=p.useState(""),[C,I]=p.useState(""),R=e.filter(L=>{var Ne,ae,Y;const H=(Ne=L.name)==null?void 0:Ne.toLowerCase().includes(s.toLowerCase()),oe=N?L.category===N:!0,de=C?((ae=L.cpf)==null?void 0:ae.includes(C))||((Y=L.cnpj)==null?void 0:Y.includes(C)):!0;return H&&oe&&de}),O=()=>{v({name:"",cpf:"",phone:"",email:"",address:""}),l(null)},z=L=>{if(!L)return"";const H=L.replace(/\D/g,"");return H.length>11&&H.slice(0,11),H.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")},k=L=>{if(!L)return"";const H=L.replace(/\D/g,"");return H.length>11&&H.slice(0,11),H.length===11?H.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):H.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3")},$=async L=>{L.preventDefault();const H={...x,cpf:x.cpf.replace(/\D/g,""),phone:x.phone.replace(/\D/g,"")};if(!H.name||!H.phone){j({title:"Erro de Validação",description:"Nome e Telefone são obrigatórios.",variant:"destructive"});return}if(H.cpf&&H.cpf.length!==11){j({title:"Erro de Validação",description:"CPF inválido.",variant:"destructive"});return}m(!0);try{a?(await VM(a.id,H),j({title:"Cliente atualizado!",description:`${H.name} foi atualizado.`})):(await sS(H),j({title:"Cliente criado!",description:`${H.name} foi criado.`})),y(),u(!1),O()}catch(oe){j({title:"Erro ao salvar cliente",description:oe.message,variant:"destructive"})}finally{m(!1)}},F=L=>{l(L),v({name:L.name,cpf:z(L.cpf),phone:k(L.phone),email:L.email,address:L.address||""}),u(!0)},A=async L=>{if(window.confirm("Tem certeza que deseja remover este cliente?")){m(!0);try{await UM(L),j({title:"Cliente removido!",description:"O cliente foi removido."}),y()}catch(H){j({title:"Erro ao remover cliente",description:H.message,variant:"destructive"})}finally{m(!1)}}},T=p.useCallback(L=>r.filter(H=>H.customer_id===L).sort((H,oe)=>new Date(oe.created_at||oe.date)-new Date(H.created_at||H.date)),[r]),P=p.useCallback(L=>T(L).reduce((oe,de)=>oe+(de.total_amount||de.total),0),[T]),U=L=>{g(L),h(!0)};return w&&e.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Clientes"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie o cadastro de clientes e seus históricos."})]}),i.jsx(AF,{open:c,onOpenChange:u,formData:x,setFormData:v,onSubmit:$,editingCustomer:a,formatCPF:z,formatPhone:k,resetForm:O})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-8 h-8 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:e.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Clientes"})]})]})})}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-8 h-8 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:b}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes de Varejo"})]})]})})}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-8 h-8 text-yellow-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:S}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes de Atacado"})]})]})})}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-8 h-8 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:E}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes Exclusivos"})]})]})})})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[i.jsx(q,{placeholder:"Buscar por nome...",value:s,onChange:L=>o(L.target.value),className:"bg-background/70 border-none text-white placeholder:text-gray-400 rounded-xl"}),i.jsxs("select",{value:N,onChange:L=>_(L.target.value),className:"bg-background/70 border-none text-white rounded-xl px-3 py-2",children:[i.jsx("option",{value:"",children:"Todas as Categorias"}),i.jsx("option",{value:"Varejo",children:"Varejo"}),i.jsx("option",{value:"Atacado",children:"Atacado"}),i.jsx("option",{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]}),i.jsx(q,{placeholder:"Buscar por CPF ou CNPJ...",value:C,onChange:L=>I(L.target.value),className:"bg-background/70 border-none text-white placeholder:text-gray-400 rounded-xl"})]}),i.jsx(PF,{customers:R,onEdit:F,onDelete:A,onViewHistory:U,getCustomerPurchases:T,getCustomerTotalSpent:P,formatCPF:z,formatPhone:k}),i.jsx(RF,{open:d,onOpenChange:h,customer:f,purchases:f?T(f.id):[]})]})},IF=({isOpen:e,onClose:t,editingGroup:r=null,onSuccess:n})=>{const[s,o]=p.useState({name:"",average_ticket:"",observations:""}),[a,l]=p.useState(!1),{toast:c}=at();p.useEffect(()=>{o(r?{name:r.name||"",average_ticket:r.average_ticket?r.average_ticket.toString():"",observations:r.observations||""}:{name:"",average_ticket:"",observations:""})},[r,e]);const u=g=>{const w=g.replace(/\D/g,"");return w===""?"":(parseFloat(w)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2})},d=g=>{const w=g.replace(/[^\d,]/g,"").replace(",",".");return parseFloat(w)||0},h=(g,w)=>{o(g==="average_ticket"?m=>({...m,[g]:u(w)}):m=>({...m,[g]:w}))},f=async g=>{if(g.preventDefault(),!s.name.trim()){c({title:"Erro",description:"Nome do grupo é obrigatório",variant:"destructive"});return}if(!s.average_ticket.trim()){c({title:"Erro",description:"Ticket médio é obrigatório",variant:"destructive"});return}l(!0);try{const w={name:s.name.trim(),average_ticket:d(s.average_ticket),observations:s.observations.trim()};r?(await Hs.updateCustomerGroup(r.id,w),c({title:"Sucesso!",description:"Grupo de clientes atualizado com sucesso"})):(await Hs.createCustomerGroup(w),c({title:"Sucesso!",description:"Grupo de clientes criado com sucesso"})),n(),t()}catch(w){console.error("Erro ao salvar grupo:",w),c({title:"Erro",description:"Erro ao salvar grupo de clientes",variant:"destructive"})}finally{l(!1)}};return i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"sm:max-w-[425px]",children:[i.jsx(er,{children:i.jsx(tr,{children:r?"Editar Grupo de Clientes":"Criar Grupo de Clientes"})}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"name",children:"Nome do Grupo *"}),i.jsx(q,{id:"name",value:s.name,onChange:g=>h("name",g.target.value),placeholder:"Ex: Clientes Premium",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"average_ticket",children:"Ticket Médio de Compra *"}),i.jsx(q,{id:"average_ticket",value:s.average_ticket,onChange:g=>h("average_ticket",g.target.value),placeholder:"R$ 0,00",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(V,{htmlFor:"observations",children:"Observações"}),i.jsx(Wp,{id:"observations",value:s.observations,onChange:g=>h("observations",g.target.value),placeholder:"Informações adicionais sobre o grupo...",rows:3})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(D,{type:"button",variant:"outline",onClick:t,disabled:a,children:"Cancelar"}),i.jsx(D,{type:"submit",disabled:a,children:a?"Salvando...":r?"Atualizar":"Criar"})]})]})]})})},LF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[s,o]=p.useState(!1),[a,l]=p.useState(null),{toast:c}=at(),u=async()=>{try{n(!0);const m=await Hs.getCustomerGroups();t(m)}catch(m){console.error("Erro ao buscar grupos:",m),c({title:"Erro",description:"Erro ao carregar grupos de clientes",variant:"destructive"})}finally{n(!1)}};p.useEffect(()=>{u()},[]);const d=m=>{l(m),o(!0)},h=async m=>{if(window.confirm(`Deseja realmente excluir o grupo "${m.name}"?`))try{if(await Hs.isGroupInUse(m.id)){c({title:"Erro",description:"Este grupo não pode ser excluído pois está sendo usado por clientes",variant:"destructive"});return}await Hs.deleteCustomerGroup(m.id),c({title:"Sucesso!",description:"Grupo excluído com sucesso"}),u()}catch(j){console.error("Erro ao excluir grupo:",j),c({title:"Erro",description:"Erro ao excluir grupo",variant:"destructive"})}},f=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),g=()=>{u(),l(null)},w=()=>{o(!1),l(null)};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-gray-500",children:"Carregando grupos..."})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Grupos de Clientes"}),i.jsxs(D,{onClick:()=>o(!0),children:[i.jsx(hn,{className:"w-4 h-4 mr-2"}),"Criar Grupo"]})]}),e.length===0?i.jsx(re,{children:i.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(hn,{className:"w-12 h-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum grupo criado"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"Crie seu primeiro grupo de clientes para começar"}),i.jsx(D,{onClick:()=>o(!0),children:"Criar Primeiro Grupo"})]})}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(m=>i.jsxs(re,{className:"hover:shadow-md transition-shadow",children:[i.jsx(ye,{className:"pb-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(xe,{className:"text-lg",children:m.name}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(D,{variant:"ghost",size:"sm",onClick:()=>d(m),className:"h-8 w-8 p-0",children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(D,{variant:"ghost",size:"sm",onClick:()=>h(m),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Ticket Médio:"}),i.jsx("span",{className:"font-medium text-green-600",children:f(m.average_ticket)})]}),m.observations&&i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("p",{className:"font-medium mb-1",children:"Observações:"}),i.jsx("p",{className:"text-gray-500",children:m.observations})]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Criado em: ",new Date(m.created_at).toLocaleDateString("pt-BR")]})]})]},m.id))}),i.jsx(IF,{isOpen:s,onClose:w,editingGroup:a,onSuccess:g})]})},MF=()=>i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Níveis de Comprador"}),i.jsx("p",{className:"text-gray-600",children:"Gerencie grupos de clientes baseados no ticket médio de compra e outras características."})]}),i.jsx(LF,{})]});var rh="rovingFocusGroup.onEntryFocus",DF={bubbles:!1,cancelable:!0},el="RovingFocusGroup",[qf,rC,$F]=Gm(el),[FF,nC]=vs(el,[$F]),[VF,UF]=FF(el),sC=p.forwardRef((e,t)=>i.jsx(qf.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(qf.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(BF,{...e,ref:t})})}));sC.displayName=el;var BF=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),g=Me(t,f),w=Rp(o),[m,j]=Qs({prop:a,defaultProp:l??null,onChange:c,caller:el}),[x,v]=p.useState(!1),y=yr(u),b=rC(r),S=p.useRef(!1),[E,N]=p.useState(0);return p.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(rh,y),()=>_.removeEventListener(rh,y)},[y]),i.jsx(VF,{scope:r,orientation:n,dir:w,loop:s,currentTabStopId:m,onItemFocus:p.useCallback(_=>j(_),[j]),onItemShiftTab:p.useCallback(()=>v(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(_=>_+1),[]),onFocusableItemRemove:p.useCallback(()=>N(_=>_-1),[]),children:i.jsx(me.div,{tabIndex:x||E===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:ce(e.onMouseDown,()=>{S.current=!0}),onFocus:ce(e.onFocus,_=>{const C=!S.current;if(_.target===_.currentTarget&&C&&!x){const I=new CustomEvent(rh,DF);if(_.currentTarget.dispatchEvent(I),!I.defaultPrevented){const R=b().filter(F=>F.focusable),O=R.find(F=>F.active),z=R.find(F=>F.id===m),$=[O,z,...R].filter(Boolean).map(F=>F.ref.current);aC($,d)}}S.current=!1}),onBlur:ce(e.onBlur,()=>v(!1))})})}),oC="RovingFocusGroupItem",iC=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:a,...l}=e,c=is(),u=o||c,d=UF(oC,r),h=d.currentTabStopId===u,f=rC(r),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:m}=d;return p.useEffect(()=>{if(n)return g(),()=>w()},[n,g,w]),i.jsx(qf.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:i.jsx(me.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ce(e.onMouseDown,j=>{n?d.onItemFocus(u):j.preventDefault()}),onFocus:ce(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ce(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){d.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const x=qF(j,d.orientation,d.dir);if(x!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let y=f().filter(b=>b.focusable).map(b=>b.ref.current);if(x==="last")y.reverse();else if(x==="prev"||x==="next"){x==="prev"&&y.reverse();const b=y.indexOf(j.currentTarget);y=d.loop?HF(y,b+1):y.slice(b+1)}setTimeout(()=>aC(y))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:m!=null}):a})})});iC.displayName=oC;var zF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function WF(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function qF(e,t,r){const n=WF(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return zF[n]}function aC(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function HF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var GF=sC,KF=iC,Bu="Tabs",[JF,I3]=vs(Bu,[nC]),lC=nC(),[YF,qp]=JF(Bu),cC=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Rp(l),[h,f]=Qs({prop:n,onChange:s,defaultProp:o??"",caller:Bu});return i.jsx(YF,{scope:r,baseId:is(),value:h,onValueChange:f,orientation:a,dir:d,activationMode:c,children:i.jsx(me.div,{dir:d,"data-orientation":a,...u,ref:t})})});cC.displayName=Bu;var uC="TabsList",dC=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,o=qp(uC,r),a=lC(r);return i.jsx(GF,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:i.jsx(me.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});dC.displayName=uC;var hC="TabsTrigger",fC=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=e,a=qp(hC,r),l=lC(r),c=gC(a.baseId,n),u=vC(a.baseId,n),d=n===a.value;return i.jsx(KF,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(me.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:ce(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(n):h.preventDefault()}),onKeyDown:ce(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(n)}),onFocus:ce(e.onFocus,()=>{const h=a.activationMode!=="manual";!d&&!s&&h&&a.onValueChange(n)})})})});fC.displayName=hC;var mC="TabsContent",pC=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...a}=e,l=qp(mC,r),c=gC(l.baseId,n),u=vC(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(gi,{present:s||d,children:({present:f})=>i.jsx(me.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&o})})});pC.displayName=mC;function gC(e,t){return`${e}-trigger-${t}`}function vC(e,t){return`${e}-content-${t}`}var XF=cC,yC=dC,xC=fC,wC=pC;const jC=XF,Hp=ue.forwardRef(({className:e,...t},r)=>i.jsx(yC,{ref:r,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-gray-800 p-1 text-gray-400",e),...t}));Hp.displayName=yC.displayName;const Hn=ue.forwardRef(({className:e,...t},r)=>i.jsx(xC,{ref:r,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-gray-700 data-[state=active]:text-white data-[state=active]:shadow-sm hover:bg-gray-700 hover:text-white",e),...t}));Hn.displayName=xC.displayName;const Gn=ue.forwardRef(({className:e,...t},r)=>i.jsx(wC,{ref:r,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Gn.displayName=wC.displayName;const QF=({totalRevenue:e,totalSales:t,averageTicket:r,totalItemsSold:n})=>{const s=[{icon:xn,value:`R$ ${e.toFixed(2)}`,label:"Faturamento",color:"text-green-500"},{icon:Aa,value:t,label:"Vendas",color:"text-blue-500"},{icon:xu,value:`R$ ${r.toFixed(2)}`,label:"Ticket Médio",color:"text-purple-500"},{icon:Hr,value:n,label:"Itens Vendidos",color:"text-orange-500"}];return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(o=>{const a=o.icon;return i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-2 rounded-full bg-primary/10 ${o.color}`,children:i.jsx(a,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.value}),i.jsx("p",{className:"text-sm text-gray-400",children:o.label})]})]})})},o.label)})})},ZF=({sales:e,salesByHour:t})=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(qj,{className:"w-5 h-5"}),i.jsx("span",{children:"Vendas Recentes"})]})}),i.jsx(se,{children:e.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(Aa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma venda no período selecionado"})]}):i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.slice(0,10).map(r=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["Venda #",r.id]}),i.jsxs("p",{className:"text-sm text-gray-400",children:[r.cashier||r.cashier_name||"Vendedor"," • ",new Date(r.date||r.created_at).toLocaleString()]}),i.jsxs("p",{className:"text-xs text-gray-400",children:[(r.items||r.sale_items||[]).length," itens"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",(r.total||r.total_amount||0).toFixed(2)]})})]},r.id))})})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(zv,{className:"w-5 h-5"}),i.jsx("span",{children:"Vendas por Horário"})]})}),i.jsx(se,{children:Object.keys(t).length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(zv,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma venda por horário no período"})]}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Object.entries(t).sort(([r],[n])=>parseInt(r)-parseInt(n)).map(([r,n])=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-background/50 rounded-md",children:[i.jsxs("span",{className:"text-sm font-medium",children:[r.padStart(2,"0"),":00 - ",String(parseInt(r)+1).padStart(2,"0"),":00"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:[n.count," vendas"]}),i.jsxs("span",{className:"text-sm font-semibold text-primary",children:["R$ ",n.revenue.toFixed(2)]})]})]},r))})})]})]}),e3=({topProducts:e})=>i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(Hr,{className:"w-5 h-5"}),i.jsx("span",{children:"Produtos Mais Vendidos"})]})}),i.jsx(se,{children:e.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Hr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhum produto vendido no período"})]}):i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:e.map((t,r)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-primary-foreground font-bold ${r===0?"bg-yellow-500":r===1?"bg-gray-400":r===2?"bg-yellow-700":"bg-primary"}`,children:r+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:t.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.quantity," unidades vendidas"]})]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",t.revenue.toFixed(2)]})})]},t.name))})})]}),t3={cash:"Dinheiro",debit:"Cartão Débito",credit:"Cartão Crédito",pix:"PIX"},r3=({paymentMethodStats:e,totalRevenue:t})=>i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"w-5 h-5"}),i.jsx("span",{children:"Métodos de Pagamento"})]})}),i.jsx(se,{children:Object.keys(e).length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(xn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhum pagamento registrado no período"})]}):i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:Object.entries(e).map(([r,n])=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:t3[r]||r}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.count," transações"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",n.amount.toFixed(2)]}),t>0&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.amount/t*100).toFixed(1),"% do total"]})]})]},r))})})]}),n3={today:"Hoje",yesterday:"Ontem",week:"Últimos 7 dias",month:"Este mês"},s3=({salesByUser:e,dateFilter:t,totalSales:r,totalRevenue:n,averageTicket:s,totalItemsSold:o})=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-5 h-5"}),i.jsx("span",{children:"Performance por Operador"})]})}),i.jsx(se,{children:Object.keys(e).length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(hn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma venda por operador no período"})]}):i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(e).map(([a,l])=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:a||"Não identificado"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.count," vendas"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",l.revenue.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ticket Médio: R$ ",(l.revenue/l.count||0).toFixed(2)]})]})]},a))})})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center space-x-2",children:[i.jsx(xu,{className:"w-5 h-5"}),i.jsx("span",{children:"Resumo do Período"})]})}),i.jsx(se,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center p-4 bg-background/50 rounded-lg",children:[i.jsx("p",{className:"text-xl font-bold text-primary",children:n3[t]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Período Selecionado"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Total de Vendas:"}),i.jsx("span",{className:"font-medium",children:r})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Faturamento Total:"}),i.jsxs("span",{className:"font-medium text-green-600",children:["R$ ",n.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ticket Médio:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",s.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Itens Vendidos:"}),i.jsx("span",{className:"font-medium",children:o})]})]})]})})]})]}),o3={today:"Hoje",yesterday:"Ontem",week:"Últimos 7 dias",month:"Este mês",all:"Todo o período"},i3=()=>{const[e,t]=p.useState([]),[r,n]=p.useState("today"),[s,o]=p.useState(!0),[a,l]=p.useState(null),{toast:c}=at(),u=p.useCallback(async()=>{o(!0);try{console.log("Carregando dados de vendas...");const g=await rS();console.log("Dados carregados:",g),t(g||[])}catch(g){console.error("Erro ao carregar vendas:",g),l(g.message),c({title:"Erro ao carregar vendas",description:g.message,variant:"destructive"}),t([])}finally{o(!1)}},[c]);p.useEffect(()=>{u()},[u]);const d=p.useMemo(()=>{const g=new Date,w=new Date(g.getFullYear(),g.getMonth(),g.getDate()),m=new Date(w);m.setDate(m.getDate()-1);const j=new Date(g);j.setDate(g.getDate()-6),j.setHours(0,0,0,0);const x=new Date(g.getFullYear(),g.getMonth(),1);return e.filter(v=>{const y=new Date(v.created_at||v.date);switch(r){case"today":return y>=w&&y<=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999);case"yesterday":return y>=m&&y<w;case"week":return y>=j&&y<=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999);case"month":return y>=x&&y<=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999);case"all":default:return!0}})},[e,r]),h=p.useMemo(()=>{const g=d.reduce((S,E)=>S+(E.total_amount||E.total||0),0),w=d.length,m=w>0?g/w:0,j=d.reduce((S,E)=>{const N=E.items||E.sale_items||[];return S+N.reduce((_,C)=>_+(C.quantity||0),0)},0),x=(()=>{const S={};return d.forEach(E=>{(E.items||E.sale_items||[]).forEach(_=>{var O;const C=_.product_id||_.productId,I=((O=_.products)==null?void 0:O.name)||_.name||"Produto Desconhecido",R=_.subtotal||_.quantity*_.unit_price||0;S[C]||(S[C]={id:C,name:I,quantity:0,revenue:0}),S[C].quantity+=_.quantity||0,S[C].revenue+=R})}),Object.values(S).sort((E,N)=>N.revenue-E.revenue).slice(0,10)})(),v=(()=>{const S={};return d.forEach(E=>{(E.payment_details||E.payments||[]).forEach(_=>{S[_.method]||(S[_.method]={count:0,amount:0}),S[_.method].count+=1,S[_.method].amount+=_.amount||0})}),S})(),y=(()=>{const S={};return d.forEach(E=>{const N=new Date(E.created_at||E.date).getHours().toString();S[N]||(S[N]={count:0,revenue:0}),S[N].count+=1,S[N].revenue+=E.total_amount||E.total||0}),S})(),b=(()=>{const S={};return d.forEach(E=>{const N=E.cashier_name||E.cashier||"Desconhecido";S[N]||(S[N]={count:0,revenue:0}),S[N].count+=1,S[N].revenue+=E.total_amount||E.total||0}),S})();return{totalRevenue:g,totalSales:w,averageTicket:m,totalItemsSold:j,topProducts:x,paymentMethodStats:v,salesByHour:y,salesByUser:b}},[d]),f=()=>{c({title:"🚧 Em Desenvolvimento 🚧",description:"A funcionalidade de exportar relatórios será implementada em breve!"})};return s?i.jsx("div",{className:"space-y-6 bg-gray-900 text-white min-h-screen p-6",children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"loading-spinner mb-4"}),i.jsx("p",{children:"Carregando relatórios..."})]})})}):a?i.jsx("div",{className:"space-y-6 bg-gray-900 text-white min-h-screen p-6",children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-red-400 mb-4",children:"Erro ao carregar relatórios"}),i.jsx("p",{className:"text-gray-400 mb-4",children:a}),i.jsx(D,{onClick:u,variant:"outline",children:"Tentar novamente"})]})})}):i.jsxs("div",{className:"space-y-6 bg-gray-900 text-white min-h-screen p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Relatórios"}),i.jsx("p",{className:"text-muted-foreground",children:"Análise detalhada de vendas e performance da loja."})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(st,{value:r,onValueChange:n,children:[i.jsx(Ye,{className:"w-[180px]",children:i.jsx(ot,{placeholder:"Selecione o período"})}),i.jsx(Xe,{children:Object.entries(o3).map(([g,w])=>i.jsx(be,{value:g,children:w},g))})]}),i.jsxs(D,{variant:"outline",onClick:f,children:[i.jsx(Yj,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-gray-400 mb-4",children:"Nenhuma venda encontrada para o período selecionado."}),i.jsx("p",{className:"text-sm text-gray-500",children:"Tente selecionar um período diferente ou aguarde novas vendas."})]}):i.jsx(QF,{totalRevenue:h.totalRevenue,totalSales:h.totalSales,averageTicket:h.averageTicket,totalItemsSold:h.totalItemsSold}),e.length>0&&i.jsxs(jC,{defaultValue:"sales",className:"space-y-6",children:[i.jsxs(Hp,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[i.jsx(Hn,{value:"sales",children:"Vendas"}),i.jsx(Hn,{value:"products",children:"Produtos"}),i.jsx(Hn,{value:"payments",children:"Pagamentos"}),i.jsx(Hn,{value:"performance",children:"Performance"})]}),i.jsx(Gn,{value:"sales",children:i.jsx(ZF,{sales:d,salesByHour:h.salesByHour})}),i.jsx(Gn,{value:"products",children:i.jsx(e3,{topProducts:h.topProducts})}),i.jsx(Gn,{value:"payments",children:i.jsx(r3,{paymentMethodStats:h.paymentMethodStats,totalRevenue:h.totalRevenue})}),i.jsx(Gn,{value:"performance",children:i.jsx(s3,{salesByUser:h.salesByUser,dateFilter:r,totalSales:h.totalSales,totalRevenue:h.totalRevenue,averageTicket:h.averageTicket,totalItemsSold:h.totalItemsSold})})]})]})},Wx={[jt.ADMIN]:"Administrador",[jt.MANAGER]:"Gerente",[jt.CASHIER]:"Operador de Caixa",[jt.STOCK]:"Estoquista",[jt.SALESPERSON]:"Vendedor"},So="__no_store_selected__",a3=()=>{var _;const[e,t]=p.useState([]),[r,n]=p.useState([]),[s,o]=p.useState(null),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!0),{toast:f}=at(),[g,w]=p.useState({username:"",password:"",name:"",role:"",store_id:So,active:!0}),m=((_=it())==null?void 0:_.role)===jt.ADMIN,j=p.useCallback(async()=>{h(!0);try{const[C,I]=await Promise.all([Z1(),js()]);t(C||[]),n(I||[])}catch(C){f({title:"Erro ao carregar dados",description:C.message,variant:"destructive"})}finally{h(!1)}},[f]);p.useEffect(()=>{j()},[j]);const x=()=>{w({username:"",password:"",name:"",role:"",store_id:So,active:!0}),o(null),u(!1)},v=async C=>{var k;C.preventDefault();const I=g.store_id===So?null:g.store_id,R=(k=r.find($=>$.id===I))==null?void 0:k.is_online_store;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.username)){f({title:"Erro de Validação",description:"O e-mail do usuário é inválido.",variant:"destructive"});return}if(!g.role){f({title:"Erro de Validação",description:"Função é obrigatória.",variant:"destructive"});return}if(!I&&g.role!==jt.ADMIN&&!R){f({title:"Erro de Validação",description:"Loja é obrigatória para esta função (exceto Admin global ou se a loja for a online).",variant:"destructive"});return}if(e.find($=>$.username===g.username&&(!s||$.id!==s.id))){f({title:"Erro",description:"Nome de usuário já existe.",variant:"destructive"});return}h(!0);try{const $={...g,store_id:I};if(s&&!g.password&&delete $.password,s)if(m){const F={name:g.name,role:g.role,store_id:g.store_id===So?null:g.store_id,password:g.password||void 0};await kM(s.id,F),f({title:"Usuário atualizado!",description:`${g.name} foi atualizado com sucesso.`})}else f({title:"Apenas admin pode alterar usuários!",variant:"destructive"});else await y($),f({title:"Funcionário criado!",description:`${g.name} foi criado com sucesso.`});j(),l(!1),x()}catch($){f({title:"Erro ao salvar usuário",description:$.message,variant:"destructive"})}finally{h(!1)}},y=async C=>{try{const I=await fetch("/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C.username,password:C.password,name:C.name,role:C.role,store_id:C.store_id})});if(!I.ok){const R=await I.json();throw new Error(R.error||"Erro ao criar funcionário")}return await I.json()}catch(I){throw new Error(`Erro na comunicação com o backend: ${I.message}`)}},b=C=>{o(C),w({username:C.username,password:"",name:C.name||C.username.split("@")[0],role:C.role,store_id:C.store_id||So,active:C.active}),l(!0)},S=async C=>{h(!0);try{await PM(C.id,!C.active),f({title:C.active?"Usuário desativado":"Usuário ativado",description:`${C.name} foi ${C.active?"desativado":"ativado"}.`}),j()}catch(I){f({title:"Erro ao alterar status do usuário",description:I.message,variant:"destructive"})}finally{h(!1)}},E=async C=>{if(window.confirm("Tem certeza que deseja remover este usuário?")){h(!0);try{await TM(C),f({title:"Usuário removido!",description:"O usuário foi removido com sucesso."}),j()}catch(I){f({title:"Erro ao remover usuário",description:I.message,variant:"destructive"})}finally{h(!1)}}},N=C=>{switch(C){case jt.ADMIN:return"text-red-600 bg-red-100 dark:bg-red-900";case jt.MANAGER:return"text-blue-600 bg-blue-100 dark:bg-blue-900";case jt.CASHIER:return"text-green-600 bg-green-100 dark:bg-green-900";case jt.STOCK:return"text-purple-600 bg-purple-100 dark:bg-purple-900";case jt.SALESPERSON:return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900"}};return d&&e.length===0&&r.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Usuários"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie usuários, funções e suas lojas"})]}),m&&i.jsxs(mr,{open:a,onOpenChange:C=>{l(C),C||x()},children:[i.jsx(Jo,{asChild:!0,children:i.jsxs(D,{onClick:()=>x(),children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Novo Funcionário"]})}),i.jsxs(Zt,{className:"max-w-md",children:[i.jsxs(er,{children:[i.jsx(tr,{children:s?"Editar Usuário":"Novo Funcionário"}),i.jsx(VS,{children:s?"Edite as informações do usuário.":"Crie um novo funcionário no sistema."})]}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"name",children:"Nome Completo"}),i.jsx(q,{id:"name",value:g.name,onChange:C=>w({...g,name:C.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"username",children:"E-mail do Usuário"}),i.jsx(q,{id:"username",type:"email",value:g.username,onChange:C=>w({...g,username:C.target.value}),required:!0,placeholder:"usuario@exemplo.com"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"password",children:s?"Nova Senha (deixe vazio para manter atual)":"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(q,{id:"password",type:c?"text":"password",value:g.password,onChange:C=>w({...g,password:C.target.value}),required:!s}),i.jsx(D,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>u(!c),children:c?i.jsx(ET,{className:"w-4 h-4"}):i.jsx(ep,{className:"w-4 h-4"})})]})]}),m&&i.jsxs("div",{children:[i.jsx(V,{htmlFor:"role",children:"Função"}),i.jsxs(st,{value:g.role,onValueChange:C=>w({...g,role:C}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione uma função"})}),i.jsx(Xe,{children:Object.entries(Wx).map(([C,I])=>i.jsx(be,{value:C,children:I},C))})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"store_id",children:"Loja"}),i.jsxs(st,{value:g.store_id,onValueChange:C=>w({...g,store_id:C}),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione uma loja"})}),i.jsxs(Xe,{children:[i.jsx(be,{value:So,children:"Nenhuma (Global/Admin)"}),r.map(C=>i.jsxs(be,{value:C.id,children:[C.name," ",C.is_online_store?"(Online)":""]},C.id))]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(D,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),i.jsx(D,{type:"submit",disabled:d,children:d?"Salvando...":(s?"Atualizar":"Criar")+" Usuário"})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-8 h-8 text-primary"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:e.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Usuários"})]})]})})}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ra,{className:"w-8 h-8 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:r.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Lojas"})]})]})})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(C=>{var I,R,O;return i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-hover",children:i.jsxs(re,{className:`glass-effect ${C.active?"":"opacity-60"}`,children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-5 h-5 text-primary"}),i.jsx(xe,{className:"text-lg",children:C.name})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>b(C),children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(D,{variant:"ghost",size:"icon",onClick:()=>E(C.id),className:"text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Usuário: ",C.username]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Nome: ",C.name||C.username.split("@")[0]]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loja: ",(I=C.stores)!=null&&I.name?`${C.stores.name}${C.stores.is_online_store?" (Online)":""}`:C.role===jt.ADMIN?"Todas (Admin)":"Não definida"]}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(C.role)}`,children:Wx[C.role]}),m&&i.jsx(D,{size:"xs",variant:"outline",onClick:()=>b(C),children:"Alterar Role"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.active?"text-green-600 bg-green-100 dark:bg-green-900":"text-red-600 bg-red-100 dark:bg-red-900"}`,children:C.active?"Ativo":"Inativo"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Permissões:"}),i.jsxs("div",{className:"space-y-1",children:[(R=tc[C.role])==null?void 0:R.slice(0,3).map(z=>i.jsxs("div",{className:"text-xs text-muted-foreground",children:["• ",z.replace(/_/g," ").toLowerCase()]},z)),((O=tc[C.role])==null?void 0:O.length)>3&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["• +",tc[C.role].length-3," mais..."]})]})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsx(D,{variant:"outline",size:"sm",className:"w-full",onClick:()=>S(C),disabled:d,children:d?"Aguarde...":(C.active?"Desativar":"Ativar")+" Usuário"})})]})]})},C.id)})}),e.length===0&&!d&&i.jsx(re,{children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(hn,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum usuário encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Comece criando seu primeiro usuário"})]})})]})},tl="http://localhost:4000/api",l3=async(e=null)=>{try{const t=new URLSearchParams;e&&t.append("store_id",e);const r=await fetch(`${tl}/cash-register/state?${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Erro ao buscar estado do caixa")}return await r.json()}catch(t){throw new Error(`Erro na comunicação com o backend: ${t.message}`)}},c3=async(e,t,r)=>{try{const n=await fetch(`${tl}/cash-register/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initial_amount:e,store_id:t,user_id:r})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Erro ao abrir caixa")}return await n.json()}catch(n){throw new Error(`Erro na comunicação com o backend: ${n.message}`)}},u3=async(e,t,r,n=null)=>{try{const s=await fetch(`${tl}/cash-register/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({final_amount:e,store_id:t,user_id:r,notes:n})});if(!s.ok){const o=await s.json();throw new Error(o.error||"Erro ao fechar caixa")}return await s.json()}catch(s){throw new Error(`Erro na comunicação com o backend: ${s.message}`)}},d3=async(e={})=>{try{const t=new URLSearchParams;e.store_id&&t.append("store_id",e.store_id),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.date_from&&t.append("date_from",e.date_from),e.date_to&&t.append("date_to",e.date_to);const r=await fetch(`${tl}/cash-register/logs?${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Erro ao buscar logs do caixa")}return await r.json()}catch(t){throw new Error(`Erro na comunicação com o backend: ${t.message}`)}},h3=async(e,t,r,n,s=null)=>{try{const o=await fetch(`${tl}/cash-register/logs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,amount:t,store_id:r,user_id:n,notes:s})});if(!o.ok){const a=await o.json();throw new Error(a.error||"Erro ao adicionar log do caixa")}return await o.json()}catch(o){throw new Error(`Erro na comunicação com o backend: ${o.message}`)}},f3=()=>{var T;const[e,t]=p.useState({isOpen:!1,currentAmount:0,openingAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:null,store:null}),[r,n]=p.useState([]),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,g]=p.useState(""),[w,m]=p.useState(""),[j,x]=p.useState(""),[v,y]=p.useState("add"),[b,S]=p.useState(""),[E,N]=p.useState("status"),{toast:_}=at(),C=it(),I=Gt(C==null?void 0:C.role,J.CASH_REGISTER_MANAGEMENT),R=async()=>{try{o(!0);const P=(C==null?void 0:C.store_id)||"1fa90f00-cf02-4a42-8167-c599537c22bb",U=await l3(P);t(U)}catch(P){_({title:"Erro",description:P.message,variant:"destructive"})}finally{o(!1)}},O=async()=>{try{const P=await d3({limit:100});n(P.logs||[])}catch(P){_({title:"Erro",description:P.message,variant:"destructive"})}};p.useEffect(()=>{R(),O()},[]);const z=async()=>{if(!f||parseFloat(f)<0){_({title:"Erro",description:"Valor inicial é obrigatório e deve ser maior ou igual a zero.",variant:"destructive"});return}try{o(!0);const P=await c3(parseFloat(f),e.store_id,C==null?void 0:C.id);t(P.cashRegister),l(!1),g(""),_({title:"Sucesso",description:P.message}),O()}catch(P){_({title:"Erro",description:P.message,variant:"destructive"})}finally{o(!1)}},k=async()=>{try{o(!0);const P=await u3(parseFloat(w)||e.currentAmount,e.store_id,C==null?void 0:C.id,b);t(P.cashRegister),u(!1),m(""),S(""),_({title:"Sucesso",description:P.message}),O()}catch(P){_({title:"Erro",description:P.message,variant:"destructive"})}finally{o(!1)}},$=async()=>{if(!j||parseFloat(j)<=0){_({title:"Erro",description:"Valor é obrigatório e deve ser maior que zero.",variant:"destructive"});return}try{o(!0);const P=parseFloat(j),U=v==="add"?P:-P;await h3(v,P,e.store_id,C==null?void 0:C.id,b),h(!1),x(""),y("add"),S(""),_({title:"Sucesso",description:"Movimentação registrada com sucesso!"}),R(),O()}catch(P){_({title:"Erro",description:P.message,variant:"destructive"})}finally{o(!1)}},F=P=>new Date(P).toLocaleString("pt-BR"),A=P=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(P);return I?i.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(xn,{className:"w-8 h-8"}),"Controle de Caixa"]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:((T=e.store)==null?void 0:T.name)||"Loja Online"}),i.jsx(D,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Tem certeza que deseja resetar o caixa? Isso apagará todo o histórico."))try{(await fetch(`http://31.97.86.88:4000/api/cash-register/reset/${e.store_id}`,{method:"DELETE"})).ok&&(_({title:"Sucesso",description:"Caixa resetado com sucesso!"}),R(),O())}catch{_({title:"Erro",description:"Erro ao resetar caixa",variant:"destructive"})}},children:"Resetar Caixa"})]})]}),i.jsxs(jC,{value:E,onValueChange:N,children:[i.jsxs(Hp,{className:"grid w-full grid-cols-3",children:[i.jsx(Hn,{value:"status",children:"Status"}),i.jsx(Hn,{value:"operations",children:"Operações"}),i.jsx(Hn,{value:"history",children:"Histórico"})]}),i.jsx(Gn,{value:"status",className:"space-y-6",children:i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[e.isOpen?i.jsx(Zm,{className:"w-6 h-6 text-green-500"}):i.jsx(df,{className:"w-6 h-6 text-red-500"}),"Status do Caixa"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center p-4 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),i.jsx("p",{className:`text-lg font-bold ${e.isOpen?"text-green-600":"text-red-600"}`,children:e.isOpen?"ABERTO":"FECHADO"})]}),i.jsxs("div",{className:"text-center p-4 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Atual"}),i.jsx("p",{className:"text-2xl font-bold",children:A(e.currentAmount)})]})]}),e.isOpen&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Inicial"}),i.jsx("p",{className:"font-bold",children:A(e.openingAmount)})]}),i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Aberto por"}),i.jsx("p",{className:"font-bold",children:e.openedBy||"N/A"})]}),i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Aberto em"}),i.jsx("p",{className:"font-bold",children:e.openedAt?F(e.openedAt):"N/A"})]})]}),!e.isOpen&&e.closedAt&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Fechado em"}),i.jsx("p",{className:"font-bold",children:F(e.closedAt)})]}),i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Final"}),i.jsx("p",{className:"font-bold",children:A(e.currentAmount)})]})]})]})]})}),i.jsx(Gn,{value:"operations",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(Kv,{className:"w-5 h-5"}),"Abrir Caixa"]})}),i.jsx(se,{children:i.jsxs(mr,{open:a,onOpenChange:l,children:[i.jsx(Jo,{asChild:!0,children:i.jsx(D,{className:"w-full",disabled:e.isOpen||s,children:"Abrir Caixa"})}),i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Abrir Caixa"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"initialAmount",children:"Valor Inicial (R$)"}),i.jsx(q,{id:"initialAmount",type:"number",step:"0.01",min:"0",value:f,onChange:P=>g(P.target.value),placeholder:"0,00"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(D,{variant:"outline",onClick:()=>l(!1),disabled:s,children:"Cancelar"}),i.jsx(D,{onClick:z,disabled:s,children:s?"Abrindo...":"Abrir Caixa"})]})]})]})]})})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(of,{className:"w-5 h-5"}),"Fechar Caixa"]})}),i.jsx(se,{children:i.jsxs(mr,{open:c,onOpenChange:u,children:[i.jsx(Jo,{asChild:!0,children:i.jsx(D,{variant:"outline",className:"w-full",disabled:!e.isOpen||s,children:"Fechar Caixa"})}),i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Fechar Caixa"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"finalAmount",children:"Valor Final (R$)"}),i.jsx(q,{id:"finalAmount",type:"number",step:"0.01",min:"0",value:w,onChange:P=>m(P.target.value),placeholder:e.currentAmount.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"closeNotes",children:"Observações (opcional)"}),i.jsx(q,{id:"closeNotes",value:b,onChange:P=>S(P.target.value),placeholder:"Observações sobre o fechamento..."})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(D,{variant:"outline",onClick:()=>u(!1),disabled:s,children:"Cancelar"}),i.jsx(D,{onClick:k,disabled:s,children:s?"Fechando...":"Fechar Caixa"})]})]})]})]})})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(xu,{className:"w-5 h-5"}),"Movimentações"]})}),i.jsx(se,{children:i.jsxs(mr,{open:d,onOpenChange:h,children:[i.jsx(Jo,{asChild:!0,children:i.jsx(D,{variant:"outline",className:"w-full",disabled:!e.isOpen||s,children:"Adicionar/Remover"})}),i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Movimentação de Caixa"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(V,{children:"Tipo de Operação"}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsxs(D,{variant:v==="add"?"default":"outline",onClick:()=>y("add"),className:"flex-1",children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Adicionar"]}),i.jsxs(D,{variant:v==="remove"?"default":"outline",onClick:()=>y("remove"),className:"flex-1",children:[i.jsx(Ic,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"movementAmount",children:"Valor (R$)"}),i.jsx(q,{id:"movementAmount",type:"number",step:"0.01",min:"0",value:j,onChange:P=>x(P.target.value),placeholder:"0,00"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"movementNotes",children:"Observações (opcional)"}),i.jsx(q,{id:"movementNotes",value:b,onChange:P=>S(P.target.value),placeholder:"Motivo da movimentação..."})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(D,{variant:"outline",onClick:()=>h(!1),disabled:s,children:"Cancelar"}),i.jsx(D,{onClick:$,disabled:s,children:s?"Registrando...":"Registrar Movimentação"})]})]})]})]})})]})]})}),i.jsx(Gn,{value:"history",className:"space-y-6",children:i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(ta,{className:"w-5 h-5"}),"Histórico de Operações"]})}),i.jsx(se,{children:i.jsxs("div",{className:"space-y-4",children:[r.map(P=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[P.type==="open"&&i.jsx(Kv,{className:"w-5 h-5 text-green-500"}),P.type==="close"&&i.jsx(of,{className:"w-5 h-5 text-red-500"}),P.type==="add"&&i.jsx(sr,{className:"w-5 h-5 text-blue-500"}),P.type==="remove"&&i.jsx(Ic,{className:"w-5 h-5 text-orange-500"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[P.type==="open"&&"Abertura de Caixa",P.type==="close"&&"Fechamento de Caixa",P.type==="add"&&"Adição de Dinheiro",P.type==="remove"&&"Remoção de Dinheiro"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:P.notes})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:A(P.current_amount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:F(P.created_at)})]})]},P.id)),r.length===0&&i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma operação registrada."})]})})]})})]})]}):i.jsx("div",{className:"container mx-auto p-6",children:i.jsx(re,{className:"max-w-md mx-auto",children:i.jsxs(se,{className:"p-6 text-center",children:[i.jsx(df,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold mb-2",children:"Acesso Negado"}),i.jsx("p",{className:"text-muted-foreground",children:"Você não tem permissão para acessar o controle de caixa."})]})})})},m3=()=>{const[e,t]=p.useState({printer:{type:"epson",interface:"USB",port:"USB001",enabled:!0},scanner:{deviceId:"",autoScan:!0,enabled:!0}}),[r,n]=p.useState({nfe:{enabled:!1,environment:"homologation",series:"1",nextNumber:1},sat:{enabled:!1,environment:"homologation",nextNumber:1},general:{cnpj:"",inscricaoEstadual:"",razaoSocial:"",nomeFantasia:""}}),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,g]=p.useState([]),[w,m]=p.useState(null),{toast:j}=at();p.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0);const[k,$]=await Promise.all([Dn.getConfig(),qn.getConfig()]);t(k),n($)}catch(k){j({title:"Erro ao carregar configurações",description:k.message,variant:"destructive"})}finally{o(!1)}},v=async()=>{try{o(!0),await Dn.saveConfig(e),j({title:"Configurações salvas",description:"As configurações de periféricos foram salvas com sucesso!"})}catch(k){j({title:"Erro ao salvar configurações",description:k.message,variant:"destructive"})}finally{o(!1)}},y=async()=>{try{o(!0),await qn.saveConfig(r),j({title:"Configurações fiscais salvas",description:"As configurações fiscais foram salvas com sucesso!"})}catch(k){j({title:"Erro ao salvar configurações fiscais",description:k.message,variant:"destructive"})}finally{o(!1)}},b=async()=>{try{l(!0),await Dn.testPrinter(e.printer),j({title:"Teste da impressora",description:"Impressora testada com sucesso!"})}catch(k){j({title:"Erro no teste da impressora",description:k.message,variant:"destructive"})}finally{l(!1)}},S=async()=>{try{u(!0);const k=await Dn.testScanner(e.scanner);j({title:"Teste do scanner",description:`Scanner testado com sucesso! Código de teste: ${k.testCode}`})}catch(k){j({title:"Erro no teste do scanner",description:k.message,variant:"destructive"})}finally{u(!1)}},E=async()=>{try{u(!0);const k=await Dn.scanBarcode(e.scanner);m(k.barcode),j({title:"Código de barras lido",description:`Código: ${k.barcode.text} (${k.barcode.format})`})}catch(k){j({title:"Erro na leitura",description:k.message,variant:"destructive"})}finally{u(!1)}},N=async()=>{try{h(!0);const k=await Dn.detectDevices();g(k),j({title:"Dispositivos detectados",description:`${k.length} dispositivo(s) encontrado(s)!`})}catch(k){j({title:"Erro ao detectar dispositivos",description:k.message,variant:"destructive"})}finally{h(!1)}},_=(k,$,F)=>{t(A=>({...A,[k]:{...A[k],[$]:F}}))},C=(k,$,F)=>{n(A=>({...A,[k]:{...A[k],[$]:F}}))},I=k=>k?qn.validateCNPJ(k):!0,R=k=>qn.formatCNPJ(k),O=k=>{const $=R(k);C("general","cnpj",$)},z=k=>{switch(k){case"printer":return i.jsx(af,{className:"w-4 h-4"});case"scanner":return i.jsx(lf,{className:"w-4 h-4"});default:return i.jsx(cf,{className:"w-4 h-4"})}};return s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(cf,{className:"w-6 h-6 text-primary"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Configurações de Periféricos e Fiscal"})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(Pa,{className:"w-5 h-5"}),"Detectar Dispositivos"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs(D,{onClick:N,disabled:d,className:"w-full",children:[i.jsx(Pa,{className:"w-4 h-4 mr-2"}),d?"Detectando...":"Detectar Dispositivos"]}),f.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Dispositivos Encontrados:"}),f.map((k,$)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[z(k.device_type),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:k.device_name}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.interface_type," - ",k.port_address]})]}),k.is_connected?i.jsx(Zm,{className:"w-5 h-5 text-green-500"}):i.jsx(Qm,{className:"w-5 h-5 text-red-500"})]},$))]})]})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(af,{className:"w-5 h-5"}),"Configuração da Impressora"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(V,{htmlFor:"printer-enabled",children:"Ativar Impressora"}),i.jsx(Un,{id:"printer-enabled",checked:e.printer.enabled,onCheckedChange:k=>_("printer","enabled",k)})]}),e.printer.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"printer-type",children:"Tipo de Impressora"}),i.jsxs(st,{value:e.printer.type,onValueChange:k=>_("printer","type",k),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione o tipo"})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"epson",children:"Epson"}),i.jsx(be,{value:"star",children:"Star"}),i.jsx(be,{value:"citizen",children:"Citizen"}),i.jsx(be,{value:"bematech",children:"Bematech"})]})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"printer-interface",children:"Interface"}),i.jsxs(st,{value:e.printer.interface,onValueChange:k=>_("printer","interface",k),children:[i.jsx(Ye,{children:i.jsx(ot,{placeholder:"Selecione a interface"})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"USB",children:"USB"}),i.jsx(be,{value:"Network",children:"Rede"}),i.jsx(be,{value:"Serial",children:"Serial"})]})]})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"printer-port",children:"Porta/Endereço"}),i.jsx(q,{id:"printer-port",value:e.printer.port,onChange:k=>_("printer","port",k.target.value),placeholder:"Ex: USB001, 192.168.1.100:9100"})]}),i.jsxs(D,{onClick:b,disabled:a,className:"w-full",children:[i.jsx(Gv,{className:"w-4 h-4 mr-2"}),a?"Testando...":"Testar Impressora"]})]})]})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(lf,{className:"w-5 h-5"}),"Configuração do Scanner"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(V,{htmlFor:"scanner-enabled",children:"Ativar Scanner"}),i.jsx(Un,{id:"scanner-enabled",checked:e.scanner.enabled,onCheckedChange:k=>_("scanner","enabled",k)})]}),e.scanner.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(V,{htmlFor:"scanner-auto",children:"Escaneamento Automático"}),i.jsx(Un,{id:"scanner-auto",checked:e.scanner.autoScan,onCheckedChange:k=>_("scanner","autoScan",k)})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"scanner-device",children:"ID do Dispositivo"}),i.jsx(q,{id:"scanner-device",value:e.scanner.deviceId,onChange:k=>_("scanner","deviceId",k.target.value),placeholder:"Deixe vazio para auto-detecção"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs(D,{onClick:S,disabled:c,className:"w-full",children:[i.jsx(Gv,{className:"w-4 h-4 mr-2"}),c?"Testando...":"Testar Scanner"]}),i.jsxs(D,{onClick:E,disabled:c,variant:"outline",className:"w-full",children:[i.jsx(ST,{className:"w-4 h-4 mr-2"}),c?"Lendo...":"Ler Código"]})]}),w&&i.jsxs("div",{className:"p-3 border rounded-lg bg-muted",children:[i.jsx("h4",{className:"font-medium mb-2",children:"Último código lido:"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Código:"})," ",w.text]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Formato:"})," ",w.format]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Hora:"})," ",new Date(w.timestamp).toLocaleTimeString("pt-BR")]})]})]})]})]})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(bT,{className:"w-5 h-5"}),"Configuração Fiscal"]})}),i.jsxs(se,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium",children:"Dados da Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"cnpj",children:"CNPJ"}),i.jsx(q,{id:"cnpj",value:r.general.cnpj,onChange:k=>O(k.target.value),placeholder:"00.000.000/0000-00",className:!I(r.general.cnpj)&&r.general.cnpj?"border-red-500":""}),!I(r.general.cnpj)&&r.general.cnpj&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:"CNPJ inválido"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"ie",children:"Inscrição Estadual"}),i.jsx(q,{id:"ie",value:r.general.inscricaoEstadual,onChange:k=>C("general","inscricaoEstadual",k.target.value),placeholder:"000.000.000.000"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"razao-social",children:"Razão Social"}),i.jsx(q,{id:"razao-social",value:r.general.razaoSocial,onChange:k=>C("general","razaoSocial",k.target.value),placeholder:"Nome da empresa"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"nome-fantasia",children:"Nome Fantasia"}),i.jsx(q,{id:"nome-fantasia",value:r.general.nomeFantasia,onChange:k=>C("general","nomeFantasia",k.target.value),placeholder:"Nome fantasia"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(V,{htmlFor:"nfe-enabled",children:"Ativar NF-e"}),i.jsx(Un,{id:"nfe-enabled",checked:r.nfe.enabled,onCheckedChange:k=>C("nfe","enabled",k)})]}),r.nfe.enabled&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"nfe-environment",children:"Ambiente"}),i.jsxs(st,{value:r.nfe.environment,onValueChange:k=>C("nfe","environment",k),children:[i.jsx(Ye,{children:i.jsx(ot,{})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"homologation",children:"Homologação"}),i.jsx(be,{value:"production",children:"Produção"})]})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"nfe-series",children:"Série"}),i.jsx(q,{id:"nfe-series",value:r.nfe.series,onChange:k=>C("nfe","series",k.target.value),placeholder:"1"})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"nfe-next-number",children:"Próximo Número"}),i.jsx(q,{id:"nfe-next-number",type:"number",value:r.nfe.nextNumber,onChange:k=>C("nfe","nextNumber",parseInt(k.target.value)),placeholder:"1"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(V,{htmlFor:"sat-enabled",children:"Ativar SAT"}),i.jsx(Un,{id:"sat-enabled",checked:r.sat.enabled,onCheckedChange:k=>C("sat","enabled",k)})]}),r.sat.enabled&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"sat-environment",children:"Ambiente"}),i.jsxs(st,{value:r.sat.environment,onValueChange:k=>C("sat","environment",k),children:[i.jsx(Ye,{children:i.jsx(ot,{})}),i.jsxs(Xe,{children:[i.jsx(be,{value:"homologation",children:"Homologação"}),i.jsx(be,{value:"production",children:"Produção"})]})]})]}),i.jsxs("div",{children:[i.jsx(V,{htmlFor:"sat-next-number",children:"Próximo Número"}),i.jsx(q,{id:"sat-next-number",type:"number",value:r.sat.nextNumber,onChange:k=>C("sat","nextNumber",parseInt(k.target.value)),placeholder:"1"})]})]})]})]})]}),i.jsxs("div",{className:"flex gap-4 justify-end",children:[i.jsxs(D,{onClick:v,disabled:s,variant:"outline",children:[i.jsx(Xj,{className:"w-4 h-4 mr-2"}),"Salvar Periféricos"]}),i.jsxs(D,{onClick:y,disabled:s,children:[i.jsx(Ta,{className:"w-4 h-4 mr-2"}),"Salvar Fiscal"]})]})]})},p3=()=>{const[e,t]=p.useState(2.99),[r,n]=p.useState(!1),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(null),{toast:f}=at();p.useEffect(()=>{g(),w(),m()},[]);const g=async()=>{n(!0);try{const v=await Wi.getInterestRate();t(v.credit_card_interest),u(v.updated_at)}catch(v){console.error("Erro ao carregar taxa de juros:",v),f({title:"Erro ao carregar",description:"Não foi possível carregar a configuração de juros.",variant:"destructive"})}finally{n(!1)}},w=async()=>{try{const v=await Wi.canManageInterestRates();l(v)}catch(v){console.error("Erro ao verificar permissões:",v),l(!1)}},m=async()=>{try{const v=await Wi.getCurrentConfigWithAudit();h(v)}catch(v){console.error("Erro ao carregar configuração atual:",v)}},j=async()=>{if(!a){f({title:"Sem permissão",description:"Você não tem permissão para alterar as taxas de juros.",variant:"destructive"});return}o(!0);try{await Wi.saveInterestRate(e),f({title:"Configuração salva!",description:`Taxa de juros do cartão de crédito definida em ${e}% ao mês.`}),await g(),await m()}catch{f({title:"Erro ao salvar",description:"Não foi possível salvar a configuração de juros.",variant:"destructive"})}finally{o(!1)}},x=(v=100,y)=>{if(y<=1)return v;const b=e/100,S=Math.pow(1+b,y-1)-1;return v*(1+S)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Jj,{className:"w-6 h-6"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Configuração de Taxas de Juros"})]}),!a&&i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qm,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),i.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Você não tem permissão para alterar as taxas de juros. Apenas administradores e gerentes podem fazer alterações."})]})}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(Hj,{className:"w-5 h-5"}),"Taxa de Juros - Cartão de Crédito"]}),c&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Última atualização: ",new Date(c).toLocaleString("pt-BR")]})]}),i.jsxs(se,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(V,{htmlFor:"interest-rate",className:"text-base font-medium",children:"Taxa de Juros Mensal"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Define a taxa de juros aplicada ao parcelamento do cartão de crédito"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(q,{id:"interest-rate",type:"number",min:"0",max:"100",step:"0.01",className:"w-32",value:e,onChange:v=>t(parseFloat(v.target.value)||0)}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"% ao mês"})]})]}),i.jsxs(D,{onClick:j,disabled:r||s||!a,className:"w-full md:w-auto",children:[i.jsx(Xj,{className:"w-4 h-4 mr-2"}),s?"Salvando...":"Salvar Configuração"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Exemplo de Cálculo (R$ 100,00)"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"1x sem juros:"}),i.jsx("span",{className:"font-medium",children:"R$ 100,00"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"2x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,2).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"3x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,3).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"6x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,6).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"12x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,12).toFixed(2)]})]})]})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Como funciona o cálculo:"}),i.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[i.jsx("li",{children:"• A primeira parcela não tem juros"}),i.jsx("li",{children:"• As parcelas subsequentes acumulam juros compostos mensais"}),i.jsx("li",{children:"• A taxa é aplicada sobre o valor restante a cada mês"}),i.jsx("li",{children:"• O valor total é dividido igualmente entre as parcelas"})]})]})]})]}),d&&i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(xe,{className:"flex items-center gap-2",children:[i.jsx(ta,{className:"w-5 h-5"}),"Informações da Configuração"]})}),i.jsx(se,{children:i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Taxa atual: ",d.credit_card_interest,"% ao mês"]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Criada em: ",new Date(d.created_at).toLocaleString("pt-BR")]}),d.updated_at!==d.created_at&&i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Última alteração: ",new Date(d.updated_at).toLocaleString("pt-BR")]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:"Configuração única"})]})})})]})]})},g3=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),[s,o]=p.useState({status:"",document_type:""}),{toast:a}=at();p.useEffect(()=>{l()},[]);const l=async()=>{try{n(!0);const m=await qn.getDocuments(s);t(m||[])}catch(m){console.error("Erro ao carregar documentos:",m),a({title:"Erro ao carregar documentos",description:m.message,variant:"destructive"})}finally{n(!1)}},c=async(m,j)=>{try{await qn.sendDocument(m,j),a({title:"Documento enviado",description:"Documento fiscal enviado com sucesso!"}),l()}catch(x){a({title:"Erro ao enviar documento",description:x.message,variant:"destructive"})}},u=m=>{switch(m){case"approved":return i.jsx(Zm,{className:"w-4 h-4 text-green-500"});case"pending":return i.jsx(NT,{className:"w-4 h-4 text-yellow-500"});case"rejected":case"cancelled":return i.jsx(df,{className:"w-4 h-4 text-red-500"});default:return i.jsx(Qm,{className:"w-4 h-4 text-gray-500"})}},d=m=>{const j={pending:"Pendente",sent:"Enviado",approved:"Aprovado",rejected:"Rejeitado",cancelled:"Cancelado"},x={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return i.jsx(zp,{className:x[m]||"bg-gray-100 text-gray-800",children:j[m]||m})},h=m=>({nfe:"NF-e",sat:"SAT",nfce:"NFC-e"})[m]||m.toUpperCase(),f=m=>new Date(m).toLocaleString("pt-BR"),g=(m,j)=>{o(x=>({...x,[m]:j}))},w=()=>{l()};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Ta,{className:"w-6 h-6 text-primary"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Documentos Fiscais"})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(xe,{className:"text-lg",children:"Filtros"})}),i.jsx(se,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Status"}),i.jsxs("select",{className:"w-full p-2 border rounded-md",value:s.status,onChange:m=>g("status",m.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"pending",children:"Pendente"}),i.jsx("option",{value:"sent",children:"Enviado"}),i.jsx("option",{value:"approved",children:"Aprovado"}),i.jsx("option",{value:"rejected",children:"Rejeitado"}),i.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Tipo"}),i.jsxs("select",{className:"w-full p-2 border rounded-md",value:s.document_type,onChange:m=>g("document_type",m.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"nfe",children:"NF-e"}),i.jsx("option",{value:"sat",children:"SAT"}),i.jsx("option",{value:"nfce",children:"NFC-e"})]})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(D,{onClick:w,className:"flex-1",children:[i.jsx(qv,{className:"w-4 h-4 mr-2"}),"Filtrar"]}),i.jsx(D,{onClick:l,variant:"outline",children:i.jsx(qv,{className:"w-4 h-4"})})]})]})})]}),i.jsx("div",{className:"space-y-4",children:e.length===0?i.jsx(re,{children:i.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Ta,{className:"w-12 h-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Nenhum documento fiscal encontrado"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Os documentos fiscais aparecerão aqui após serem gerados no POS"})]})}):e.map(m=>i.jsx(re,{children:i.jsxs(se,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[u(m.status),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold",children:[h(m.document_type)," #",m.document_number]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Venda #",m.sale_id," • ",f(m.created_at)]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:d(m.status)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Chave de Acesso"}),i.jsx("p",{className:"font-mono text-sm",children:m.access_key})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),i.jsx("p",{className:"text-sm",children:m.error_message||"Sem erros"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[m.status==="pending"&&i.jsxs(D,{size:"sm",onClick:()=>c(m.id,m.document_type),children:[i.jsx(MT,{className:"w-4 h-4 mr-2"}),"Enviar"]}),i.jsxs(D,{size:"sm",variant:"outline",children:[i.jsx(ep,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),i.jsxs(D,{size:"sm",variant:"outline",children:[i.jsx(Yj,{className:"w-4 h-4 mr-2"}),"Download XML"]})]})]})},m.id))})]})},Rt=({element:e,requiredPermission:t,user:r})=>!r||r.role==="none"?i.jsx(Oc,{to:"/login"}):t&&!Gt(r.role,t)?i.jsx(Oc,{to:"/"}):e;function v3(){const[e,t]=p.useState(null),[r,n]=p.useState(!0),{toast:s}=at();p.useEffect(()=>{const l=d=>{s(d.detail)};window.addEventListener("show-toast",l),(async()=>{const d=it();d&&t(d),n(!1)})();const{data:u}=Q.auth.onAuthStateChange(async(d,h)=>{var f;if(h!=null&&h.user){let g="none";h.user.email==="admin@server.com"&&(g="admin");const w={id:h.user.id,email:h.user.email,name:((f=h.user.user_metadata)==null?void 0:f.name)||h.user.email.split("@")[0],role:g,store_id:null,active:!0,created_at:h.user.created_at,stores:null};t(w),gx(w)}else t(null),If();n(!1)});return()=>{var d;(d=u==null?void 0:u.subscription)==null||d.unsubscribe(),window.removeEventListener("show-toast",l)}},[s]),p.useEffect(()=>{(async()=>{try{const c=await it();t(c)}catch(c){console.error("Erro ao verificar usuário:",c)}finally{n(!1)}})()},[]);const o=l=>{t(l),gx(l)},a=()=>{t(null),If()};return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center gradient-bg",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-white border-t-transparent rounded-full"})}):i.jsxs(Xk,{children:[i.jsxs(Wk,{children:[i.jsx(mt,{path:"/login",element:e?i.jsx(Oc,{to:"/"}):i.jsx(AM,{onLogin:o})}),i.jsxs(mt,{path:"/",element:i.jsx(Rt,{user:e,element:i.jsx(RM,{onLogout:a})}),children:[i.jsx(mt,{index:!0,element:i.jsx(Rt,{user:e,element:i.jsx(zx,{}),requiredPermission:J.PROCESS_SALES})}),i.jsx(mt,{path:"pos",element:i.jsx(Rt,{user:e,element:i.jsx(zx,{}),requiredPermission:J.PROCESS_SALES})}),i.jsx(mt,{path:"products",element:i.jsx(Rt,{user:e,element:i.jsx(SF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"products/:id",element:i.jsx(Rt,{user:e,element:i.jsx(_F,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"categories",element:i.jsx(Rt,{user:e,element:i.jsx(TF,{}),requiredPermission:J.MANAGE_CATEGORIES})}),i.jsx(mt,{path:"stock",element:i.jsx(Rt,{user:e,element:i.jsx(CF,{}),requiredPermission:J.MANAGE_STOCK})}),i.jsx(mt,{path:"customers",element:i.jsx(Rt,{user:e,element:i.jsx(OF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"customer-groups",element:i.jsx(Rt,{user:e,element:i.jsx(MF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"reports",element:i.jsx(Rt,{user:e,element:i.jsx(i3,{}),requiredPermission:J.VIEW_REPORTS})}),i.jsx(mt,{path:"users",element:i.jsx(Rt,{user:e,element:i.jsx(a3,{}),requiredPermission:J.MANAGE_USERS})}),i.jsx(mt,{path:"cash-register",element:i.jsx(Rt,{user:e,element:i.jsx(f3,{}),requiredPermission:J.CASH_REGISTER_MANAGEMENT})}),i.jsx(mt,{path:"peripherals",element:i.jsx(Rt,{user:e,element:i.jsx(m3,{}),requiredPermission:J.MANAGE_USERS})}),i.jsx(mt,{path:"interest-rates",element:i.jsx(Rt,{user:e,element:i.jsx(p3,{}),requiredPermission:J.MANAGE_USERS})}),i.jsx(mt,{path:"/fiscal-documents",element:i.jsx(Rt,{permission:J.MANAGE_FISCAL_DOCUMENTS,children:i.jsx(g3,{})})}),i.jsx(mt,{path:"*",element:i.jsx(Oc,{to:e?"/":"/login"})})]})]}),i.jsx(GT,{})]})}nh.createRoot(document.getElementById("root")).render(i.jsx(ue.StrictMode,{children:i.jsx(v3,{})}));
