function CC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Gx={exports:{}},Qc={},Kx={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=Symbol.for("react.element"),EC=Symbol.for("react.portal"),kC=Symbol.for("react.fragment"),PC=Symbol.for("react.strict_mode"),TC=Symbol.for("react.profiler"),AC=Symbol.for("react.provider"),RC=Symbol.for("react.context"),OC=Symbol.for("react.forward_ref"),IC=Symbol.for("react.suspense"),LC=Symbol.for("react.memo"),MC=Symbol.for("react.lazy"),gg=Symbol.iterator;function DC(e){return e===null||typeof e!="object"?null:(e=gg&&e[gg]||e["@@iterator"],typeof e=="function"?e:null)}var Jx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yx=Object.assign,Xx={};function ui(e,t,r){this.props=e,this.context=t,this.refs=Xx,this.updater=r||Jx}ui.prototype.isReactComponent={};ui.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ui.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Qx(){}Qx.prototype=ui.prototype;function Hf(e,t,r){this.props=e,this.context=t,this.refs=Xx,this.updater=r||Jx}var Gf=Hf.prototype=new Qx;Gf.constructor=Hf;Yx(Gf,ui.prototype);Gf.isPureReactComponent=!0;var vg=Array.isArray,Zx=Object.prototype.hasOwnProperty,Kf={current:null},e0={key:!0,ref:!0,__self:!0,__source:!0};function t0(e,t,r){var n,s={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Zx.call(t,n)&&!e0.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Va,type:e,key:o,ref:a,props:s,_owner:Kf.current}}function $C(e,t){return{$$typeof:Va,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Va}function FC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var yg=/\/+/g;function Xu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FC(""+e.key):t.toString(36)}function Ul(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Va:case EC:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Xu(a,0):n,vg(s)?(r="",e!=null&&(r=e.replace(yg,"$&/")+"/"),Ul(s,t,r,"",function(u){return u})):s!=null&&(Jf(s)&&(s=$C(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(yg,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",vg(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+Xu(o,l);a+=Ul(o,t,r,c,s)}else if(c=DC(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+Xu(o,l++),a+=Ul(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function ol(e,t,r){if(e==null)return e;var n=[],s=0;return Ul(e,n,"","",function(o){return t.call(r,o,s++)}),n}function VC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dt={current:null},Bl={transition:null},UC={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Bl,ReactCurrentOwner:Kf};function r0(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ol,forEach:function(e,t,r){ol(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ol(e,function(){t++}),t},toArray:function(e){return ol(e,function(t){return t})||[]},only:function(e){if(!Jf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Se.Component=ui;Se.Fragment=kC;Se.Profiler=TC;Se.PureComponent=Hf;Se.StrictMode=PC;Se.Suspense=IC;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UC;Se.act=r0;Se.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Yx({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Kf.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Zx.call(t,c)&&!e0.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Va,type:e.type,key:s,ref:o,props:n,_owner:a}};Se.createContext=function(e){return e={$$typeof:RC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:AC,_context:e},e.Consumer=e};Se.createElement=t0;Se.createFactory=function(e){var t=t0.bind(null,e);return t.type=e,t};Se.createRef=function(){return{current:null}};Se.forwardRef=function(e){return{$$typeof:OC,render:e}};Se.isValidElement=Jf;Se.lazy=function(e){return{$$typeof:MC,_payload:{_status:-1,_result:e},_init:VC}};Se.memo=function(e,t){return{$$typeof:LC,type:e,compare:t===void 0?null:t}};Se.startTransition=function(e){var t=Bl.transition;Bl.transition={};try{e()}finally{Bl.transition=t}};Se.unstable_act=r0;Se.useCallback=function(e,t){return Dt.current.useCallback(e,t)};Se.useContext=function(e){return Dt.current.useContext(e)};Se.useDebugValue=function(){};Se.useDeferredValue=function(e){return Dt.current.useDeferredValue(e)};Se.useEffect=function(e,t){return Dt.current.useEffect(e,t)};Se.useId=function(){return Dt.current.useId()};Se.useImperativeHandle=function(e,t,r){return Dt.current.useImperativeHandle(e,t,r)};Se.useInsertionEffect=function(e,t){return Dt.current.useInsertionEffect(e,t)};Se.useLayoutEffect=function(e,t){return Dt.current.useLayoutEffect(e,t)};Se.useMemo=function(e,t){return Dt.current.useMemo(e,t)};Se.useReducer=function(e,t,r){return Dt.current.useReducer(e,t,r)};Se.useRef=function(e){return Dt.current.useRef(e)};Se.useState=function(e){return Dt.current.useState(e)};Se.useSyncExternalStore=function(e,t,r){return Dt.current.useSyncExternalStore(e,t,r)};Se.useTransition=function(){return Dt.current.useTransition()};Se.version="18.3.1";Kx.exports=Se;var p=Kx.exports;const de=Hx(p),Yf=CC({__proto__:null,default:de},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BC=p,zC=Symbol.for("react.element"),WC=Symbol.for("react.fragment"),qC=Object.prototype.hasOwnProperty,HC=BC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GC={key:!0,ref:!0,__self:!0,__source:!0};function n0(e,t,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)qC.call(t,n)&&!GC.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:zC,type:e,key:o,ref:a,props:s,_owner:HC.current}}Qc.Fragment=WC;Qc.jsx=n0;Qc.jsxs=n0;Gx.exports=Qc;var i=Gx.exports,nh={},s0={exports:{}},ir={},o0={exports:{}},i0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,T){var V=P.length;P.push(T);e:for(;0<V;){var R=V-1>>>1,H=P[R];if(0<s(H,T))P[R]=T,P[V]=H,V=R;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var T=P[0],V=P.pop();if(V!==T){P[0]=V;e:for(var R=0,H=P.length,oe=H>>>1;R<oe;){var ce=2*(R+1)-1,Ne=P[ce],ae=ce+1,Y=P[ae];if(0>s(Ne,V))ae<H&&0>s(Y,Ne)?(P[R]=Y,P[ae]=V,R=ae):(P[R]=Ne,P[ce]=V,R=ce);else if(ae<H&&0>s(Y,V))P[R]=Y,P[ae]=V,R=ae;else break e}}return T}function s(P,T){var V=P.sortIndex-T.sortIndex;return V!==0?V:P.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,g=!1,w=!1,m=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(P){for(var T=r(u);T!==null;){if(T.callback===null)n(u);else if(T.startTime<=P)n(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=r(u)}}function b(P){if(m=!1,v(P),!w)if(r(c)!==null)w=!0,$(S);else{var T=r(u);T!==null&&A(b,T.startTime-P)}}function S(P,T){w=!1,m&&(m=!1,x(_),_=-1),g=!0;var V=f;try{for(v(T),h=r(c);h!==null&&(!(h.expirationTime>T)||P&&!L());){var R=h.callback;if(typeof R=="function"){h.callback=null,f=h.priorityLevel;var H=R(h.expirationTime<=T);T=e.unstable_now(),typeof H=="function"?h.callback=H:h===r(c)&&n(c),v(T)}else n(c);h=r(c)}if(h!==null)var oe=!0;else{var ce=r(u);ce!==null&&A(b,ce.startTime-T),oe=!1}return oe}finally{h=null,f=V,g=!1}}var E=!1,N=null,_=-1,C=5,I=-1;function L(){return!(e.unstable_now()-I<C)}function O(){if(N!==null){var P=e.unstable_now();I=P;var T=!0;try{T=N(!0,P)}finally{T?D():(E=!1,N=null)}}else E=!1}var D;if(typeof y=="function")D=function(){y(O)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,U=k.port2;k.port1.onmessage=O,D=function(){U.postMessage(null)}}else D=function(){j(O,0)};function $(P){N=P,E||(E=!0,D())}function A(P,T){_=j(function(){P(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){w||g||(w=!0,$(S))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var V=f;f=T;try{return P()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,T){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var V=f;f=P;try{return T()}finally{f=V}},e.unstable_scheduleCallback=function(P,T,V){var R=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?R+V:R):V=R,P){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,P={id:d++,callback:T,priorityLevel:P,startTime:V,expirationTime:H,sortIndex:-1},V>R?(P.sortIndex=V,t(u,P),r(c)===null&&P===r(u)&&(m?(x(_),_=-1):m=!0,A(b,V-R))):(P.sortIndex=H,t(c,P),w||g||(w=!0,$(S))),P},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(P){var T=f;return function(){var V=f;f=T;try{return P.apply(this,arguments)}finally{f=V}}}})(i0);o0.exports=i0;var KC=o0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC=p,nr=KC;function q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a0=new Set,ua={};function no(e,t){Xo(e,t),Xo(e+"Capture",t)}function Xo(e,t){for(ua[e]=t,e=0;e<t.length;e++)a0.add(t[e])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sh=Object.prototype.hasOwnProperty,YC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xg={},wg={};function XC(e){return sh.call(wg,e)?!0:sh.call(xg,e)?!1:YC.test(e)?wg[e]=!0:(xg[e]=!0,!1)}function QC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ZC(e,t,r,n){if(t===null||typeof t>"u"||QC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function $t(e,t,r,n,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){St[e]=new $t(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];St[t]=new $t(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){St[e]=new $t(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){St[e]=new $t(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){St[e]=new $t(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){St[e]=new $t(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){St[e]=new $t(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){St[e]=new $t(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){St[e]=new $t(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xf=/[\-:]([a-z])/g;function Qf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xf,Qf);St[t]=new $t(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xf,Qf);St[t]=new $t(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xf,Qf);St[t]=new $t(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){St[e]=new $t(e,1,!1,e.toLowerCase(),null,!1,!1)});St.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){St[e]=new $t(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zf(e,t,r,n){var s=St.hasOwnProperty(t)?St[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ZC(t,r,s,n)&&(r=null),n||s===null?XC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Sn=JC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),Co=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),oh=Symbol.for("react.profiler"),l0=Symbol.for("react.provider"),c0=Symbol.for("react.context"),tm=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),ah=Symbol.for("react.suspense_list"),rm=Symbol.for("react.memo"),In=Symbol.for("react.lazy"),u0=Symbol.for("react.offscreen"),jg=Symbol.iterator;function Ci(e){return e===null||typeof e!="object"?null:(e=jg&&e[jg]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Qu;function $i(e){if(Qu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Qu=t&&t[1]||""}return`
`+Qu+e}var Zu=!1;function ed(e,t){if(!e||Zu)return"";Zu=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Zu=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$i(e):""}function eN(e){switch(e.tag){case 5:return $i(e.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return e=ed(e.type,!1),e;case 11:return e=ed(e.type.render,!1),e;case 1:return e=ed(e.type,!0),e;default:return""}}function lh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case No:return"Fragment";case Co:return"Portal";case oh:return"Profiler";case em:return"StrictMode";case ih:return"Suspense";case ah:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case c0:return(e.displayName||"Context")+".Consumer";case l0:return(e._context.displayName||"Context")+".Provider";case tm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rm:return t=e.displayName||null,t!==null?t:lh(e.type)||"Memo";case In:t=e._payload,e=e._init;try{return lh(e(t))}catch{}}return null}function tN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lh(t);case 8:return t===em?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function as(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function d0(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rN(e){var t=d0(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function al(e){e._valueTracker||(e._valueTracker=rN(e))}function h0(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=d0(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ac(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ch(e,t){var r=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function bg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=as(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function f0(e,t){t=t.checked,t!=null&&Zf(e,"checked",t,!1)}function uh(e,t){f0(e,t);var r=as(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?dh(e,t.type,r):t.hasOwnProperty("defaultValue")&&dh(e,t.type,as(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function dh(e,t,r){(t!=="number"||ac(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Fi=Array.isArray;function Uo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+as(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function hh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(q(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _g(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(q(92));if(Fi(r)){if(1<r.length)throw Error(q(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:as(r)}}function m0(e,t){var r=as(t.value),n=as(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function p0(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?p0(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ll,g0=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ll=ll||document.createElement("div"),ll.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ll.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function da(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nN=["Webkit","ms","Moz","O"];Object.keys(Hi).forEach(function(e){nN.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hi[t]=Hi[e]})});function v0(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Hi.hasOwnProperty(e)&&Hi[e]?(""+t).trim():t+"px"}function y0(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=v0(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var sN=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mh(e,t){if(t){if(sN[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(q(62))}}function ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gh=null;function nm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vh=null,Bo=null,zo=null;function Ng(e){if(e=za(e)){if(typeof vh!="function")throw Error(q(280));var t=e.stateNode;t&&(t=nu(t),vh(e.stateNode,e.type,t))}}function x0(e){Bo?zo?zo.push(e):zo=[e]:Bo=e}function w0(){if(Bo){var e=Bo,t=zo;if(zo=Bo=null,Ng(e),t)for(e=0;e<t.length;e++)Ng(t[e])}}function j0(e,t){return e(t)}function b0(){}var td=!1;function S0(e,t,r){if(td)return e(t,r);td=!0;try{return j0(e,t,r)}finally{td=!1,(Bo!==null||zo!==null)&&(b0(),w0())}}function ha(e,t){var r=e.stateNode;if(r===null)return null;var n=nu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(q(231,t,typeof r));return r}var yh=!1;if(pn)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){yh=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch{yh=!1}function oN(e,t,r,n,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Gi=!1,lc=null,cc=!1,xh=null,iN={onError:function(e){Gi=!0,lc=e}};function aN(e,t,r,n,s,o,a,l,c){Gi=!1,lc=null,oN.apply(iN,arguments)}function lN(e,t,r,n,s,o,a,l,c){if(aN.apply(this,arguments),Gi){if(Gi){var u=lc;Gi=!1,lc=null}else throw Error(q(198));cc||(cc=!0,xh=u)}}function so(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _0(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Eg(e){if(so(e)!==e)throw Error(q(188))}function cN(e){var t=e.alternate;if(!t){if(t=so(e),t===null)throw Error(q(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Eg(s),e;if(o===n)return Eg(s),t;o=o.sibling}throw Error(q(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(q(189))}}if(r.alternate!==n)throw Error(q(190))}if(r.tag!==3)throw Error(q(188));return r.stateNode.current===r?e:t}function C0(e){return e=cN(e),e!==null?N0(e):null}function N0(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=N0(e);if(t!==null)return t;e=e.sibling}return null}var E0=nr.unstable_scheduleCallback,kg=nr.unstable_cancelCallback,uN=nr.unstable_shouldYield,dN=nr.unstable_requestPaint,Xe=nr.unstable_now,hN=nr.unstable_getCurrentPriorityLevel,sm=nr.unstable_ImmediatePriority,k0=nr.unstable_UserBlockingPriority,uc=nr.unstable_NormalPriority,fN=nr.unstable_LowPriority,P0=nr.unstable_IdlePriority,Zc=null,Wr=null;function mN(e){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Zc,e,void 0,(e.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:vN,pN=Math.log,gN=Math.LN2;function vN(e){return e>>>=0,e===0?32:31-(pN(e)/gN|0)|0}var cl=64,ul=4194304;function Vi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dc(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Vi(l):(o&=a,o!==0&&(n=Vi(o)))}else a=r&~s,a!==0?n=Vi(a):o!==0&&(n=Vi(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ar(t),s=1<<r,n|=e[r],t&=~s;return n}function yN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xN(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Ar(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=yN(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function wh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function T0(){var e=cl;return cl<<=1,!(cl&4194240)&&(cl=64),e}function rd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ua(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ar(t),e[t]=r}function wN(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Ar(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function om(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ar(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ae=0;function A0(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var R0,im,O0,I0,L0,jh=!1,dl=[],Kn=null,Jn=null,Yn=null,fa=new Map,ma=new Map,$n=[],jN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(e,t){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":fa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(t.pointerId)}}function Ei(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=za(t),t!==null&&im(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function bN(e,t,r,n,s){switch(t){case"focusin":return Kn=Ei(Kn,e,t,r,n,s),!0;case"dragenter":return Jn=Ei(Jn,e,t,r,n,s),!0;case"mouseover":return Yn=Ei(Yn,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return fa.set(o,Ei(fa.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,ma.set(o,Ei(ma.get(o)||null,e,t,r,n,s)),!0}return!1}function M0(e){var t=$s(e.target);if(t!==null){var r=so(t);if(r!==null){if(t=r.tag,t===13){if(t=_0(r),t!==null){e.blockedOn=t,L0(e.priority,function(){O0(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=bh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);gh=n,r.target.dispatchEvent(n),gh=null}else return t=za(r),t!==null&&im(t),e.blockedOn=r,!1;t.shift()}return!0}function Tg(e,t,r){zl(e)&&r.delete(t)}function SN(){jh=!1,Kn!==null&&zl(Kn)&&(Kn=null),Jn!==null&&zl(Jn)&&(Jn=null),Yn!==null&&zl(Yn)&&(Yn=null),fa.forEach(Tg),ma.forEach(Tg)}function ki(e,t){e.blockedOn===t&&(e.blockedOn=null,jh||(jh=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,SN)))}function pa(e){function t(s){return ki(s,e)}if(0<dl.length){ki(dl[0],e);for(var r=1;r<dl.length;r++){var n=dl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Kn!==null&&ki(Kn,e),Jn!==null&&ki(Jn,e),Yn!==null&&ki(Yn,e),fa.forEach(t),ma.forEach(t),r=0;r<$n.length;r++)n=$n[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$n.length&&(r=$n[0],r.blockedOn===null);)M0(r),r.blockedOn===null&&$n.shift()}var Wo=Sn.ReactCurrentBatchConfig,hc=!0;function _N(e,t,r,n){var s=Ae,o=Wo.transition;Wo.transition=null;try{Ae=1,am(e,t,r,n)}finally{Ae=s,Wo.transition=o}}function CN(e,t,r,n){var s=Ae,o=Wo.transition;Wo.transition=null;try{Ae=4,am(e,t,r,n)}finally{Ae=s,Wo.transition=o}}function am(e,t,r,n){if(hc){var s=bh(e,t,r,n);if(s===null)hd(e,t,n,fc,r),Pg(e,n);else if(bN(s,e,t,r,n))n.stopPropagation();else if(Pg(e,n),t&4&&-1<jN.indexOf(e)){for(;s!==null;){var o=za(s);if(o!==null&&R0(o),o=bh(e,t,r,n),o===null&&hd(e,t,n,fc,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else hd(e,t,n,null,r)}}var fc=null;function bh(e,t,r,n){if(fc=null,e=nm(n),e=$s(e),e!==null)if(t=so(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_0(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fc=e,null}function D0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hN()){case sm:return 1;case k0:return 4;case uc:case fN:return 16;case P0:return 536870912;default:return 16}default:return 16}}var Bn=null,lm=null,Wl=null;function $0(){if(Wl)return Wl;var e,t=lm,r=t.length,n,s="value"in Bn?Bn.value:Bn.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[o-n];n++);return Wl=s.slice(e,1<n?1-n:void 0)}function ql(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hl(){return!0}function Ag(){return!1}function ar(e){function t(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hl:Ag,this.isPropagationStopped=Ag,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hl)},persist:function(){},isPersistent:hl}),t}var di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=ar(di),Ba=qe({},di,{view:0,detail:0}),NN=ar(Ba),nd,sd,Pi,eu=qe({},Ba,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:um,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pi&&(Pi&&e.type==="mousemove"?(nd=e.screenX-Pi.screenX,sd=e.screenY-Pi.screenY):sd=nd=0,Pi=e),nd)},movementY:function(e){return"movementY"in e?e.movementY:sd}}),Rg=ar(eu),EN=qe({},eu,{dataTransfer:0}),kN=ar(EN),PN=qe({},Ba,{relatedTarget:0}),od=ar(PN),TN=qe({},di,{animationName:0,elapsedTime:0,pseudoElement:0}),AN=ar(TN),RN=qe({},di,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ON=ar(RN),IN=qe({},di,{data:0}),Og=ar(IN),LN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $N(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DN[e])?!!t[e]:!1}function um(){return $N}var FN=qe({},Ba,{key:function(e){if(e.key){var t=LN[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ql(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?MN[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:um,charCode:function(e){return e.type==="keypress"?ql(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ql(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),VN=ar(FN),UN=qe({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ig=ar(UN),BN=qe({},Ba,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:um}),zN=ar(BN),WN=qe({},di,{propertyName:0,elapsedTime:0,pseudoElement:0}),qN=ar(WN),HN=qe({},eu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GN=ar(HN),KN=[9,13,27,32],dm=pn&&"CompositionEvent"in window,Ki=null;pn&&"documentMode"in document&&(Ki=document.documentMode);var JN=pn&&"TextEvent"in window&&!Ki,F0=pn&&(!dm||Ki&&8<Ki&&11>=Ki),Lg=String.fromCharCode(32),Mg=!1;function V0(e,t){switch(e){case"keyup":return KN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U0(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Eo=!1;function YN(e,t){switch(e){case"compositionend":return U0(t);case"keypress":return t.which!==32?null:(Mg=!0,Lg);case"textInput":return e=t.data,e===Lg&&Mg?null:e;default:return null}}function XN(e,t){if(Eo)return e==="compositionend"||!dm&&V0(e,t)?(e=$0(),Wl=lm=Bn=null,Eo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return F0&&t.locale!=="ko"?null:t.data;default:return null}}var QN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QN[e.type]:t==="textarea"}function B0(e,t,r,n){x0(n),t=mc(t,"onChange"),0<t.length&&(r=new cm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ji=null,ga=null;function ZN(e){Z0(e,0)}function tu(e){var t=To(e);if(h0(t))return e}function eE(e,t){if(e==="change")return t}var z0=!1;if(pn){var id;if(pn){var ad="oninput"in document;if(!ad){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),ad=typeof $g.oninput=="function"}id=ad}else id=!1;z0=id&&(!document.documentMode||9<document.documentMode)}function Fg(){Ji&&(Ji.detachEvent("onpropertychange",W0),ga=Ji=null)}function W0(e){if(e.propertyName==="value"&&tu(ga)){var t=[];B0(t,ga,e,nm(e)),S0(ZN,t)}}function tE(e,t,r){e==="focusin"?(Fg(),Ji=t,ga=r,Ji.attachEvent("onpropertychange",W0)):e==="focusout"&&Fg()}function rE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return tu(ga)}function nE(e,t){if(e==="click")return tu(t)}function sE(e,t){if(e==="input"||e==="change")return tu(t)}function oE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Or=typeof Object.is=="function"?Object.is:oE;function va(e,t){if(Or(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!sh.call(t,s)||!Or(e[s],t[s]))return!1}return!0}function Vg(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ug(e,t){var r=Vg(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vg(r)}}function q0(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?q0(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function H0(){for(var e=window,t=ac();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ac(e.document)}return t}function hm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function iE(e){var t=H0(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&q0(r.ownerDocument.documentElement,r)){if(n!==null&&hm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=Ug(r,o);var a=Ug(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var aE=pn&&"documentMode"in document&&11>=document.documentMode,ko=null,Sh=null,Yi=null,_h=!1;function Bg(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;_h||ko==null||ko!==ac(n)||(n=ko,"selectionStart"in n&&hm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Yi&&va(Yi,n)||(Yi=n,n=mc(Sh,"onSelect"),0<n.length&&(t=new cm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ko)))}function fl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Po={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},ld={},G0={};pn&&(G0=document.createElement("div").style,"AnimationEvent"in window||(delete Po.animationend.animation,delete Po.animationiteration.animation,delete Po.animationstart.animation),"TransitionEvent"in window||delete Po.transitionend.transition);function ru(e){if(ld[e])return ld[e];if(!Po[e])return e;var t=Po[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in G0)return ld[e]=t[r];return e}var K0=ru("animationend"),J0=ru("animationiteration"),Y0=ru("animationstart"),X0=ru("transitionend"),Q0=new Map,zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){Q0.set(e,t),no(t,[e])}for(var cd=0;cd<zg.length;cd++){var ud=zg[cd],lE=ud.toLowerCase(),cE=ud[0].toUpperCase()+ud.slice(1);fs(lE,"on"+cE)}fs(K0,"onAnimationEnd");fs(J0,"onAnimationIteration");fs(Y0,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(X0,"onTransitionEnd");Xo("onMouseEnter",["mouseout","mouseover"]);Xo("onMouseLeave",["mouseout","mouseover"]);Xo("onPointerEnter",["pointerout","pointerover"]);Xo("onPointerLeave",["pointerout","pointerover"]);no("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));no("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));no("onBeforeInput",["compositionend","keypress","textInput","paste"]);no("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));no("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));no("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ui));function Wg(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,lN(n,t,void 0,e),e.currentTarget=null}function Z0(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Wg(s,l,u),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Wg(s,l,u),o=c}}}if(cc)throw e=xh,cc=!1,xh=null,e}function $e(e,t){var r=t[Ph];r===void 0&&(r=t[Ph]=new Set);var n=e+"__bubble";r.has(n)||(ew(t,e,2,!1),r.add(n))}function dd(e,t,r){var n=0;t&&(n|=4),ew(r,e,n,t)}var ml="_reactListening"+Math.random().toString(36).slice(2);function ya(e){if(!e[ml]){e[ml]=!0,a0.forEach(function(r){r!=="selectionchange"&&(uE.has(r)||dd(r,!1,e),dd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ml]||(t[ml]=!0,dd("selectionchange",!1,t))}}function ew(e,t,r,n){switch(D0(t)){case 1:var s=_N;break;case 4:s=CN;break;default:s=am}r=s.bind(null,t,r,e),s=void 0,!yh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function hd(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=$s(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}S0(function(){var u=o,d=nm(r),h=[];e:{var f=Q0.get(e);if(f!==void 0){var g=cm,w=e;switch(e){case"keypress":if(ql(r)===0)break e;case"keydown":case"keyup":g=VN;break;case"focusin":w="focus",g=od;break;case"focusout":w="blur",g=od;break;case"beforeblur":case"afterblur":g=od;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=kN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=zN;break;case K0:case J0:case Y0:g=AN;break;case X0:g=qN;break;case"scroll":g=NN;break;case"wheel":g=GN;break;case"copy":case"cut":case"paste":g=ON;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ig}var m=(t&4)!==0,j=!m&&e==="scroll",x=m?f!==null?f+"Capture":null:f;m=[];for(var y=u,v;y!==null;){v=y;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,x!==null&&(b=ha(y,x),b!=null&&m.push(xa(y,b,v)))),j)break;y=y.return}0<m.length&&(f=new g(f,w,null,r,d),h.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",f&&r!==gh&&(w=r.relatedTarget||r.fromElement)&&($s(w)||w[gn]))break e;if((g||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,g?(w=r.relatedTarget||r.toElement,g=u,w=w?$s(w):null,w!==null&&(j=so(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(m=Rg,b="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(m=Ig,b="onPointerLeave",x="onPointerEnter",y="pointer"),j=g==null?f:To(g),v=w==null?f:To(w),f=new m(b,y+"leave",g,r,d),f.target=j,f.relatedTarget=v,b=null,$s(d)===u&&(m=new m(x,y+"enter",w,r,d),m.target=v,m.relatedTarget=j,b=m),j=b,g&&w)t:{for(m=g,x=w,y=0,v=m;v;v=po(v))y++;for(v=0,b=x;b;b=po(b))v++;for(;0<y-v;)m=po(m),y--;for(;0<v-y;)x=po(x),v--;for(;y--;){if(m===x||x!==null&&m===x.alternate)break t;m=po(m),x=po(x)}m=null}else m=null;g!==null&&qg(h,f,g,m,!1),w!==null&&j!==null&&qg(h,j,w,m,!0)}}e:{if(f=u?To(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var S=eE;else if(Dg(f))if(z0)S=sE;else{S=rE;var E=tE}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=nE);if(S&&(S=S(e,u))){B0(h,S,r,d);break e}E&&E(e,f,u),e==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&dh(f,"number",f.value)}switch(E=u?To(u):window,e){case"focusin":(Dg(E)||E.contentEditable==="true")&&(ko=E,Sh=u,Yi=null);break;case"focusout":Yi=Sh=ko=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Bg(h,r,d);break;case"selectionchange":if(aE)break;case"keydown":case"keyup":Bg(h,r,d)}var N;if(dm)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Eo?V0(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(F0&&r.locale!=="ko"&&(Eo||_!=="onCompositionStart"?_==="onCompositionEnd"&&Eo&&(N=$0()):(Bn=d,lm="value"in Bn?Bn.value:Bn.textContent,Eo=!0)),E=mc(u,_),0<E.length&&(_=new Og(_,e,null,r,d),h.push({event:_,listeners:E}),N?_.data=N:(N=U0(r),N!==null&&(_.data=N)))),(N=JN?YN(e,r):XN(e,r))&&(u=mc(u,"onBeforeInput"),0<u.length&&(d=new Og("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}Z0(h,t)})}function xa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function mc(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=ha(e,r),o!=null&&n.unshift(xa(e,o,s)),o=ha(e,t),o!=null&&n.push(xa(e,o,s))),e=e.return}return n}function po(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qg(e,t,r,n,s){for(var o=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=ha(r,o),c!=null&&a.unshift(xa(r,c,l))):s||(c=ha(r,o),c!=null&&a.push(xa(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var dE=/\r\n?/g,hE=/\u0000|\uFFFD/g;function Hg(e){return(typeof e=="string"?e:""+e).replace(dE,`
`).replace(hE,"")}function pl(e,t,r){if(t=Hg(t),Hg(e)!==t&&r)throw Error(q(425))}function pc(){}var Ch=null,Nh=null;function Eh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,fE=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,mE=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(e){return Gg.resolve(null).then(e).catch(pE)}:kh;function pE(e){setTimeout(function(){throw e})}function fd(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),pa(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);pa(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),Ur="__reactFiber$"+hi,wa="__reactProps$"+hi,gn="__reactContainer$"+hi,Ph="__reactEvents$"+hi,gE="__reactListeners$"+hi,vE="__reactHandles$"+hi;function $s(e){var t=e[Ur];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gn]||r[Ur]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Kg(e);e!==null;){if(r=e[Ur])return r;e=Kg(e)}return t}e=r,r=e.parentNode}return null}function za(e){return e=e[Ur]||e[gn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function To(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(q(33))}function nu(e){return e[wa]||null}var Th=[],Ao=-1;function ms(e){return{current:e}}function Fe(e){0>Ao||(e.current=Th[Ao],Th[Ao]=null,Ao--)}function Ie(e,t){Ao++,Th[Ao]=e.current,e.current=t}var ls={},At=ms(ls),Wt=ms(!1),Gs=ls;function Qo(e,t){var r=e.type.contextTypes;if(!r)return ls;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function qt(e){return e=e.childContextTypes,e!=null}function gc(){Fe(Wt),Fe(At)}function Jg(e,t,r){if(At.current!==ls)throw Error(q(168));Ie(At,t),Ie(Wt,r)}function tw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(q(108,tN(e)||"Unknown",s));return qe({},r,n)}function vc(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ls,Gs=At.current,Ie(At,e),Ie(Wt,Wt.current),!0}function Yg(e,t,r){var n=e.stateNode;if(!n)throw Error(q(169));r?(e=tw(e,t,Gs),n.__reactInternalMemoizedMergedChildContext=e,Fe(Wt),Fe(At),Ie(At,e)):Fe(Wt),Ie(Wt,r)}var an=null,su=!1,md=!1;function rw(e){an===null?an=[e]:an.push(e)}function yE(e){su=!0,rw(e)}function ps(){if(!md&&an!==null){md=!0;var e=0,t=Ae;try{var r=an;for(Ae=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}an=null,su=!1}catch(s){throw an!==null&&(an=an.slice(e+1)),E0(sm,ps),s}finally{Ae=t,md=!1}}return null}var Ro=[],Oo=0,yc=null,xc=0,ur=[],dr=0,Ks=null,ln=1,cn="";function As(e,t){Ro[Oo++]=xc,Ro[Oo++]=yc,yc=e,xc=t}function nw(e,t,r){ur[dr++]=ln,ur[dr++]=cn,ur[dr++]=Ks,Ks=e;var n=ln;e=cn;var s=32-Ar(n)-1;n&=~(1<<s),r+=1;var o=32-Ar(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,ln=1<<32-Ar(t)+s|r<<s|n,cn=o+e}else ln=1<<o|r<<s|n,cn=e}function fm(e){e.return!==null&&(As(e,1),nw(e,1,0))}function mm(e){for(;e===yc;)yc=Ro[--Oo],Ro[Oo]=null,xc=Ro[--Oo],Ro[Oo]=null;for(;e===Ks;)Ks=ur[--dr],ur[dr]=null,cn=ur[--dr],ur[dr]=null,ln=ur[--dr],ur[dr]=null}var Qt=null,Xt=null,Ve=!1,Tr=null;function sw(e,t){var r=hr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Xg(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ks!==null?{id:ln,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=hr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qt=e,Xt=null,!0):!1;default:return!1}}function Ah(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rh(e){if(Ve){var t=Xt;if(t){var r=t;if(!Xg(e,t)){if(Ah(e))throw Error(q(418));t=Xn(r.nextSibling);var n=Qt;t&&Xg(e,t)?sw(n,r):(e.flags=e.flags&-4097|2,Ve=!1,Qt=e)}}else{if(Ah(e))throw Error(q(418));e.flags=e.flags&-4097|2,Ve=!1,Qt=e}}}function Qg(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qt=e}function gl(e){if(e!==Qt)return!1;if(!Ve)return Qg(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Eh(e.type,e.memoizedProps)),t&&(t=Xt)){if(Ah(e))throw ow(),Error(q(418));for(;t;)sw(e,t),t=Xn(t.nextSibling)}if(Qg(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xt=Xn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Qt?Xn(e.stateNode.nextSibling):null;return!0}function ow(){for(var e=Xt;e;)e=Xn(e.nextSibling)}function Zo(){Xt=Qt=null,Ve=!1}function pm(e){Tr===null?Tr=[e]:Tr.push(e)}var xE=Sn.ReactCurrentBatchConfig;function Ti(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(q(309));var n=r.stateNode}if(!n)throw Error(q(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(q(284));if(!r._owner)throw Error(q(290,e))}return e}function vl(e,t){throw e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zg(e){var t=e._init;return t(e._payload)}function iw(e){function t(x,y){if(e){var v=x.deletions;v===null?(x.deletions=[y],x.flags|=16):v.push(y)}}function r(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function s(x,y){return x=ts(x,y),x.index=0,x.sibling=null,x}function o(x,y,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<y?(x.flags|=2,y):v):(x.flags|=2,y)):(x.flags|=1048576,y)}function a(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,v,b){return y===null||y.tag!==6?(y=jd(v,x.mode,b),y.return=x,y):(y=s(y,v),y.return=x,y)}function c(x,y,v,b){var S=v.type;return S===No?d(x,y,v.props.children,b,v.key):y!==null&&(y.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===In&&Zg(S)===y.type)?(b=s(y,v.props),b.ref=Ti(x,y,v),b.return=x,b):(b=Ql(v.type,v.key,v.props,null,x.mode,b),b.ref=Ti(x,y,v),b.return=x,b)}function u(x,y,v,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=bd(v,x.mode,b),y.return=x,y):(y=s(y,v.children||[]),y.return=x,y)}function d(x,y,v,b,S){return y===null||y.tag!==7?(y=Ws(v,x.mode,b,S),y.return=x,y):(y=s(y,v),y.return=x,y)}function h(x,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=jd(""+y,x.mode,v),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case il:return v=Ql(y.type,y.key,y.props,null,x.mode,v),v.ref=Ti(x,null,y),v.return=x,v;case Co:return y=bd(y,x.mode,v),y.return=x,y;case In:var b=y._init;return h(x,b(y._payload),v)}if(Fi(y)||Ci(y))return y=Ws(y,x.mode,v,null),y.return=x,y;vl(x,y)}return null}function f(x,y,v,b){var S=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(x,y,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case il:return v.key===S?c(x,y,v,b):null;case Co:return v.key===S?u(x,y,v,b):null;case In:return S=v._init,f(x,y,S(v._payload),b)}if(Fi(v)||Ci(v))return S!==null?null:d(x,y,v,b,null);vl(x,v)}return null}function g(x,y,v,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(v)||null,l(y,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case il:return x=x.get(b.key===null?v:b.key)||null,c(y,x,b,S);case Co:return x=x.get(b.key===null?v:b.key)||null,u(y,x,b,S);case In:var E=b._init;return g(x,y,v,E(b._payload),S)}if(Fi(b)||Ci(b))return x=x.get(v)||null,d(y,x,b,S,null);vl(y,b)}return null}function w(x,y,v,b){for(var S=null,E=null,N=y,_=y=0,C=null;N!==null&&_<v.length;_++){N.index>_?(C=N,N=null):C=N.sibling;var I=f(x,N,v[_],b);if(I===null){N===null&&(N=C);break}e&&N&&I.alternate===null&&t(x,N),y=o(I,y,_),E===null?S=I:E.sibling=I,E=I,N=C}if(_===v.length)return r(x,N),Ve&&As(x,_),S;if(N===null){for(;_<v.length;_++)N=h(x,v[_],b),N!==null&&(y=o(N,y,_),E===null?S=N:E.sibling=N,E=N);return Ve&&As(x,_),S}for(N=n(x,N);_<v.length;_++)C=g(N,x,_,v[_],b),C!==null&&(e&&C.alternate!==null&&N.delete(C.key===null?_:C.key),y=o(C,y,_),E===null?S=C:E.sibling=C,E=C);return e&&N.forEach(function(L){return t(x,L)}),Ve&&As(x,_),S}function m(x,y,v,b){var S=Ci(v);if(typeof S!="function")throw Error(q(150));if(v=S.call(v),v==null)throw Error(q(151));for(var E=S=null,N=y,_=y=0,C=null,I=v.next();N!==null&&!I.done;_++,I=v.next()){N.index>_?(C=N,N=null):C=N.sibling;var L=f(x,N,I.value,b);if(L===null){N===null&&(N=C);break}e&&N&&L.alternate===null&&t(x,N),y=o(L,y,_),E===null?S=L:E.sibling=L,E=L,N=C}if(I.done)return r(x,N),Ve&&As(x,_),S;if(N===null){for(;!I.done;_++,I=v.next())I=h(x,I.value,b),I!==null&&(y=o(I,y,_),E===null?S=I:E.sibling=I,E=I);return Ve&&As(x,_),S}for(N=n(x,N);!I.done;_++,I=v.next())I=g(N,x,_,I.value,b),I!==null&&(e&&I.alternate!==null&&N.delete(I.key===null?_:I.key),y=o(I,y,_),E===null?S=I:E.sibling=I,E=I);return e&&N.forEach(function(O){return t(x,O)}),Ve&&As(x,_),S}function j(x,y,v,b){if(typeof v=="object"&&v!==null&&v.type===No&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case il:e:{for(var S=v.key,E=y;E!==null;){if(E.key===S){if(S=v.type,S===No){if(E.tag===7){r(x,E.sibling),y=s(E,v.props.children),y.return=x,x=y;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===In&&Zg(S)===E.type){r(x,E.sibling),y=s(E,v.props),y.ref=Ti(x,E,v),y.return=x,x=y;break e}r(x,E);break}else t(x,E);E=E.sibling}v.type===No?(y=Ws(v.props.children,x.mode,b,v.key),y.return=x,x=y):(b=Ql(v.type,v.key,v.props,null,x.mode,b),b.ref=Ti(x,y,v),b.return=x,x=b)}return a(x);case Co:e:{for(E=v.key;y!==null;){if(y.key===E)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){r(x,y.sibling),y=s(y,v.children||[]),y.return=x,x=y;break e}else{r(x,y);break}else t(x,y);y=y.sibling}y=bd(v,x.mode,b),y.return=x,x=y}return a(x);case In:return E=v._init,j(x,y,E(v._payload),b)}if(Fi(v))return w(x,y,v,b);if(Ci(v))return m(x,y,v,b);vl(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(r(x,y.sibling),y=s(y,v),y.return=x,x=y):(r(x,y),y=jd(v,x.mode,b),y.return=x,x=y),a(x)):r(x,y)}return j}var ei=iw(!0),aw=iw(!1),wc=ms(null),jc=null,Io=null,gm=null;function vm(){gm=Io=jc=null}function ym(e){var t=wc.current;Fe(wc),e._currentValue=t}function Oh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function qo(e,t){jc=e,gm=Io=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zt=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(gm!==e)if(e={context:e,memoizedValue:t,next:null},Io===null){if(jc===null)throw Error(q(308));Io=e,jc.dependencies={lanes:0,firstContext:e}}else Io=Io.next=e;return t}var Fs=null;function xm(e){Fs===null?Fs=[e]:Fs.push(e)}function lw(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,xm(t)):(r.next=s.next,s.next=r),t.interleaved=r,vn(e,n)}function vn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ln=!1;function wm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Pe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,vn(e,r)}return s=n.interleaved,s===null?(t.next=t,xm(n)):(t.next=s.next,s.next=t),n.interleaved=t,vn(e,r)}function Hl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,om(e,r)}}function ev(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bc(e,t,r,n){var s=e.updateQueue;Ln=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,d=u=c=null,l=o;do{var f=l.lane,g=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=e,m=l;switch(f=t,g=r,m.tag){case 1:if(w=m.payload,typeof w=="function"){h=w.call(g,h,f);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=m.payload,f=typeof w=="function"?w.call(g,h,f):w,f==null)break e;h=qe({},h,f);break e;case 2:Ln=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Ys|=a,e.lanes=a,e.memoizedState=h}}function tv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(q(191,s));s.call(n)}}}var Wa={},qr=ms(Wa),ja=ms(Wa),ba=ms(Wa);function Vs(e){if(e===Wa)throw Error(q(174));return e}function jm(e,t){switch(Ie(ba,t),Ie(ja,e),Ie(qr,Wa),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fh(t,e)}Fe(qr),Ie(qr,t)}function ti(){Fe(qr),Fe(ja),Fe(ba)}function uw(e){Vs(ba.current);var t=Vs(qr.current),r=fh(t,e.type);t!==r&&(Ie(ja,e),Ie(qr,r))}function bm(e){ja.current===e&&(Fe(qr),Fe(ja))}var Be=ms(0);function Sc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pd=[];function Sm(){for(var e=0;e<pd.length;e++)pd[e]._workInProgressVersionPrimary=null;pd.length=0}var Gl=Sn.ReactCurrentDispatcher,gd=Sn.ReactCurrentBatchConfig,Js=0,We=null,ut=null,gt=null,_c=!1,Xi=!1,Sa=0,wE=0;function Et(){throw Error(q(321))}function _m(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Or(e[r],t[r]))return!1;return!0}function Cm(e,t,r,n,s,o){if(Js=o,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gl.current=e===null||e.memoizedState===null?_E:CE,e=r(n,s),Xi){o=0;do{if(Xi=!1,Sa=0,25<=o)throw Error(q(301));o+=1,gt=ut=null,t.updateQueue=null,Gl.current=NE,e=r(n,s)}while(Xi)}if(Gl.current=Cc,t=ut!==null&&ut.next!==null,Js=0,gt=ut=We=null,_c=!1,t)throw Error(q(300));return e}function Nm(){var e=Sa!==0;return Sa=0,e}function Vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?We.memoizedState=gt=e:gt=gt.next=e,gt}function vr(){if(ut===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=gt===null?We.memoizedState:gt.next;if(t!==null)gt=t,ut=e;else{if(e===null)throw Error(q(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},gt===null?We.memoizedState=gt=e:gt=gt.next=e}return gt}function _a(e,t){return typeof t=="function"?t(e):t}function vd(e){var t=vr(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var n=ut,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((Js&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,We.lanes|=d,Ys|=d}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=l,Or(n,t.memoizedState)||(zt=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,We.lanes|=o,Ys|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yd(e){var t=vr(),r=t.queue;if(r===null)throw Error(q(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);Or(o,t.memoizedState)||(zt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function dw(){}function hw(e,t){var r=We,n=vr(),s=t(),o=!Or(n.memoizedState,s);if(o&&(n.memoizedState=s,zt=!0),n=n.queue,Em(pw.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||gt!==null&&gt.memoizedState.tag&1){if(r.flags|=2048,Ca(9,mw.bind(null,r,n,s,t),void 0,null),vt===null)throw Error(q(349));Js&30||fw(r,t,s)}return s}function fw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function mw(e,t,r,n){t.value=r,t.getSnapshot=n,gw(t)&&vw(e)}function pw(e,t,r){return r(function(){gw(t)&&vw(e)})}function gw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Or(e,r)}catch{return!0}}function vw(e){var t=vn(e,1);t!==null&&Rr(t,e,1,-1)}function rv(e){var t=Vr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=SE.bind(null,We,e),[t.memoizedState,e]}function Ca(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function yw(){return vr().memoizedState}function Kl(e,t,r,n){var s=Vr();We.flags|=e,s.memoizedState=Ca(1|t,r,void 0,n===void 0?null:n)}function ou(e,t,r,n){var s=vr();n=n===void 0?null:n;var o=void 0;if(ut!==null){var a=ut.memoizedState;if(o=a.destroy,n!==null&&_m(n,a.deps)){s.memoizedState=Ca(t,r,o,n);return}}We.flags|=e,s.memoizedState=Ca(1|t,r,o,n)}function nv(e,t){return Kl(8390656,8,e,t)}function Em(e,t){return ou(2048,8,e,t)}function xw(e,t){return ou(4,2,e,t)}function ww(e,t){return ou(4,4,e,t)}function jw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bw(e,t,r){return r=r!=null?r.concat([e]):null,ou(4,4,jw.bind(null,t,e),r)}function km(){}function Sw(e,t){var r=vr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_m(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function _w(e,t){var r=vr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&_m(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Cw(e,t,r){return Js&21?(Or(r,t)||(r=T0(),We.lanes|=r,Ys|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=r)}function jE(e,t){var r=Ae;Ae=r!==0&&4>r?r:4,e(!0);var n=gd.transition;gd.transition={};try{e(!1),t()}finally{Ae=r,gd.transition=n}}function Nw(){return vr().memoizedState}function bE(e,t,r){var n=es(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ew(e))kw(t,r);else if(r=lw(e,t,r,n),r!==null){var s=Mt();Rr(r,e,n,s),Pw(r,t,n)}}function SE(e,t,r){var n=es(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ew(e))kw(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Or(l,a)){var c=t.interleaved;c===null?(s.next=s,xm(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=lw(e,t,s,n),r!==null&&(s=Mt(),Rr(r,e,n,s),Pw(r,t,n))}}function Ew(e){var t=e.alternate;return e===We||t!==null&&t===We}function kw(e,t){Xi=_c=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Pw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,om(e,r)}}var Cc={readContext:gr,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},_E={readContext:gr,useCallback:function(e,t){return Vr().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:nv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Kl(4194308,4,jw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Kl(4,2,e,t)},useMemo:function(e,t){var r=Vr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Vr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=bE.bind(null,We,e),[n.memoizedState,e]},useRef:function(e){var t=Vr();return e={current:e},t.memoizedState=e},useState:rv,useDebugValue:km,useDeferredValue:function(e){return Vr().memoizedState=e},useTransition:function(){var e=rv(!1),t=e[0];return e=jE.bind(null,e[1]),Vr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=We,s=Vr();if(Ve){if(r===void 0)throw Error(q(407));r=r()}else{if(r=t(),vt===null)throw Error(q(349));Js&30||fw(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,nv(pw.bind(null,n,o,e),[e]),n.flags|=2048,Ca(9,mw.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Vr(),t=vt.identifierPrefix;if(Ve){var r=cn,n=ln;r=(n&~(1<<32-Ar(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Sa++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CE={readContext:gr,useCallback:Sw,useContext:gr,useEffect:Em,useImperativeHandle:bw,useInsertionEffect:xw,useLayoutEffect:ww,useMemo:_w,useReducer:vd,useRef:yw,useState:function(){return vd(_a)},useDebugValue:km,useDeferredValue:function(e){var t=vr();return Cw(t,ut.memoizedState,e)},useTransition:function(){var e=vd(_a)[0],t=vr().memoizedState;return[e,t]},useMutableSource:dw,useSyncExternalStore:hw,useId:Nw,unstable_isNewReconciler:!1},NE={readContext:gr,useCallback:Sw,useContext:gr,useEffect:Em,useImperativeHandle:bw,useInsertionEffect:xw,useLayoutEffect:ww,useMemo:_w,useReducer:yd,useRef:yw,useState:function(){return yd(_a)},useDebugValue:km,useDeferredValue:function(e){var t=vr();return ut===null?t.memoizedState=e:Cw(t,ut.memoizedState,e)},useTransition:function(){var e=yd(_a)[0],t=vr().memoizedState;return[e,t]},useMutableSource:dw,useSyncExternalStore:hw,useId:Nw,unstable_isNewReconciler:!1};function Nr(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ih(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:qe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var iu={isMounted:function(e){return(e=e._reactInternals)?so(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Mt(),s=es(e),o=dn(n,s);o.payload=t,r!=null&&(o.callback=r),t=Qn(e,o,s),t!==null&&(Rr(t,e,s,n),Hl(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Mt(),s=es(e),o=dn(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Qn(e,o,s),t!==null&&(Rr(t,e,s,n),Hl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Mt(),n=es(e),s=dn(r,n);s.tag=2,t!=null&&(s.callback=t),t=Qn(e,s,n),t!==null&&(Rr(t,e,n,r),Hl(t,e,n))}};function sv(e,t,r,n,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!va(r,n)||!va(s,o):!0}function Tw(e,t,r){var n=!1,s=ls,o=t.contextType;return typeof o=="object"&&o!==null?o=gr(o):(s=qt(t)?Gs:At.current,n=t.contextTypes,o=(n=n!=null)?Qo(e,s):ls),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=iu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ov(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&iu.enqueueReplaceState(t,t.state,null)}function Lh(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},wm(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=gr(o):(o=qt(t)?Gs:At.current,s.context=Qo(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ih(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&iu.enqueueReplaceState(s,s.state,null),bc(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ri(e,t){try{var r="",n=t;do r+=eN(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function xd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Mh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var EE=typeof WeakMap=="function"?WeakMap:Map;function Aw(e,t,r){r=dn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ec||(Ec=!0,Hh=n),Mh(e,t)},r}function Rw(e,t,r){r=dn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Mh(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Mh(e,t),typeof n!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function iv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new EE;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=UE.bind(null,e,t,r),t.then(e,e))}function av(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lv(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=dn(-1,1),t.tag=2,Qn(r,t,1))),r.lanes|=1),e)}var kE=Sn.ReactCurrentOwner,zt=!1;function Lt(e,t,r,n){t.child=e===null?aw(t,null,r,n):ei(t,e.child,r,n)}function cv(e,t,r,n,s){r=r.render;var o=t.ref;return qo(t,s),n=Cm(e,t,r,n,o,s),r=Nm(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,yn(e,t,s)):(Ve&&r&&fm(t),t.flags|=1,Lt(e,t,n,s),t.child)}function uv(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Mm(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Ow(e,t,o,n,s)):(e=Ql(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:va,r(a,n)&&e.ref===t.ref)return yn(e,t,s)}return t.flags|=1,e=ts(o,n),e.ref=t.ref,e.return=t,t.child=e}function Ow(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(va(o,n)&&e.ref===t.ref)if(zt=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(zt=!0);else return t.lanes=e.lanes,yn(e,t,s)}return Dh(e,t,r,n,s)}function Iw(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Mo,Jt),Jt|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(Mo,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Ie(Mo,Jt),Jt|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ie(Mo,Jt),Jt|=n;return Lt(e,t,s,r),t.child}function Lw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Dh(e,t,r,n,s){var o=qt(r)?Gs:At.current;return o=Qo(t,o),qo(t,s),r=Cm(e,t,r,n,o,s),n=Nm(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,yn(e,t,s)):(Ve&&n&&fm(t),t.flags|=1,Lt(e,t,r,s),t.child)}function dv(e,t,r,n,s){if(qt(r)){var o=!0;vc(t)}else o=!1;if(qo(t,s),t.stateNode===null)Jl(e,t),Tw(t,r,n),Lh(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=gr(u):(u=qt(r)?Gs:At.current,u=Qo(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&ov(t,a,n,u),Ln=!1;var f=t.memoizedState;a.state=f,bc(t,n,a,s),c=t.memoizedState,l!==n||f!==c||Wt.current||Ln?(typeof d=="function"&&(Ih(t,r,d,n),c=t.memoizedState),(l=Ln||sv(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,cw(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Nr(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=gr(c):(c=qt(r)?Gs:At.current,c=Qo(t,c));var g=r.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&ov(t,a,n,c),Ln=!1,f=t.memoizedState,a.state=f,bc(t,n,a,s);var w=t.memoizedState;l!==h||f!==w||Wt.current||Ln?(typeof g=="function"&&(Ih(t,r,g,n),w=t.memoizedState),(u=Ln||sv(t,r,u,n,f,w,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,w,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),a.props=n,a.state=w,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return $h(e,t,r,n,o,s)}function $h(e,t,r,n,s,o){Lw(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&Yg(t,r,!1),yn(e,t,o);n=t.stateNode,kE.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=ei(t,e.child,null,o),t.child=ei(t,null,l,o)):Lt(e,t,l,o),t.memoizedState=n.state,s&&Yg(t,r,!0),t.child}function Mw(e){var t=e.stateNode;t.pendingContext?Jg(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jg(e,t.context,!1),jm(e,t.containerInfo)}function hv(e,t,r,n,s){return Zo(),pm(s),t.flags|=256,Lt(e,t,r,n),t.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function Vh(e){return{baseLanes:e,cachePool:null,transitions:null}}function Dw(e,t,r){var n=t.pendingProps,s=Be.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ie(Be,s&1),e===null)return Rh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=cu(a,n,0,null),e=Ws(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Vh(r),t.memoizedState=Fh,e):Pm(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return PE(e,t,a,n,l,s,r);if(o){o=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ts(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ts(l,o):(o=Ws(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?Vh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Fh,n}return o=e.child,e=o.sibling,n=ts(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Pm(e,t){return t=cu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yl(e,t,r,n){return n!==null&&pm(n),ei(t,e.child,null,r),e=Pm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function PE(e,t,r,n,s,o,a){if(r)return t.flags&256?(t.flags&=-257,n=xd(Error(q(422))),yl(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=cu({mode:"visible",children:n.children},s,0,null),o=Ws(o,s,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&ei(t,e.child,null,a),t.child.memoizedState=Vh(a),t.memoizedState=Fh,o);if(!(t.mode&1))return yl(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(q(419)),n=xd(o,n,void 0),yl(e,t,a,n)}if(l=(a&e.childLanes)!==0,zt||l){if(n=vt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,vn(e,s),Rr(n,e,s,-1))}return Lm(),n=xd(Error(q(421))),yl(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=BE.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Xt=Xn(s.nextSibling),Qt=t,Ve=!0,Tr=null,e!==null&&(ur[dr++]=ln,ur[dr++]=cn,ur[dr++]=Ks,ln=e.id,cn=e.overflow,Ks=t),t=Pm(t,n.children),t.flags|=4096,t)}function fv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Oh(e.return,t,r)}function wd(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function $w(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Lt(e,t,n.children,r),n=Be.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fv(e,r,t);else if(e.tag===19)fv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ie(Be,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Sc(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),wd(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Sc(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}wd(t,!0,r,null,o);break;case"together":wd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Jl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ys|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,r=ts(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ts(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function TE(e,t,r){switch(t.tag){case 3:Mw(t),Zo();break;case 5:uw(t);break;case 1:qt(t.type)&&vc(t);break;case 4:jm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ie(wc,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ie(Be,Be.current&1),t.flags|=128,null):r&t.child.childLanes?Dw(e,t,r):(Ie(Be,Be.current&1),e=yn(e,t,r),e!==null?e.sibling:null);Ie(Be,Be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return $w(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Be,Be.current),n)break;return null;case 22:case 23:return t.lanes=0,Iw(e,t,r)}return yn(e,t,r)}var Fw,Uh,Vw,Uw;Fw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Uh=function(){};Vw=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Vs(qr.current);var o=null;switch(r){case"input":s=ch(e,s),n=ch(e,n),o=[];break;case"select":s=qe({},s,{value:void 0}),n=qe({},n,{value:void 0}),o=[];break;case"textarea":s=hh(e,s),n=hh(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=pc)}mh(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ua.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ua.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$e("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};Uw=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ai(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function AE(e,t,r){var n=t.pendingProps;switch(mm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return qt(t.type)&&gc(),kt(t),null;case 3:return n=t.stateNode,ti(),Fe(Wt),Fe(At),Sm(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tr!==null&&(Jh(Tr),Tr=null))),Uh(e,t),kt(t),null;case 5:bm(t);var s=Vs(ba.current);if(r=t.type,e!==null&&t.stateNode!=null)Vw(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(q(166));return kt(t),null}if(e=Vs(qr.current),gl(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[Ur]=t,n[wa]=o,e=(t.mode&1)!==0,r){case"dialog":$e("cancel",n),$e("close",n);break;case"iframe":case"object":case"embed":$e("load",n);break;case"video":case"audio":for(s=0;s<Ui.length;s++)$e(Ui[s],n);break;case"source":$e("error",n);break;case"img":case"image":case"link":$e("error",n),$e("load",n);break;case"details":$e("toggle",n);break;case"input":bg(n,o),$e("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},$e("invalid",n);break;case"textarea":_g(n,o),$e("invalid",n)}mh(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&pl(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&pl(n.textContent,l,e),s=["children",""+l]):ua.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&$e("scroll",n)}switch(r){case"input":al(n),Sg(n,o,!0);break;case"textarea":al(n),Cg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=pc)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=p0(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Ur]=t,e[wa]=n,Fw(e,t,!1,!1),t.stateNode=e;e:{switch(a=ph(r,n),r){case"dialog":$e("cancel",e),$e("close",e),s=n;break;case"iframe":case"object":case"embed":$e("load",e),s=n;break;case"video":case"audio":for(s=0;s<Ui.length;s++)$e(Ui[s],e);s=n;break;case"source":$e("error",e),s=n;break;case"img":case"image":case"link":$e("error",e),$e("load",e),s=n;break;case"details":$e("toggle",e),s=n;break;case"input":bg(e,n),s=ch(e,n),$e("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=qe({},n,{value:void 0}),$e("invalid",e);break;case"textarea":_g(e,n),s=hh(e,n),$e("invalid",e);break;default:s=n}mh(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?y0(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&g0(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&da(e,c):typeof c=="number"&&da(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ua.hasOwnProperty(o)?c!=null&&o==="onScroll"&&$e("scroll",e):c!=null&&Zf(e,o,c,a))}switch(r){case"input":al(e),Sg(e,n,!1);break;case"textarea":al(e),Cg(e);break;case"option":n.value!=null&&e.setAttribute("value",""+as(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Uo(e,!!n.multiple,o,!1):n.defaultValue!=null&&Uo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=pc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kt(t),null;case 6:if(e&&t.stateNode!=null)Uw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(q(166));if(r=Vs(ba.current),Vs(qr.current),gl(t)){if(n=t.stateNode,r=t.memoizedProps,n[Ur]=t,(o=n.nodeValue!==r)&&(e=Qt,e!==null))switch(e.tag){case 3:pl(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&pl(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ur]=t,t.stateNode=n}return kt(t),null;case 13:if(Fe(Be),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&Xt!==null&&t.mode&1&&!(t.flags&128))ow(),Zo(),t.flags|=98560,o=!1;else if(o=gl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[Ur]=t}else Zo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),o=!1}else Tr!==null&&(Jh(Tr),Tr=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Be.current&1?dt===0&&(dt=3):Lm())),t.updateQueue!==null&&(t.flags|=4),kt(t),null);case 4:return ti(),Uh(e,t),e===null&&ya(t.stateNode.containerInfo),kt(t),null;case 10:return ym(t.type._context),kt(t),null;case 17:return qt(t.type)&&gc(),kt(t),null;case 19:if(Fe(Be),o=t.memoizedState,o===null)return kt(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Ai(o,!1);else{if(dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Sc(e),a!==null){for(t.flags|=128,Ai(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ie(Be,Be.current&1|2),t.child}e=e.sibling}o.tail!==null&&Xe()>ni&&(t.flags|=128,n=!0,Ai(o,!1),t.lanes=4194304)}else{if(!n)if(e=Sc(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ai(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ve)return kt(t),null}else 2*Xe()-o.renderingStartTime>ni&&r!==1073741824&&(t.flags|=128,n=!0,Ai(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=Be.current,Ie(Be,n?r&1|2:r&1),t):(kt(t),null);case 22:case 23:return Im(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Jt&1073741824&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),null;case 24:return null;case 25:return null}throw Error(q(156,t.tag))}function RE(e,t){switch(mm(t),t.tag){case 1:return qt(t.type)&&gc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),Fe(Wt),Fe(At),Sm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bm(t),null;case 13:if(Fe(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));Zo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fe(Be),null;case 4:return ti(),null;case 10:return ym(t.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var xl=!1,Tt=!1,OE=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Lo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){He(e,t,n)}else r.current=null}function Bh(e,t,r){try{r()}catch(n){He(e,t,n)}}var mv=!1;function IE(e,t){if(Ch=hc,e=H0(),hm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==o||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)f=h,h=g;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===o&&++d===n&&(c=a),(g=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nh={focusedElem:e,selectionRange:r},hc=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var m=w.memoizedProps,j=w.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?m:Nr(t.type,m),j);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(b){He(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return w=mv,mv=!1,w}function Qi(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Bh(t,r,o)}s=s.next}while(s!==n)}}function au(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function zh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Bw(e){var t=e.alternate;t!==null&&(e.alternate=null,Bw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ur],delete t[wa],delete t[Ph],delete t[gE],delete t[vE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zw(e){return e.tag===5||e.tag===3||e.tag===4}function pv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=pc));else if(n!==4&&(e=e.child,e!==null))for(Wh(e,t,r),e=e.sibling;e!==null;)Wh(e,t,r),e=e.sibling}function qh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(qh(e,t,r),e=e.sibling;e!==null;)qh(e,t,r),e=e.sibling}var wt=null,kr=!1;function Pn(e,t,r){for(r=r.child;r!==null;)Ww(e,t,r),r=r.sibling}function Ww(e,t,r){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Zc,r)}catch{}switch(r.tag){case 5:Tt||Lo(r,t);case 6:var n=wt,s=kr;wt=null,Pn(e,t,r),wt=n,kr=s,wt!==null&&(kr?(e=wt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(kr?(e=wt,r=r.stateNode,e.nodeType===8?fd(e.parentNode,r):e.nodeType===1&&fd(e,r),pa(e)):fd(wt,r.stateNode));break;case 4:n=wt,s=kr,wt=r.stateNode.containerInfo,kr=!0,Pn(e,t,r),wt=n,kr=s;break;case 0:case 11:case 14:case 15:if(!Tt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Bh(r,t,a),s=s.next}while(s!==n)}Pn(e,t,r);break;case 1:if(!Tt&&(Lo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){He(r,t,l)}Pn(e,t,r);break;case 21:Pn(e,t,r);break;case 22:r.mode&1?(Tt=(n=Tt)||r.memoizedState!==null,Pn(e,t,r),Tt=n):Pn(e,t,r);break;default:Pn(e,t,r)}}function gv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new OE),t.forEach(function(n){var s=zE.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function br(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,kr=!1;break e;case 3:wt=l.stateNode.containerInfo,kr=!0;break e;case 4:wt=l.stateNode.containerInfo,kr=!0;break e}l=l.return}if(wt===null)throw Error(q(160));Ww(o,a,s),wt=null,kr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){He(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qw(t,e),t=t.sibling}function qw(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(br(t,e),Fr(e),n&4){try{Qi(3,e,e.return),au(3,e)}catch(m){He(e,e.return,m)}try{Qi(5,e,e.return)}catch(m){He(e,e.return,m)}}break;case 1:br(t,e),Fr(e),n&512&&r!==null&&Lo(r,r.return);break;case 5:if(br(t,e),Fr(e),n&512&&r!==null&&Lo(r,r.return),e.flags&32){var s=e.stateNode;try{da(s,"")}catch(m){He(e,e.return,m)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&f0(s,o),ph(l,a);var u=ph(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?y0(s,h):d==="dangerouslySetInnerHTML"?g0(s,h):d==="children"?da(s,h):Zf(s,d,h,u)}switch(l){case"input":uh(s,o);break;case"textarea":m0(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Uo(s,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?Uo(s,!!o.multiple,o.defaultValue,!0):Uo(s,!!o.multiple,o.multiple?[]:"",!1))}s[wa]=o}catch(m){He(e,e.return,m)}}break;case 6:if(br(t,e),Fr(e),n&4){if(e.stateNode===null)throw Error(q(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(m){He(e,e.return,m)}}break;case 3:if(br(t,e),Fr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pa(t.containerInfo)}catch(m){He(e,e.return,m)}break;case 4:br(t,e),Fr(e);break;case 13:br(t,e),Fr(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Rm=Xe())),n&4&&gv(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Tt=(u=Tt)||d,br(t,e),Tt=u):br(t,e),Fr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(ee=e,d=e.child;d!==null;){for(h=ee=d;ee!==null;){switch(f=ee,g=f.child,f.tag){case 0:case 11:case 14:case 15:Qi(4,f,f.return);break;case 1:Lo(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(m){He(n,r,m)}}break;case 5:Lo(f,f.return);break;case 22:if(f.memoizedState!==null){yv(h);continue}}g!==null?(g.return=f,ee=g):yv(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=v0("display",a))}catch(m){He(e,e.return,m)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){He(e,e.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:br(t,e),Fr(e),n&4&&gv(e);break;case 21:break;default:br(t,e),Fr(e)}}function Fr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zw(r)){var n=r;break e}r=r.return}throw Error(q(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(da(s,""),n.flags&=-33);var o=pv(e);qh(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=pv(e);Wh(e,l,a);break;default:throw Error(q(161))}}catch(c){He(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function LE(e,t,r){ee=e,Hw(e)}function Hw(e,t,r){for(var n=(e.mode&1)!==0;ee!==null;){var s=ee,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||xl;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Tt;l=xl;var u=Tt;if(xl=a,(Tt=c)&&!u)for(ee=s;ee!==null;)a=ee,c=a.child,a.tag===22&&a.memoizedState!==null?xv(s):c!==null?(c.return=a,ee=c):xv(s);for(;o!==null;)ee=o,Hw(o),o=o.sibling;ee=s,xl=l,Tt=u}vv(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ee=o):vv(e)}}function vv(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Tt||au(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Tt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Nr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&tv(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tv(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&pa(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Tt||t.flags&512&&zh(t)}catch(f){He(t,t.return,f)}}if(t===e){ee=null;break}if(r=t.sibling,r!==null){r.return=t.return,ee=r;break}ee=t.return}}function yv(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ee=r;break}ee=t.return}}function xv(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{au(4,t)}catch(c){He(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){He(t,s,c)}}var o=t.return;try{zh(t)}catch(c){He(t,o,c)}break;case 5:var a=t.return;try{zh(t)}catch(c){He(t,a,c)}}}catch(c){He(t,t.return,c)}if(t===e){ee=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ee=l;break}ee=t.return}}var ME=Math.ceil,Nc=Sn.ReactCurrentDispatcher,Tm=Sn.ReactCurrentOwner,fr=Sn.ReactCurrentBatchConfig,Pe=0,vt=null,ot=null,bt=0,Jt=0,Mo=ms(0),dt=0,Na=null,Ys=0,lu=0,Am=0,Zi=null,Ut=null,Rm=0,ni=1/0,nn=null,Ec=!1,Hh=null,Zn=null,wl=!1,zn=null,kc=0,ea=0,Gh=null,Yl=-1,Xl=0;function Mt(){return Pe&6?Xe():Yl!==-1?Yl:Yl=Xe()}function es(e){return e.mode&1?Pe&2&&bt!==0?bt&-bt:xE.transition!==null?(Xl===0&&(Xl=T0()),Xl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:D0(e.type)),e):1}function Rr(e,t,r,n){if(50<ea)throw ea=0,Gh=null,Error(q(185));Ua(e,r,n),(!(Pe&2)||e!==vt)&&(e===vt&&(!(Pe&2)&&(lu|=r),dt===4&&Fn(e,bt)),Ht(e,n),r===1&&Pe===0&&!(t.mode&1)&&(ni=Xe()+500,su&&ps()))}function Ht(e,t){var r=e.callbackNode;xN(e,t);var n=dc(e,e===vt?bt:0);if(n===0)r!==null&&kg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&kg(r),t===1)e.tag===0?yE(wv.bind(null,e)):rw(wv.bind(null,e)),mE(function(){!(Pe&6)&&ps()}),r=null;else{switch(A0(n)){case 1:r=sm;break;case 4:r=k0;break;case 16:r=uc;break;case 536870912:r=P0;break;default:r=uc}r=ej(r,Gw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Gw(e,t){if(Yl=-1,Xl=0,Pe&6)throw Error(q(327));var r=e.callbackNode;if(Ho()&&e.callbackNode!==r)return null;var n=dc(e,e===vt?bt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Pc(e,n);else{t=n;var s=Pe;Pe|=2;var o=Jw();(vt!==e||bt!==t)&&(nn=null,ni=Xe()+500,zs(e,t));do try{FE();break}catch(l){Kw(e,l)}while(1);vm(),Nc.current=o,Pe=s,ot!==null?t=0:(vt=null,bt=0,t=dt)}if(t!==0){if(t===2&&(s=wh(e),s!==0&&(n=s,t=Kh(e,s))),t===1)throw r=Na,zs(e,0),Fn(e,n),Ht(e,Xe()),r;if(t===6)Fn(e,n);else{if(s=e.current.alternate,!(n&30)&&!DE(s)&&(t=Pc(e,n),t===2&&(o=wh(e),o!==0&&(n=o,t=Kh(e,o))),t===1))throw r=Na,zs(e,0),Fn(e,n),Ht(e,Xe()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(q(345));case 2:Rs(e,Ut,nn);break;case 3:if(Fn(e,n),(n&130023424)===n&&(t=Rm+500-Xe(),10<t)){if(dc(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Mt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=kh(Rs.bind(null,e,Ut,nn),t);break}Rs(e,Ut,nn);break;case 4:if(Fn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Ar(n);o=1<<a,a=t[a],a>s&&(s=a),n&=~o}if(n=s,n=Xe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ME(n/1960))-n,10<n){e.timeoutHandle=kh(Rs.bind(null,e,Ut,nn),n);break}Rs(e,Ut,nn);break;case 5:Rs(e,Ut,nn);break;default:throw Error(q(329))}}}return Ht(e,Xe()),e.callbackNode===r?Gw.bind(null,e):null}function Kh(e,t){var r=Zi;return e.current.memoizedState.isDehydrated&&(zs(e,t).flags|=256),e=Pc(e,t),e!==2&&(t=Ut,Ut=r,t!==null&&Jh(t)),e}function Jh(e){Ut===null?Ut=e:Ut.push.apply(Ut,e)}function DE(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!Or(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fn(e,t){for(t&=~Am,t&=~lu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ar(t),n=1<<r;e[r]=-1,t&=~n}}function wv(e){if(Pe&6)throw Error(q(327));Ho();var t=dc(e,0);if(!(t&1))return Ht(e,Xe()),null;var r=Pc(e,t);if(e.tag!==0&&r===2){var n=wh(e);n!==0&&(t=n,r=Kh(e,n))}if(r===1)throw r=Na,zs(e,0),Fn(e,t),Ht(e,Xe()),r;if(r===6)throw Error(q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rs(e,Ut,nn),Ht(e,Xe()),null}function Om(e,t){var r=Pe;Pe|=1;try{return e(t)}finally{Pe=r,Pe===0&&(ni=Xe()+500,su&&ps())}}function Xs(e){zn!==null&&zn.tag===0&&!(Pe&6)&&Ho();var t=Pe;Pe|=1;var r=fr.transition,n=Ae;try{if(fr.transition=null,Ae=1,e)return e()}finally{Ae=n,fr.transition=r,Pe=t,!(Pe&6)&&ps()}}function Im(){Jt=Mo.current,Fe(Mo)}function zs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fE(r)),ot!==null)for(r=ot.return;r!==null;){var n=r;switch(mm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gc();break;case 3:ti(),Fe(Wt),Fe(At),Sm();break;case 5:bm(n);break;case 4:ti();break;case 13:Fe(Be);break;case 19:Fe(Be);break;case 10:ym(n.type._context);break;case 22:case 23:Im()}r=r.return}if(vt=e,ot=e=ts(e.current,null),bt=Jt=t,dt=0,Na=null,Am=lu=Ys=0,Ut=Zi=null,Fs!==null){for(t=0;t<Fs.length;t++)if(r=Fs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}Fs=null}return e}function Kw(e,t){do{var r=ot;try{if(vm(),Gl.current=Cc,_c){for(var n=We.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}_c=!1}if(Js=0,gt=ut=We=null,Xi=!1,Sa=0,Tm.current=null,r===null||r.return===null){dt=1,Na=t,ot=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=bt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=av(a);if(g!==null){g.flags&=-257,lv(g,a,l,o,t),g.mode&1&&iv(o,u,t),t=g,c=u;var w=t.updateQueue;if(w===null){var m=new Set;m.add(c),t.updateQueue=m}else w.add(c);break e}else{if(!(t&1)){iv(o,u,t),Lm();break e}c=Error(q(426))}}else if(Ve&&l.mode&1){var j=av(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),lv(j,a,l,o,t),pm(ri(c,l));break e}}o=c=ri(c,l),dt!==4&&(dt=2),Zi===null?Zi=[o]:Zi.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var x=Aw(o,c,t);ev(o,x);break e;case 1:l=c;var y=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Zn===null||!Zn.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t;var b=Rw(o,l,t);ev(o,b);break e}}o=o.return}while(o!==null)}Xw(r)}catch(S){t=S,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(1)}function Jw(){var e=Nc.current;return Nc.current=Cc,e===null?Cc:e}function Lm(){(dt===0||dt===3||dt===2)&&(dt=4),vt===null||!(Ys&268435455)&&!(lu&268435455)||Fn(vt,bt)}function Pc(e,t){var r=Pe;Pe|=2;var n=Jw();(vt!==e||bt!==t)&&(nn=null,zs(e,t));do try{$E();break}catch(s){Kw(e,s)}while(1);if(vm(),Pe=r,Nc.current=n,ot!==null)throw Error(q(261));return vt=null,bt=0,dt}function $E(){for(;ot!==null;)Yw(ot)}function FE(){for(;ot!==null&&!uN();)Yw(ot)}function Yw(e){var t=Zw(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?Xw(e):ot=t,Tm.current=null}function Xw(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=RE(r,t),r!==null){r.flags&=32767,ot=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{dt=6,ot=null;return}}else if(r=AE(r,t,Jt),r!==null){ot=r;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);dt===0&&(dt=5)}function Rs(e,t,r){var n=Ae,s=fr.transition;try{fr.transition=null,Ae=1,VE(e,t,r,n)}finally{fr.transition=s,Ae=n}return null}function VE(e,t,r,n){do Ho();while(zn!==null);if(Pe&6)throw Error(q(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(q(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(wN(e,o),e===vt&&(ot=vt=null,bt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wl||(wl=!0,ej(uc,function(){return Ho(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=fr.transition,fr.transition=null;var a=Ae;Ae=1;var l=Pe;Pe|=4,Tm.current=null,IE(e,r),qw(r,e),iE(Nh),hc=!!Ch,Nh=Ch=null,e.current=r,LE(r),dN(),Pe=l,Ae=a,fr.transition=o}else e.current=r;if(wl&&(wl=!1,zn=e,kc=s),o=e.pendingLanes,o===0&&(Zn=null),mN(r.stateNode),Ht(e,Xe()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ec)throw Ec=!1,e=Hh,Hh=null,e;return kc&1&&e.tag!==0&&Ho(),o=e.pendingLanes,o&1?e===Gh?ea++:(ea=0,Gh=e):ea=0,ps(),null}function Ho(){if(zn!==null){var e=A0(kc),t=fr.transition,r=Ae;try{if(fr.transition=null,Ae=16>e?16:e,zn===null)var n=!1;else{if(e=zn,zn=null,kc=0,Pe&6)throw Error(q(331));var s=Pe;for(Pe|=4,ee=e.current;ee!==null;){var o=ee,a=o.child;if(ee.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ee=u;ee!==null;){var d=ee;switch(d.tag){case 0:case 11:case 15:Qi(8,d,o)}var h=d.child;if(h!==null)h.return=d,ee=h;else for(;ee!==null;){d=ee;var f=d.sibling,g=d.return;if(Bw(d),d===u){ee=null;break}if(f!==null){f.return=g,ee=f;break}ee=g}}}var w=o.alternate;if(w!==null){var m=w.child;if(m!==null){w.child=null;do{var j=m.sibling;m.sibling=null,m=j}while(m!==null)}}ee=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ee=a;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Qi(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ee=x;break e}ee=o.return}}var y=e.current;for(ee=y;ee!==null;){a=ee;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,ee=v;else e:for(a=y;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:au(9,l)}}catch(S){He(l,l.return,S)}if(l===a){ee=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,ee=b;break e}ee=l.return}}if(Pe=s,ps(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Zc,e)}catch{}n=!0}return n}finally{Ae=r,fr.transition=t}}return!1}function jv(e,t,r){t=ri(r,t),t=Aw(e,t,1),e=Qn(e,t,1),t=Mt(),e!==null&&(Ua(e,1,t),Ht(e,t))}function He(e,t,r){if(e.tag===3)jv(e,e,r);else for(;t!==null;){if(t.tag===3){jv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zn===null||!Zn.has(n))){e=ri(r,e),e=Rw(t,e,1),t=Qn(t,e,1),e=Mt(),t!==null&&(Ua(t,1,e),Ht(t,e));break}}t=t.return}}function UE(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Mt(),e.pingedLanes|=e.suspendedLanes&r,vt===e&&(bt&r)===r&&(dt===4||dt===3&&(bt&130023424)===bt&&500>Xe()-Rm?zs(e,0):Am|=r),Ht(e,t)}function Qw(e,t){t===0&&(e.mode&1?(t=ul,ul<<=1,!(ul&130023424)&&(ul=4194304)):t=1);var r=Mt();e=vn(e,t),e!==null&&(Ua(e,t,r),Ht(e,r))}function BE(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Qw(e,r)}function zE(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(q(314))}n!==null&&n.delete(t),Qw(e,r)}var Zw;Zw=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wt.current)zt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return zt=!1,TE(e,t,r);zt=!!(e.flags&131072)}else zt=!1,Ve&&t.flags&1048576&&nw(t,xc,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Jl(e,t),e=t.pendingProps;var s=Qo(t,At.current);qo(t,r),s=Cm(null,t,n,e,s,r);var o=Nm();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qt(n)?(o=!0,vc(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wm(t),s.updater=iu,t.stateNode=s,s._reactInternals=t,Lh(t,n,e,r),t=$h(null,t,n,!0,o,r)):(t.tag=0,Ve&&o&&fm(t),Lt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Jl(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=qE(n),e=Nr(n,e),s){case 0:t=Dh(null,t,n,e,r);break e;case 1:t=dv(null,t,n,e,r);break e;case 11:t=cv(null,t,n,e,r);break e;case 14:t=uv(null,t,n,Nr(n.type,e),r);break e}throw Error(q(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),Dh(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),dv(e,t,n,s,r);case 3:e:{if(Mw(t),e===null)throw Error(q(387));n=t.pendingProps,o=t.memoizedState,s=o.element,cw(e,t),bc(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=ri(Error(q(423)),t),t=hv(e,t,n,r,s);break e}else if(n!==s){s=ri(Error(q(424)),t),t=hv(e,t,n,r,s);break e}else for(Xt=Xn(t.stateNode.containerInfo.firstChild),Qt=t,Ve=!0,Tr=null,r=aw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Zo(),n===s){t=yn(e,t,r);break e}Lt(e,t,n,r)}t=t.child}return t;case 5:return uw(t),e===null&&Rh(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,Eh(n,s)?a=null:o!==null&&Eh(n,o)&&(t.flags|=32),Lw(e,t),Lt(e,t,a,r),t.child;case 6:return e===null&&Rh(t),null;case 13:return Dw(e,t,r);case 4:return jm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ei(t,null,n,r):Lt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),cv(e,t,n,s,r);case 7:return Lt(e,t,t.pendingProps,r),t.child;case 8:return Lt(e,t,t.pendingProps.children,r),t.child;case 12:return Lt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ie(wc,n._currentValue),n._currentValue=a,o!==null)if(Or(o.value,a)){if(o.children===s.children&&!Wt.current){t=yn(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=dn(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Oh(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(q(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Oh(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Lt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,qo(t,r),s=gr(s),n=n(s),t.flags|=1,Lt(e,t,n,r),t.child;case 14:return n=t.type,s=Nr(n,t.pendingProps),s=Nr(n.type,s),uv(e,t,n,s,r);case 15:return Ow(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Nr(n,s),Jl(e,t),t.tag=1,qt(n)?(e=!0,vc(t)):e=!1,qo(t,r),Tw(t,n,s),Lh(t,n,s,r),$h(null,t,n,!0,e,r);case 19:return $w(e,t,r);case 22:return Iw(e,t,r)}throw Error(q(156,t.tag))};function ej(e,t){return E0(e,t)}function WE(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(e,t,r,n){return new WE(e,t,r,n)}function Mm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qE(e){if(typeof e=="function")return Mm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tm)return 11;if(e===rm)return 14}return 2}function ts(e,t){var r=e.alternate;return r===null?(r=hr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ql(e,t,r,n,s,o){var a=2;if(n=e,typeof e=="function")Mm(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case No:return Ws(r.children,s,o,t);case em:a=8,s|=8;break;case oh:return e=hr(12,r,t,s|2),e.elementType=oh,e.lanes=o,e;case ih:return e=hr(13,r,t,s),e.elementType=ih,e.lanes=o,e;case ah:return e=hr(19,r,t,s),e.elementType=ah,e.lanes=o,e;case u0:return cu(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case l0:a=10;break e;case c0:a=9;break e;case tm:a=11;break e;case rm:a=14;break e;case In:a=16,n=null;break e}throw Error(q(130,e==null?e:typeof e,""))}return t=hr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function Ws(e,t,r,n){return e=hr(7,e,n,t),e.lanes=r,e}function cu(e,t,r,n){return e=hr(22,e,n,t),e.elementType=u0,e.lanes=r,e.stateNode={isHidden:!1},e}function jd(e,t,r){return e=hr(6,e,null,t),e.lanes=r,e}function bd(e,t,r){return t=hr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function HE(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rd(0),this.expirationTimes=rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dm(e,t,r,n,s,o,a,l,c){return e=new HE(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=hr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},wm(o),e}function GE(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function tj(e){if(!e)return ls;e=e._reactInternals;e:{if(so(e)!==e||e.tag!==1)throw Error(q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(q(171))}if(e.tag===1){var r=e.type;if(qt(r))return tw(e,r,t)}return t}function rj(e,t,r,n,s,o,a,l,c){return e=Dm(r,n,!0,e,s,o,a,l,c),e.context=tj(null),r=e.current,n=Mt(),s=es(r),o=dn(n,s),o.callback=t??null,Qn(r,o,s),e.current.lanes=s,Ua(e,s,n),Ht(e,n),e}function uu(e,t,r,n){var s=t.current,o=Mt(),a=es(s);return r=tj(r),t.context===null?t.context=r:t.pendingContext=r,t=dn(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Qn(s,t,a),e!==null&&(Rr(e,s,a,o),Hl(e,s,a)),a}function Tc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $m(e,t){bv(e,t),(e=e.alternate)&&bv(e,t)}function KE(){return null}var nj=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fm(e){this._internalRoot=e}du.prototype.render=Fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));uu(e,t,null,null)};du.prototype.unmount=Fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xs(function(){uu(null,e,null,null)}),t[gn]=null}};function du(e){this._internalRoot=e}du.prototype.unstable_scheduleHydration=function(e){if(e){var t=I0();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$n.length&&t!==0&&t<$n[r].priority;r++);$n.splice(r,0,e),r===0&&M0(e)}};function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function JE(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=Tc(a);o.call(u)}}var a=rj(t,n,e,0,null,!1,!1,"",Sv);return e._reactRootContainer=a,e[gn]=a.current,ya(e.nodeType===8?e.parentNode:e),Xs(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Tc(c);l.call(u)}}var c=Dm(e,0,!1,null,null,!1,!1,"",Sv);return e._reactRootContainer=c,e[gn]=c.current,ya(e.nodeType===8?e.parentNode:e),Xs(function(){uu(t,c,r,n)}),c}function fu(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Tc(a);l.call(c)}}uu(t,a,e,s)}else a=JE(r,t,e,s,n);return Tc(a)}R0=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vi(t.pendingLanes);r!==0&&(om(t,r|1),Ht(t,Xe()),!(Pe&6)&&(ni=Xe()+500,ps()))}break;case 13:Xs(function(){var n=vn(e,1);if(n!==null){var s=Mt();Rr(n,e,1,s)}}),$m(e,1)}};im=function(e){if(e.tag===13){var t=vn(e,134217728);if(t!==null){var r=Mt();Rr(t,e,134217728,r)}$m(e,134217728)}};O0=function(e){if(e.tag===13){var t=es(e),r=vn(e,t);if(r!==null){var n=Mt();Rr(r,e,t,n)}$m(e,t)}};I0=function(){return Ae};L0=function(e,t){var r=Ae;try{return Ae=e,t()}finally{Ae=r}};vh=function(e,t,r){switch(t){case"input":if(uh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=nu(n);if(!s)throw Error(q(90));h0(n),uh(n,s)}}}break;case"textarea":m0(e,r);break;case"select":t=r.value,t!=null&&Uo(e,!!r.multiple,t,!1)}};j0=Om;b0=Xs;var YE={usingClientEntryPoint:!1,Events:[za,To,nu,x0,w0,Om]},Ri={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XE={bundleType:Ri.bundleType,version:Ri.version,rendererPackageName:Ri.rendererPackageName,rendererConfig:Ri.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C0(e),e===null?null:e.stateNode},findFiberByHostInstance:Ri.findFiberByHostInstance||KE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{Zc=jl.inject(XE),Wr=jl}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;ir.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vm(t))throw Error(q(200));return GE(e,t,null,r)};ir.createRoot=function(e,t){if(!Vm(e))throw Error(q(299));var r=!1,n="",s=nj;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Dm(e,1,!1,null,null,r,!1,n,s),e[gn]=t.current,ya(e.nodeType===8?e.parentNode:e),new Fm(t)};ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=C0(t),e=e===null?null:e.stateNode,e};ir.flushSync=function(e){return Xs(e)};ir.hydrate=function(e,t,r){if(!hu(t))throw Error(q(200));return fu(null,e,t,!0,r)};ir.hydrateRoot=function(e,t,r){if(!Vm(e))throw Error(q(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=nj;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=rj(t,null,e,1,r??null,s,!1,o,a),e[gn]=t.current,ya(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new du(t)};ir.render=function(e,t,r){if(!hu(t))throw Error(q(200));return fu(null,e,t,!1,r)};ir.unmountComponentAtNode=function(e){if(!hu(e))throw Error(q(40));return e._reactRootContainer?(Xs(function(){fu(null,null,e,!1,function(){e._reactRootContainer=null,e[gn]=null})}),!0):!1};ir.unstable_batchedUpdates=Om;ir.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!hu(r))throw Error(q(200));if(e==null||e._reactInternals===void 0)throw Error(q(38));return fu(e,t,r,!1,n)};ir.version="18.3.1-next-f1338f8080-20240426";function sj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sj)}catch(e){console.error(e)}}sj(),s0.exports=ir;var oo=s0.exports;const QE=Hx(oo);var _v=oo;nh.createRoot=_v.createRoot,nh.hydrateRoot=_v.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ea.apply(this,arguments)}var Wn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wn||(Wn={}));const Cv="popstate";function ZE(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:a,hash:l}=n.location;return Yh("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ac(s)}return tk(t,r,null,e)}function et(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oj(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function ek(){return Math.random().toString(36).substr(2,8)}function Nv(e,t){return{usr:e.state,key:e.key,idx:t}}function Yh(e,t,r,n){return r===void 0&&(r=null),Ea({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?fi(t):t,{state:r,key:t&&t.key||n||ek()})}function Ac(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function fi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function tk(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,a=s.history,l=Wn.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(Ea({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function h(){l=Wn.Pop;let j=d(),x=j==null?null:j-u;u=j,c&&c({action:l,location:m.location,delta:x})}function f(j,x){l=Wn.Push;let y=Yh(m.location,j,x);r&&r(y,j),u=d()+1;let v=Nv(y,u),b=m.createHref(y);try{a.pushState(v,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(b)}o&&c&&c({action:l,location:m.location,delta:1})}function g(j,x){l=Wn.Replace;let y=Yh(m.location,j,x);r&&r(y,j),u=d();let v=Nv(y,u),b=m.createHref(y);a.replaceState(v,"",b),o&&c&&c({action:l,location:m.location,delta:0})}function w(j){let x=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof j=="string"?j:Ac(j);return y=y.replace(/ $/,"%20"),et(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let m={get action(){return l},get location(){return e(s,a)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Cv,h),c=j,()=>{s.removeEventListener(Cv,h),c=null}},createHref(j){return t(s,j)},createURL:w,encodeLocation(j){let x=w(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:g,go(j){return a.go(j)}};return m}var Ev;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ev||(Ev={}));function rk(e,t,r){return r===void 0&&(r="/"),nk(e,t,r,!1)}function nk(e,t,r,n){let s=typeof t=="string"?fi(t):t,o=Um(s.pathname||"/",r);if(o==null)return null;let a=ij(e);sk(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=pk(o);l=fk(a[c],u,n)}return l}function ij(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,a,l)=>{let c={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(et(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=rs([n,c.relativePath]),d=r.concat(c);o.children&&o.children.length>0&&(et(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ij(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:dk(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of aj(o.path))s(o,a,c)}),t}function aj(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let a=aj(n.join("/")),l=[];return l.push(...a.map(c=>c===""?o:[o,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function sk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:hk(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const ok=/^:[\w-]+$/,ik=3,ak=2,lk=1,ck=10,uk=-2,kv=e=>e==="*";function dk(e,t){let r=e.split("/"),n=r.length;return r.some(kv)&&(n+=uk),t&&(n+=ak),r.filter(s=>!kv(s)).reduce((s,o)=>s+(ok.test(o)?ik:o===""?lk:ck),n)}function hk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function fk(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},o="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=o==="/"?t:t.slice(o.length)||"/",h=Pv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Pv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:rs([o,h.pathname]),pathnameBase:xk(rs([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=rs([o,h.pathnameBase]))}return a}function Pv(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=mk(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:g}=d;if(f==="*"){let m=l[h]||"";a=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const w=l[h];return g&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function mk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),oj(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function pk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return oj(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Um(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function gk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?fi(e):e;return{pathname:r?r.startsWith("/")?r:vk(r,t):t,search:wk(n),hash:jk(s)}}function vk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Sd(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bm(e,t){let r=yk(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function zm(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=fi(e):(s=Ea({},e),et(!s.pathname||!s.pathname.includes("?"),Sd("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Sd("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Sd("#","search","hash",s)));let o=e===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=gk(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const rs=e=>e.join("/").replace(/\/\/+/g,"/"),xk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,jk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function bk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lj=["post","put","patch","delete"];new Set(lj);const Sk=["get",...lj];new Set(Sk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(this,arguments)}const Wm=p.createContext(null),_k=p.createContext(null),gs=p.createContext(null),mu=p.createContext(null),Yr=p.createContext({outlet:null,matches:[],isDataRoute:!1}),cj=p.createContext(null);function Ck(e,t){let{relative:r}=t===void 0?{}:t;mi()||et(!1);let{basename:n,navigator:s}=p.useContext(gs),{hash:o,pathname:a,search:l}=dj(e,{relative:r}),c=a;return n!=="/"&&(c=a==="/"?n:rs([n,a])),s.createHref({pathname:c,search:l,hash:o})}function mi(){return p.useContext(mu)!=null}function pi(){return mi()||et(!1),p.useContext(mu).location}function uj(e){p.useContext(gs).static||p.useLayoutEffect(e)}function qm(){let{isDataRoute:e}=p.useContext(Yr);return e?Uk():Nk()}function Nk(){mi()||et(!1);let e=p.useContext(Wm),{basename:t,future:r,navigator:n}=p.useContext(gs),{matches:s}=p.useContext(Yr),{pathname:o}=pi(),a=JSON.stringify(Bm(s,r.v7_relativeSplatPath)),l=p.useRef(!1);return uj(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let h=zm(u,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:rs([t,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[t,n,a,o,e])}const Ek=p.createContext(null);function kk(e){let t=p.useContext(Yr).outlet;return t&&p.createElement(Ek.Provider,{value:e},t)}function Pk(){let{matches:e}=p.useContext(Yr),t=e[e.length-1];return t?t.params:{}}function dj(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(gs),{matches:s}=p.useContext(Yr),{pathname:o}=pi(),a=JSON.stringify(Bm(s,n.v7_relativeSplatPath));return p.useMemo(()=>zm(e,JSON.parse(a),o,r==="path"),[e,a,o,r])}function Tk(e,t){return Ak(e,t)}function Ak(e,t,r,n){mi()||et(!1);let{navigator:s}=p.useContext(gs),{matches:o}=p.useContext(Yr),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=pi(),d;if(t){var h;let j=typeof t=="string"?fi(t):t;c==="/"||(h=j.pathname)!=null&&h.startsWith(c)||et(!1),d=j}else d=u;let f=d.pathname||"/",g=f;if(c!=="/"){let j=c.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(j.length).join("/")}let w=rk(e,{pathname:g}),m=Mk(w&&w.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:rs([c,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:rs([c,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),o,r,n);return t&&m?p.createElement(mu.Provider,{value:{location:ka({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Wn.Pop}},m):m}function Rk(){let e=Vk(),t=bk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,o)}const Ok=p.createElement(Rk,null);class Ik extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Yr.Provider,{value:this.props.routeContext},p.createElement(cj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Lk(e){let{routeContext:t,match:r,children:n}=e,s=p.useContext(Wm);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Yr.Provider,{value:t},n)}function Mk(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||et(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:g}=r,w=h.route.loader&&f[h.route.id]===void 0&&(!g||g[h.route.id]===void 0);if(h.route.lazy||w){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,h,f)=>{let g,w=!1,m=null,j=null;r&&(g=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||Ok,c&&(u<0&&f===0?(Bk("route-fallback",!1),w=!0,j=null):u===f&&(w=!0,j=h.route.hydrateFallbackElement||null)));let x=t.concat(a.slice(0,f+1)),y=()=>{let v;return g?v=m:w?v=j:h.route.Component?v=p.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=d,p.createElement(Lk,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:v})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?p.createElement(Ik,{location:r.location,revalidation:r.revalidation,component:m,error:g,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var hj=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(hj||{}),Rc=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rc||{});function Dk(e){let t=p.useContext(Wm);return t||et(!1),t}function $k(e){let t=p.useContext(_k);return t||et(!1),t}function Fk(e){let t=p.useContext(Yr);return t||et(!1),t}function fj(e){let t=Fk(),r=t.matches[t.matches.length-1];return r.route.id||et(!1),r.route.id}function Vk(){var e;let t=p.useContext(cj),r=$k(Rc.UseRouteError),n=fj(Rc.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Uk(){let{router:e}=Dk(hj.UseNavigateStable),t=fj(Rc.UseNavigateStable),r=p.useRef(!1);return uj(()=>{r.current=!0}),p.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ka({fromRouteId:t},o)))},[e,t])}const Tv={};function Bk(e,t,r){!t&&!Tv[e]&&(Tv[e]=!0)}function zk(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Oc(e){let{to:t,replace:r,state:n,relative:s}=e;mi()||et(!1);let{future:o,static:a}=p.useContext(gs),{matches:l}=p.useContext(Yr),{pathname:c}=pi(),u=qm(),d=zm(t,Bm(l,o.v7_relativeSplatPath),c,s==="path"),h=JSON.stringify(d);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:n,relative:s}),[u,h,s,r,n]),null}function Wk(e){return kk(e.context)}function mt(e){et(!1)}function qk(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Wn.Pop,navigator:o,static:a=!1,future:l}=e;mi()&&et(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:o,static:a,future:ka({v7_relativeSplatPath:!1},l)}),[c,l,o,a]);typeof n=="string"&&(n=fi(n));let{pathname:d="/",search:h="",hash:f="",state:g=null,key:w="default"}=n,m=p.useMemo(()=>{let j=Um(d,c);return j==null?null:{location:{pathname:j,search:h,hash:f,state:g,key:w},navigationType:s}},[c,d,h,f,g,w,s]);return m==null?null:p.createElement(gs.Provider,{value:u},p.createElement(mu.Provider,{children:r,value:m}))}function Hk(e){let{children:t,location:r}=e;return Tk(Xh(t),r)}new Promise(()=>{});function Xh(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let o=[...t,s];if(n.type===p.Fragment){r.push.apply(r,Xh(n.props.children,o));return}n.type!==mt&&et(!1),!n.props.index||!n.props.children||et(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Xh(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qh(){return Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qh.apply(this,arguments)}function Gk(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,o;for(o=0;o<n.length;o++)s=n[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Kk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jk(e,t){return e.button===0&&(!t||t==="_self")&&!Kk(e)}const Yk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xk="6";try{window.__reactRouterVersion=Xk}catch{}const Qk="startTransition",Av=Yf[Qk];function Zk(e){let{basename:t,children:r,future:n,window:s}=e,o=p.useRef();o.current==null&&(o.current=ZE({window:s,v5Compat:!0}));let a=o.current,[l,c]=p.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},d=p.useCallback(h=>{u&&Av?Av(()=>c(h)):c(h)},[c,u]);return p.useLayoutEffect(()=>a.listen(d),[a,d]),p.useEffect(()=>zk(n),[n]),p.createElement(qk,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const e2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",t2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Go=p.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=Gk(t,Yk),{basename:g}=p.useContext(gs),w,m=!1;if(typeof u=="string"&&t2.test(u)&&(w=u,e2))try{let v=new URL(window.location.href),b=u.startsWith("//")?new URL(v.protocol+u):new URL(u),S=Um(b.pathname,g);b.origin===v.origin&&S!=null?u=S+b.search+b.hash:m=!0}catch{}let j=Ck(u,{relative:s}),x=r2(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function y(v){n&&n(v),v.defaultPrevented||x(v)}return p.createElement("a",Qh({},f,{href:w||j,onClick:m||o?n:y,ref:r,target:c}))});var Rv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Rv||(Rv={}));var Ov;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ov||(Ov={}));function r2(e,t){let{target:r,replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l}=t===void 0?{}:t,c=qm(),u=pi(),d=dj(e,{relative:a});return p.useCallback(h=>{if(Jk(h,r)){h.preventDefault();let f=n!==void 0?n:Ac(u)===Ac(d);c(e,{replace:f,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,d,n,s,r,e,o,a,l])}function mj(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=mj(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pj(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=mj(e))&&(n&&(n+=" "),n+=t);return n}function n2(){for(var e=0,t,r,n="";e<arguments.length;)(t=arguments[e++])&&(r=gj(t))&&(n&&(n+=" "),n+=r);return n}function gj(e){if(typeof e=="string")return e;for(var t,r="",n=0;n<e.length;n++)e[n]&&(t=gj(e[n]))&&(r&&(r+=" "),r+=t);return r}var Hm="-";function s2(e){var t=i2(e),r=e.conflictingClassGroups,n=e.conflictingClassGroupModifiers,s=n===void 0?{}:n;function o(l){var c=l.split(Hm);return c[0]===""&&c.length!==1&&c.shift(),vj(c,t)||o2(l)}function a(l,c){var u=r[l]||[];return c&&s[l]?[].concat(u,s[l]):u}return{getClassGroupId:o,getConflictingClassGroupIds:a}}function vj(e,t){var a;if(e.length===0)return t.classGroupId;var r=e[0],n=t.nextPart.get(r),s=n?vj(e.slice(1),n):void 0;if(s)return s;if(t.validators.length!==0){var o=e.join(Hm);return(a=t.validators.find(function(l){var c=l.validator;return c(o)}))==null?void 0:a.classGroupId}}var Iv=/^\[(.+)\]$/;function o2(e){if(Iv.test(e)){var t=Iv.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}}function i2(e){var t=e.theme,r=e.prefix,n={nextPart:new Map,validators:[]},s=l2(Object.entries(e.classGroups),r);return s.forEach(function(o){var a=o[0],l=o[1];Zh(l,n,a,t)}),n}function Zh(e,t,r,n){e.forEach(function(s){if(typeof s=="string"){var o=s===""?t:Lv(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(a2(s)){Zh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(a){var l=a[0],c=a[1];Zh(c,Lv(t,l),r,n)})})}function Lv(e,t){var r=e;return t.split(Hm).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function a2(e){return e.isThemeGetter}function l2(e,t){return t?e.map(function(r){var n=r[0],s=r[1],o=s.map(function(a){return typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):a});return[n,o]}):e}function c2(e){if(e<1)return{get:function(){},set:function(){}};var t=0,r=new Map,n=new Map;function s(o,a){r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)}return{get:function(a){var l=r.get(a);if(l!==void 0)return l;if((l=n.get(a))!==void 0)return s(a,l),l},set:function(a,l){r.has(a)?r.set(a,l):s(a,l)}}}var yj="!";function u2(e){var t=e.separator||":",r=t.length===1,n=t[0],s=t.length;return function(a){for(var l=[],c=0,u=0,d,h=0;h<a.length;h++){var f=a[h];if(c===0){if(f===n&&(r||a.slice(h,h+s)===t)){l.push(a.slice(u,h)),u=h+s;continue}if(f==="/"){d=h;continue}}f==="["?c++:f==="]"&&c--}var g=l.length===0?a:a.substring(u),w=g.startsWith(yj),m=w?g.substring(1):g,j=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:w,baseClassName:m,maybePostfixModifierPosition:j}}}function d2(e){if(e.length<=1)return e;var t=[],r=[];return e.forEach(function(n){var s=n[0]==="[";s?(t.push.apply(t,r.sort().concat([n])),r=[]):r.push(n)}),t.push.apply(t,r.sort()),t}function h2(e){return{cache:c2(e.cacheSize),splitModifiers:u2(e),...s2(e)}}var f2=/\s+/;function m2(e,t){var r=t.splitModifiers,n=t.getClassGroupId,s=t.getConflictingClassGroupIds,o=new Set;return e.trim().split(f2).map(function(a){var l=r(a),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,h=l.maybePostfixModifierPosition,f=n(h?d.substring(0,h):d),g=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:a};if(f=n(d),!f)return{isTailwindClass:!1,originalClassName:a};g=!1}var w=d2(c).join(":"),m=u?w+yj:w;return{isTailwindClass:!0,modifierId:m,classGroupId:f,originalClassName:a,hasPostfixModifier:g}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var l=a.modifierId,c=a.classGroupId,u=a.hasPostfixModifier,d=l+c;return o.has(d)?!1:(o.add(d),s(c,u).forEach(function(h){return o.add(l+h)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function p2(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,s,o,a=l;function l(u){var d=t[0],h=t.slice(1),f=h.reduce(function(g,w){return w(g)},d());return n=h2(f),s=n.cache.get,o=n.cache.set,a=c,c(u)}function c(u){var d=s(u);if(d)return d;var h=m2(u,n);return o(u,h),h}return function(){return a(n2.apply(null,arguments))}}function De(e){var t=function(n){return n[e]||[]};return t.isThemeGetter=!0,t}var xj=/^\[(?:([a-z-]+):)?(.+)\]$/i,g2=/^\d+\/\d+$/,v2=new Set(["px","full","screen"]),y2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,x2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,w2=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function Sr(e){return Us(e)||v2.has(e)||g2.test(e)||ef(e)}function ef(e){return io(e,"length",N2)}function j2(e){return io(e,"size",wj)}function b2(e){return io(e,"position",wj)}function S2(e){return io(e,"url",E2)}function bl(e){return io(e,"number",Us)}function Us(e){return!Number.isNaN(Number(e))}function _2(e){return e.endsWith("%")&&Us(e.slice(0,-1))}function Oi(e){return Mv(e)||io(e,"number",Mv)}function _e(e){return xj.test(e)}function Ii(){return!0}function Tn(e){return y2.test(e)}function C2(e){return io(e,"",k2)}function io(e,t,r){var n=xj.exec(e);return n?n[1]?n[1]===t:r(n[2]):!1}function N2(e){return x2.test(e)}function wj(){return!1}function E2(e){return e.startsWith("url(")}function Mv(e){return Number.isInteger(Number(e))}function k2(e){return w2.test(e)}function P2(){var e=De("colors"),t=De("spacing"),r=De("blur"),n=De("brightness"),s=De("borderColor"),o=De("borderRadius"),a=De("borderSpacing"),l=De("borderWidth"),c=De("contrast"),u=De("grayscale"),d=De("hueRotate"),h=De("invert"),f=De("gap"),g=De("gradientColorStops"),w=De("gradientColorStopPositions"),m=De("inset"),j=De("margin"),x=De("opacity"),y=De("padding"),v=De("saturate"),b=De("scale"),S=De("sepia"),E=De("skew"),N=De("space"),_=De("translate"),C=function(){return["auto","contain","none"]},I=function(){return["auto","hidden","clip","visible","scroll"]},L=function(){return["auto",_e,t]},O=function(){return[_e,t]},D=function(){return["",Sr]},k=function(){return["auto",Us,_e]},U=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},$=function(){return["solid","dashed","dotted","double","none"]},A=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},P=function(){return["start","end","center","between","around","evenly","stretch"]},T=function(){return["","0",_e]},V=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},R=function(){return[Us,bl]},H=function(){return[Us,_e]};return{cacheSize:500,theme:{colors:[Ii],spacing:[Sr],blur:["none","",Tn,_e],brightness:R(),borderColor:[e],borderRadius:["none","","full",Tn,_e],borderSpacing:O(),borderWidth:D(),contrast:R(),grayscale:T(),hueRotate:H(),invert:T(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[_2,ef],inset:L(),margin:L(),opacity:R(),padding:O(),saturate:R(),scale:R(),sepia:T(),skew:H(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Tn]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(U(),[_e])}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oi]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Oi]}],"grid-cols":[{"grid-cols":[Ii]}],"col-start-end":[{col:["auto",{span:["full",Oi]},_e]}],"col-start":[{"col-start":k()}],"col-end":[{"col-end":k()}],"grid-rows":[{"grid-rows":[Ii]}],"row-start-end":[{row:["auto",{span:[Oi]},_e]}],"row-start":[{"row-start":k()}],"row-end":[{"row-end":k()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(P())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(P(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(P(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",_e,t]}],"min-w":[{"min-w":["min","max","fit",_e,Sr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Tn]},Tn,_e]}],h:[{h:[_e,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",_e,Sr]}],"max-h":[{"max-h":[_e,t,"min","max","fit"]}],"font-size":[{text:["base",Tn,ef]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",bl]}],"font-family":[{font:[Ii]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Us,bl]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",_e,Sr]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat($(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",Sr]}],"underline-offset":[{"underline-offset":["auto",_e,Sr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(U(),[b2])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",j2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},S2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[].concat($(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:$()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat($())}],"outline-offset":[{"outline-offset":[_e,Sr]}],"outline-w":[{outline:[Sr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Sr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Tn,C2]}],"shadow-color":[{shadow:[Ii]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":A()}],"bg-blend":[{"bg-blend":A()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Tn,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:H()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:H()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Oi,_e]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Sr,bl]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var T2=p2(P2);function Ce(...e){return T2(pj(e))}function ue(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function Dv(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function jj(...e){return t=>{let r=!1;const n=e.map(s=>{const o=Dv(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Dv(e[s],null)}}}}function Me(...e){return p.useCallback(jj(...e),e)}function A2(e,t){const r=p.createContext(t),n=o=>{const{children:a,...l}=o,c=p.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(o){const a=p.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function vs(e,t=[]){let r=[];function n(o,a){const l=p.createContext(a),c=r.length;r=[...r,a];const u=h=>{var x;const{scope:f,children:g,...w}=h,m=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,j=p.useMemo(()=>w,Object.values(w));return i.jsx(m.Provider,{value:j,children:g})};u.displayName=o+"Provider";function d(h,f){var m;const g=((m=f==null?void 0:f[e])==null?void 0:m[c])||l,w=p.useContext(g);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=r.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,R2(s,...t)]}function R2(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function si(e){const t=I2(e),r=p.forwardRef((n,s)=>{const{children:o,...a}=n,l=p.Children.toArray(o),c=l.find(M2);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return i.jsx(t,{...a,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return i.jsx(t,{...a,ref:s,children:o})});return r.displayName=`${e}.Slot`,r}var O2=si("Slot");function I2(e){const t=p.forwardRef((r,n)=>{const{children:s,...o}=r;if(p.isValidElement(s)){const a=$2(s),l=D2(o,s.props);return s.type!==p.Fragment&&(l.ref=n?jj(n,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var L2=Symbol("radix.slottable");function M2(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===L2}function D2(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{const c=o(...l);return s(...l),c}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function $2(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Gm(e){const t=e+"CollectionProvider",[r,n]=vs(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=m=>{const{scope:j,children:x}=m,y=de.useRef(null),v=de.useRef(new Map).current;return i.jsx(s,{scope:j,itemMap:v,collectionRef:y,children:x})};a.displayName=t;const l=e+"CollectionSlot",c=si(l),u=de.forwardRef((m,j)=>{const{scope:x,children:y}=m,v=o(l,x),b=Me(j,v.collectionRef);return i.jsx(c,{ref:b,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=si(d),g=de.forwardRef((m,j)=>{const{scope:x,children:y,...v}=m,b=de.useRef(null),S=Me(j,b),E=o(d,x);return de.useEffect(()=>(E.itemMap.set(b,{ref:b,...v}),()=>void E.itemMap.delete(b))),i.jsx(f,{[h]:"",ref:S,children:y})});g.displayName=d;function w(m){const j=o(e+"CollectionConsumer",m);return de.useCallback(()=>{const y=j.collectionRef.current;if(!y)return[];const v=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((E,N)=>v.indexOf(E.ref.current)-v.indexOf(N.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},w,n]}var F2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],me=F2.reduce((e,t)=>{const r=si(`Primitive.${t}`),n=p.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function bj(e,t){e&&oo.flushSync(()=>e.dispatchEvent(t))}function yr(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function V2(e,t=globalThis==null?void 0:globalThis.document){const r=yr(e);p.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var U2="DismissableLayer",tf="dismissableLayer.update",B2="dismissableLayer.pointerDownOutside",z2="dismissableLayer.focusOutside",$v,Sj=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),pu=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=p.useContext(Sj),[d,h]=p.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),w=Me(t,N=>h(N)),m=Array.from(u.layers),[j]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=m.indexOf(j),y=d?m.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,b=y>=x,S=q2(N=>{const _=N.target,C=[...u.branches].some(I=>I.contains(_));!b||C||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},f),E=H2(N=>{const _=N.target;[...u.branches].some(I=>I.contains(_))||(o==null||o(N),a==null||a(N),N.defaultPrevented||l==null||l())},f);return V2(N=>{y===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},f),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&($v=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Fv(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=$v)}},[d,f,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Fv())},[d,u]),p.useEffect(()=>{const N=()=>g({});return document.addEventListener(tf,N),()=>document.removeEventListener(tf,N)},[]),i.jsx(me.div,{...c,ref:w,style:{pointerEvents:v?b?"auto":"none":void 0,...e.style},onFocusCapture:ue(e.onFocusCapture,E.onFocusCapture),onBlurCapture:ue(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ue(e.onPointerDownCapture,S.onPointerDownCapture)})});pu.displayName=U2;var W2="DismissableLayerBranch",_j=p.forwardRef((e,t)=>{const r=p.useContext(Sj),n=p.useRef(null),s=Me(t,n);return p.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(me.div,{...e,ref:s})});_j.displayName=W2;function q2(e,t=globalThis==null?void 0:globalThis.document){const r=yr(e),n=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){Cj(B2,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function H2(e,t=globalThis==null?void 0:globalThis.document){const r=yr(e),n=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!n.current&&Cj(z2,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Fv(){const e=new CustomEvent(tf);document.dispatchEvent(e)}function Cj(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?bj(s,o):s.dispatchEvent(o)}var G2=pu,K2=_j,_t=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},J2="Portal",gu=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=p.useState(!1);_t(()=>o(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?QE.createPortal(i.jsx(me.div,{...n,ref:t}),a):null});gu.displayName=J2;function Y2(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var gi=e=>{const{present:t,children:r}=e,n=X2(t),s=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),o=Me(n.ref,Q2(s));return typeof r=="function"||n.isPresent?p.cloneElement(s,{ref:o}):null};gi.displayName="Presence";function X2(e){const[t,r]=p.useState(),n=p.useRef(null),s=p.useRef(e),o=p.useRef("none"),a=e?"mounted":"unmounted",[l,c]=Y2(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Sl(n.current);o.current=l==="mounted"?u:"none"},[l]),_t(()=>{const u=n.current,d=s.current;if(d!==e){const f=o.current,g=Sl(u);e?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),_t(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const m=Sl(n.current).includes(g.animationName);if(g.target===t&&m&&(c("ANIMATION_END"),!s.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},f=g=>{g.target===t&&(o.current=Sl(n.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function Sl(e){return(e==null?void 0:e.animationName)||"none"}function Q2(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var Z2=Yf[" useInsertionEffect ".trim().toString()]||_t;function Qs({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[s,o,a]=eP({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:s;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=p.useCallback(d=>{var h;if(l){const f=tP(d)?d(e):d;f!==e&&((h=a.current)==null||h.call(a,f))}else o(d)},[l,e,o,a]);return[c,u]}function eP({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),s=p.useRef(r),o=p.useRef(t);return Z2(()=>{o.current=t},[t]),p.useEffect(()=>{var a;s.current!==r&&((a=o.current)==null||a.call(o,r),s.current=r)},[r,s]),[r,n,o]}function tP(e){return typeof e=="function"}var Nj=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rP="VisuallyHidden",Km=p.forwardRef((e,t)=>i.jsx(me.span,{...e,ref:t,style:{...Nj,...e.style}}));Km.displayName=rP;var Jm="ToastProvider",[Ym,nP,sP]=Gm("Toast"),[Ej,b3]=vs("Toast",[sP]),[oP,vu]=Ej(Jm),kj=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),f=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Jm}\`. Expected non-empty \`string\`.`),i.jsx(Ym.Provider,{scope:t,children:i.jsx(oP,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(g=>g+1),[]),onToastRemove:p.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:a})})};kj.displayName=Jm;var Pj="ToastViewport",iP=["F8"],rf="toast.viewportPause",nf="toast.viewportResume",Tj=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=iP,label:s="Notifications ({hotkey})",...o}=e,a=vu(Pj,r),l=nP(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=Me(t,h,a.onViewportChange),g=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;p.useEffect(()=>{const j=x=>{var v;n.length!==0&&n.every(b=>x[b]||x.code===b)&&((v=h.current)==null||v.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[n]),p.useEffect(()=>{const j=c.current,x=h.current;if(w&&j&&x){const y=()=>{if(!a.isClosePausedRef.current){const E=new CustomEvent(rf);x.dispatchEvent(E),a.isClosePausedRef.current=!0}},v=()=>{if(a.isClosePausedRef.current){const E=new CustomEvent(nf);x.dispatchEvent(E),a.isClosePausedRef.current=!1}},b=E=>{!j.contains(E.relatedTarget)&&v()},S=()=>{j.contains(document.activeElement)||v()};return j.addEventListener("focusin",y),j.addEventListener("focusout",b),j.addEventListener("pointermove",y),j.addEventListener("pointerleave",S),window.addEventListener("blur",y),window.addEventListener("focus",v),()=>{j.removeEventListener("focusin",y),j.removeEventListener("focusout",b),j.removeEventListener("pointermove",y),j.removeEventListener("pointerleave",S),window.removeEventListener("blur",y),window.removeEventListener("focus",v)}}},[w,a.isClosePausedRef]);const m=p.useCallback(({tabbingDirection:j})=>{const y=l().map(v=>{const b=v.ref.current,S=[b,...xP(b)];return j==="forwards"?S:S.reverse()});return(j==="forwards"?y.reverse():y).flat()},[l]);return p.useEffect(()=>{const j=h.current;if(j){const x=y=>{var S,E,N;const v=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!v){const _=document.activeElement,C=y.shiftKey;if(y.target===j&&C){(S=u.current)==null||S.focus();return}const O=m({tabbingDirection:C?"backwards":"forwards"}),D=O.findIndex(k=>k===_);_d(O.slice(D+1))?y.preventDefault():C?(E=u.current)==null||E.focus():(N=d.current)==null||N.focus()}};return j.addEventListener("keydown",x),()=>j.removeEventListener("keydown",x)}},[l,m]),i.jsxs(K2,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&i.jsx(sf,{ref:u,onFocusFromOutsideViewport:()=>{const j=m({tabbingDirection:"forwards"});_d(j)}}),i.jsx(Ym.Slot,{scope:r,children:i.jsx(me.ol,{tabIndex:-1,...o,ref:f})}),w&&i.jsx(sf,{ref:d,onFocusFromOutsideViewport:()=>{const j=m({tabbingDirection:"backwards"});_d(j)}})]})});Tj.displayName=Pj;var Aj="ToastFocusProxy",sf=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=vu(Aj,r);return i.jsx(Km,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&n()}})});sf.displayName=Aj;var qa="Toast",aP="toast.swipeStart",lP="toast.swipeMove",cP="toast.swipeCancel",uP="toast.swipeEnd",Rj=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...a}=e,[l,c]=Qs({prop:n,defaultProp:s??!0,onChange:o,caller:qa});return i.jsx(gi,{present:r||l,children:i.jsx(fP,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:yr(e.onPause),onResume:yr(e.onResume),onSwipeStart:ue(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ue(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Rj.displayName=qa;var[dP,hP]=Ej(qa,{onClose(){}}),fP=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:g,...w}=e,m=vu(qa,r),[j,x]=p.useState(null),y=Me(t,k=>x(k)),v=p.useRef(null),b=p.useRef(null),S=s||m.duration,E=p.useRef(0),N=p.useRef(S),_=p.useRef(0),{onToastAdd:C,onToastRemove:I}=m,L=yr(()=>{var U;(j==null?void 0:j.contains(document.activeElement))&&((U=m.viewport)==null||U.focus()),a()}),O=p.useCallback(k=>{!k||k===1/0||(window.clearTimeout(_.current),E.current=new Date().getTime(),_.current=window.setTimeout(L,k))},[L]);p.useEffect(()=>{const k=m.viewport;if(k){const U=()=>{O(N.current),u==null||u()},$=()=>{const A=new Date().getTime()-E.current;N.current=N.current-A,window.clearTimeout(_.current),c==null||c()};return k.addEventListener(rf,$),k.addEventListener(nf,U),()=>{k.removeEventListener(rf,$),k.removeEventListener(nf,U)}}},[m.viewport,S,c,u,O]),p.useEffect(()=>{o&&!m.isClosePausedRef.current&&O(S)},[o,S,m.isClosePausedRef,O]),p.useEffect(()=>(C(),()=>I()),[C,I]);const D=p.useMemo(()=>j?Fj(j):null,[j]);return m.viewport?i.jsxs(i.Fragment,{children:[D&&i.jsx(mP,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:D}),i.jsx(dP,{scope:r,onClose:L,children:oo.createPortal(i.jsx(Ym.ItemSlot,{scope:r,children:i.jsx(G2,{asChild:!0,onEscapeKeyDown:ue(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||L(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...w,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ue(e.onKeyDown,k=>{k.key==="Escape"&&(l==null||l(k.nativeEvent),k.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:ue(e.onPointerDown,k=>{k.button===0&&(v.current={x:k.clientX,y:k.clientY})}),onPointerMove:ue(e.onPointerMove,k=>{if(!v.current)return;const U=k.clientX-v.current.x,$=k.clientY-v.current.y,A=!!b.current,P=["left","right"].includes(m.swipeDirection),T=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,V=P?T(0,U):0,R=P?0:T(0,$),H=k.pointerType==="touch"?10:2,oe={x:V,y:R},ce={originalEvent:k,delta:oe};A?(b.current=oe,_l(lP,h,ce,{discrete:!1})):Vv(oe,m.swipeDirection,H)?(b.current=oe,_l(aP,d,ce,{discrete:!1}),k.target.setPointerCapture(k.pointerId)):(Math.abs(U)>H||Math.abs($)>H)&&(v.current=null)}),onPointerUp:ue(e.onPointerUp,k=>{const U=b.current,$=k.target;if($.hasPointerCapture(k.pointerId)&&$.releasePointerCapture(k.pointerId),b.current=null,v.current=null,U){const A=k.currentTarget,P={originalEvent:k,delta:U};Vv(U,m.swipeDirection,m.swipeThreshold)?_l(uP,g,P,{discrete:!0}):_l(cP,f,P,{discrete:!0}),A.addEventListener("click",T=>T.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),mP=e=>{const{__scopeToast:t,children:r,...n}=e,s=vu(qa,t),[o,a]=p.useState(!1),[l,c]=p.useState(!1);return vP(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(gu,{asChild:!0,children:i.jsx(Km,{...n,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},pP="ToastTitle",Oj=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(me.div,{...n,ref:t})});Oj.displayName=pP;var gP="ToastDescription",Ij=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(me.div,{...n,ref:t})});Ij.displayName=gP;var Lj="ToastAction",Mj=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx($j,{altText:r,asChild:!0,children:i.jsx(Xm,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Lj}\`. Expected non-empty \`string\`.`),null)});Mj.displayName=Lj;var Dj="ToastClose",Xm=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=hP(Dj,r);return i.jsx($j,{asChild:!0,children:i.jsx(me.button,{type:"button",...n,ref:t,onClick:ue(e.onClick,s.onClose)})})});Xm.displayName=Dj;var $j=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function Fj(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),yP(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...Fj(n))}}),t}function _l(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?bj(s,o):s.dispatchEvent(o)}var Vv=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function vP(e=()=>{}){const t=yr(e);_t(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function yP(e){return e.nodeType===e.ELEMENT_NODE}function xP(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _d(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var wP=kj,Vj=Tj,Uj=Rj,Bj=Oj,zj=Ij,Wj=Mj,qj=Xm;const Uv=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Bv=pj,yu=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Bv(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],h=o==null?void 0:o[u];if(d===null)return null;const f=Uv(d)||Uv(h);return s[u][f]}),l=r&&Object.entries(r).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:h,className:f,...g}=d;return Object.entries(g).every(w=>{let[m,j]=w;return Array.isArray(j)?j.includes({...o,...l}[m]):{...o,...l}[m]===j})?[...u,h,f]:u},[]);return Bv(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};var jP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),te=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,children:l,...c},u)=>p.createElement("svg",{ref:u,...jP,width:s,height:s,stroke:n,strokeWidth:a?Number(o)*24/Number(s):o,className:`lucide lucide-${bP(e)}`,...c},[...t.map(([d,h])=>p.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r},Qm=te("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),SP=te("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),zv=te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Hj=te("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),_P=te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),CP=te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Gj=te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),Wv=te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),NP=te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Zm=te("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),EP=te("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Kj=te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),kP=te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),PP=te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Jj=te("CornerDownRight",[["polyline",{points:"15 10 20 15 15 20",key:"1q7qjw"}],["path",{d:"M4 4v7a4 4 0 0 0 4 4h12",key:"z08zvw"}]]),Yj=te("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),xn=te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Xj=te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),TP=te("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ep=te("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Pa=te("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),AP=te("GalleryHorizontalEnd",[["path",{d:"M2 7v10",key:"a2pl2d"}],["path",{d:"M6 5v14",key:"1kq3d7"}],["rect",{width:"12",height:"18",x:"10",y:"3",rx:"2",key:"13i7bc"}]]),ta=te("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Cd=te("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),RP=te("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),OP=te("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),of=te("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),IP=te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),LP=te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),MP=te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Ic=te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),DP=te("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Hr=te("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Ha=te("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),qv=te("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),$P=te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),sr=te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),af=te("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Hv=te("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Gv=te("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Qj=te("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),lf=te("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Ta=te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),FP=te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),cf=te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),VP=te("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),UP=te("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Aa=te("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Ra=te("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]),uf=te("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Kv=te("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),ao=te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),BP=te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),xu=te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Jv=te("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Zj=te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),qs=te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hn=te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),zP=te("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),df=te("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Oa=te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),WP=wP,eb=de.forwardRef(({className:e,...t},r)=>i.jsx(Vj,{ref:r,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));eb.displayName=Vj.displayName;const qP=yu("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tb=de.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(Uj,{ref:n,className:Ce(qP({variant:t}),e),...r}));tb.displayName=Uj.displayName;const HP=de.forwardRef(({className:e,...t},r)=>i.jsx(Wj,{ref:r,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));HP.displayName=Wj.displayName;const rb=de.forwardRef(({className:e,...t},r)=>i.jsx(qj,{ref:r,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(Oa,{className:"h-4 w-4"})}));rb.displayName=qj.displayName;const nb=de.forwardRef(({className:e,...t},r)=>i.jsx(Bj,{ref:r,className:Ce("text-sm font-semibold",e),...t}));nb.displayName=Bj.displayName;const sb=de.forwardRef(({className:e,...t},r)=>i.jsx(zj,{ref:r,className:Ce("text-sm opacity-90",e),...t}));sb.displayName=zj.displayName;const GP=1;let Nd=0;function KP(){return Nd=(Nd+1)%Number.MAX_VALUE,Nd.toString()}const Ot={state:{toasts:[]},listeners:[],getState:()=>Ot.state,setState:e=>{typeof e=="function"?Ot.state=e(Ot.state):Ot.state={...Ot.state,...e},Ot.listeners.forEach(t=>t(Ot.state))},subscribe:e=>(Ot.listeners.push(e),()=>{Ot.listeners=Ot.listeners.filter(t=>t!==e)})},JP=({...e})=>{const t=KP(),r=s=>Ot.setState(o=>({...o,toasts:o.toasts.map(a=>a.id===t?{...a,...s}:a)})),n=()=>Ot.setState(s=>({...s,toasts:s.toasts.filter(o=>o.id!==t)}));return Ot.setState(s=>({...s,toasts:[{...e,id:t,dismiss:n},...s.toasts].slice(0,GP)})),{id:t,dismiss:n,update:r}};function at(){const[e,t]=p.useState(Ot.getState());return p.useEffect(()=>Ot.subscribe(n=>{t(n)}),[]),p.useEffect(()=>{const r=[];return e.toasts.forEach(n=>{if(n.duration===1/0)return;const s=setTimeout(()=>{n.dismiss()},n.duration||5e3);r.push(s)}),()=>{r.forEach(n=>clearTimeout(n))}},[e.toasts]),{toast:JP,toasts:e.toasts}}function YP(){const{toasts:e}=at();return i.jsxs(WP,{children:[e.map(({id:t,title:r,description:n,action:s,dismiss:o,...a})=>i.jsxs(tb,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(nb,{children:r}),n&&i.jsx(sb,{children:n})]}),s,i.jsx(rb,{})]},t)),i.jsx(eb,{})]})}const ob=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),wu=p.createContext({}),ju=p.createContext(null),bu=typeof document<"u",tp=bu?p.useLayoutEffect:p.useEffect,ib=p.createContext({strict:!1}),rp=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),XP="framerAppearId",ab="data-"+rp(XP);function QP(e,t,r,n){const{visualElement:s}=p.useContext(wu),o=p.useContext(ib),a=p.useContext(ju),l=p.useContext(ob).reducedMotion,c=p.useRef();n=n||o.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;p.useInsertionEffect(()=>{u&&u.update(r,a)});const d=p.useRef(!!(r[ab]&&!window.HandoffComplete));return tp(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),p.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Do(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ZP(e,t,r){return p.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Do(r)&&(r.current=n))},[t])}function Ia(e){return typeof e=="string"||Array.isArray(e)}function Su(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const np=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sp=["initial",...np];function _u(e){return Su(e.animate)||sp.some(t=>Ia(e[t]))}function lb(e){return!!(_u(e)||e.variants)}function eT(e,t){if(_u(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Ia(r)?r:void 0,animate:Ia(n)?n:void 0}}return e.inherit!==!1?t:{}}function tT(e){const{initial:t,animate:r}=eT(e,p.useContext(wu));return p.useMemo(()=>({initial:t,animate:r}),[Yv(t),Yv(r)])}function Yv(e){return Array.isArray(e)?e.join(" "):e}const Xv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},La={};for(const e in Xv)La[e]={isEnabled:t=>Xv[e].some(r=>!!t[r])};function rT(e){for(const t in e)La[t]={...La[t],...e[t]}}const op=p.createContext({}),cb=p.createContext({}),nT=Symbol.for("motionComponentSymbol");function sT({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&rT(e);function o(l,c){let u;const d={...p.useContext(ob),...l,layoutId:oT(l)},{isStatic:h}=d,f=tT(l),g=n(l,h);if(!h&&bu){f.visualElement=QP(s,g,d,t);const w=p.useContext(cb),m=p.useContext(ib).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,m,e,w))}return p.createElement(wu.Provider,{value:f},u&&f.visualElement?p.createElement(u,{visualElement:f.visualElement,...d}):null,r(s,l,ZP(g,f.visualElement,c),g,h,f.visualElement))}const a=p.forwardRef(o);return a[nT]=s,a}function oT({layoutId:e}){const t=p.useContext(op).id;return t&&e!==void 0?t+"-"+e:e}function iT(e){function t(n,s={}){return sT(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const aT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ip(e){return typeof e!="string"||e.includes("-")?!1:!!(aT.indexOf(e)>-1||/[A-Z]/.test(e))}const Lc={};function lT(e){Object.assign(Lc,e)}const Ga=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lo=new Set(Ga);function ub(e,{layout:t,layoutId:r}){return lo.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Lc[e]||e==="opacity")}const Kt=e=>!!(e&&e.getVelocity),cT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},uT=Ga.length;function dT(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let o="";for(let a=0;a<uT;a++){const l=Ga[a];if(e[l]!==void 0){const c=cT[l]||l;o+=`${c}(${e[l]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),s?o=s(e,n?"":o):r&&n&&(o="none"),o}const db=e=>t=>typeof t=="string"&&t.startsWith(e),hb=db("--"),hf=db("var(--"),hT=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,fT=(e,t)=>t&&typeof e=="number"?t.transform(e):e,cs=(e,t,r)=>Math.min(Math.max(r,e),t),co={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ra={...co,transform:e=>cs(0,1,e)},Cl={...co,default:1},na=e=>Math.round(e*1e5)/1e5,Cu=/(-)?([\d]*\.?[\d])+/g,fb=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,mT=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Ka(e){return typeof e=="string"}const Ja=e=>({test:t=>Ka(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),An=Ja("deg"),Gr=Ja("%"),le=Ja("px"),pT=Ja("vh"),gT=Ja("vw"),Qv={...Gr,parse:e=>Gr.parse(e)/100,transform:e=>Gr.transform(e*100)},Zv={...co,transform:Math.round},mb={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,size:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,rotate:An,rotateX:An,rotateY:An,rotateZ:An,scale:Cl,scaleX:Cl,scaleY:Cl,scaleZ:Cl,skew:An,skewX:An,skewY:An,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:ra,originX:Qv,originY:Qv,originZ:le,zIndex:Zv,fillOpacity:ra,strokeOpacity:ra,numOctaves:Zv};function ap(e,t,r,n){const{style:s,vars:o,transform:a,transformOrigin:l}=e;let c=!1,u=!1,d=!0;for(const h in t){const f=t[h];if(hb(h)){o[h]=f;continue}const g=mb[h],w=fT(f,g);if(lo.has(h)){if(c=!0,a[h]=w,!d)continue;f!==(g.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,l[h]=w):s[h]=w}if(t.transform||(c||n?s.transform=dT(e.transform,r,d,n):s.transform&&(s.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:g=0}=l;s.transformOrigin=`${h} ${f} ${g}`}}const lp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function pb(e,t,r){for(const n in t)!Kt(t[n])&&!ub(n,r)&&(e[n]=t[n])}function vT({transformTemplate:e},t,r){return p.useMemo(()=>{const n=lp();return ap(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function yT(e,t,r){const n=e.style||{},s={};return pb(s,n,e),Object.assign(s,vT(e,t,r)),e.transformValues?e.transformValues(s):s}function xT(e,t,r){const n={},s=yT(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const wT=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wT.has(e)}let gb=e=>!Mc(e);function jT(e){e&&(gb=t=>t.startsWith("on")?!Mc(t):e(t))}try{jT(require("@emotion/is-prop-valid").default)}catch{}function bT(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(gb(s)||r===!0&&Mc(s)||!t&&!Mc(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function ey(e,t,r){return typeof e=="string"?e:le.transform(t+r*e)}function ST(e,t,r){const n=ey(t,e.x,e.width),s=ey(r,e.y,e.height);return`${n} ${s}`}const _T={offset:"stroke-dashoffset",array:"stroke-dasharray"},CT={offset:"strokeDashoffset",array:"strokeDasharray"};function NT(e,t,r=1,n=0,s=!0){e.pathLength=1;const o=s?_T:CT;e[o.offset]=le.transform(-n);const a=le.transform(t),l=le.transform(r);e[o.array]=`${a} ${l}`}function cp(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h,f){if(ap(e,u,d,f),h){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:w,dimensions:m}=e;g.transform&&(m&&(w.transform=g.transform),delete g.transform),m&&(s!==void 0||o!==void 0||w.transform)&&(w.transformOrigin=ST(m,s!==void 0?s:.5,o!==void 0?o:.5)),t!==void 0&&(g.x=t),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),a!==void 0&&NT(g,a,l,c,!1)}const vb=()=>({...lp(),attrs:{}}),up=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ET(e,t,r,n){const s=p.useMemo(()=>{const o=vb();return cp(o,t,{enableHardwareAcceleration:!1},up(n),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};pb(o,e.style,e),s.style={...o,...s.style}}return s}function kT(e=!1){return(r,n,s,{latestValues:o},a)=>{const c=(ip(r)?ET:xT)(n,o,a,r),d={...bT(n,typeof r=="string",e),...c,ref:s},{children:h}=n,f=p.useMemo(()=>Kt(h)?h.get():h,[h]);return p.createElement(r,{...d,children:f})}}function yb(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const o in r)e.style.setProperty(o,r[o])}const xb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wb(e,t,r,n){yb(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(xb.has(s)?s:rp(s),t.attrs[s])}function dp(e,t){const{style:r}=e,n={};for(const s in r)(Kt(r[s])||t.style&&Kt(t.style[s])||ub(s,e))&&(n[s]=r[s]);return n}function jb(e,t){const r=dp(e,t);for(const n in e)if(Kt(e[n])||Kt(t[n])){const s=Ga.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function hp(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function bb(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Dc=e=>Array.isArray(e),PT=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),TT=e=>Dc(e)?e[e.length-1]||0:e;function Zl(e){const t=Kt(e)?e.get():e;return PT(t)?t.toValue():t}function AT({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,o){const a={latestValues:RT(n,s,o,e),renderState:t()};return r&&(a.mount=l=>r(n,l,a)),a}const Sb=e=>(t,r)=>{const n=p.useContext(wu),s=p.useContext(ju),o=()=>AT(e,t,n,s);return r?o():bb(o)};function RT(e,t,r,n){const s={},o=n(e,{});for(const f in o)s[f]=Zl(o[f]);let{initial:a,animate:l}=e;const c=_u(e),u=lb(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?l:a;return h&&typeof h!="boolean"&&!Su(h)&&(Array.isArray(h)?h:[h]).forEach(g=>{const w=hp(e,g);if(!w)return;const{transitionEnd:m,transition:j,...x}=w;for(const y in x){let v=x[y];if(Array.isArray(v)){const b=d?v.length-1:0;v=v[b]}v!==null&&(s[y]=v)}for(const y in m)s[y]=m[y]}),s}const Ge=e=>e;class ty{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function OT(e){let t=new ty,r=new ty,n=0,s=!1,o=!1;const a=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const h=d&&s,f=h?t:r;return u&&a.add(c),f.add(c)&&h&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),a.delete(c)},process:c=>{if(s){o=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const d=t.order[u];d(c),a.has(d)&&(l.schedule(d),e())}s=!1,o&&(o=!1,l.process(c))}};return l}const Nl=["prepare","read","update","preRender","render","postRender"],IT=40;function LT(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=Nl.reduce((h,f)=>(h[f]=OT(()=>r=!0),h),{}),a=h=>o[h].process(s),l=()=>{const h=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(h-s.timestamp,IT),1),s.timestamp=h,s.isProcessing=!0,Nl.forEach(a),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:Nl.reduce((h,f)=>{const g=o[f];return h[f]=(w,m=!1,j=!1)=>(r||c(),g.schedule(w,m,j)),h},{}),cancel:h=>Nl.forEach(f=>o[f].cancel(h)),state:s,steps:o}}const{schedule:Le,cancel:wn,state:Pt,steps:Ed}=LT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ge,!0),MT={useVisualState:Sb({scrapeMotionValuesFromProps:jb,createRenderState:vb,onMount:(e,t,{renderState:r,latestValues:n})=>{Le.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Le.render(()=>{cp(r,n,{enableHardwareAcceleration:!1},up(t.tagName),e.transformTemplate),wb(t,r)})}})},DT={useVisualState:Sb({scrapeMotionValuesFromProps:dp,createRenderState:lp})};function $T(e,{forwardMotionProps:t=!1},r,n){return{...ip(e)?MT:DT,preloadedFeatures:r,useRender:kT(t),createVisualElement:n,Component:e}}function un(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const _b=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Nu(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const FT=e=>t=>_b(t)&&e(t,Nu(t));function fn(e,t,r,n){return un(e,t,FT(r),n)}const VT=(e,t)=>r=>t(e(r)),ns=(...e)=>e.reduce(VT);function Cb(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const ry=Cb("dragHorizontal"),ny=Cb("dragVertical");function Nb(e){let t=!1;if(e==="y")t=ny();else if(e==="x")t=ry();else{const r=ry(),n=ny();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function Eb(){const e=Nb(!0);return e?(e(),!1):!0}class ys{constructor(t){this.isMounted=!1,this.node=t}update(){}}function sy(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(o,a)=>{if(o.pointerType==="touch"||Eb())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Le.update(()=>l[n](o,a))};return fn(e.current,r,s,{passive:!e.getProps()[n]})}class UT extends ys{mount(){this.unmount=ns(sy(this.node,!0),sy(this.node,!1))}unmount(){}}class BT extends ys{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ns(un(this.node.current,"focus",()=>this.onFocus()),un(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kb=(e,t)=>t?e===t?!0:kb(e,t.parentElement):!1;function kd(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,Nu(r))}class zT extends ys{constructor(){super(...arguments),this.removeStartListeners=Ge,this.removeEndListeners=Ge,this.removeAccessibleListeners=Ge,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),o=fn(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Le.update(()=>{!h&&!kb(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),a=fn(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=ns(o,a),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||kd("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Le.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=un(this.node.current,"keyup",a),kd("down",(l,c)=>{this.startPress(l,c)})},r=un(this.node.current,"keydown",t),n=()=>{this.isPressing&&kd("cancel",(o,a)=>this.cancelPress(o,a))},s=un(this.node.current,"blur",n);this.removeAccessibleListeners=ns(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Le.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Eb()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Le.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=fn(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=un(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ns(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ff=new WeakMap,Pd=new WeakMap,WT=e=>{const t=ff.get(e.target);t&&t(e)},qT=e=>{e.forEach(WT)};function HT({root:e,...t}){const r=e||document;Pd.has(r)||Pd.set(r,{});const n=Pd.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(qT,{root:e,...t})),n[s]}function GT(e,t,r){const n=HT(t);return ff.set(e,r),n.observe(e),()=>{ff.delete(e),n.unobserve(e)}}const KT={some:0,all:1};class JT extends ys{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:o}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:KT[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return GT(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(YT(t,r))&&this.startObserver()}unmount(){}}function YT({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const XT={inView:{Feature:JT},tap:{Feature:zT},focus:{Feature:BT},hover:{Feature:UT}};function Pb(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function QT(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function ZT(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function Eu(e,t,r){const n=e.getProps();return hp(n,t,r!==void 0?r:n.custom,QT(e),ZT(e))}let eA=Ge,fp=Ge;const ss=e=>e*1e3,mn=e=>e/1e3,tA={current:!1},Tb=e=>Array.isArray(e)&&typeof e[0]=="number";function Ab(e){return!!(!e||typeof e=="string"&&Rb[e]||Tb(e)||Array.isArray(e)&&e.every(Ab))}const Bi=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,Rb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bi([0,.65,.55,1]),circOut:Bi([.55,0,1,.45]),backIn:Bi([.31,.01,.66,-.59]),backOut:Bi([.33,1.53,.69,.99])};function Ob(e){if(e)return Tb(e)?Bi(e):Array.isArray(e)?e.map(Ob):Rb[e]}function rA(e,t,r,{delay:n=0,duration:s,repeat:o=0,repeatType:a="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const d=Ob(l);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:n,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function nA(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const Ib=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,sA=1e-7,oA=12;function iA(e,t,r,n,s){let o,a,l=0;do a=t+(r-t)/2,o=Ib(a,n,s)-e,o>0?r=a:t=a;while(Math.abs(o)>sA&&++l<oA);return a}function Ya(e,t,r,n){if(e===t&&r===n)return Ge;const s=o=>iA(o,0,1,e,r);return o=>o===0||o===1?o:Ib(s(o),t,n)}const aA=Ya(.42,0,1,1),lA=Ya(0,0,.58,1),Lb=Ya(.42,0,.58,1),cA=e=>Array.isArray(e)&&typeof e[0]!="number",Mb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Db=e=>t=>1-e(1-t),mp=e=>1-Math.sin(Math.acos(e)),$b=Db(mp),uA=Mb(mp),Fb=Ya(.33,1.53,.69,.99),pp=Db(Fb),dA=Mb(pp),hA=e=>(e*=2)<1?.5*pp(e):.5*(2-Math.pow(2,-10*(e-1))),fA={linear:Ge,easeIn:aA,easeInOut:Lb,easeOut:lA,circIn:mp,circInOut:uA,circOut:$b,backIn:pp,backInOut:dA,backOut:Fb,anticipate:hA},oy=e=>{if(Array.isArray(e)){fp(e.length===4);const[t,r,n,s]=e;return Ya(t,r,n,s)}else if(typeof e=="string")return fA[e];return e},gp=(e,t)=>r=>!!(Ka(r)&&mT.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),Vb=(e,t,r)=>n=>{if(!Ka(n))return n;const[s,o,a,l]=n.match(Cu);return{[e]:parseFloat(s),[t]:parseFloat(o),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},mA=e=>cs(0,255,e),Td={...co,transform:e=>Math.round(mA(e))},Bs={test:gp("rgb","red"),parse:Vb("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Td.transform(e)+", "+Td.transform(t)+", "+Td.transform(r)+", "+na(ra.transform(n))+")"};function pA(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const mf={test:gp("#"),parse:pA,transform:Bs.transform},$o={test:gp("hsl","hue"),parse:Vb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Gr.transform(na(t))+", "+Gr.transform(na(r))+", "+na(ra.transform(n))+")"},It={test:e=>Bs.test(e)||mf.test(e)||$o.test(e),parse:e=>Bs.test(e)?Bs.parse(e):$o.test(e)?$o.parse(e):mf.parse(e),transform:e=>Ka(e)?e:e.hasOwnProperty("red")?Bs.transform(e):$o.transform(e)},ze=(e,t,r)=>-r*e+r*t+e;function Ad(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function gA({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,o=0,a=0;if(!t)s=o=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Ad(c,l,e+1/3),o=Ad(c,l,e),a=Ad(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:n}}const Rd=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},vA=[mf,Bs,$o],yA=e=>vA.find(t=>t.test(e));function iy(e){const t=yA(e);let r=t.parse(e);return t===$o&&(r=gA(r)),r}const Ub=(e,t)=>{const r=iy(e),n=iy(t),s={...r};return o=>(s.red=Rd(r.red,n.red,o),s.green=Rd(r.green,n.green,o),s.blue=Rd(r.blue,n.blue,o),s.alpha=ze(r.alpha,n.alpha,o),Bs.transform(s))};function xA(e){var t,r;return isNaN(e)&&Ka(e)&&(((t=e.match(Cu))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(fb))===null||r===void 0?void 0:r.length)||0)>0}const Bb={regex:hT,countKey:"Vars",token:"${v}",parse:Ge},zb={regex:fb,countKey:"Colors",token:"${c}",parse:It.parse},Wb={regex:Cu,countKey:"Numbers",token:"${n}",parse:co.parse};function Od(e,{regex:t,countKey:r,token:n,parse:s}){const o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(s)))}function $c(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&Od(r,Bb),Od(r,zb),Od(r,Wb),r}function qb(e){return $c(e).values}function Hb(e){const{values:t,numColors:r,numVars:n,tokenised:s}=$c(e),o=t.length;return a=>{let l=s;for(let c=0;c<o;c++)c<n?l=l.replace(Bb.token,a[c]):c<n+r?l=l.replace(zb.token,It.transform(a[c])):l=l.replace(Wb.token,na(a[c]));return l}}const wA=e=>typeof e=="number"?0:e;function jA(e){const t=qb(e);return Hb(e)(t.map(wA))}const us={test:xA,parse:qb,createTransformer:Hb,getAnimatableNone:jA},Gb=(e,t)=>r=>`${r>0?t:e}`;function Kb(e,t){return typeof e=="number"?r=>ze(e,t,r):It.test(e)?Ub(e,t):e.startsWith("var(")?Gb(e,t):Yb(e,t)}const Jb=(e,t)=>{const r=[...e],n=r.length,s=e.map((o,a)=>Kb(o,t[a]));return o=>{for(let a=0;a<n;a++)r[a]=s[a](o);return r}},bA=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Kb(e[s],t[s]));return s=>{for(const o in n)r[o]=n[o](s);return r}},Yb=(e,t)=>{const r=us.createTransformer(t),n=$c(e),s=$c(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?ns(Jb(n.values,s.values),r):Gb(e,t)},Ma=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},ay=(e,t)=>r=>ze(e,t,r);function SA(e){return typeof e=="number"?ay:typeof e=="string"?It.test(e)?Ub:Yb:Array.isArray(e)?Jb:typeof e=="object"?bA:ay}function _A(e,t,r){const n=[],s=r||SA(e[0]),o=e.length-1;for(let a=0;a<o;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||Ge:t;l=ns(c,l)}n.push(l)}return n}function Xb(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const o=e.length;if(fp(o===t.length),o===1)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=_A(t,n,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const h=Ma(e[d],e[d+1],u);return a[d](h)};return r?u=>c(cs(e[0],e[o-1],u)):c}function CA(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Ma(0,t,n);e.push(ze(r,1,s))}}function NA(e){const t=[0];return CA(t,e.length-1),t}function EA(e,t){return e.map(r=>r*t)}function kA(e,t){return e.map(()=>t||Lb).splice(0,e.length-1)}function Fc({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=cA(n)?n.map(oy):oy(n),o={done:!1,value:t[0]},a=EA(r&&r.length===t.length?r:NA(t),e),l=Xb(a,t,{ease:Array.isArray(s)?s:kA(t,s)});return{calculatedDuration:e,next:c=>(o.value=l(c),o.done=c>=e,o)}}function Qb(e,t){return t?e*(1e3/t):0}const PA=5;function Zb(e,t,r){const n=Math.max(t-PA,0);return Qb(r-e(n),t-n)}const Id=.001,TA=.01,ly=10,AA=.05,RA=1;function OA({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,o;eA(e<=ss(ly));let a=1-t;a=cs(AA,RA,a),e=cs(TA,ly,mn(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-r,g=pf(u,a),w=Math.exp(-h);return Id-f/g*w},o=u=>{const h=u*a*e,f=h*r+r,g=Math.pow(a,2)*Math.pow(u,2)*e,w=Math.exp(-h),m=pf(Math.pow(u,2),a);return(-s(u)+Id>0?-1:1)*((f-g)*w)/m}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-Id+d*h},o=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=LA(s,o,l);if(e=ss(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const IA=12;function LA(e,t,r){let n=r;for(let s=1;s<IA;s++)n=n-e(n)/t(n);return n}function pf(e,t){return e*Math.sqrt(1-t*t)}const MA=["duration","bounce"],DA=["stiffness","damping","mass"];function cy(e,t){return t.some(r=>e[r]!==void 0)}function $A(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!cy(e,DA)&&cy(e,MA)){const r=OA(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function e1({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],o=e[e.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=$A({...n,velocity:-mn(n.velocity||0)}),g=h||0,w=c/(2*Math.sqrt(l*u)),m=o-s,j=mn(Math.sqrt(l/u)),x=Math.abs(m)<5;r||(r=x?.01:2),t||(t=x?.005:.5);let y;if(w<1){const v=pf(j,w);y=b=>{const S=Math.exp(-w*j*b);return o-S*((g+w*j*m)/v*Math.sin(v*b)+m*Math.cos(v*b))}}else if(w===1)y=v=>o-Math.exp(-j*v)*(m+(g+j*m)*v);else{const v=j*Math.sqrt(w*w-1);y=b=>{const S=Math.exp(-w*j*b),E=Math.min(v*b,300);return o-S*((g+w*j*m)*Math.sinh(E)+v*m*Math.cosh(E))/v}}return{calculatedDuration:f&&d||null,next:v=>{const b=y(v);if(f)a.done=v>=d;else{let S=g;v!==0&&(w<1?S=Zb(y,v,b):S=0);const E=Math.abs(S)<=r,N=Math.abs(o-b)<=t;a.done=E&&N}return a.value=a.done?o:b,a}}}function uy({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},g=_=>l!==void 0&&_<l||c!==void 0&&_>c,w=_=>l===void 0?c:c===void 0||Math.abs(l-_)<Math.abs(c-_)?l:c;let m=r*t;const j=h+m,x=a===void 0?j:a(j);x!==j&&(m=x-h);const y=_=>-m*Math.exp(-_/n),v=_=>x+y(_),b=_=>{const C=y(_),I=v(_);f.done=Math.abs(C)<=u,f.value=f.done?x:I};let S,E;const N=_=>{g(f.value)&&(S=_,E=e1({keyframes:[f.value,w(f.value)],velocity:Zb(v,_,f.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:_=>{let C=!1;return!E&&S===void 0&&(C=!0,b(_),N(_)),S!==void 0&&_>S?E.next(_-S):(!C&&b(_),f)}}}const FA=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Le.update(t,!0),stop:()=>wn(t),now:()=>Pt.isProcessing?Pt.timestamp:performance.now()}},dy=2e4;function hy(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<dy;)t+=r,n=e.next(t);return t>=dy?1/0:t}const VA={decay:uy,inertia:uy,tween:Fc,keyframes:Fc,spring:e1};function Vc({autoplay:e=!0,delay:t=0,driver:r=FA,keyframes:n,type:s="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let g=1,w=!1,m,j;const x=()=>{j=new Promise(R=>{m=R})};x();let y;const v=VA[s]||Fc;let b;v!==Fc&&typeof n[0]!="number"&&(b=Xb([0,100],n,{clamp:!1}),n=[0,100]);const S=v({...f,keyframes:n});let E;l==="mirror"&&(E=v({...f,keyframes:[...n].reverse(),velocity:-(f.velocity||0)}));let N="idle",_=null,C=null,I=null;S.calculatedDuration===null&&o&&(S.calculatedDuration=hy(S));const{calculatedDuration:L}=S;let O=1/0,D=1/0;L!==null&&(O=L+a,D=O*(o+1)-a);let k=0;const U=R=>{if(C===null)return;g>0&&(C=Math.min(C,R)),g<0&&(C=Math.min(R-D/g,C)),_!==null?k=_:k=Math.round(R-C)*g;const H=k-t*(g>=0?1:-1),oe=g>=0?H<0:H>D;k=Math.max(H,0),N==="finished"&&_===null&&(k=D);let ce=k,Ne=S;if(o){const Ee=Math.min(k,D)/O;let z=Math.floor(Ee),ie=Ee%1;!ie&&Ee>=1&&(ie=1),ie===1&&z--,z=Math.min(z,o+1),!!(z%2)&&(l==="reverse"?(ie=1-ie,a&&(ie-=a/O)):l==="mirror"&&(Ne=E)),ce=cs(0,1,ie)*O}const ae=oe?{done:!1,value:n[0]}:Ne.next(ce);b&&(ae.value=b(ae.value));let{done:Y}=ae;!oe&&L!==null&&(Y=g>=0?k>=D:k<=0);const X=_===null&&(N==="finished"||N==="running"&&Y);return h&&h(ae.value),X&&P(),ae},$=()=>{y&&y.stop(),y=void 0},A=()=>{N="idle",$(),m(),x(),C=I=null},P=()=>{N="finished",d&&d(),$(),m()},T=()=>{if(w)return;y||(y=r(U));const R=y.now();c&&c(),_!==null?C=R-_:(!C||N==="finished")&&(C=R),N==="finished"&&x(),I=C,_=null,N="running",y.start()};e&&T();const V={then(R,H){return j.then(R,H)},get time(){return mn(k)},set time(R){R=ss(R),k=R,_!==null||!y||g===0?_=R:C=y.now()-R/g},get duration(){const R=S.calculatedDuration===null?hy(S):S.calculatedDuration;return mn(R)},get speed(){return g},set speed(R){R===g||!y||(g=R,V.time=mn(k))},get state(){return N},play:T,pause:()=>{N="paused",_=k},stop:()=>{w=!0,N!=="idle"&&(N="idle",u&&u(),A())},cancel:()=>{I!==null&&U(I),A()},complete:()=>{N="finished"},sample:R=>(C=0,U(R))};return V}function UA(e){let t;return()=>(t===void 0&&(t=e()),t)}const BA=UA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zA=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),El=10,WA=2e4,qA=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Ab(t.ease);function HA(e,t,{onUpdate:r,onComplete:n,...s}){if(!(BA()&&zA.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,l,c,u=!1;const d=()=>{c=new Promise(v=>{l=v})};d();let{keyframes:h,duration:f=300,ease:g,times:w}=s;if(qA(t,s)){const v=Vc({...s,repeat:0,delay:0});let b={done:!1,value:h[0]};const S=[];let E=0;for(;!b.done&&E<WA;)b=v.sample(E),S.push(b.value),E+=El;w=void 0,h=S,f=E-El,g="linear"}const m=rA(e.owner.current,t,h,{...s,duration:f,ease:g,times:w}),j=()=>{u=!1,m.cancel()},x=()=>{u=!0,Le.update(j),l(),d()};return m.onfinish=()=>{u||(e.set(nA(h,s)),n&&n(),x())},{then(v,b){return c.then(v,b)},attachTimeline(v){return m.timeline=v,m.onfinish=null,Ge},get time(){return mn(m.currentTime||0)},set time(v){m.currentTime=ss(v)},get speed(){return m.playbackRate},set speed(v){m.playbackRate=v},get duration(){return mn(f)},play:()=>{a||(m.play(),wn(j))},pause:()=>m.pause(),stop:()=>{if(a=!0,m.playState==="idle")return;const{currentTime:v}=m;if(v){const b=Vc({...s,autoplay:!1});e.setWithVelocity(b.sample(v-El).value,b.sample(v).value,El)}x()},complete:()=>{u||m.finish()},cancel:x}}function GA({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:Ge,pause:Ge,stop:Ge,then:o=>(o(),Promise.resolve()),cancel:Ge,complete:Ge});return t?Vc({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const KA={type:"spring",stiffness:500,damping:25,restSpeed:10},JA=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),YA={type:"keyframes",duration:.8},XA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},QA=(e,{keyframes:t})=>t.length>2?YA:lo.has(e)?e.startsWith("scale")?JA(t[1]):KA:XA,gf=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(us.test(t)||t==="0")&&!t.startsWith("url(")),ZA=new Set(["brightness","contrast","saturate","opacity"]);function eR(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Cu)||[];if(!n)return e;const s=r.replace(n,"");let o=ZA.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+s+")"}const tR=/([a-z-]*)\(.*?\)/g,vf={...us,getAnimatableNone:e=>{const t=e.match(tR);return t?t.map(eR).join(" "):e}},rR={...mb,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:vf,WebkitFilter:vf},vp=e=>rR[e];function t1(e,t){let r=vp(e);return r!==vf&&(r=us),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const r1=e=>/^0[^.\s]+$/.test(e);function nR(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||r1(e)}function sR(e,t,r,n){const s=gf(t,r);let o;Array.isArray(r)?o=[...r]:o=[null,r];const a=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<o.length;u++)o[u]===null&&(o[u]=u===0?a:o[u-1]),nR(o[u])&&c.push(u),typeof o[u]=="string"&&o[u]!=="none"&&o[u]!=="0"&&(l=o[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];o[d]=t1(t,l)}return o}function oR({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function yp(e,t){return e[t]||e.default||e}const iR={skipAnimations:!1},xp=(e,t,r,n={})=>s=>{const o=yp(n,e)||{},a=o.delay||n.delay||0;let{elapsed:l=0}=n;l=l-ss(a);const c=sR(t,e,r,o),u=c[0],d=c[c.length-1],h=gf(e,u),f=gf(e,d);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-l,onUpdate:w=>{t.set(w),o.onUpdate&&o.onUpdate(w)},onComplete:()=>{s(),o.onComplete&&o.onComplete()}};if(oR(o)||(g={...g,...QA(e,g)}),g.duration&&(g.duration=ss(g.duration)),g.repeatDelay&&(g.repeatDelay=ss(g.repeatDelay)),!h||!f||tA.current||o.type===!1||iR.skipAnimations)return GA(g);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const w=HA(t,e,g);if(w)return w}return Vc(g)};function Uc(e){return!!(Kt(e)&&e.add)}const n1=e=>/^\-?\d*\.?\d+$/.test(e);function wp(e,t){e.indexOf(t)===-1&&e.push(t)}function jp(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class bp{constructor(){this.subscriptions=[]}add(t){return wp(this.subscriptions,t),()=>jp(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const aR=e=>!isNaN(parseFloat(e));class lR{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:o,timestamp:a}=Pt;this.lastUpdated!==a&&(this.timeDelta=o,this.lastUpdated=a,Le.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Le.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=aR(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new bp);const n=this.events[t].add(r);return t==="change"?()=>{n(),Le.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Qb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function oi(e,t){return new lR(e,t)}const s1=e=>t=>t.test(e),cR={test:e=>e==="auto",parse:e=>e},o1=[co,le,Gr,An,gT,pT,cR],Li=e=>o1.find(s1(e)),uR=[...o1,It,us],dR=e=>uR.find(s1(e));function hR(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,oi(r))}function fR(e,t){const r=Eu(e,t);let{transitionEnd:n={},transition:s={},...o}=r?e.makeTargetAnimatable(r,!1):{};o={...o,...n};for(const a in o){const l=TT(o[a]);hR(e,a,l)}}function mR(e,t,r){var n,s;const o=Object.keys(t).filter(l=>!e.hasValue(l)),a=o.length;if(a)for(let l=0;l<a;l++){const c=o[l],u=t[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),d!=null&&(typeof d=="string"&&(n1(d)||r1(d))?d=parseFloat(d):!dR(d)&&us.test(u)&&(d=t1(c,u)),e.addValue(c,oi(d,{owner:e})),r[c]===void 0&&(r[c]=d),d!==null&&e.setBaseTarget(c,d))}}function pR(e,t){return t?(t[e]||t.default||t).from:void 0}function gR(e,t,r){const n={};for(const s in e){const o=pR(s,t);if(o!==void 0)n[s]=o;else{const a=r.getValue(s);a&&(n[s]=a.get())}}return n}function vR({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function yR(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function i1(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:a,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(o=n);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const h in l){const f=e.getValue(h),g=l[h];if(!f||g===void 0||d&&vR(d,h))continue;const w={delay:r,elapsed:0,...yp(o||{},h)};if(window.HandoffAppearAnimations){const x=e.getProps()[ab];if(x){const y=window.HandoffAppearAnimations(x,h,f,Le);y!==null&&(w.elapsed=y,w.isHandoff=!0)}}let m=!w.isHandoff&&!yR(f,g);if(w.type==="spring"&&(f.getVelocity()||w.velocity)&&(m=!1),f.animation&&(m=!1),m)continue;f.start(xp(h,f,g,e.shouldReduceMotion&&lo.has(h)?{type:!1}:w));const j=f.animation;Uc(c)&&(c.add(h),j.then(()=>c.remove(h))),u.push(j)}return a&&Promise.all(u).then(()=>{a&&fR(e,a)}),u}function yf(e,t,r={}){const n=Eu(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const o=n?()=>Promise.all(i1(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=s;return xR(e,t,u+c,d,h,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(r.delay)])}function xR(e,t,r=0,n=0,s=1,o){const a=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(wR).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(yf(u,t,{...o,delay:r+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function wR(e,t){return e.sortNodePosition(t)}function jR(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(o=>yf(e,o,r));n=Promise.all(s)}else if(typeof t=="string")n=yf(e,t,r);else{const s=typeof t=="function"?Eu(e,t,r.custom):t;n=Promise.all(i1(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const bR=[...np].reverse(),SR=np.length;function _R(e){return t=>Promise.all(t.map(({animation:r,options:n})=>jR(e,r,n)))}function CR(e){let t=_R(e);const r=ER();let n=!0;const s=(c,u)=>{const d=Eu(e,u);if(d){const{transition:h,transitionEnd:f,...g}=d;c={...c,...g,...f}}return c};function o(c){t=c(e)}function a(c,u){const d=e.getProps(),h=e.getVariantContext(!0)||{},f=[],g=new Set;let w={},m=1/0;for(let x=0;x<SR;x++){const y=bR[x],v=r[y],b=d[y]!==void 0?d[y]:h[y],S=Ia(b),E=y===u?v.isActive:null;E===!1&&(m=x);let N=b===h[y]&&b!==d[y]&&S;if(N&&n&&e.manuallyAnimateOnMount&&(N=!1),v.protectedKeys={...w},!v.isActive&&E===null||!b&&!v.prevProp||Su(b)||typeof b=="boolean")continue;let C=NR(v.prevProp,b)||y===u&&v.isActive&&!N&&S||x>m&&S,I=!1;const L=Array.isArray(b)?b:[b];let O=L.reduce(s,{});E===!1&&(O={});const{prevResolvedValues:D={}}=v,k={...D,...O},U=$=>{C=!0,g.has($)&&(I=!0,g.delete($)),v.needsAnimating[$]=!0};for(const $ in k){const A=O[$],P=D[$];if(w.hasOwnProperty($))continue;let T=!1;Dc(A)&&Dc(P)?T=!Pb(A,P):T=A!==P,T?A!==void 0?U($):g.add($):A!==void 0&&g.has($)?U($):v.protectedKeys[$]=!0}v.prevProp=b,v.prevResolvedValues=O,v.isActive&&(w={...w,...O}),n&&e.blockInitialAnimation&&(C=!1),C&&(!N||I)&&f.push(...L.map($=>({animation:$,options:{type:y,...c}})))}if(g.size){const x={};g.forEach(y=>{const v=e.getBaseTarget(y);v!==void 0&&(x[y]=v)}),f.push({animation:x})}let j=!!f.length;return n&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(j=!1),n=!1,j?t(f):Promise.resolve()}function l(c,u,d){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)===null||h===void 0||h.forEach(g=>{var w;return(w=g.animationState)===null||w===void 0?void 0:w.setActive(c,u)}),r[c].isActive=u;const f=a(d,c);for(const g in r)r[g].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>r}}function NR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Pb(t,e):!1}function Ps(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ER(){return{animate:Ps(!0),whileInView:Ps(),whileHover:Ps(),whileTap:Ps(),whileDrag:Ps(),whileFocus:Ps(),exit:Ps()}}class kR extends ys{constructor(t){super(t),t.animationState||(t.animationState=CR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Su(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let PR=0;class TR extends ys{constructor(){super(...arguments),this.id=PR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const o=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&o.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const AR={animation:{Feature:kR},exit:{Feature:TR}},fy=(e,t)=>Math.abs(e-t);function RR(e,t){const r=fy(e.x,t.x),n=fy(e.y,t.y);return Math.sqrt(r**2+n**2)}class a1{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Md(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=RR(h.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:w}=h,{timestamp:m}=Pt;this.history.push({...w,timestamp:m});const{onStart:j,onMove:x}=this.handlers;f||(j&&j(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Ld(f,this.transformPagePoint),Le.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:g,onSessionEnd:w,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=Md(h.type==="pointercancel"?this.lastMoveEventInfo:Ld(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,j),w&&w(h,j)},!_b(t))return;this.dragSnapToOrigin=o,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const a=Nu(t),l=Ld(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Pt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=r;d&&d(t,Md(l,this.history)),this.removeListeners=ns(fn(this.contextWindow,"pointermove",this.handlePointerMove),fn(this.contextWindow,"pointerup",this.handlePointerUp),fn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),wn(this.updatePoint)}}function Ld(e,t){return t?{point:t(e.point)}:e}function my(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Md({point:e},t){return{point:e,delta:my(e,l1(t)),offset:my(e,OR(t)),velocity:IR(t,.1)}}function OR(e){return e[0]}function l1(e){return e[e.length-1]}function IR(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=l1(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>ss(t)));)r--;if(!n)return{x:0,y:0};const o=mn(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function or(e){return e.max-e.min}function xf(e,t=0,r=.01){return Math.abs(e-t)<=r}function py(e,t,r,n=.5){e.origin=n,e.originPoint=ze(t.min,t.max,e.origin),e.scale=or(r)/or(t),(xf(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ze(r.min,r.max,e.origin)-e.originPoint,(xf(e.translate)||isNaN(e.translate))&&(e.translate=0)}function sa(e,t,r,n){py(e.x,t.x,r.x,n?n.originX:void 0),py(e.y,t.y,r.y,n?n.originY:void 0)}function gy(e,t,r){e.min=r.min+t.min,e.max=e.min+or(t)}function LR(e,t,r){gy(e.x,t.x,r.x),gy(e.y,t.y,r.y)}function vy(e,t,r){e.min=t.min-r.min,e.max=e.min+or(t)}function oa(e,t,r){vy(e.x,t.x,r.x),vy(e.y,t.y,r.y)}function MR(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ze(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ze(r,e,n.max):Math.min(e,r)),e}function yy(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function DR(e,{top:t,left:r,bottom:n,right:s}){return{x:yy(e.x,r,s),y:yy(e.y,t,n)}}function xy(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function $R(e,t){return{x:xy(e.x,t.x),y:xy(e.y,t.y)}}function FR(e,t){let r=.5;const n=or(e),s=or(t);return s>n?r=Ma(t.min,t.max-n,e.min):n>s&&(r=Ma(e.min,e.max-s,t.min)),cs(0,1,r)}function VR(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const wf=.35;function UR(e=wf){return e===!1?e=0:e===!0&&(e=wf),{x:wy(e,"left","right"),y:wy(e,"top","bottom")}}function wy(e,t,r){return{min:jy(e,t),max:jy(e,r)}}function jy(e,t){return typeof e=="number"?e:e[t]||0}const by=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fo=()=>({x:by(),y:by()}),Sy=()=>({min:0,max:0}),st=()=>({x:Sy(),y:Sy()});function cr(e){return[e("x"),e("y")]}function c1({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function BR({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function zR(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Dd(e){return e===void 0||e===1}function jf({scale:e,scaleX:t,scaleY:r}){return!Dd(e)||!Dd(t)||!Dd(r)}function Os(e){return jf(e)||u1(e)||e.z||e.rotate||e.rotateX||e.rotateY}function u1(e){return _y(e.x)||_y(e.y)}function _y(e){return e&&e!=="0%"}function Bc(e,t,r){const n=e-r,s=t*n;return r+s}function Cy(e,t,r,n,s){return s!==void 0&&(e=Bc(e,s,n)),Bc(e,r,n)+t}function bf(e,t=0,r=1,n,s){e.min=Cy(e.min,t,r,n,s),e.max=Cy(e.max,t,r,n,s)}function d1(e,{x:t,y:r}){bf(e.x,t.translate,t.scale,t.originPoint),bf(e.y,r.translate,r.scale,r.originPoint)}function WR(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let o,a;for(let l=0;l<s;l++){o=r[l],a=o.projectionDelta;const c=o.instance;c&&c.style&&c.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Vo(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,d1(e,a)),n&&Os(o.latestValues)&&Vo(e,o.latestValues))}t.x=Ny(t.x),t.y=Ny(t.y)}function Ny(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Mn(e,t){e.min=e.min+t,e.max=e.max+t}function Ey(e,t,[r,n,s]){const o=t[s]!==void 0?t[s]:.5,a=ze(e.min,e.max,o);bf(e,t[r],t[n],a,t.scale)}const qR=["x","scaleX","originX"],HR=["y","scaleY","originY"];function Vo(e,t){Ey(e.x,t,qR),Ey(e.y,t,HR)}function h1(e,t){return c1(zR(e.getBoundingClientRect(),t))}function GR(e,t,r){const n=h1(e,r),{scroll:s}=t;return s&&(Mn(n.x,s.offset.x),Mn(n.y,s.offset.y)),n}const f1=({current:e})=>e?e.ownerDocument.defaultView:null,KR=new WeakMap;class JR{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=st(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(Nu(d,"page").point)},o=(d,h)=>{const{drag:f,dragPropagation:g,onDragStart:w}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Nb(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cr(j=>{let x=this.getAxisMotionValue(j).get()||0;if(Gr.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const v=y.layout.layoutBox[j];v&&(x=or(v)*(parseFloat(x)/100))}}this.originPoint[j]=x}),w&&Le.update(()=>w(d,h),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:w,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:j}=h;if(g&&this.currentDirection===null){this.currentDirection=YR(j),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",h.point,j),this.updateAxis("y",h.point,j),this.visualElement.render(),m&&m(d,h)},l=(d,h)=>this.stop(d,h),c=()=>cr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new a1(t,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:f1(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&Le.update(()=>o(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!kl(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=MR(a,this.constraints[t],this.elastic[t])),o.set(a)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;r&&Do(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=DR(s.layoutBox,r):this.constraints=!1,this.elastic=UR(n),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&cr(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=VR(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Do(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=GR(n,s.root,this.visualElement.getTransformPagePoint());let a=$R(s.layout.layoutBox,o);if(r){const l=r(BR(a));this.hasMutatedConstraints=!!l,l&&(a=c1(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=cr(d=>{if(!kl(d,r,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,w={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,w)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(xp(t,n,0,r))}stopAnimation(){cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cr(r=>{const{drag:n}=this.getProps();if(!kl(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];o.set(t[r]-ze(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Do(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};cr(a=>{const l=this.getAxisMotionValue(a);if(l){const c=l.get();s[a]=FR({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cr(a=>{if(!kl(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(ze(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;KR.set(this.visualElement,this);const t=this.visualElement.current,r=fn(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Do(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const a=un(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),o(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=wf,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function kl(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function YR(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class XR extends ys{constructor(t){super(t),this.removeGroupControls=Ge,this.removeListeners=Ge,this.controls=new JR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ge}unmount(){this.removeGroupControls(),this.removeListeners()}}const ky=e=>(t,r)=>{e&&Le.update(()=>e(t,r))};class QR extends ys{constructor(){super(...arguments),this.removePointerDownListener=Ge}onPointerDown(t){this.session=new a1(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:f1(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:ky(t),onStart:ky(r),onMove:n,onEnd:(o,a)=>{delete this.session,s&&Le.update(()=>s(o,a))}}}mount(){this.removePointerDownListener=fn(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function ZR(){const e=p.useContext(ju);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=p.useId();return p.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const ec={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Py(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(le.test(e))e=parseFloat(e);else return e;const r=Py(e,t.target.x),n=Py(e,t.target.y);return`${r}% ${n}%`}},eO={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=us.parse(e);if(s.length>5)return n;const o=us.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=ze(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}};class tO extends de.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=t;lT(rO),o&&(r.group&&r.group.add(o),n&&n.register&&s&&n.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),ec.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:o}=this.props,a=n.projection;return a&&(a.isPresent=o,s||t.layoutDependency!==r||r===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?a.promote():a.relegate()||Le.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function m1(e){const[t,r]=ZR(),n=p.useContext(op);return de.createElement(tO,{...e,layoutGroup:n,switchLayoutGroup:p.useContext(cb),isPresent:t,safeToRemove:r})}const rO={borderRadius:{...Mi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mi,borderTopRightRadius:Mi,borderBottomLeftRadius:Mi,borderBottomRightRadius:Mi,boxShadow:eO},p1=["TopLeft","TopRight","BottomLeft","BottomRight"],nO=p1.length,Ty=e=>typeof e=="string"?parseFloat(e):e,Ay=e=>typeof e=="number"||le.test(e);function sO(e,t,r,n,s,o){s?(e.opacity=ze(0,r.opacity!==void 0?r.opacity:1,oO(n)),e.opacityExit=ze(t.opacity!==void 0?t.opacity:1,0,iO(n))):o&&(e.opacity=ze(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let a=0;a<nO;a++){const l=`border${p1[a]}Radius`;let c=Ry(t,l),u=Ry(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Ay(c)===Ay(u)?(e[l]=Math.max(ze(Ty(c),Ty(u),n),0),(Gr.test(u)||Gr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=ze(t.rotate||0,r.rotate||0,n))}function Ry(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const oO=g1(0,.5,$b),iO=g1(.5,.95,Ge);function g1(e,t,r){return n=>n<e?0:n>t?1:r(Ma(e,t,n))}function Oy(e,t){e.min=t.min,e.max=t.max}function lr(e,t){Oy(e.x,t.x),Oy(e.y,t.y)}function Iy(e,t,r,n,s){return e-=t,e=Bc(e,1/r,n),s!==void 0&&(e=Bc(e,1/s,n)),e}function aO(e,t=0,r=1,n=.5,s,o=e,a=e){if(Gr.test(t)&&(t=parseFloat(t),t=ze(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=ze(o.min,o.max,n);e===o&&(l-=t),e.min=Iy(e.min,t,r,l,s),e.max=Iy(e.max,t,r,l,s)}function Ly(e,t,[r,n,s],o,a){aO(e,t[r],t[n],t[s],t.scale,o,a)}const lO=["x","scaleX","originX"],cO=["y","scaleY","originY"];function My(e,t,r,n){Ly(e.x,t,lO,r?r.x:void 0,n?n.x:void 0),Ly(e.y,t,cO,r?r.y:void 0,n?n.y:void 0)}function Dy(e){return e.translate===0&&e.scale===1}function v1(e){return Dy(e.x)&&Dy(e.y)}function uO(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function y1(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function $y(e){return or(e.x)/or(e.y)}class dO{constructor(){this.members=[]}add(t){wp(this.members,t),t.scheduleRender()}remove(t){if(jp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fy(e,t,r){let n="";const s=e.x.translate/t.x,o=e.y.translate/t.y;if((s||o)&&(n=`translate3d(${s}px, ${o}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:d}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),d&&(n+=`rotateY(${d}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return(a!==1||l!==1)&&(n+=`scale(${a}, ${l})`),n||"none"}const hO=(e,t)=>e.depth-t.depth;class fO{constructor(){this.children=[],this.isDirty=!1}add(t){wp(this.children,t),this.isDirty=!0}remove(t){jp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(hO),this.isDirty=!1,this.children.forEach(t)}}function mO(e,t){const r=performance.now(),n=({timestamp:s})=>{const o=s-r;o>=t&&(wn(n),e(o-t))};return Le.read(n,!0),()=>wn(n)}function pO(e){window.MotionDebug&&window.MotionDebug.record(e)}function gO(e){return e instanceof SVGElement&&e.tagName!=="svg"}function vO(e,t,r){const n=Kt(e)?e:oi(e);return n.start(xp("",n,t,r)),n.animation}const Vy=["","X","Y","Z"],yO={visibility:"hidden"},Uy=1e3;let xO=0;const Is={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function x1({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=xO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Is.totalNodes=Is.resolvedTargetDeltas=Is.recalculatedProjection=0,this.nodes.forEach(bO),this.nodes.forEach(EO),this.nodes.forEach(kO),this.nodes.forEach(SO),pO(Is)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new fO)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new bp),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=gO(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=mO(f,250),ec.hasAnimatedSinceResize&&(ec.hasAnimatedSinceResize=!1,this.nodes.forEach(zy))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||d.getDefaultTransition()||OO,{onLayoutAnimationStart:j,onLayoutAnimationComplete:x}=d.getProps(),y=!this.targetLayout||!y1(this.targetLayout,w)||g,v=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,v);const b={...yp(m,"layout"),onPlay:j,onComplete:x};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||zy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(PO),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(By);return}this.isUpdating||this.nodes.forEach(CO),this.isUpdating=!1,this.nodes.forEach(NO),this.nodes.forEach(wO),this.nodes.forEach(jO),this.clearAllSnapshots();const l=performance.now();Pt.delta=cs(0,1e3/60,l-Pt.timestamp),Pt.timestamp=l,Pt.isProcessing=!0,Ed.update.process(Pt),Ed.preRender.process(Pt),Ed.render.process(Pt),Pt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(_O),this.sharedNodes.forEach(TO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Le.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Le.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=st(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!v1(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||Os(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),IO(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return st();const l=a.measureViewportBox(),{scroll:c}=this.root;return c&&(Mn(l.x,c.offset.x),Mn(l.y,c.offset.y)),l}removeElementScroll(a){const l=st();lr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){lr(l,a);const{scroll:f}=this.root;f&&(Mn(l.x,-f.offset.x),Mn(l.y,-f.offset.y))}Mn(l.x,d.offset.x),Mn(l.y,d.offset.y)}}return l}applyTransform(a,l=!1){const c=st();lr(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Vo(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Os(d.latestValues)&&Vo(c,d.latestValues)}return Os(this.latestValues)&&Vo(c,this.latestValues),c}removeTransform(a){const l=st();lr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Os(u.latestValues))continue;jf(u.latestValues)&&u.updateSnapshot();const d=st(),h=u.measurePageBox();lr(d,h),My(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Os(this.latestValues)&&My(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Pt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Pt.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),oa(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=st(),this.targetWithTransforms=st()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),d1(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),oa(this.relativeTargetOrigin,this.target,g.target),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Is.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jf(this.parent.latestValues)||u1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Pt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;lr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;WR(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:w}=l;if(!w){this.projectionTransform&&(this.projectionDelta=Fo(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Fo(),this.projectionDeltaWithTransform=Fo());const m=this.projectionTransform;sa(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=Fy(this.projectionDelta,this.treeScale),(this.projectionTransform!==m||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Is.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Fo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=st(),g=c?c.source:void 0,w=this.layout?this.layout.source:void 0,m=g!==w,j=this.getStack(),x=!j||j.members.length<=1,y=!!(m&&!x&&this.options.crossfade===!0&&!this.path.some(RO));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const S=b/1e3;Wy(h.x,a.x,S),Wy(h.y,a.y,S),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oa(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),AO(this.relativeTarget,this.relativeTargetOrigin,f,S),v&&uO(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=st()),lr(v,this.relativeTarget)),m&&(this.animationValues=d,sO(d,u,this.latestValues,S,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Le.update(()=>{ec.hasAnimatedSinceResize=!0,this.currentAnimation=vO(0,Uy,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&w1(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||st();const h=or(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=or(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}lr(l,c),Vo(l,d),sa(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new dO),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Vy.length;d++){const h="rotate"+Vy[d];c[h]&&(u[h]=c[h],a.setStaticValue(h,0))}a.render();for(const d in u)a.setStaticValue(d,u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return yO;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Zl(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Zl(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Os(this.latestValues)&&(m.transform=d?d({},""):"none",this.hasProjected=!1),m}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Fy(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:g,y:w}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${w.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in Lc){if(f[m]===void 0)continue;const{correct:j,applyTo:x}=Lc[m],y=u.transform==="none"?f[m]:j(f[m],h);if(x){const v=x.length;for(let b=0;b<v;b++)u[x[b]]=y}else u[m]=y}return this.options.layoutId&&(u.pointerEvents=h===this?Zl(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(By),this.root.sharedNodes.clear()}}}function wO(e){e.updateLayout()}function jO(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:o}=e.options,a=r.source!==e.layout.source;o==="size"?cr(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],g=or(f);f.min=n[h].min,f.max=f.min+g}):w1(o,r.layoutBox,n)&&cr(h=>{const f=a?r.measuredBox[h]:r.layoutBox[h],g=or(n[h]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const l=Fo();sa(l,n,r.layoutBox);const c=Fo();a?sa(c,e.applyTransform(s,!0),r.measuredBox):sa(c,n,r.layoutBox);const u=!v1(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const w=st();oa(w,r.layoutBox,f.layoutBox);const m=st();oa(m,n,g.layoutBox),y1(w,m)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=w,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function bO(e){Is.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function SO(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function _O(e){e.clearSnapshot()}function By(e){e.clearMeasurements()}function CO(e){e.isLayoutDirty=!1}function NO(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zy(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EO(e){e.resolveTargetDelta()}function kO(e){e.calcProjection()}function PO(e){e.resetRotation()}function TO(e){e.removeLeadSnapshot()}function Wy(e,t,r){e.translate=ze(t.translate,0,r),e.scale=ze(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function qy(e,t,r,n){e.min=ze(t.min,r.min,n),e.max=ze(t.max,r.max,n)}function AO(e,t,r,n){qy(e.x,t.x,r.x,n),qy(e.y,t.y,r.y,n)}function RO(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const OO={duration:.45,ease:[.4,0,.1,1]},Hy=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Gy=Hy("applewebkit/")&&!Hy("chrome/")?Math.round:Ge;function Ky(e){e.min=Gy(e.min),e.max=Gy(e.max)}function IO(e){Ky(e.x),Ky(e.y)}function w1(e,t,r){return e==="position"||e==="preserve-aspect"&&!xf($y(t),$y(r),.2)}const LO=x1({attachResizeListener:(e,t)=>un(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$d={current:void 0},j1=x1({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$d.current){const e=new LO({});e.mount(window),e.setOptions({layoutScroll:!0}),$d.current=e}return $d.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),MO={pan:{Feature:QR},drag:{Feature:XR,ProjectionNode:j1,MeasureLayout:m1}},DO=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function $O(e){const t=DO.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function Sf(e,t,r=1){const[n,s]=$O(e);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const a=o.trim();return n1(a)?parseFloat(a):a}else return hf(s)?Sf(s,t,r+1):s}function FO(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const o=s.get();if(!hf(o))return;const a=Sf(o,n);a&&s.set(a)});for(const s in t){const o=t[s];if(!hf(o))continue;const a=Sf(o,n);a&&(t[s]=a,r||(r={}),r[s]===void 0&&(r[s]=o))}return{target:t,transitionEnd:r}}const VO=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),b1=e=>VO.has(e),UO=e=>Object.keys(e).some(b1),Jy=e=>e===co||e===le,Yy=(e,t)=>parseFloat(e.split(", ")[t]),Xy=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return Yy(s[1],t);{const o=n.match(/^matrix\((.+)\)$/);return o?Yy(o[1],e):0}},BO=new Set(["x","y","z"]),zO=Ga.filter(e=>!BO.has(e));function WO(e){const t=[];return zO.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const ii={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Xy(4,13),y:Xy(5,14)};ii.translateX=ii.x;ii.translateY=ii.y;const qO=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,o=getComputedStyle(s),{display:a}=o,l={};a==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=ii[u](n,o)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const d=t.getValue(u);d&&d.jump(l[u]),e[u]=ii[u](c,o)}),e},HO=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(b1);let o=[],a=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let d=r[c],h=Li(d);const f=t[c];let g;if(Dc(f)){const w=f.length,m=f[0]===null?1:0;d=f[m],h=Li(d);for(let j=m;j<w&&f[j]!==null;j++)g?fp(Li(f[j])===g):g=Li(f[j])}else g=Li(f);if(h!==g)if(Jy(h)&&Jy(g)){const w=u.get();typeof w=="string"&&u.set(parseFloat(w)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&g===le&&(t[c]=f.map(parseFloat))}else h!=null&&h.transform&&(g!=null&&g.transform)&&(d===0||f===0)?d===0?u.set(g.transform(d)):t[c]=h.transform(f):(a||(o=WO(e),a=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=qO(t,e,l);return o.length&&o.forEach(([d,h])=>{e.getValue(d).set(h)}),e.render(),bu&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function GO(e,t,r,n){return UO(t)?HO(e,t,r,n):{target:t,transitionEnd:n}}const KO=(e,t,r,n)=>{const s=FO(e,t,n);return t=s.target,n=s.transitionEnd,GO(e,t,r,n)},_f={current:null},S1={current:!1};function JO(){if(S1.current=!0,!!bu)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_f.current=e.matches;e.addListener(t),t()}else _f.current=!1}function YO(e,t,r){const{willChange:n}=t;for(const s in t){const o=t[s],a=r[s];if(Kt(o))e.addValue(s,o),Uc(n)&&n.add(s);else if(Kt(a))e.addValue(s,oi(o,{owner:e})),Uc(n)&&n.remove(s);else if(a!==o)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(o)}else{const l=e.getStaticValue(s);e.addValue(s,oi(l!==void 0?l:o,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const Qy=new WeakMap,_1=Object.keys(La),XO=_1.length,Zy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],QO=sp.length;class ZO{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Le.render(this.render,!1,!0);const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=_u(r),this.isVariantNode=lb(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(r,{});for(const h in d){const f=d[h];l[h]!==void 0&&Kt(f)&&(f.set(l[h],!1),Uc(u)&&u.add(h))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,Qy.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),S1.current||JO(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_f.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Qy.delete(this.current),this.projection&&this.projection.unmount(),wn(this.notifyUpdate),wn(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=lo.has(t),s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Le.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),o=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),o()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,o){let a,l;for(let c=0;c<XO;c++){const u=_1[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:g}=La[u];f&&(a=f),d(r)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:g}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Do(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:o,layoutScroll:f,layoutRoot:g})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):st()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<Zy.length;n++){const s=Zy[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o=t["on"+s];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=YO(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<QO;n++){const s=sp[n],o=this.props[s];(Ia(o)||o===!1)&&(r[s]=o)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=oi(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=hp(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!Kt(o)?o:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new bp),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class C1 extends ZO{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},o){let a=gR(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),a&&(a=s(a))),o){mR(this,n,a);const l=KO(this,n,a,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function eI(e){return window.getComputedStyle(e)}class tI extends C1{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(lo.has(r)){const n=vp(r);return n&&n.default||0}else{const n=eI(t),s=(hb(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return h1(t,r)}build(t,r,n,s){ap(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return dp(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){yb(t,r,n,s)}}class rI extends C1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(lo.has(r)){const n=vp(r);return n&&n.default||0}return r=xb.has(r)?r:rp(r),t.getAttribute(r)}measureInstanceViewportBox(){return st()}scrapeMotionValuesFromProps(t,r){return jb(t,r)}build(t,r,n,s){cp(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){wb(t,r,n,s)}mount(t){this.isSVGTag=up(t.tagName),super.mount(t)}}const nI=(e,t)=>ip(e)?new rI(t,{enableHardwareAcceleration:!1}):new tI(t,{enableHardwareAcceleration:!0}),sI={layout:{ProjectionNode:j1,MeasureLayout:m1}},oI={...AR,...XT,...MO,...sI},xs=iT((e,t)=>$T(e,t,oI,nI));function N1(){const e=p.useRef(!1);return tp(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function iI(){const e=N1(),[t,r]=p.useState(0),n=p.useCallback(()=>{e.current&&r(t+1)},[t]);return[p.useCallback(()=>Le.postRender(n),[n]),t]}class aI extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function lI({children:e,isPresent:t}){const r=p.useId(),n=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=s.current;if(t||!n.current||!o||!a)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),p.createElement(aI,{isPresent:t,childRef:n,sizeRef:s},p.cloneElement(e,{ref:n}))}const Fd=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=bb(cI),c=p.useId(),u=p.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:d=>{l.set(d,!0);for(const h of l.values())if(!h)return;n&&n()},register:d=>(l.set(d,!1),()=>l.delete(d))}),o?void 0:[r]);return p.useMemo(()=>{l.forEach((d,h)=>l.set(h,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),a==="popLayout"&&(e=p.createElement(lI,{isPresent:r},e)),p.createElement(ju.Provider,{value:u},e)};function cI(){return new Map}function uI(e){return p.useEffect(()=>()=>e(),[])}const Ls=e=>e.key||"";function dI(e,t){e.forEach(r=>{const n=Ls(r);t.set(n,r)})}function hI(e){const t=[];return p.Children.forEach(e,r=>{p.isValidElement(r)&&t.push(r)}),t}const fI=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=p.useContext(op).forceRender||iI()[0],c=N1(),u=hI(e);let d=u;const h=p.useRef(new Map).current,f=p.useRef(d),g=p.useRef(new Map).current,w=p.useRef(!0);if(tp(()=>{w.current=!1,dI(u,g),f.current=d}),uI(()=>{w.current=!0,g.clear(),h.clear()}),w.current)return p.createElement(p.Fragment,null,d.map(y=>p.createElement(Fd,{key:Ls(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:o,mode:a},y)));d=[...d];const m=f.current.map(Ls),j=u.map(Ls),x=m.length;for(let y=0;y<x;y++){const v=m[y];j.indexOf(v)===-1&&!h.has(v)&&h.set(v,void 0)}return a==="wait"&&h.size&&(d=[]),h.forEach((y,v)=>{if(j.indexOf(v)!==-1)return;const b=g.get(v);if(!b)return;const S=m.indexOf(v);let E=y;if(!E){const N=()=>{h.delete(v);const _=Array.from(g.keys()).filter(C=>!j.includes(C));if(_.forEach(C=>g.delete(C)),f.current=u.filter(C=>{const I=Ls(C);return I===v||_.includes(I)}),!h.size){if(c.current===!1)return;l(),n&&n()}};E=p.createElement(Fd,{key:Ls(b),isPresent:!1,onExitComplete:N,custom:t,presenceAffectsLayout:o,mode:a},b),h.set(v,E)}d.splice(S,0,E)}),d=d.map(y=>{const v=y.key;return h.has(v)?y:p.createElement(Fd,{key:Ls(y),isPresent:!0,presenceAffectsLayout:o,mode:a},y)}),p.createElement(p.Fragment,null,h.size?d:d.map(y=>p.cloneElement(y)))},mI=yu("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=de.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const a=n?O2:"button";return i.jsx(a,{className:Ce(mI({variant:t,size:r,className:e})),ref:o,...s})});F.displayName="Button";const W=de.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));W.displayName="Input";var pI="Label",E1=p.forwardRef((e,t)=>i.jsx(me.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));E1.displayName=pI;var k1=E1;const gI=yu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),B=de.forwardRef(({className:e,...t},r)=>i.jsx(k1,{ref:r,className:Ce(gI(),e),...t}));B.displayName=k1.displayName;const re=de.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("rounded-lg border bg-gray-800 text-white shadow-sm",e),...t}));re.displayName="Card";const xe=de.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("flex flex-col space-y-1.5 p-6",e),...t}));xe.displayName="CardHeader";const we=de.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:Ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));we.displayName="CardTitle";const P1=de.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:Ce("text-sm text-gray-400",e),...t}));P1.displayName="CardDescription";const se=de.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("p-6 pt-0",e),...t}));se.displayName="CardContent";const vI=de.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:Ce("flex items-center p-6 pt-0",e),...t}));vI.displayName="CardFooter";const yI="modulepreload",xI=function(e){return"/"+e},ex={},os=function(t,r,n){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(o=>{if(o=xI(o),o in ex)return;ex[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":yI,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})},wI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Sp extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class jI extends Sp{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class tx extends Sp{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class rx extends Sp{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Cf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Cf||(Cf={}));var bI=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class SI{constructor(t,{headers:r={},customFetch:n,region:s=Cf.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=wI(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return bI(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(m=>{throw new jI(m)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new tx(h);if(!h.ok)throw new rx(h);let g=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),w;return g==="application/json"?w=yield h.json():g==="application/octet-stream"?w=yield h.blob():g==="text/event-stream"?w=h:g==="multipart/form-data"?w=yield h.formData():w=yield h.text(),{data:w,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof rx||s instanceof tx?s.context:void 0}}})}}var Bt={},_p={},ku={},Xa={},Pu={},Tu={},_I=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ai=_I();const CI=ai.fetch,T1=ai.fetch.bind(ai),A1=ai.Headers,NI=ai.Request,EI=ai.Response,vi=Object.freeze(Object.defineProperty({__proto__:null,Headers:A1,Request:NI,Response:EI,default:T1,fetch:CI},Symbol.toStringTag,{value:"Module"})),kI=NC(vi);var Au={};Object.defineProperty(Au,"__esModule",{value:!0});let PI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Au.default=PI;var R1=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tu,"__esModule",{value:!0});const TI=R1(kI),AI=R1(Au);let RI=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=TI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var a,l,c,u;let d=null,h=null,f=null,g=o.status,w=o.statusText;if(o.ok){if(this.method!=="HEAD"){const y=await o.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const j=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");j&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,g=406,w="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const j=await o.text();try{d=JSON.parse(j),Array.isArray(d)&&o.status===404&&(h=[],d=null,g=200,w="OK")}catch{o.status===404&&j===""?(g=204,w="No Content"):d={message:j}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,w="OK"),d&&this.shouldThrowOnError)throw new AI.default(d)}return{error:d,data:h,count:f,status:g,statusText:w}});return this.shouldThrowOnError||(s=s.catch(o=>{var a,l,c;return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:`${(l=o==null?void 0:o.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o==null?void 0:o.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Tu.default=RI;var OI=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pu,"__esModule",{value:!0});const II=OI(Tu);let LI=class extends II.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const o=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:o=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Pu.default=LI;var MI=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Xa,"__esModule",{value:!0});const DI=MI(Pu);let $I=class extends DI.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let o="";s==="plain"?o="pl":s==="phrase"?o="ph":s==="websearch"&&(o="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Xa.default=$I;var FI=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ku,"__esModule",{value:!0});const Di=FI(Xa);let VI=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;const o="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Di.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Di.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(t,{count:r}={}){var n;const s="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Di.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Di.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};ku.default=VI;var O1=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_p,"__esModule",{value:!0});const UI=O1(ku),BI=O1(Xa);let zI=class I1{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new UI.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new I1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:o}={}){var a;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;n||s?(l=n?"HEAD":"GET",Object.entries(r).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=r);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new BI.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};_p.default=zI;var yi=pr&&pr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bt,"__esModule",{value:!0});Bt.PostgrestError=Bt.PostgrestBuilder=Bt.PostgrestTransformBuilder=Bt.PostgrestFilterBuilder=Bt.PostgrestQueryBuilder=Bt.PostgrestClient=void 0;const L1=yi(_p);Bt.PostgrestClient=L1.default;const M1=yi(ku);Bt.PostgrestQueryBuilder=M1.default;const D1=yi(Xa);Bt.PostgrestFilterBuilder=D1.default;const $1=yi(Pu);Bt.PostgrestTransformBuilder=$1.default;const F1=yi(Tu);Bt.PostgrestBuilder=F1.default;const V1=yi(Au);Bt.PostgrestError=V1.default;var WI=Bt.default={PostgrestClient:L1.default,PostgrestQueryBuilder:M1.default,PostgrestFilterBuilder:D1.default,PostgrestTransformBuilder:$1.default,PostgrestBuilder:F1.default,PostgrestError:V1.default};const{PostgrestClient:qI,PostgrestQueryBuilder:P3,PostgrestFilterBuilder:T3,PostgrestTransformBuilder:A3,PostgrestBuilder:R3,PostgrestError:O3}=WI;function HI(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const GI=HI(),KI="2.12.2",JI=`realtime-js/${KI}`,YI="1.0.0",U1=1e4,XI=1e3;var ia;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ia||(ia={}));var xt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(xt||(xt={}));var Pr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Pr||(Pr={}));var Nf;(function(e){e.websocket="websocket"})(Nf||(Nf={}));var Ds;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ds||(Ds={}));class QI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),o=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+o));a=a+o;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class B1{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Oe||(Oe={}));const nx=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((o,a)=>(o[a]=ZI(a,e,t,s),o),{})},ZI=(e,t,r,n)=>{const s=t.find(l=>l.name===e),o=s==null?void 0:s.type,a=r[e];return o&&!n.includes(o)?z1(o,a):Ef(a)},z1=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return nL(t,r)}switch(e){case Oe.bool:return eL(t);case Oe.float4:case Oe.float8:case Oe.int2:case Oe.int4:case Oe.int8:case Oe.numeric:case Oe.oid:return tL(t);case Oe.json:case Oe.jsonb:return rL(t);case Oe.timestamp:return sL(t);case Oe.abstime:case Oe.date:case Oe.daterange:case Oe.int4range:case Oe.int8range:case Oe.money:case Oe.reltime:case Oe.text:case Oe.time:case Oe.timestamptz:case Oe.timetz:case Oe.tsrange:case Oe.tstzrange:return Ef(t);default:return Ef(t)}},Ef=e=>e,eL=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},tL=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},rL=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},nL=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let o;const a=e.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(l=>z1(t,l))}return e},sL=e=>typeof e=="string"?e.replace(" ","T"):e,W1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Vd{constructor(t,r,n={},s=U1){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(sx||(sx={}));class aa{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=aa.syncState(this.state,s,o,a),this.pendingDiffs.forEach(c=>{this.state=aa.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=aa.syncDiff(this.state,s,o,a),l())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const o=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(o,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=o[u];if(h){const f=d.map(j=>j.presence_ref),g=h.map(j=>j.presence_ref),w=d.filter(j=>g.indexOf(j.presence_ref)<0),m=h.filter(j=>f.indexOf(j.presence_ref)<0);w.length>0&&(l[u]=w),m.length>0&&(c[u]=m)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(g=>g.presence_ref),f=d.filter(g=>h.indexOf(g.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ox;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ox||(ox={}));var zc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zc||(zc={}));var sn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(sn||(sn={}));class Cp{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Vd(this,Pr.join,this.params,this.timeout),this.rejoinTimer=new B1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pr.reply,{},(s,o)=>{this._trigger(this._replyEventName(o),s)}),this.presence=new aa(this),this.broadcastEndpointURL=W1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[zc.PRESENCE],d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(sn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(sn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(sn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,m=(g=w==null?void 0:w.length)!==null&&g!==void 0?g:0,j=[];for(let x=0;x<m;x++){const y=w[x],{filter:{event:v,schema:b,table:S,filter:E}}=y,N=f&&f[x];if(N&&N.event===v&&N.schema===b&&N.table===S&&N.filter===E)j.push(Object.assign(Object.assign({},y),{id:N.id}));else{this.unsubscribe(),this.state=xt.errored,t==null||t(sn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(sn.SUBSCRIBED);return}}).receive("error",f=>{this.state=xt.errored,t==null||t(sn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(sn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===xt.joined&&t===zc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:o,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=xt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Vd(this,Pr.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,o=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(o),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Vd(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,o;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Pr;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(g=>{var w,m,j;return((w=g.filter)===null||w===void 0?void 0:w.event)==="*"||((j=(m=g.filter)===null||m===void 0?void 0:m.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(g=>g.callback(f,n)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var w,m,j,x,y,v;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const b=g.id,S=(w=g.filter)===null||w===void 0?void 0:w.event;return b&&((m=r.ids)===null||m===void 0?void 0:m.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const b=(y=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return b==="*"||b===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:m,table:j,commit_timestamp:x,type:y,errors:v}=w;f=Object.assign(Object.assign({},{schema:m,table:j,commit_timestamp:x,eventType:y,new:{},old:{},errors:v}),this._getPayloadRecords(w))}g.callback(f,n)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),o={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Cp.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Pr.close,{},t)}_onError(t){this._on(Pr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=nx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=nx(t.columns,t.old_record)),r}}const ix=()=>{},oL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class iL{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=U1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ix,this.ref=0,this.logger=ix,this.conn=null,this.sendBuffer=[],this.serializer=new QI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...l)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${Nf.websocket}`,this.httpEndpoint=W1(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(o,a)=>a(JSON.stringify(o)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new B1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(setTimeout(()=>{this.setAuth().catch(t=>{this.log("error","error setting auth",t)})},0),!this.conn){if(this.transport||(this.transport=GI),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:YI}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ia.connecting:return Ds.Connecting;case ia.open:return Ds.Open;case ia.closing:return Ds.Closing;default:return Ds.Closed}}isConnected(){return this.connectionState()===Ds.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(o=>o.topic===n);if(s)return s;{const o=new Cp(`realtime:${t}`,r,this);return this.channels.push(o),o}}push(t){const{topic:r,event:n,payload:s,ref:o}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:JI};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Pr.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(XI,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:o,ref:a}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,o),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,o,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(Pr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([oL],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class Np extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function pt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class aL extends Np{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kf extends Np{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var lL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const q1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cL=()=>lL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield os(()=>Promise.resolve().then(()=>vi),void 0)).Response:Response}),Pf=e=>{if(Array.isArray(e))return e.map(r=>Pf(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[s]=Pf(n)}),t},uL=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var uo=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ud=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dL=(e,t,r)=>uo(void 0,void 0,void 0,function*(){const n=yield cL();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const o=e.status||500,a=(s==null?void 0:s.statusCode)||o+"";t(new aL(Ud(s),o,a))}).catch(s=>{t(new kf(Ud(s),s))}):t(new kf(Ud(e),e))}),hL=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(uL(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r))};function Qa(e,t,r,n,s,o){return uo(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,hL(t,n,s,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>dL(c,l,n))})})}function Wc(e,t,r,n){return uo(this,void 0,void 0,function*(){return Qa(e,"GET",t,r,n)})}function on(e,t,r,n,s){return uo(this,void 0,void 0,function*(){return Qa(e,"POST",t,n,s,r)})}function Tf(e,t,r,n,s){return uo(this,void 0,void 0,function*(){return Qa(e,"PUT",t,n,s,r)})}function fL(e,t,r,n){return uo(this,void 0,void 0,function*(){return Qa(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function H1(e,t,r,n,s){return uo(this,void 0,void 0,function*(){return Qa(e,"DELETE",t,n,s,r)})}var Vt=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const mL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ax={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pL{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=q1(s)}uploadOrUpdate(t,r,n,s){return Vt(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},ax),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?Tf:on)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(pt(o))return{data:null,error:o};throw o}})}upload(t,r,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Vt(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(t),a=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:ax.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Tf(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(pt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Vt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const o=yield on(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+o.url),l=a.searchParams.get("token");if(!l)throw new Np("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Vt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Vt(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Vt(this,void 0,void 0,function*(){try{return{data:{path:(yield on(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Vt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),o=yield on(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Vt(this,void 0,void 0,function*(){try{const s=yield on(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}download(t,r){return Vt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Wc(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(pt(l))return{data:null,error:l};throw l}})}info(t){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Wc(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Pf(n),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}exists(t){return Vt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield fL(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(pt(n)&&n instanceof kf){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&s.push(o);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Vt(this,void 0,void 0,function*(){try{return{data:yield H1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Vt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},mL),r),{prefix:t||""});return{data:yield on(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(pt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const gL="2.10.2",vL={"X-Client-Info":`storage-js/${gL}`};var go=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class yL{constructor(t,r={},n,s){const o=new URL(t);if(s!=null&&s.useNewHostname){const a=/supabase\.(co|in|red)$/.test(o.hostname),l="/storage";a&&!o.hostname.includes("storage.supabase.")&&o.pathname.startsWith(l)&&(o.pathname=o.pathname.substring(l.length),o.hostname=o.hostname.replace("supabase.","storage.supabase."))}this.url=o.href,this.headers=Object.assign(Object.assign({},vL),r),this.fetch=q1(n)}listBuckets(){return go(this,void 0,void 0,function*(){try{return{data:yield Wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(pt(t))return{data:null,error:t};throw t}})}getBucket(t){return go(this,void 0,void 0,function*(){try{return{data:yield Wc(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return go(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return go(this,void 0,void 0,function*(){try{return{data:yield Tf(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return go(this,void 0,void 0,function*(){try{return{data:yield on(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return go(this,void 0,void 0,function*(){try{return{data:yield H1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}})}}class xL extends yL{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new pL(this.url,this.headers,t,this.fetch)}}const wL="2.39.0";let zi="";typeof Deno<"u"?zi="deno":typeof document<"u"?zi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zi="react-native":zi="node";const jL={"X-Client-Info":`supabase-js-${zi}/${wL}`};var bL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const SL=e=>{let t;return e?t=e:typeof fetch>"u"?t=T1:t=fetch,(...r)=>t(...r)},_L=()=>typeof Headers>"u"?A1:Headers,CL=(e,t,r)=>{const n=SL(r),s=_L();return(o,a)=>bL(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:u}))})};function NL(e){return e.replace(/\/$/,"")}function EL(e,t){const{db:r,auth:n,realtime:s,global:o}=e,{db:a,auth:l,realtime:c,global:u}=t;return{db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),o)}}const G1="2.70.0",_o=30*1e3,Af=3,Bd=Af*_o,kL="http://localhost:9999",PL="supabase.auth.token",TL={"X-Client-Info":`gotrue-js/${G1}`},Rf="X-Supabase-Api-Version",K1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RL=6e5;class Ep extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class OL extends Ep{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function IL(e){return fe(e)&&e.name==="AuthApiError"}class J1 extends Ep{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ws extends Ep{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Rn extends ws{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function LL(e){return fe(e)&&e.name==="AuthSessionMissingError"}class Pl extends ws{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tl extends ws{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Al extends ws{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ML(e){return fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class lx extends ws{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Of extends ws{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function zd(e){return fe(e)&&e.name==="AuthRetryableFetchError"}class cx extends ws{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class la extends ws{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const qc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ux=` 	
\r=`.split(""),DL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ux.length;t+=1)e[ux[t].charCodeAt(0)]=-2;for(let t=0;t<qc.length;t+=1)e[qc[t].charCodeAt(0)]=t;return e})();function dx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(qc[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(qc[n]),t.queuedBits-=6}}function Y1(e,t,r){const n=DL[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hx(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{VL(a,n,r)};for(let a=0;a<e.length;a+=1)Y1(e.charCodeAt(a),s,o);return t.join("")}function $L(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function FL(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}$L(n,t)}}function VL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function UL(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)Y1(e.charCodeAt(s),r,n);return new Uint8Array(t)}function BL(e){const t=[];return FL(e,r=>t.push(r)),new Uint8Array(t)}function zL(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>dx(s,r,n)),dx(null,r,n),t.join("")}function WL(e){return Math.round(Date.now()/1e3)+e}function qL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const _r=()=>typeof window<"u"&&typeof document<"u",Ts={tested:!1,writable:!1},ca=()=>{if(!_r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ts.tested)return Ts.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ts.tested=!0,Ts.writable=!0}catch{Ts.tested=!0,Ts.writable=!1}return Ts.writable};function HL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,o)=>{t[o]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const X1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>os(()=>Promise.resolve().then(()=>vi),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},GL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Q1=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Rl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ol=async(e,t)=>{await e.removeItem(t)};class Ru{constructor(){this.promise=new Ru.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ru.promiseConstructor=Promise;function Wd(e){const t=e.split(".");if(t.length!==3)throw new la("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!AL.test(t[n]))throw new la("JWT not in base64url format");return{header:JSON.parse(hx(t[0])),payload:JSON.parse(hx(t[1])),signature:UL(t[2]),raw:{header:t[0],payload:t[1]}}}async function KL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function JL(e,t){return new Promise((n,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await e(o);if(!t(o,null,a)){n(a);return}}catch(a){if(!t(o,a)){s(a);return}}})()})}function YL(e){return("0"+e.toString(16)).substr(-2)}function XL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let o=0;o<56;o++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,YL).join("")}async function QL(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function ZL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await QL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vo(e,t,r=!1){const n=XL();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Q1(e,`${t}-code-verifier`,s);const o=await ZL(n);return[o,n===o?"plain":"s256"]}const eM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function tM(e){const t=e.headers.get(Rf);if(!t||!t.match(eM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function nM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yo(e){if(!sM.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var oM=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Ms=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),iM=[502,503,504];async function fx(e){var t;if(!GL(e))throw new Of(Ms(e),0);if(iM.includes(e.status))throw new Of(Ms(e),e.status);let r;try{r=await e.json()}catch(o){throw new J1(Ms(o),o)}let n;const s=tM(e);if(s&&s.getTime()>=K1["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new cx(Ms(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Rn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new cx(Ms(r),e.status,r.weak_password.reasons);throw new OL(Ms(r),e.status||500,n)}const aM=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function be(e,t,r,n){var s;const o=Object.assign({},n==null?void 0:n.headers);o[Rf]||(o[Rf]=K1["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await lM(e,t,r+l,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function lM(e,t,r,n,s,o){const a=aM(t,n,s,o);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Of(Ms(c),0)}if(l.ok||await fx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await fx(c)}}function rn(e){var t;let r=null;hM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=WL(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function mx(e){const t=rn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Vn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cM(e){return{data:e,error:null}}function uM(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o}=e,a=oM(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:o},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function dM(e){return e}function hM(e){return e.access_token&&e.refresh_token&&e.expires_in}const qd=["global","local","others"];var fM=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class mM{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=X1(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=qd[0]){if(qd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qd.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Vn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=fM(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:uM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Vn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,o,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:dM});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(w=>{const m=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);u[`${j}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){yo(t);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Vn})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){yo(t);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Vn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){yo(t);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Vn})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){yo(t.userId);try{const{data:r,error:n}=await be(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){yo(t.userId),yo(t.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}}const pM={getItem:e=>ca()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{ca()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{ca()&&globalThis.localStorage.removeItem(e)}};function px(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function gM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xo={debug:!!(globalThis&&ca()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Z1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vM extends Z1{}async function yM(e,t,r){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}gM();const xM={url:kL,storageKey:PL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:TL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gx(e,t,r){return await r()}class Da{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Da.nextInstanceID,Da.nextInstanceID+=1,this.instanceID>0&&_r()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},xM),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new mM({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=X1(s.fetch),this.lock=s.lock||gx,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:_r()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=yM:this.lock=gx,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ca()?this.storage=pM:(this.memoryStorage={},this.storage=px(this.memoryStorage)):(this.memoryStorage={},this.storage=px(this.memoryStorage)),_r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${G1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=HL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),_r()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),ML(o)){const c=(t=o.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return fe(r)?{error:r}:{error:new J1("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:rn}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(t){var r,n,s;try{let o;if("email"in t){const{email:d,password:h,options:f}=t;let g=null,w=null;this.flowType==="pkce"&&([g,w]=await vo(this.storage,this.storageKey)),o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:g,code_challenge_method:w},xform:rn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rn})}else throw new Tl("You must provide either an email or phone number and a password");const{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(t){try{let r;if("email"in t){const{email:o,password:a,options:l}=t;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mx})}else if("phone"in t){const{phone:o,password:a,options:l}=t;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mx})}else throw new Tl("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Pl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,o;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,o,a,l,c,u,d,h,f,g;let w,m;if("message"in t)w=t.message,m=t.signature;else{const{chain:j,wallet:x,statement:y,options:v}=t;let b;if(_r())if(typeof x=="object")b=x;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))b=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=x}const S=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const E=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),y?{statement:y}:null));let N;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")N=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)N=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)w=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),m=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const E=await b.signMessage(new TextEncoder().encode(w),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=E}}try{const{data:j,error:x}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:zL(m)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:rn});if(x)throw x;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Pl}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:x})}catch(j){if(fe(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await Rl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:o,error:a}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:rn});if(await Ol(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Pl}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(fe(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:o,nonce:a}=t,l=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Pl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,o,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vo(this.storage,this.storageKey));const{error:h}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Tl("You must provide either an email or phone number.")}catch(l){if(fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:rn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(fe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=await vo(this.storage,this.storageKey)),await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:cM})}catch(o){if(fe(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Rn;const{error:s}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:o}=t,{error:a}=await be(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:o}=t,{data:a,error:l}=await be(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Tl("You must provide either an email or phone number and a type")}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Rl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Bd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Vn}):await this._useSession(async r=>{var n,s,o;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rn}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Vn})})}catch(r){if(fe(r))return LL(r)&&(await this._removeSession(),await Ol(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:o}=n;if(o)throw o;if(!s.session)throw new Rn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vo(this.storage,this.storageKey));const{data:u,error:d}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Vn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Rn;const r=Date.now()/1e3;let n=r,s=!0,o=null;const{payload:a}=Wd(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;o={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Rn;const{session:s,error:o}=await this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!_r())throw new Al("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Al(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Al("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lx("No code detected.");const{data:y,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!o||!l||!a||!u)throw new Al("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const g=f-d;g*1e3<=_o&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const w=f-h;d-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,d):d-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,d);const{data:m,error:j}=await this._getUser(o);if(j)throw j;const x={provider_token:n,provider_refresh_token:s,access_token:o,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Rl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{error:o};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(IL(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ol(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=qL(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await vo(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(fe(o))return{data:null,error:o};throw o}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async o=>{var a,l,c,u,d;const{data:h,error:f}=o;if(f)throw f;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return _r()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(fe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)throw a;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await JL(async s=>(s>0&&await KL(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:rn})),(s,o)=>{const a=200*Math.pow(2,s);return o&&zd(o)&&Date.now()+a-n<_o})}catch(n){if(this._debug(r,"error",n),fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),_r()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Rl(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Bd;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Bd}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),zd(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ru;const{data:o,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new Rn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),fe(o)){const a={session:null,error:o};return zd(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Q1(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ol(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_r()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_o);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/_o);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_o}ms, refresh threshold is ${Af} ticks`),s<=Af&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Z1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_r()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await vo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);s.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await be(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:o,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await be(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;if(o)return{data:null,error:o};const{data:a,error:l}=await be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:o}=r;return o?{data:null,error:o}:await be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Wd(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(a=>a.kid===t);if(n||(n=this.jwks.keys.find(a=>a.kid===t),n&&this.jwks_cached_at+RL>Date.now()))return n;const{data:s,error:o}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;if(!s.keys||s.keys.length===0)throw new la("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===t),!n)throw new la("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:g,error:w}=await this.getSession();if(w||!g.session)return{data:null,error:w};n=g.session.access_token}const{header:s,payload:o,signature:a,raw:{header:l,payload:c}}=Wd(n);if(rM(o.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:o,header:s,signature:a},error:null}}const u=nM(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,BL(`${l}.${c}`)))throw new la("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}}Da.nextInstanceID=0;class wM extends Da{constructor(t){super(t)}}var jM=globalThis&&globalThis.__awaiter||function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?o(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const bM={headers:jL},SM={schema:"public"},_M={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CM={};class NM{constructor(t,r,n){var s,o,a,l,c,u,d,h;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const f=NL(t);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const g=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,w={db:SM,realtime:CM,auth:Object.assign(Object.assign({},_M),{storageKey:g}),global:bM},m=EL(n??{},w);this.storageKey=(o=(s=m.auth)===null||s===void 0?void 0:s.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=(a=m.global)===null||a===void 0?void 0:a.headers)!==null&&l!==void 0?l:{},this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,(u=m.global)===null||u===void 0?void 0:u.fetch),this.fetch=CL(r,this._getAccessToken.bind(this),(d=m.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},m.realtime)),this.rest=new qI(`${f}/rest/v1`,{headers:this.headers,schema:(h=m.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new SI(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new xL(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return jM(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:o,flowType:a,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new wM({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,debug:l,fetch:u})}_initRealtimeClient(t){return new iL(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const EM=(e,t,r)=>new NM(e,t,r),kM="https://ovpfcyqudltassvckvxk.supabase.co",PM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im92cGZjeXF1ZGx0YXNzdmNrdnhrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNzc0NTMsImV4cCI6MjA2NTg1MzQ1M30.0VVPA3XWy0nk5BQFa9e2KlFxqoMhU7MVkbBXq_q8XrM",Q=EM(kM,PM),jt={ADMIN:"admin",MANAGER:"manager",CASHIER:"cashier",STOCK:"stock",SALESPERSON:"salesperson",NONE:"none"},J={MANAGE_USERS:"manage_users",MANAGE_PRODUCTS:"manage_products",MANAGE_CATEGORIES:"manage_categories",MANAGE_STOCK:"manage_stock",MANAGE_SALES:"manage_sales",MANAGE_REPORTS:"manage_reports",VIEW_REPORTS:"view_reports",PROCESS_SALES:"process_sales",CASH_REGISTER_MANAGEMENT:"cash_register_management",MANAGE_CUSTOMERS:"manage_customers",MANAGE_FISCAL_DOCUMENTS:"manage_fiscal_documents",VIEW_ALL_STORES_DATA:"view_all_stores_data",SHARE_STOCK:"share_stock",APPLY_DISCOUNTS:"apply_discounts",CANCEL_SALES:"cancel_sales"},tc={admin:[J.MANAGE_USERS,J.MANAGE_PRODUCTS,J.MANAGE_CATEGORIES,J.MANAGE_STOCK,J.MANAGE_SALES,J.MANAGE_REPORTS,J.VIEW_REPORTS,J.PROCESS_SALES,J.CASH_REGISTER_MANAGEMENT,J.MANAGE_CUSTOMERS,J.MANAGE_FISCAL_DOCUMENTS,J.VIEW_ALL_STORES_DATA,J.SHARE_STOCK,J.APPLY_DISCOUNTS,J.CANCEL_SALES],manager:[J.MANAGE_PRODUCTS,J.MANAGE_CATEGORIES,J.MANAGE_STOCK,J.MANAGE_SALES,J.MANAGE_REPORTS,J.VIEW_REPORTS,J.PROCESS_SALES,J.CASH_REGISTER_MANAGEMENT,J.MANAGE_CUSTOMERS,J.MANAGE_FISCAL_DOCUMENTS,J.SHARE_STOCK,J.APPLY_DISCOUNTS,J.CANCEL_SALES],cashier:[J.PROCESS_SALES,J.CASH_REGISTER_MANAGEMENT,J.MANAGE_CUSTOMERS],stock:[J.MANAGE_STOCK,J.MANAGE_PRODUCTS,J.MANAGE_CATEGORIES,J.SHARE_STOCK],salesperson:[J.PROCESS_SALES],none:[]},Gt=(e,t)=>{var r;return((r=tc[e])==null?void 0:r.includes(t))||!1},it=()=>{const e=localStorage.getItem("currentUser");return e?JSON.parse(e):null},vx=e=>{localStorage.setItem("currentUser",JSON.stringify(e))},If=()=>{localStorage.removeItem("currentUser")},eS=async()=>{try{console.log(" Buscando usurios...");const e=await fetch("/api/usuarios",{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Erro ao buscar usurios");const t=await e.json();console.log(" Usurios do backend:",t.users.length);const{data:r,error:n}=await Q.from("user_roles").select("*");if(n)return console.error("Erro ao buscar roles:",n),[];console.log(" Roles encontradas:",r.length),console.log(" Detalhes das roles:",r);const{data:s,error:o}=await Q.from("stores").select("*");if(o)return console.error("Erro ao buscar stores:",o),[];console.log(" Stores encontradas:",s.length);const a={};return s.forEach(c=>{a[c.id]=c}),t.users.map(c=>{var f,g,w;console.log(" Processando usurio:",c.id,"Nome:",((f=c.user_metadata)==null?void 0:f.name)||c.email.split("@")[0]);const u=r.find(m=>m.user_id===c.id);console.log(" Role encontrada para usurio:",c.id,":",u);const d=u!=null&&u.store_id?a[u.store_id]:null;console.log(" Store encontrada para usurio:",c.id,"store_id:",u==null?void 0:u.store_id,"store:",d);const h={id:c.id,username:c.email,name:((g=c.user_metadata)==null?void 0:g.name)||c.email.split("@")[0],role:u?u.role:"none",store_id:u?u.store_id:null,active:u?u.active:!0,created_at:c.created_at,stores:d};return console.log(" Usurio processado:",h.name,"Role:",h.role,"Loja:",((w=h.stores)==null?void 0:w.name)||"No definida","Ativo:",h.active),h})}catch(e){return console.error("Erro ao buscar usurios:",e),[]}},TM=async(e,t)=>{var r;try{const{data:n,error:s}=await Q.auth.signInWithPassword({email:e,password:t});if(s||!(n!=null&&n.user))return console.error("[AUTH] Erro ao autenticar:",s),null;let o="none";return n.user.email==="admin@server.com"&&(o="admin"),{id:n.user.id,email:n.user.email,name:((r=n.user.user_metadata)==null?void 0:r.name)||e.split("@")[0],role:o,store_id:null,active:!0,created_at:n.user.created_at,stores:null}}catch(n){return console.error("[AUTH] Erro inesperado:",n),null}},AM=async(e,t)=>{try{const r=await fetch(`/api/usuarios/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,role:t.role,store_id:t.store_id,password:t.password||void 0})});if(!r.ok){const s=await r.json();throw console.error(" Erro do backend (update):",s),new Error(s.error||"Erro ao atualizar usurio")}return await r.json()}catch(r){throw console.error(" Erro na comunicao (update):",r),new Error(`Erro na comunicao com o backend: ${r.message}`)}},RM=async e=>{try{const t=await fetch(`/api/usuarios/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!t.ok){const r=await t.json();throw new Error(r.error||"Erro ao deletar usurio")}return await t.json()}catch(t){throw new Error(`Erro na comunicao com o backend: ${t.message}`)}},js=async(e=!1)=>{let t=Q.from("stores").select("*").order("name",{ascending:!0});e&&(t=t.eq("is_online_store",!1));const{data:r,error:n}=await t;return n?[]:r},OM=async(e,t)=>{try{const r=await fetch(`/api/usuarios/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:t})});if(!r.ok){const s=await r.json();throw console.error(" Erro do backend:",s),new Error(s.error||"Erro ao alterar status do usurio")}return await r.json()}catch(r){throw console.error(" Erro na comunicao:",r),new Error(`Erro na comunicao com o backend: ${r.message}`)}},IM=({onLogin:e})=>{const[t,r]=p.useState(""),[n,s]=p.useState(""),[o,a]=p.useState(!1),{toast:l}=at(),c=async u=>{u.preventDefault(),console.log("[LOGIN] handleSubmit chamado"),a(!0);try{console.log("[LOGIN] Antes do authenticateUser");const d=await TM(t,n);console.log("[LOGIN] Resultado do login:",d),d?d.role==="none"?(l({title:"Acesso restrito",description:"Seu usurio ainda no possui permisso de acesso. Solicite a um administrador para atribuir uma funo (role).",variant:"destructive"}),console.warn("[LOGIN] Usurio sem role, acesso bloqueado:",d)):(l({title:"Login realizado com sucesso!",description:`Bem-vindo, ${d.email}!`}),e(d)):(l({title:"Erro no login",description:"Usurio ou senha incorretos, ou usurio sem permisso ativa.",variant:"destructive"}),console.error("[LOGIN] Falha no login: usurio no encontrado ou sem permisso."))}catch(d){console.error("[LOGIN] Erro inesperado:",d),l({title:"Erro no sistema",description:"Ocorreu um problema ao tentar fazer login. Tente novamente.",variant:"destructive"})}finally{a(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center gradient-bg-fdg p-4",children:i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-md",children:i.jsxs(re,{className:"glass-effect neon-glow",children:[i.jsxs(xe,{className:"text-center",children:[i.jsx("img",{src:"/images/logobranca fdg.png",alt:"Fio de Gala",className:"mx-auto mb-4 w-32 h-32 object-contain"}),i.jsx(we,{className:"text-2xl font-bold text-white",children:"FDG System"}),i.jsx(P1,{className:"text-gray-300",children:"Faa login para acessar o sistema"})]}),i.jsxs(se,{children:[i.jsxs("form",{onSubmit:c,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"email",className:"text-white",children:"E-mail"}),i.jsxs("div",{className:"relative",children:[i.jsx(qs,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(W,{id:"email",type:"email",placeholder:"Digite seu e-mail",value:t,onChange:u=>r(u.target.value),className:"pl-10 bg-background/50 border-gray-600 text-white placeholder:text-gray-400",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"password",className:"text-white",children:"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(of,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),i.jsx(W,{id:"password",type:"password",placeholder:"Digite sua senha",value:n,onChange:u=>s(u.target.value),className:"pl-10 bg-background/50 border-gray-600 text-white placeholder:text-gray-400",required:!0})]})]}),i.jsx(F,{type:"submit",className:"w-full bg-[#3B657B] hover:bg-[#33566a] text-white font-semibold py-2 px-4 rounded-lg transition-all duration-300 transform hover:scale-105",disabled:o,children:o?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"loading-spinner w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Entrando..."]}):"Entrar"})]}),i.jsxs("div",{className:"mt-6 p-4 bg-background/20 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Use o e-mail cadastrado no Supabase Authentication:"}),i.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[i.jsx("div",{children:"Exemplo: admin@admin.com / sua senha"}),i.jsx("div",{children:"Exemplo: gerente@empresa.com / sua senha"})]})]})]})]})})})},LM=({onLogout:e})=>{var g;const[t,r]=p.useState(!1),n=it(),s=qm(),o=pi(),l=[{id:"pos",label:"Frente de Caixa",icon:Aa,path:"/pos",permission:J.PROCESS_SALES},{id:"products",label:"Produtos",icon:Hr,path:"/products",permission:J.MANAGE_PRODUCTS},{id:"categories",label:"Categorias",icon:uf,path:"/categories",permission:J.MANAGE_CATEGORIES},{id:"stock",label:"Estoque",icon:zP,path:"/stock",permission:J.MANAGE_STOCK},{id:"customers",label:"Clientes",icon:hn,path:"/customers",permission:J.MANAGE_PRODUCTS},{id:"customer-groups",label:"Nveis de Comprador",icon:Zj,path:"/customer-groups",permission:J.MANAGE_PRODUCTS},{id:"reports",label:"Relatrios",icon:Hj,path:"/reports",permission:J.VIEW_REPORTS},{id:"users",label:"Usurios",icon:cf,path:"/users",permission:J.MANAGE_USERS},{id:"cash-register",label:"Controle de Caixa",icon:xn,path:"/cash-register",permission:J.CASH_REGISTER_MANAGEMENT},{id:"peripherals",label:"Perifricos",icon:af,path:"/peripherals",permission:J.MANAGE_USERS},{id:"interest-rates",label:"Taxas de Juros",icon:Yj,path:"/interest-rates",permission:J.MANAGE_USERS}].filter(w=>Gt(n==null?void 0:n.role,w.permission)),c=()=>{If(),e(),s("/login")},u=()=>{const w=o.pathname==="/"?"/pos":o.pathname,m=l.find(j=>j.path===w);return(m==null?void 0:m.label)||"Dashboard"};p.useEffect(()=>{const w=()=>{window.innerWidth>=1024?r(!0):r(!1)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]);const d={open:{x:0},closed:{x:"-100%"}},h={type:"spring",stiffness:300,damping:30},f=((g=n==null?void 0:n.stores)==null?void 0:g.name)||(Gt(n==null?void 0:n.role,J.VIEW_ALL_STORES_DATA)?"Todas as Lojas":"Loja no definida");return i.jsxs("div",{className:"min-h-screen bg-background flex",children:[i.jsx(fI,{children:t&&i.jsx(xs.div,{variants:d,initial:"closed",animate:"open",exit:"closed",transition:h,className:"fixed inset-y-0 left-0 z-50 w-64 bg-card border-r border-border shadow-lg lg:static lg:translate-x-0",children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[i.jsxs(Go,{to:"/",className:"flex items-center space-x-2",children:[i.jsx("img",{src:"/images/logobranca fdg.png",alt:"FDG System",className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-bold text-lg",children:"FDG System"})]}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"lg:hidden",children:i.jsx(Oa,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex-1 p-4",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Logado como:"}),i.jsx("p",{className:"font-semibold",children:n==null?void 0:n.name}),i.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:n==null?void 0:n.role}),i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mt-1",children:[i.jsx(Ra,{className:"w-3 h-3 mr-1"}),i.jsx("span",{children:f})]})]}),i.jsx("nav",{className:"space-y-2",children:l.map(w=>{const m=w.icon,j=o.pathname===w.path||o.pathname==="/"&&w.path==="/pos";return i.jsx(F,{variant:j?"default":"ghost",className:`w-full justify-start ${j?"bg-primary text-primary-foreground":""}`,asChild:!0,onClick:()=>{window.innerWidth<1024&&r(!1)},children:i.jsxs(Go,{to:w.path,children:[i.jsx(m,{className:"w-5 h-5 mr-3"}),w.label]})},w.id)})})]}),i.jsx("div",{className:"p-4 border-t border-border",children:i.jsxs(F,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:c,children:[i.jsx(IP,{className:"w-5 h-5 mr-3"}),"Sair"]})})]})},"sidebar")}),t&&window.innerWidth<1024&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>r(!1)}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[i.jsxs("header",{className:"bg-card border-b border-border p-4 flex items-center justify-between sticky top-0 z-30",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>r(!0),className:"lg:hidden",children:i.jsx(MP,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("h1",{className:"text-xl font-semibold",children:u()}),i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[i.jsx(Ra,{className:"w-3 h-3 mr-1"}),i.jsx("span",{children:f})]})]})]}),Gt(J.MANAGE_FISCAL_DOCUMENTS)&&i.jsxs(Go,{to:"/fiscal-documents",className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50 ${o.pathname==="/fiscal-documents"?"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-50":""}`,children:[i.jsx(Pa,{className:"h-4 w-4"}),"Documentos Fiscais"]})]}),i.jsx("main",{className:"flex-1 p-6 overflow-auto",children:i.jsx(Wk,{})})]})]})},MM=async()=>{var s;const e=it();let t=Q.from("stock_movements").select(`
      *,
      products (name, barcode),
      stores (name, is_online_store),
      product_store_stock (id)
    `).order("created_at",{ascending:!1});e&&e.store_id&&!((s=e.stores)!=null&&s.is_online_store)&&!Gt(e.role,J.VIEW_ALL_STORES_DATA)&&(t=t.or(`store_id.eq.${e.store_id},stock_type.eq.online`));const{data:r,error:n}=await t;return n?(console.error("Error fetching stock movements:",n),[]):r.map(o=>{var a,l;return{...o,productName:((a=o.products)==null?void 0:a.name)||"Produto Desconhecido",userName:"Usurio do Sistema",storeName:((l=o.stores)==null?void 0:l.name)||(o.stock_type==="online"?"Estoque Online":"Loja Desconhecida")}})},rc=async e=>{const t=it();let r={...e};if(r.user_id=r.user_id||(t==null?void 0:t.id),!r.store_id&&r.stock_type!=="online")r.store_id=t==null?void 0:t.store_id;else if(r.stock_type==="online"){const a=(await js()).find(l=>l.is_online_store);a&&(r.store_id=a.id)}if(!r.store_id&&r.stock_type==="physical_store"&&!Gt(t==null?void 0:t.role,J.VIEW_ALL_STORES_DATA))throw console.error("Error: store_id is required for this user to add stock movement for a physical store."),new Error("store_id  obrigatrio para movimentao em loja fsica.");const{data:n,error:s}=await Q.from("stock_movements").insert([r]).select().single();if(s)throw console.error("Error adding stock movement:",s),s;return n},kp=async(e=!1)=>{it();let t=Q.from("products").select("*, stores(name, is_online_store)").eq("active",!0).order("name",{ascending:!0});const{data:r,error:n}=await t;if(n)return console.error("Error fetching products:",n),[];if(e&&r){for(let s of r)if(s.product_type==="variable"){const{data:o,error:a}=await Q.from("product_variations").select("*").eq("product_id",s.id);a&&console.error(`Error fetching variations for product ${s.id}:`,a),s.variations=o||[]}}return r},DM=async(e=!1)=>{console.log(" getAllProducts iniciado, includeVariations:",e);let t=Q.from("products").select("*, stores(name, is_online_store)").order("name",{ascending:!0});const{data:r,error:n}=await t;if(n)return console.error(" Erro ao buscar todos os produtos:",n),[];if(console.log(" Produtos encontrados:",(r==null?void 0:r.length)||0),e&&r){for(let s of r)if(s.product_type==="variable"){const{data:o,error:a}=await Q.from("product_variations").select("*").eq("product_id",s.id);a&&console.error(` Erro ao buscar variaes do produto ${s.id}:`,a),s.variations=o||[]}}return console.log(" getAllProducts concludo"),r},$M=async e=>{console.log(" addProduct iniciado com dados:",e);const t=it();console.log(" Usurio atual:",t);const{variations:r,...n}=e;let s={...n};if(console.log(" Dados principais para insero:",s),!s.store_id){console.log(" Buscando loja online...");const l=await js();console.log(" Lojas disponveis:",l);const c=l.find(u=>u.is_online_store);if(c)s.store_id=c.id,console.log(" Loja online associada:",c.id);else throw console.error(" Loja online principal no encontrada para associar o produto."),new Error("Loja online principal no encontrada.")}console.log(" Inserindo produto no Supabase...");const{data:o,error:a}=await Q.from("products").insert([s]).select("*, stores(name, is_online_store)").single();if(a)throw console.error(" Erro ao inserir produto:",a),a;if(console.log(" Produto inserido com sucesso:",o),o&&o.product_type==="variable"&&r&&r.length>0){console.log(" Inserindo variaes...");const l=r.map(u=>({...u,product_id:o.id}));console.log(" Variaes para inserir:",l);const{error:c}=await Q.from("product_variations").insert(l);if(c)throw console.error(" Erro ao inserir variaes:",c),await Q.from("products").delete().eq("id",o.id),c;console.log(" Variaes inseridas com sucesso")}return console.log(" Produto criado completamente:",o),o},nc=async(e,t)=>{const{variations:r,...n}=t,{data:s,error:o}=await Q.from("products").update(n).eq("id",e).select("*, stores(name, is_online_store)").single();if(o)throw console.error("Error updating product:",o),o;if(s&&s.product_type==="variable"){if(await Q.from("product_variations").delete().eq("product_id",e),r&&r.length>0){const a=r.map(c=>{const{id:u,...d}=c;return{...d,product_id:e}}),{error:l}=await Q.from("product_variations").insert(a);if(l)throw console.error("Error updating product variations:",l),l}}else s&&s.product_type==="simple"&&await Q.from("product_variations").delete().eq("product_id",e);return s},FM=async e=>{const{data:t,error:r}=await Q.from("products").select("*, stores(name, is_online_store)").eq("id",e).single();if(r||!t)return console.error("Erro ao buscar produto por ID:",r),null;if(t.product_type==="variable"){const{data:n,error:s}=await Q.from("product_variations").select("*").eq("product_id",e);s&&console.error("Erro ao buscar variaes:",s),t.variations=n||[]}else t.variations=[];if(Q.from("product_images")){const{data:n,error:s}=await Q.from("product_images").select("*").eq("product_id",e);s||(t.images=n)}return t},li=async(e,t=null,r=null)=>{let n=Q.from("product_store_stock").select("*, stores(name, is_online_store), product_variations(id, attributes)").eq("product_id",e);t&&(n=n.eq("store_id",t)),r&&(n=n.eq("variation_id",r));const{data:s,error:o}=await n;return o?(console.error("Error fetching product store stock:",o),t&&r?null:[]):t&&r?s[0]||null:s},VM=async(e,t,r,n=null)=>{const s=await li(e,t,n);let o,a=s==null?void 0:s.id;if(s){o=s.quantity+r;const{error:l}=await Q.from("product_store_stock").update({quantity:o}).eq("id",s.id);if(l)throw l}else{o=r;const{data:l,error:c}=await Q.from("product_store_stock").insert({product_id:e,store_id:t,variation_id:n,quantity:o}).select("id").single();if(c)throw c;a=l==null?void 0:l.id}return await tS(e),await rc({product_id:e,variation_id:n,store_id:t,type:"transfer_in",quantity:r,previous_stock:s?s.quantity:0,new_stock:o,reason:"Compartilhamento de estoque para loja fsica.",stock_type:"physical_store",product_store_stock_id:a}),{success:!0}},tS=async e=>{const{data:t,error:r}=await Q.from("products").select("product_type, stock").eq("id",e).single();if(r||!t){console.error("Error fetching product for stock recalculation:",r);return}let n=0;if(t.product_type==="variable"){const{data:s,error:o}=await Q.from("product_variations").select("stock").eq("product_id",e);if(o){console.error("Error fetching variations for stock recalculation:",o);return}n=s.reduce((a,l)=>a+l.stock,0)}else{const{data:s,error:o}=await Q.from("product_store_stock").select("quantity").eq("product_id",e).is("variation_id",null);if(o){console.error("Error fetching physical stocks for simple product:",o);return}n=s.reduce((a,l)=>a+l.quantity,0)}if(t.stock!==n){const{error:s}=await Q.from("products").update({stock:n}).eq("id",e);s&&console.error("Error updating online/general stock:",s)}},UM=async e=>{await Q.from("products").delete().eq("id",e),await Q.from("product_variations").delete().eq("product_id",e),Q.from("product_images")&&await Q.from("product_images").delete().eq("product_id",e)},BM=(e,t=null,r={specificStoreId:null})=>{var o;const n=it(),s=t?`${t}.`:"";return r.specificStoreId?e.eq(`${s}store_id`,r.specificStoreId):n&&n.store_id&&!((o=n.stores)!=null&&o.is_online_store)&&!Gt(n.role,J.VIEW_ALL_STORES_DATA)?e.eq(`${s}store_id`,n.store_id):e},rS=async()=>{let e=Q.from("sales").select("*, customers(name), stores(name, is_online_store)").order("created_at",{ascending:!1});e=BM(e,"sales");const{data:t,error:r}=await e;return r?(console.error("Error fetching sales:",r),[]):t},nS=async()=>{const{data:e,error:t}=await Q.from("customers").select(`
      *,
      customer_groups (
        id,
        name,
        ticket_min
      )
    `).order("name",{ascending:!0});return t?(console.error("Error fetching customers:",t),[]):e},sS=async e=>{const{data:t,error:r}=await Q.from("customers").insert([e]).select();return r?(console.error("Error adding customer:",r),null):t?t[0]:null},zM=async(e,t)=>{const{data:r,error:n}=await Q.from("customers").update(t).eq("id",e).select();return n?(console.error("Error updating customer:",n),null):r?r[0]:null},WM=async e=>{const{error:t}=await Q.from("customers").delete().eq("id",e);return t?(console.error("Error deleting customer:",t),!1):!0},qM=async()=>{var a,l;const e=it();let t=Q.from("cash_register_logs").select("*, stores(name, is_online_store)").order("created_at",{ascending:!1}),r=null;if(e&&e.store_id&&!((a=e.stores)!=null&&a.is_online_store)&&!Gt(e.role,J.VIEW_ALL_STORES_DATA))r=e.store_id;else if(e&&((l=e.stores)!=null&&l.is_online_store))r=e.store_id;else if(e&&e.role===jt.ADMIN&&!e.store_id){const u=(await js()).find(d=>d.is_online_store);u&&(r=u.id)}if(r)t=t.eq("store_id",r);else if(!Gt(e==null?void 0:e.role,J.VIEW_ALL_STORES_DATA))return console.warn("Usurio sem loja definida e sem permisso para ver todos os caixas. Retornando caixa fechado."),{isOpen:!1,openingAmount:0,currentAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:null,store:null};const{data:n,error:s}=await t.limit(1).maybeSingle();if(s)return console.error("Error fetching current cash register state:",s),{isOpen:!1,openingAmount:0,currentAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:null,store:null};if(!n)return{isOpen:!1,openingAmount:0,currentAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:r,store:e==null?void 0:e.stores};const o=n.type!=="close";return{id:n.id,isOpen:o,openingAmount:n.type==="open"||o?n.initial_amount:0,currentAmount:n.current_amount,openedBy:o&&n.type==="open"||o?n.user_id:null,openedAt:o&&n.type==="open"||o?n.created_at:null,closedAt:n.type==="close"?n.created_at:null,store_id:n.store_id,store:n.stores}},oS="http://localhost:4000/api",Lf=async(e,t=null,r="varejo")=>{try{const n=new URLSearchParams;n.append("code",e),t&&n.append("store_id",t),r&&n.append("modalidade",r);const s=await fetch(`${oS}/sales/products/barcode/${e}?${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok){const o=await s.json();throw new Error(o.error||"Erro ao buscar produto")}return await s.json()}catch(n){throw new Error(`Erro na comunicao com o backend: ${n.message}`)}},HM=async e=>{try{const t=await fetch(`${oS}/sales`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.error||"Erro ao criar venda")}return await t.json()}catch(t){throw new Error(`Erro na comunicao com o backend: ${t.message}`)}};class GM{constructor(){this.baseUrl="/api/peripherals"}async testPrinter(t){try{const r=await fetch(`${this.baseUrl}/test-printer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({printerConfig:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao testar impressora");return n}catch(r){throw console.error("Erro no teste da impressora:",r),r}}async testScanner(t){try{const r=await fetch(`${this.baseUrl}/test-scanner`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scannerConfig:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao testar scanner");return n}catch(r){throw console.error("Erro no teste do scanner:",r),r}}async scanBarcode(t){try{const r=await fetch(`${this.baseUrl}/scan-barcode`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scannerConfig:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao ler cdigo de barras");return n}catch(r){throw console.error("Erro na leitura do cdigo de barras:",r),r}}async printReceipt(t,r){try{const n=await fetch(`${this.baseUrl}/print-receipt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({saleData:t,printerConfig:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao imprimir recibo");return s}catch(n){throw console.error("Erro na impresso:",n),n}}async getConfig(){try{const t=await fetch(`${this.baseUrl}/config`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.error||"Erro ao obter configuraes");return r.config}catch(t){throw console.error("Erro ao obter configuraes:",t),t}}async saveConfig(t){try{const r=await fetch(`${this.baseUrl}/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao salvar configuraes");return n}catch(r){throw console.error("Erro ao salvar configuraes:",r),r}}async detectDevices(){try{const t=await fetch(`${this.baseUrl}/detect-devices`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.error||"Erro ao detectar dispositivos");return r.devices}catch(t){throw console.error("Erro ao detectar dispositivos:",t),t}}generateReceiptPreview(t){const r=new Date,n=r.toLocaleDateString("pt-BR"),s=r.toLocaleTimeString("pt-BR");return`
================================
    ${t.store_name||"LOJA"}
================================
Data: ${n}
Hora: ${s}
Venda: #${t.id}
================================
${t.items.map(o=>`${o.name}
${o.quantity}x R$ ${o.price.toFixed(2)} = R$ ${o.subtotal.toFixed(2)}`).join(`
`)}
================================
Subtotal: R$ ${t.subtotal.toFixed(2)}
Desconto: R$ ${(t.discount||0).toFixed(2)}
TOTAL: R$ ${t.total.toFixed(2)}
================================
${t.payments.map(o=>`${o.method}: R$ ${o.amount.toFixed(2)}`).join(`
`)}
================================
Obrigado pela preferncia!
================================
    `.trim()}}const Dn=new GM;class KM{constructor(){this.baseUrl="/api/fiscal"}async getConfig(){try{const t=await fetch(`${this.baseUrl}/config`,{method:"GET",headers:{"Content-Type":"application/json"}}),r=await t.json();if(!t.ok)throw new Error(r.error||"Erro ao obter configuraes fiscais");return r.config}catch(t){throw console.error("Erro ao obter configuraes fiscais:",t),t}}async saveConfig(t){try{const r=await fetch(`${this.baseUrl}/config`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:t})}),n=await r.json();if(!r.ok)throw new Error(n.error||"Erro ao salvar configuraes fiscais");return n}catch(r){throw console.error("Erro ao salvar configuraes fiscais:",r),r}}async generateNFe(t,r){try{const n=await fetch(`${this.baseUrl}/generate-nfe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({saleData:t,fiscalConfig:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao gerar NF-e");return s}catch(n){throw console.error("Erro ao gerar NF-e:",n),n}}async generateSAT(t,r){try{const n=await fetch(`${this.baseUrl}/generate-sat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({saleData:t,fiscalConfig:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao gerar SAT");return s}catch(n){throw console.error("Erro ao gerar SAT:",n),n}}async sendDocument(t,r){try{const n=await fetch(`${this.baseUrl}/send-document`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({documentId:t,documentType:r})}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao enviar documento fiscal");return s}catch(n){throw console.error("Erro ao enviar documento fiscal:",n),n}}async getDocuments(t={}){try{const r=new URLSearchParams;Object.keys(t).forEach(o=>{t[o]&&r.append(o,t[o])});const n=await fetch(`${this.baseUrl}/documents?${r}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await n.json();if(!n.ok)throw new Error(s.error||"Erro ao obter documentos fiscais");return s.documents}catch(r){throw console.error("Erro ao obter documentos fiscais:",r),r}}async generateFiscalDocument(t){try{const r=await this.getConfig();if(r.nfe.enabled)return await this.generateNFe(t,r);if(r.sat.enabled)return await this.generateSAT(t,r);throw new Error("Nenhum sistema fiscal habilitado")}catch(r){throw console.error("Erro ao gerar documento fiscal:",r),r}}validateCNPJ(t){if(t=t.replace(/[^\d]/g,""),t.length!==14||/^(\d)\1+$/.test(t))return!1;let r=0,n=2;for(let o=11;o>=0;o--)r+=parseInt(t.charAt(o))*n,n=n===9?2:n+1;let s=11-r%11;if(s>9&&(s=0),parseInt(t.charAt(12))!==s)return!1;r=0,n=2;for(let o=12;o>=0;o--)r+=parseInt(t.charAt(o))*n,n=n===9?2:n+1;return s=11-r%11,s>9&&(s=0),parseInt(t.charAt(13))===s}formatCNPJ(t){return t.replace(/[^\d]/g,"").replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")}}const qn=new KM;class JM{async getInterestRate(){try{const{data:t,error:r}=await Q.from("interest_rates_config").select("credit_card_interest, updated_at, updated_by").order("updated_at",{ascending:!1}).limit(1).single();return r?(console.error("Erro ao buscar taxa de juros:",r),{credit_card_interest:2.99}):t||{credit_card_interest:2.99}}catch(t){return console.error("Erro ao buscar taxa de juros:",t),{credit_card_interest:2.99}}}async saveInterestRate(t){try{const{data:{user:r}}=await Q.auth.getUser();if(!r)throw new Error("Usurio no autenticado");const{data:n}=await Q.from("interest_rates_config").select("id").limit(1).single();let s;if(n){const{data:o,error:a}=await Q.from("interest_rates_config").update({credit_card_interest:t,updated_by:r.id,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(a)throw console.error("Erro ao atualizar taxa de juros:",a),a;s=o}else{const{data:o,error:a}=await Q.from("interest_rates_config").insert({credit_card_interest:t,created_by:r.id,updated_by:r.id}).select().single();if(a)throw console.error("Erro ao criar taxa de juros:",a),a;s=o}return s}catch(r){throw console.error("Erro ao salvar taxa de juros:",r),r}}async getCurrentConfigWithAudit(){try{const{data:t,error:r}=await Q.from("interest_rates_config").select(`
          credit_card_interest,
          created_at,
          updated_at,
          created_by,
          updated_by
        `).limit(1).single();return r?(console.error("Erro ao buscar configurao:",r),null):t}catch(t){return console.error("Erro ao buscar configurao:",t),null}}async canManageInterestRates(){try{const{data:{user:t}}=await Q.auth.getUser();if(!t)return!1;const{data:r,error:n}=await Q.from("user_roles").select("role").eq("user_id",t.id).in("role",["admin","manager"]).single();return n?!1:!!r}catch(t){return console.error("Erro ao verificar permisso:",t),!1}}}const Wi=new JM;var YM=Yf[" useId ".trim().toString()]||(()=>{}),XM=0;function is(e){const[t,r]=p.useState(YM());return _t(()=>{e||r(n=>n??String(XM++))},[e]),e||(t?`radix-${t}`:"")}var Hd="focusScope.autoFocusOnMount",Gd="focusScope.autoFocusOnUnmount",yx={bubbles:!1,cancelable:!0},QM="FocusScope",Pp=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=p.useState(null),u=yr(s),d=yr(o),h=p.useRef(null),f=Me(t,m=>c(m)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let m=function(v){if(g.paused||!l)return;const b=v.target;l.contains(b)?h.current=b:On(h.current,{select:!0})},j=function(v){if(g.paused||!l)return;const b=v.relatedTarget;b!==null&&(l.contains(b)||On(h.current,{select:!0}))},x=function(v){if(document.activeElement===document.body)for(const S of v)S.removedNodes.length>0&&On(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",j);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",j),y.disconnect()}}},[n,l,g.paused]),p.useEffect(()=>{if(l){wx.add(g);const m=document.activeElement;if(!l.contains(m)){const x=new CustomEvent(Hd,yx);l.addEventListener(Hd,u),l.dispatchEvent(x),x.defaultPrevented||(ZM(s4(iS(l)),{select:!0}),document.activeElement===m&&On(l))}return()=>{l.removeEventListener(Hd,u),setTimeout(()=>{const x=new CustomEvent(Gd,yx);l.addEventListener(Gd,d),l.dispatchEvent(x),x.defaultPrevented||On(m??document.body,{select:!0}),l.removeEventListener(Gd,d),wx.remove(g)},0)}}},[l,u,d,g]);const w=p.useCallback(m=>{if(!r&&!n||g.paused)return;const j=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,x=document.activeElement;if(j&&x){const y=m.currentTarget,[v,b]=e4(y);v&&b?!m.shiftKey&&x===b?(m.preventDefault(),r&&On(v,{select:!0})):m.shiftKey&&x===v&&(m.preventDefault(),r&&On(b,{select:!0})):x===y&&m.preventDefault()}},[r,n,g.paused]);return i.jsx(me.div,{tabIndex:-1,...a,ref:f,onKeyDown:w})});Pp.displayName=QM;function ZM(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(On(n,{select:t}),document.activeElement!==r)return}function e4(e){const t=iS(e),r=xx(t,e),n=xx(t.reverse(),e);return[r,n]}function iS(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function xx(e,t){for(const r of e)if(!t4(r,{upTo:t}))return r}function t4(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function r4(e){return e instanceof HTMLInputElement&&"select"in e}function On(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&r4(e)&&t&&e.select()}}var wx=n4();function n4(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=jx(e,t),e.unshift(t)},remove(t){var r;e=jx(e,t),(r=e[0])==null||r.resume()}}}function jx(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function s4(e){return e.filter(t=>t.tagName!=="A")}var Kd=0;function aS(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??bx()),document.body.insertAdjacentElement("beforeend",e[1]??bx()),Kd++,()=>{Kd===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Kd--}},[])}function bx(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Br=function(){return Br=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},Br.apply(this,arguments)};function lS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function o4(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var sc="right-scroll-bar-position",oc="width-before-scroll-bar",i4="with-scroll-bars-hidden",a4="--removed-body-scroll-bar-size";function Jd(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function l4(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var c4=typeof window<"u"?p.useLayoutEffect:p.useEffect,Sx=new WeakMap;function u4(e,t){var r=l4(t||null,function(n){return e.forEach(function(s){return Jd(s,n)})});return c4(function(){var n=Sx.get(r);if(n){var s=new Set(n),o=new Set(e),a=r.current;s.forEach(function(l){o.has(l)||Jd(l,null)}),o.forEach(function(l){s.has(l)||Jd(l,a)})}Sx.set(r,e)},[e]),r}function d4(e){return e}function h4(e,t){t===void 0&&(t=d4);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var a=t(o,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(o),a=r}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function f4(e){e===void 0&&(e={});var t=h4(null);return t.options=Br({async:!0,ssr:!1},e),t}var cS=function(e){var t=e.sideCar,r=lS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,Br({},r))};cS.isSideCarExport=!0;function m4(e,t){return e.useMedium(t),cS}var uS=f4(),Yd=function(){},Ou=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:Yd,onWheelCapture:Yd,onTouchMoveCapture:Yd}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,g=e.noRelative,w=e.noIsolation,m=e.inert,j=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,v=e.gapMode,b=lS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,E=u4([r,t]),N=Br(Br({},b),s);return p.createElement(p.Fragment,null,d&&p.createElement(S,{sideCar:uS,removeScrollBar:u,shards:h,noRelative:g,noIsolation:w,inert:m,setCallbacks:o,allowPinchZoom:!!j,lockRef:r,gapMode:v}),a?p.cloneElement(p.Children.only(l),Br(Br({},N),{ref:E})):p.createElement(y,Br({},N,{className:c,ref:E}),l))});Ou.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ou.classNames={fullWidth:oc,zeroRight:sc};var _x,p4=function(){if(_x)return _x;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function g4(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=p4();return t&&e.setAttribute("nonce",t),e}function v4(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function y4(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var x4=function(){var e=0,t=null;return{add:function(r){e==0&&(t=g4())&&(v4(t,r),y4(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},w4=function(){var e=x4();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},dS=function(){var e=w4(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},j4={left:0,top:0,right:0,gap:0},Xd=function(e){return parseInt(e||"",10)||0},b4=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[Xd(r),Xd(n),Xd(s)]},S4=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return j4;var t=b4(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},_4=dS(),Ko="data-scroll-locked",C4=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(i4,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ko,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sc,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(oc,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(sc," .").concat(sc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(oc," .").concat(oc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ko,`] {
    `).concat(a4,": ").concat(l,`px;
  }
`)},Cx=function(){var e=parseInt(document.body.getAttribute(Ko)||"0",10);return isFinite(e)?e:0},N4=function(){p.useEffect(function(){return document.body.setAttribute(Ko,(Cx()+1).toString()),function(){var e=Cx()-1;e<=0?document.body.removeAttribute(Ko):document.body.setAttribute(Ko,e.toString())}},[])},E4=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;N4();var o=p.useMemo(function(){return S4(s)},[s]);return p.createElement(_4,{styles:C4(o,!t,s,r?"":"!important")})},Mf=!1;if(typeof window<"u")try{var Il=Object.defineProperty({},"passive",{get:function(){return Mf=!0,!0}});window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Mf=!1}var wo=Mf?{passive:!1}:!1,k4=function(e){return e.tagName==="TEXTAREA"},hS=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!k4(e)&&r[t]==="visible")},P4=function(e){return hS(e,"overflowY")},T4=function(e){return hS(e,"overflowX")},Nx=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=fS(e,n);if(s){var o=mS(e,n),a=o[1],l=o[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},A4=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},R4=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},fS=function(e,t){return e==="v"?P4(t):T4(t)},mS=function(e,t){return e==="v"?A4(t):R4(t)},O4=function(e,t){return e==="h"&&t==="rtl"?-1:1},I4=function(e,t,r,n,s){var o=O4(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,d=a>0,h=0,f=0;do{if(!l)break;var g=mS(e,l),w=g[0],m=g[1],j=g[2],x=m-j-o*w;(w||x)&&fS(e,l)&&(h+=x,f+=w);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(s&&Math.abs(h)<1||!s&&a>h)||!d&&(s&&Math.abs(f)<1||!s&&-a>f))&&(u=!0),u},Ll=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ex=function(e){return[e.deltaX,e.deltaY]},kx=function(e){return e&&"current"in e?e.current:e},L4=function(e,t){return e[0]===t[0]&&e[1]===t[1]},M4=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},D4=0,jo=[];function $4(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),s=p.useState(D4++)[0],o=p.useState(dS)[0],a=p.useRef(e);p.useEffect(function(){a.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var m=o4([e.lockRef.current],(e.shards||[]).map(kx),!0).filter(Boolean);return m.forEach(function(j){return j.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),m.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(m,j){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!a.current.allowPinchZoom;var x=Ll(m),y=r.current,v="deltaX"in m?m.deltaX:y[0]-x[0],b="deltaY"in m?m.deltaY:y[1]-x[1],S,E=m.target,N=Math.abs(v)>Math.abs(b)?"h":"v";if("touches"in m&&N==="h"&&E.type==="range")return!1;var _=Nx(N,E);if(!_)return!0;if(_?S=N:(S=N==="v"?"h":"v",_=Nx(N,E)),!_)return!1;if(!n.current&&"changedTouches"in m&&(v||b)&&(n.current=S),!S)return!0;var C=n.current||S;return I4(C,j,m,C==="h"?v:b,!0)},[]),c=p.useCallback(function(m){var j=m;if(!(!jo.length||jo[jo.length-1]!==o)){var x="deltaY"in j?Ex(j):Ll(j),y=t.current.filter(function(S){return S.name===j.type&&(S.target===j.target||j.target===S.shadowParent)&&L4(S.delta,x)})[0];if(y&&y.should){j.cancelable&&j.preventDefault();return}if(!y){var v=(a.current.shards||[]).map(kx).filter(Boolean).filter(function(S){return S.contains(j.target)}),b=v.length>0?l(j,v[0]):!a.current.noIsolation;b&&j.cancelable&&j.preventDefault()}}},[]),u=p.useCallback(function(m,j,x,y){var v={name:m,delta:j,target:x,should:y,shadowParent:F4(x)};t.current.push(v),setTimeout(function(){t.current=t.current.filter(function(b){return b!==v})},1)},[]),d=p.useCallback(function(m){r.current=Ll(m),n.current=void 0},[]),h=p.useCallback(function(m){u(m.type,Ex(m),m.target,l(m,e.lockRef.current))},[]),f=p.useCallback(function(m){u(m.type,Ll(m),m.target,l(m,e.lockRef.current))},[]);p.useEffect(function(){return jo.push(o),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,wo),document.addEventListener("touchmove",c,wo),document.addEventListener("touchstart",d,wo),function(){jo=jo.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,wo),document.removeEventListener("touchmove",c,wo),document.removeEventListener("touchstart",d,wo)}},[]);var g=e.removeScrollBar,w=e.inert;return p.createElement(p.Fragment,null,w?p.createElement(o,{styles:M4(s)}):null,g?p.createElement(E4,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function F4(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const V4=m4(uS,$4);var pS=p.forwardRef(function(e,t){return p.createElement(Ou,Br({},e,{ref:t,sideCar:V4}))});pS.classNames=Ou.classNames;const gS=pS;var U4=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},bo=new WeakMap,Ml=new WeakMap,Dl={},Qd=0,vS=function(e){return e&&(e.host||vS(e.parentNode))},B4=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=vS(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},z4=function(e,t,r,n){var s=B4(t,Array.isArray(e)?e:[e]);Dl[r]||(Dl[r]=new WeakMap);var o=Dl[r],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var g=f.getAttribute(n),w=g!==null&&g!=="false",m=(bo.get(f)||0)+1,j=(o.get(f)||0)+1;bo.set(f,m),o.set(f,j),a.push(f),m===1&&w&&Ml.set(f,!0),j===1&&f.setAttribute(r,"true"),w||f.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(t),l.clear(),Qd++,function(){a.forEach(function(h){var f=bo.get(h)-1,g=o.get(h)-1;bo.set(h,f),o.set(h,g),f||(Ml.has(h)||h.removeAttribute(n),Ml.delete(h)),g||h.removeAttribute(r)}),Qd--,Qd||(bo=new WeakMap,bo=new WeakMap,Ml=new WeakMap,Dl={})}},yS=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=t||U4(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),z4(n,s,r,"aria-hidden")):function(){return null}},Iu="Dialog",[xS,I3]=vs(Iu),[W4,Mr]=xS(Iu),wS=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Qs({prop:n,defaultProp:s??!1,onChange:o,caller:Iu});return i.jsx(W4,{scope:t,triggerRef:l,contentRef:c,contentId:is(),titleId:is(),descriptionId:is(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:a,children:r})};wS.displayName=Iu;var jS="DialogTrigger",bS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(jS,r),o=Me(t,s.triggerRef);return i.jsx(me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Rp(s.open),...n,ref:o,onClick:ue(e.onClick,s.onOpenToggle)})});bS.displayName=jS;var Tp="DialogPortal",[q4,SS]=xS(Tp,{forceMount:void 0}),_S=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=Mr(Tp,t);return i.jsx(q4,{scope:t,forceMount:r,children:p.Children.map(n,a=>i.jsx(gi,{present:r||o.open,children:i.jsx(gu,{asChild:!0,container:s,children:a})}))})};_S.displayName=Tp;var Hc="DialogOverlay",CS=p.forwardRef((e,t)=>{const r=SS(Hc,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Mr(Hc,e.__scopeDialog);return o.modal?i.jsx(gi,{present:n||o.open,children:i.jsx(G4,{...s,ref:t})}):null});CS.displayName=Hc;var H4=si("DialogOverlay.RemoveScroll"),G4=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(Hc,r);return i.jsx(gS,{as:H4,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(me.div,{"data-state":Rp(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Zs="DialogContent",NS=p.forwardRef((e,t)=>{const r=SS(Zs,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Mr(Zs,e.__scopeDialog);return i.jsx(gi,{present:n||o.open,children:o.modal?i.jsx(K4,{...s,ref:t}):i.jsx(J4,{...s,ref:t})})});NS.displayName=Zs;var K4=p.forwardRef((e,t)=>{const r=Mr(Zs,e.__scopeDialog),n=p.useRef(null),s=Me(t,r.contentRef,n);return p.useEffect(()=>{const o=n.current;if(o)return yS(o)},[]),i.jsx(ES,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ue(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:ue(e.onFocusOutside,o=>o.preventDefault())})}),J4=p.forwardRef((e,t)=>{const r=Mr(Zs,e.__scopeDialog),n=p.useRef(!1),s=p.useRef(!1);return i.jsx(ES,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),ES=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=Mr(Zs,r),c=p.useRef(null),u=Me(t,c);return aS(),i.jsxs(i.Fragment,{children:[i.jsx(Pp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(pu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Rp(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(Y4,{titleId:l.titleId}),i.jsx(Q4,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Ap="DialogTitle",kS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(Ap,r);return i.jsx(me.h2,{id:s.titleId,...n,ref:t})});kS.displayName=Ap;var PS="DialogDescription",TS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(PS,r);return i.jsx(me.p,{id:s.descriptionId,...n,ref:t})});TS.displayName=PS;var AS="DialogClose",RS=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Mr(AS,r);return i.jsx(me.button,{type:"button",...n,ref:t,onClick:ue(e.onClick,()=>s.onOpenChange(!1))})});RS.displayName=AS;function Rp(e){return e?"open":"closed"}var OS="DialogTitleWarning",[L3,IS]=A2(OS,{contentName:Zs,titleName:Ap,docsSlug:"dialog"}),Y4=({titleId:e})=>{const t=IS(OS),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},X4="DialogDescriptionWarning",Q4=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IS(X4).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Z4=wS,eD=bS,tD=_S,LS=CS,MS=NS,DS=kS,$S=TS,rD=RS;const mr=Z4,Jo=eD,nD=tD,FS=de.forwardRef(({className:e,...t},r)=>i.jsx(LS,{ref:r,className:Ce("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));FS.displayName=LS.displayName;const Zt=de.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(nD,{children:[i.jsx(FS,{}),i.jsxs(MS,{ref:n,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(rD,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Oa,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Zt.displayName=MS.displayName;const er=({className:e,...t})=>i.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});er.displayName="DialogHeader";const tr=de.forwardRef(({className:e,...t},r)=>i.jsx(DS,{ref:r,className:Ce("text-lg font-semibold leading-none tracking-tight",e),...t}));tr.displayName=DS.displayName;const VS=de.forwardRef(({className:e,...t},r)=>i.jsx($S,{ref:r,className:Ce("text-sm text-muted-foreground",e),...t}));VS.displayName=$S.displayName;function Px(e,[t,r]){return Math.min(r,Math.max(t,e))}var sD=p.createContext(void 0);function Op(e){const t=p.useContext(sD);return e||t||"ltr"}const oD=["top","right","bottom","left"],ds=Math.min,Yt=Math.max,Gc=Math.round,$l=Math.floor,Kr=e=>({x:e,y:e}),iD={left:"right",right:"left",bottom:"top",top:"bottom"},aD={start:"end",end:"start"};function Df(e,t,r){return Yt(e,ds(t,r))}function jn(e,t){return typeof e=="function"?e(t):e}function bn(e){return e.split("-")[0]}function xi(e){return e.split("-")[1]}function Ip(e){return e==="x"?"y":"x"}function Lp(e){return e==="y"?"height":"width"}const lD=new Set(["top","bottom"]);function zr(e){return lD.has(bn(e))?"y":"x"}function Mp(e){return Ip(zr(e))}function cD(e,t,r){r===void 0&&(r=!1);const n=xi(e),s=Mp(e),o=Lp(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Kc(a)),[a,Kc(a)]}function uD(e){const t=Kc(e);return[$f(e),t,$f(t)]}function $f(e){return e.replace(/start|end/g,t=>aD[t])}const Tx=["left","right"],Ax=["right","left"],dD=["top","bottom"],hD=["bottom","top"];function fD(e,t,r){switch(e){case"top":case"bottom":return r?t?Ax:Tx:t?Tx:Ax;case"left":case"right":return t?dD:hD;default:return[]}}function mD(e,t,r,n){const s=xi(e);let o=fD(bn(e),r==="start",n);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map($f)))),o}function Kc(e){return e.replace(/left|right|bottom|top/g,t=>iD[t])}function pD(e){return{top:0,right:0,bottom:0,left:0,...e}}function US(e){return typeof e!="number"?pD(e):{top:e,right:e,bottom:e,left:e}}function Jc(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function Rx(e,t,r){let{reference:n,floating:s}=e;const o=zr(t),a=Mp(t),l=Lp(a),c=bn(t),u=o==="y",d=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,f=n[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:n.y-s.height};break;case"bottom":g={x:d,y:n.y+n.height};break;case"right":g={x:n.x+n.width,y:h};break;case"left":g={x:n.x-s.width,y:h};break;default:g={x:n.x,y:n.y}}switch(xi(t)){case"start":g[a]-=f*(r&&u?-1:1);break;case"end":g[a]+=f*(r&&u?-1:1);break}return g}const gD=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:h}=Rx(u,n,c),f=n,g={},w=0;for(let m=0;m<l.length;m++){const{name:j,fn:x}=l[m],{x:y,y:v,data:b,reset:S}=await x({x:d,y:h,initialPlacement:n,placement:f,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:e,floating:t}});d=y??d,h=v??h,g={...g,[j]:{...g[j],...b}},S&&w<=50&&(w++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(u=S.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y:h}=Rx(u,f,c)),m=-1)}return{x:d,y:h,placement:f,strategy:s,middlewareData:g}};async function $a(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:g=0}=jn(t,e),w=US(g),j=l[f?h==="floating"?"reference":"floating":h],x=Jc(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(j)))==null||r?j:j.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),b=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},S=Jc(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:v,strategy:c}):y);return{top:(x.top-S.top+w.top)/b.y,bottom:(S.bottom-x.bottom+w.bottom)/b.y,left:(x.left-S.left+w.left)/b.x,right:(S.right-x.right+w.right)/b.x}}const vD=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=jn(e,t)||{};if(u==null)return{};const h=US(d),f={x:r,y:n},g=Mp(s),w=Lp(g),m=await a.getDimensions(u),j=g==="y",x=j?"top":"left",y=j?"bottom":"right",v=j?"clientHeight":"clientWidth",b=o.reference[w]+o.reference[g]-f[g]-o.floating[w],S=f[g]-o.reference[g],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=E?E[v]:0;(!N||!await(a.isElement==null?void 0:a.isElement(E)))&&(N=l.floating[v]||o.floating[w]);const _=b/2-S/2,C=N/2-m[w]/2-1,I=ds(h[x],C),L=ds(h[y],C),O=I,D=N-m[w]-L,k=N/2-m[w]/2+_,U=Df(O,k,D),$=!c.arrow&&xi(s)!=null&&k!==U&&o.reference[w]/2-(k<O?I:L)-m[w]/2<0,A=$?k<O?k-O:k-D:0;return{[g]:f[g]+A,data:{[g]:U,centerOffset:k-U-A,...$&&{alignmentOffset:A}},reset:$}}}),yD=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:m=!0,...j}=jn(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const x=bn(s),y=zr(l),v=bn(l)===l,b=await(c.isRTL==null?void 0:c.isRTL(u.floating)),S=f||(v||!m?[Kc(l)]:uD(l)),E=w!=="none";!f&&E&&S.push(...mD(l,m,w,b));const N=[l,...S],_=await $a(t,j),C=[];let I=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&C.push(_[x]),h){const k=cD(s,a,b);C.push(_[k[0]],_[k[1]])}if(I=[...I,{placement:s,overflows:C}],!C.every(k=>k<=0)){var L,O;const k=(((L=o.flip)==null?void 0:L.index)||0)+1,U=N[k];if(U&&(!(h==="alignment"?y!==zr(U):!1)||I.every(P=>P.overflows[0]>0&&zr(P.placement)===y)))return{data:{index:k,overflows:I},reset:{placement:U}};let $=(O=I.filter(A=>A.overflows[0]<=0).sort((A,P)=>A.overflows[1]-P.overflows[1])[0])==null?void 0:O.placement;if(!$)switch(g){case"bestFit":{var D;const A=(D=I.filter(P=>{if(E){const T=zr(P.placement);return T===y||T==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(T=>T>0).reduce((T,V)=>T+V,0)]).sort((P,T)=>P[1]-T[1])[0])==null?void 0:D[0];A&&($=A);break}case"initialPlacement":$=l;break}if(s!==$)return{reset:{placement:$}}}return{}}}};function Ox(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ix(e){return oD.some(t=>e[t]>=0)}const xD=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=jn(e,t);switch(n){case"referenceHidden":{const o=await $a(t,{...s,elementContext:"reference"}),a=Ox(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Ix(a)}}}case"escaped":{const o=await $a(t,{...s,altBoundary:!0}),a=Ox(o,r.floating);return{data:{escapedOffsets:a,escaped:Ix(a)}}}default:return{}}}}},BS=new Set(["left","top"]);async function wD(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=bn(r),l=xi(r),c=zr(r)==="y",u=BS.has(a)?-1:1,d=o&&c?-1:1,h=jn(t,e);let{mainAxis:f,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*d,y:f*u}:{x:f*u,y:g*d}}const jD=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await wD(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},bD=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:j=>{let{x,y}=j;return{x,y}}},...c}=jn(e,t),u={x:r,y:n},d=await $a(t,c),h=zr(bn(s)),f=Ip(h);let g=u[f],w=u[h];if(o){const j=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=g+d[j],v=g-d[x];g=Df(y,g,v)}if(a){const j=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=w+d[j],v=w-d[x];w=Df(y,w,v)}const m=l.fn({...t,[f]:g,[h]:w});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[f]:o,[h]:a}}}}}},SD=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=jn(e,t),d={x:r,y:n},h=zr(s),f=Ip(h);let g=d[f],w=d[h];const m=jn(l,t),j=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const v=f==="y"?"height":"width",b=o.reference[f]-o.floating[v]+j.mainAxis,S=o.reference[f]+o.reference[v]-j.mainAxis;g<b?g=b:g>S&&(g=S)}if(u){var x,y;const v=f==="y"?"width":"height",b=BS.has(bn(s)),S=o.reference[h]-o.floating[v]+(b&&((x=a.offset)==null?void 0:x[h])||0)+(b?0:j.crossAxis),E=o.reference[h]+o.reference[v]+(b?0:((y=a.offset)==null?void 0:y[h])||0)-(b?j.crossAxis:0);w<S?w=S:w>E&&(w=E)}return{[f]:g,[h]:w}}}},_D=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=jn(e,t),d=await $a(t,u),h=bn(s),f=xi(s),g=zr(s)==="y",{width:w,height:m}=o.floating;let j,x;h==="top"||h==="bottom"?(j=h,x=f===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,j=f==="end"?"top":"bottom");const y=m-d.top-d.bottom,v=w-d.left-d.right,b=ds(m-d[j],y),S=ds(w-d[x],v),E=!t.middlewareData.shift;let N=b,_=S;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(_=v),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=y),E&&!f){const I=Yt(d.left,0),L=Yt(d.right,0),O=Yt(d.top,0),D=Yt(d.bottom,0);g?_=w-2*(I!==0||L!==0?I+L:Yt(d.left,d.right)):N=m-2*(O!==0||D!==0?O+D:Yt(d.top,d.bottom))}await c({...t,availableWidth:_,availableHeight:N});const C=await a.getDimensions(l.floating);return w!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function Lu(){return typeof window<"u"}function wi(e){return zS(e)?(e.nodeName||"").toLowerCase():"#document"}function rr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Xr(e){var t;return(t=(zS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function zS(e){return Lu()?e instanceof Node||e instanceof rr(e).Node:!1}function Ir(e){return Lu()?e instanceof Element||e instanceof rr(e).Element:!1}function Jr(e){return Lu()?e instanceof HTMLElement||e instanceof rr(e).HTMLElement:!1}function Lx(e){return!Lu()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rr(e).ShadowRoot}const CD=new Set(["inline","contents"]);function Za(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Lr(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!CD.has(s)}const ND=new Set(["table","td","th"]);function ED(e){return ND.has(wi(e))}const kD=[":popover-open",":modal"];function Mu(e){return kD.some(t=>{try{return e.matches(t)}catch{return!1}})}const PD=["transform","translate","scale","rotate","perspective"],TD=["transform","translate","scale","rotate","perspective","filter"],AD=["paint","layout","strict","content"];function Dp(e){const t=$p(),r=Ir(e)?Lr(e):e;return PD.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||TD.some(n=>(r.willChange||"").includes(n))||AD.some(n=>(r.contain||"").includes(n))}function RD(e){let t=hs(e);for(;Jr(t)&&!ci(t);){if(Dp(t))return t;if(Mu(t))return null;t=hs(t)}return null}function $p(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const OD=new Set(["html","body","#document"]);function ci(e){return OD.has(wi(e))}function Lr(e){return rr(e).getComputedStyle(e)}function Du(e){return Ir(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function hs(e){if(wi(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Lx(e)&&e.host||Xr(e);return Lx(t)?t.host:t}function WS(e){const t=hs(e);return ci(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jr(t)&&Za(t)?t:WS(t)}function Fa(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=WS(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=rr(s);if(o){const l=Ff(a);return t.concat(a,a.visualViewport||[],Za(s)?s:[],l&&r?Fa(l):[])}return t.concat(s,Fa(s,[],r))}function Ff(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qS(e){const t=Lr(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Jr(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Gc(r)!==o||Gc(n)!==a;return l&&(r=o,n=a),{width:r,height:n,$:l}}function Fp(e){return Ir(e)?e:e.contextElement}function Yo(e){const t=Fp(e);if(!Jr(t))return Kr(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=qS(t);let a=(o?Gc(r.width):r.width)/n,l=(o?Gc(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const ID=Kr(0);function HS(e){const t=rr(e);return!$p()||!t.visualViewport?ID:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function LD(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==rr(e)?!1:t}function eo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=Fp(e);let a=Kr(1);t&&(n?Ir(n)&&(a=Yo(n)):a=Yo(e));const l=LD(o,r,n)?HS(o):Kr(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(o){const f=rr(o),g=n&&Ir(n)?rr(n):n;let w=f,m=Ff(w);for(;m&&n&&g!==w;){const j=Yo(m),x=m.getBoundingClientRect(),y=Lr(m),v=x.left+(m.clientLeft+parseFloat(y.paddingLeft))*j.x,b=x.top+(m.clientTop+parseFloat(y.paddingTop))*j.y;c*=j.x,u*=j.y,d*=j.x,h*=j.y,c+=v,u+=b,w=rr(m),m=Ff(w)}}return Jc({width:d,height:h,x:c,y:u})}function Vp(e,t){const r=Du(e).scrollLeft;return t?t.left+r:eo(Xr(e)).left+r}function GS(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Vp(e,n)),o=n.top+t.scrollTop;return{x:s,y:o}}function MD(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",a=Xr(n),l=t?Mu(t.floating):!1;if(n===a||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=Kr(1);const d=Kr(0),h=Jr(n);if((h||!h&&!o)&&((wi(n)!=="body"||Za(a))&&(c=Du(n)),Jr(n))){const g=eo(n);u=Yo(n),d.x=g.x+n.clientLeft,d.y=g.y+n.clientTop}const f=a&&!h&&!o?GS(a,c,!0):Kr(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:r.y*u.y-c.scrollTop*u.y+d.y+f.y}}function DD(e){return Array.from(e.getClientRects())}function $D(e){const t=Xr(e),r=Du(e),n=e.ownerDocument.body,s=Yt(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Yt(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Vp(e);const l=-r.scrollTop;return Lr(n).direction==="rtl"&&(a+=Yt(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:l}}function FD(e,t){const r=rr(e),n=Xr(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=$p();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}const VD=new Set(["absolute","fixed"]);function UD(e,t){const r=eo(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=Jr(e)?Yo(e):Kr(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:a,height:l,x:c,y:u}}function Mx(e,t,r){let n;if(t==="viewport")n=FD(e,r);else if(t==="document")n=$D(Xr(e));else if(Ir(t))n=UD(t,r);else{const s=HS(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Jc(n)}function KS(e,t){const r=hs(e);return r===t||!Ir(r)||ci(r)?!1:Lr(r).position==="fixed"||KS(r,t)}function BD(e,t){const r=t.get(e);if(r)return r;let n=Fa(e,[],!1).filter(l=>Ir(l)&&wi(l)!=="body"),s=null;const o=Lr(e).position==="fixed";let a=o?hs(e):e;for(;Ir(a)&&!ci(a);){const l=Lr(a),c=Dp(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&VD.has(s.position)||Za(a)&&!c&&KS(e,a))?n=n.filter(d=>d!==a):s=l,a=hs(a)}return t.set(e,n),n}function zD(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?Mu(t)?[]:BD(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const h=Mx(t,d,s);return u.top=Yt(h.top,u.top),u.right=ds(h.right,u.right),u.bottom=ds(h.bottom,u.bottom),u.left=Yt(h.left,u.left),u},Mx(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function WD(e){const{width:t,height:r}=qS(e);return{width:t,height:r}}function qD(e,t,r){const n=Jr(t),s=Xr(t),o=r==="fixed",a=eo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=Kr(0);function u(){c.x=Vp(s)}if(n||!n&&!o)if((wi(t)!=="body"||Za(s))&&(l=Du(t)),n){const g=eo(t,!0,o,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else s&&u();o&&!n&&s&&u();const d=s&&!n&&!o?GS(s,l):Kr(0),h=a.left+l.scrollLeft-c.x-d.x,f=a.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:a.width,height:a.height}}function Zd(e){return Lr(e).position==="static"}function Dx(e,t){if(!Jr(e)||Lr(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Xr(e)===r&&(r=r.ownerDocument.body),r}function JS(e,t){const r=rr(e);if(Mu(e))return r;if(!Jr(e)){let s=hs(e);for(;s&&!ci(s);){if(Ir(s)&&!Zd(s))return s;s=hs(s)}return r}let n=Dx(e,t);for(;n&&ED(n)&&Zd(n);)n=Dx(n,t);return n&&ci(n)&&Zd(n)&&!Dp(n)?r:n||RD(e)||r}const HD=async function(e){const t=this.getOffsetParent||JS,r=this.getDimensions,n=await r(e.floating);return{reference:qD(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function GD(e){return Lr(e).direction==="rtl"}const KD={convertOffsetParentRelativeRectToViewportRelativeRect:MD,getDocumentElement:Xr,getClippingRect:zD,getOffsetParent:JS,getElementRects:HD,getClientRects:DD,getDimensions:WD,getScale:Yo,isElement:Ir,isRTL:GD};function YS(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function JD(e,t){let r=null,n;const s=Xr(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:g}=u;if(l||t(),!f||!g)return;const w=$l(h),m=$l(s.clientWidth-(d+f)),j=$l(s.clientHeight-(h+g)),x=$l(d),v={rootMargin:-w+"px "+-m+"px "+-j+"px "+-x+"px",threshold:Yt(0,ds(1,c))||1};let b=!0;function S(E){const N=E[0].intersectionRatio;if(N!==c){if(!b)return a();N?a(!1,N):n=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!YS(u,e.getBoundingClientRect())&&a(),b=!1}try{r=new IntersectionObserver(S,{...v,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,v)}r.observe(e)}return a(!0),o}function YD(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=Fp(e),d=s||o?[...u?Fa(u):[],...Fa(t)]:[];d.forEach(x=>{s&&x.addEventListener("scroll",r,{passive:!0}),o&&x.addEventListener("resize",r)});const h=u&&l?JD(u,r):null;let f=-1,g=null;a&&(g=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=g)==null||v.observe(t)})),r()}),u&&!c&&g.observe(u),g.observe(t));let w,m=c?eo(e):null;c&&j();function j(){const x=eo(e);m&&!YS(m,x)&&r(),m=x,w=requestAnimationFrame(j)}return r(),()=>{var x;d.forEach(y=>{s&&y.removeEventListener("scroll",r),o&&y.removeEventListener("resize",r)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const XD=jD,QD=bD,ZD=yD,e$=_D,t$=xD,$x=vD,r$=SD,n$=(e,t,r)=>{const n=new Map,s={platform:KD,...r},o={...s.platform,_c:n};return gD(e,t,{...s,platform:o})};var s$=typeof document<"u",o$=function(){},ic=s$?p.useLayoutEffect:o$;function Yc(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Yc(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!Yc(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function XS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fx(e,t){const r=XS(e);return Math.round(t*r)/r}function eh(e){const t=p.useRef(e);return ic(()=>{t.current=e}),t}function i$(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[f,g]=p.useState(n);Yc(f,n)||g(n);const[w,m]=p.useState(null),[j,x]=p.useState(null),y=p.useCallback(P=>{P!==E.current&&(E.current=P,m(P))},[]),v=p.useCallback(P=>{P!==N.current&&(N.current=P,x(P))},[]),b=o||w,S=a||j,E=p.useRef(null),N=p.useRef(null),_=p.useRef(d),C=c!=null,I=eh(c),L=eh(s),O=eh(u),D=p.useCallback(()=>{if(!E.current||!N.current)return;const P={placement:t,strategy:r,middleware:f};L.current&&(P.platform=L.current),n$(E.current,N.current,P).then(T=>{const V={...T,isPositioned:O.current!==!1};k.current&&!Yc(_.current,V)&&(_.current=V,oo.flushSync(()=>{h(V)}))})},[f,t,r,L,O]);ic(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const k=p.useRef(!1);ic(()=>(k.current=!0,()=>{k.current=!1}),[]),ic(()=>{if(b&&(E.current=b),S&&(N.current=S),b&&S){if(I.current)return I.current(b,S,D);D()}},[b,S,D,I,C]);const U=p.useMemo(()=>({reference:E,floating:N,setReference:y,setFloating:v}),[y,v]),$=p.useMemo(()=>({reference:b,floating:S}),[b,S]),A=p.useMemo(()=>{const P={position:r,left:0,top:0};if(!$.floating)return P;const T=Fx($.floating,d.x),V=Fx($.floating,d.y);return l?{...P,transform:"translate("+T+"px, "+V+"px)",...XS($.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:T,top:V}},[r,l,$.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:D,refs:U,elements:$,floatingStyles:A}),[d,D,U,$,A])}const a$=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?$x({element:n.current,padding:s}).fn(r):{}:n?$x({element:n,padding:s}).fn(r):{}}}},l$=(e,t)=>({...XD(e),options:[e,t]}),c$=(e,t)=>({...QD(e),options:[e,t]}),u$=(e,t)=>({...r$(e),options:[e,t]}),d$=(e,t)=>({...ZD(e),options:[e,t]}),h$=(e,t)=>({...e$(e),options:[e,t]}),f$=(e,t)=>({...t$(e),options:[e,t]}),m$=(e,t)=>({...a$(e),options:[e,t]});var p$="Arrow",QS=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return i.jsx(me.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});QS.displayName=p$;var g$=QS;function ZS(e){const[t,r]=p.useState(void 0);return _t(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var Up="Popper",[e_,t_]=vs(Up),[v$,r_]=e_(Up),n_=e=>{const{__scopePopper:t,children:r}=e,[n,s]=p.useState(null);return i.jsx(v$,{scope:t,anchor:n,onAnchorChange:s,children:r})};n_.displayName=Up;var s_="PopperAnchor",o_=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=r_(s_,r),a=p.useRef(null),l=Me(t,a);return p.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:i.jsx(me.div,{...s,ref:l})});o_.displayName=s_;var Bp="PopperContent",[y$,x$]=e_(Bp),i_=p.forwardRef((e,t)=>{var Y,X,Ee,z,ie,je;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:g="optimized",onPlaced:w,...m}=e,j=r_(Bp,r),[x,y]=p.useState(null),v=Me(t,lt=>y(lt)),[b,S]=p.useState(null),E=ZS(b),N=(E==null?void 0:E.width)??0,_=(E==null?void 0:E.height)??0,C=n+(o!=="center"?"-"+o:""),I=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},L=Array.isArray(u)?u:[u],O=L.length>0,D={padding:I,boundary:L.filter(j$),altBoundary:O},{refs:k,floatingStyles:U,placement:$,isPositioned:A,middlewareData:P}=i$({strategy:"fixed",placement:C,whileElementsMounted:(...lt)=>YD(...lt,{animationFrame:g==="always"}),elements:{reference:j.anchor},middleware:[l$({mainAxis:s+_,alignmentAxis:a}),c&&c$({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?u$():void 0,...D}),c&&d$({...D}),h$({...D,apply:({elements:lt,rects:Ct,availableWidth:Dr,availableHeight:xr})=>{const{width:wr,height:_n}=Ct.reference,Cn=lt.floating.style;Cn.setProperty("--radix-popper-available-width",`${Dr}px`),Cn.setProperty("--radix-popper-available-height",`${xr}px`),Cn.setProperty("--radix-popper-anchor-width",`${wr}px`),Cn.setProperty("--radix-popper-anchor-height",`${_n}px`)}}),b&&m$({element:b,padding:l}),b$({arrowWidth:N,arrowHeight:_}),f&&f$({strategy:"referenceHidden",...D})]}),[T,V]=c_($),R=yr(w);_t(()=>{A&&(R==null||R())},[A,R]);const H=(Y=P.arrow)==null?void 0:Y.x,oe=(X=P.arrow)==null?void 0:X.y,ce=((Ee=P.arrow)==null?void 0:Ee.centerOffset)!==0,[Ne,ae]=p.useState();return _t(()=>{x&&ae(window.getComputedStyle(x).zIndex)},[x]),i.jsx("div",{ref:k.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:A?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ne,"--radix-popper-transform-origin":[(z=P.transformOrigin)==null?void 0:z.x,(ie=P.transformOrigin)==null?void 0:ie.y].join(" "),...((je=P.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(y$,{scope:r,placedSide:T,onArrowChange:S,arrowX:H,arrowY:oe,shouldHideArrow:ce,children:i.jsx(me.div,{"data-side":T,"data-align":V,...m,ref:v,style:{...m.style,animation:A?void 0:"none"}})})})});i_.displayName=Bp;var a_="PopperArrow",w$={top:"bottom",right:"left",bottom:"top",left:"right"},l_=p.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=x$(a_,n),a=w$[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(g$,{...s,ref:r,style:{...s.style,display:"block"}})})});l_.displayName=a_;function j$(e){return e!==null}var b$=e=>({name:"transformOrigin",options:e,fn(t){var j,x,y;const{placement:r,rects:n,middlewareData:s}=t,a=((j=s.arrow)==null?void 0:j.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=c_(r),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=s.arrow)==null?void 0:x.x)??0)+l/2,g=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let w="",m="";return u==="bottom"?(w=a?h:`${f}px`,m=`${-c}px`):u==="top"?(w=a?h:`${f}px`,m=`${n.floating.height+c}px`):u==="right"?(w=`${-c}px`,m=a?h:`${g}px`):u==="left"&&(w=`${n.floating.width+c}px`,m=a?h:`${g}px`),{data:{x:w,y:m}}}});function c_(e){const[t,r="center"]=e.split("-");return[t,r]}var S$=n_,_$=o_,C$=i_,N$=l_;function u_(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var E$=[" ","Enter","ArrowUp","ArrowDown"],k$=[" ","Enter"],to="Select",[$u,Fu,P$]=Gm(to),[ji,M3]=vs(to,[P$,t_]),Vu=t_(),[T$,bs]=ji(to),[A$,R$]=ji(to),d_=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:g,form:w}=e,m=Vu(t),[j,x]=p.useState(null),[y,v]=p.useState(null),[b,S]=p.useState(!1),E=Op(u),[N,_]=Qs({prop:n,defaultProp:s??!1,onChange:o,caller:to}),[C,I]=Qs({prop:a,defaultProp:l,onChange:c,caller:to}),L=p.useRef(null),O=j?w||!!j.closest("form"):!0,[D,k]=p.useState(new Set),U=Array.from(D).map($=>$.props.value).join(";");return i.jsx(S$,{...m,children:i.jsxs(T$,{required:g,scope:t,trigger:j,onTriggerChange:x,valueNode:y,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:S,contentId:is(),value:C,onValueChange:I,open:N,onOpenChange:_,dir:E,triggerPointerDownPosRef:L,disabled:f,children:[i.jsx($u.Provider,{scope:t,children:i.jsx(A$,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback($=>{k(A=>new Set(A).add($))},[]),onNativeOptionRemove:p.useCallback($=>{k(A=>{const P=new Set(A);return P.delete($),P})},[]),children:r})}),O?i.jsxs(L_,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:$=>I($.target.value),disabled:f,form:w,children:[C===void 0?i.jsx("option",{value:""}):null,Array.from(D)]},U):null]})})};d_.displayName=to;var h_="SelectTrigger",f_=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=Vu(r),a=bs(h_,r),l=a.disabled||n,c=Me(t,a.onTriggerChange),u=Fu(r),d=p.useRef("touch"),[h,f,g]=D_(m=>{const j=u().filter(v=>!v.disabled),x=j.find(v=>v.value===a.value),y=$_(j,m,x);y!==void 0&&a.onValueChange(y.value)}),w=m=>{l||(a.onOpenChange(!0),g()),m&&(a.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return i.jsx(_$,{asChild:!0,...o,children:i.jsx(me.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":M_(a.value)?"":void 0,...s,ref:c,onClick:ue(s.onClick,m=>{m.currentTarget.focus(),d.current!=="mouse"&&w(m)}),onPointerDown:ue(s.onPointerDown,m=>{d.current=m.pointerType;const j=m.target;j.hasPointerCapture(m.pointerId)&&j.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(w(m),m.preventDefault())}),onKeyDown:ue(s.onKeyDown,m=>{const j=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(j&&m.key===" ")&&E$.includes(m.key)&&(w(),m.preventDefault())})})})});f_.displayName=h_;var m_="SelectValue",p_=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:a="",...l}=e,c=bs(m_,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Me(t,c.onValueNodeChange);return _t(()=>{u(d)},[u,d]),i.jsx(me.span,{...l,ref:h,style:{pointerEvents:"none"},children:M_(c.value)?i.jsx(i.Fragment,{children:a}):o})});p_.displayName=m_;var O$="SelectIcon",g_=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(me.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});g_.displayName=O$;var I$="SelectPortal",v_=e=>i.jsx(gu,{asChild:!0,...e});v_.displayName=I$;var ro="SelectContent",y_=p.forwardRef((e,t)=>{const r=bs(ro,e.__scopeSelect),[n,s]=p.useState();if(_t(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?oo.createPortal(i.jsx(x_,{scope:e.__scopeSelect,children:i.jsx($u.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(w_,{...e,ref:t})});y_.displayName=ro;var Cr=10,[x_,Ss]=ji(ro),L$="SelectContentImpl",M$=si("SelectContent.RemoveScroll"),w_=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:g,sticky:w,hideWhenDetached:m,avoidCollisions:j,...x}=e,y=bs(ro,r),[v,b]=p.useState(null),[S,E]=p.useState(null),N=Me(t,Y=>b(Y)),[_,C]=p.useState(null),[I,L]=p.useState(null),O=Fu(r),[D,k]=p.useState(!1),U=p.useRef(!1);p.useEffect(()=>{if(v)return yS(v)},[v]),aS();const $=p.useCallback(Y=>{const[X,...Ee]=O().map(je=>je.ref.current),[z]=Ee.slice(-1),ie=document.activeElement;for(const je of Y)if(je===ie||(je==null||je.scrollIntoView({block:"nearest"}),je===X&&S&&(S.scrollTop=0),je===z&&S&&(S.scrollTop=S.scrollHeight),je==null||je.focus(),document.activeElement!==ie))return},[O,S]),A=p.useCallback(()=>$([_,v]),[$,_,v]);p.useEffect(()=>{D&&A()},[D,A]);const{onOpenChange:P,triggerPointerDownPosRef:T}=y;p.useEffect(()=>{if(v){let Y={x:0,y:0};const X=z=>{var ie,je;Y={x:Math.abs(Math.round(z.pageX)-(((ie=T.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(z.pageY)-(((je=T.current)==null?void 0:je.y)??0))}},Ee=z=>{Y.x<=10&&Y.y<=10?z.preventDefault():v.contains(z.target)||P(!1),document.removeEventListener("pointermove",X),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[v,P,T]),p.useEffect(()=>{const Y=()=>P(!1);return window.addEventListener("blur",Y),window.addEventListener("resize",Y),()=>{window.removeEventListener("blur",Y),window.removeEventListener("resize",Y)}},[P]);const[V,R]=D_(Y=>{const X=O().filter(ie=>!ie.disabled),Ee=X.find(ie=>ie.ref.current===document.activeElement),z=$_(X,Y,Ee);z&&setTimeout(()=>z.ref.current.focus())}),H=p.useCallback((Y,X,Ee)=>{const z=!U.current&&!Ee;(y.value!==void 0&&y.value===X||z)&&(C(Y),z&&(U.current=!0))},[y.value]),oe=p.useCallback(()=>v==null?void 0:v.focus(),[v]),ce=p.useCallback((Y,X,Ee)=>{const z=!U.current&&!Ee;(y.value!==void 0&&y.value===X||z)&&L(Y)},[y.value]),Ne=n==="popper"?Vf:j_,ae=Ne===Vf?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:g,sticky:w,hideWhenDetached:m,avoidCollisions:j}:{};return i.jsx(x_,{scope:r,content:v,viewport:S,onViewportChange:E,itemRefCallback:H,selectedItem:_,onItemLeave:oe,itemTextRefCallback:ce,focusSelectedItem:A,selectedItemText:I,position:n,isPositioned:D,searchRef:V,children:i.jsx(gS,{as:M$,allowPinchZoom:!0,children:i.jsx(Pp,{asChild:!0,trapped:y.open,onMountAutoFocus:Y=>{Y.preventDefault()},onUnmountAutoFocus:ue(s,Y=>{var X;(X=y.trigger)==null||X.focus({preventScroll:!0}),Y.preventDefault()}),children:i.jsx(pu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:Y=>Y.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:i.jsx(Ne,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:Y=>Y.preventDefault(),...x,...ae,onPlaced:()=>k(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ue(x.onKeyDown,Y=>{const X=Y.ctrlKey||Y.altKey||Y.metaKey;if(Y.key==="Tab"&&Y.preventDefault(),!X&&Y.key.length===1&&R(Y.key),["ArrowUp","ArrowDown","Home","End"].includes(Y.key)){let z=O().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(Y.key)&&(z=z.slice().reverse()),["ArrowUp","ArrowDown"].includes(Y.key)){const ie=Y.target,je=z.indexOf(ie);z=z.slice(je+1)}setTimeout(()=>$(z)),Y.preventDefault()}})})})})})})});w_.displayName=L$;var D$="SelectItemAlignedPosition",j_=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=bs(ro,r),a=Ss(ro,r),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Me(t,N=>d(N)),f=Fu(r),g=p.useRef(!1),w=p.useRef(!0),{viewport:m,selectedItem:j,selectedItemText:x,focusSelectedItem:y}=a,v=p.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&m&&j&&x){const N=o.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),C=o.valueNode.getBoundingClientRect(),I=x.getBoundingClientRect();if(o.dir!=="rtl"){const ie=I.left-_.left,je=C.left-ie,lt=N.left-je,Ct=N.width+lt,Dr=Math.max(Ct,_.width),xr=window.innerWidth-Cr,wr=Px(je,[Cr,Math.max(Cr,xr-Dr)]);l.style.minWidth=Ct+"px",l.style.left=wr+"px"}else{const ie=_.right-I.right,je=window.innerWidth-C.right-ie,lt=window.innerWidth-N.right-je,Ct=N.width+lt,Dr=Math.max(Ct,_.width),xr=window.innerWidth-Cr,wr=Px(je,[Cr,Math.max(Cr,xr-Dr)]);l.style.minWidth=Ct+"px",l.style.right=wr+"px"}const L=f(),O=window.innerHeight-Cr*2,D=m.scrollHeight,k=window.getComputedStyle(u),U=parseInt(k.borderTopWidth,10),$=parseInt(k.paddingTop,10),A=parseInt(k.borderBottomWidth,10),P=parseInt(k.paddingBottom,10),T=U+$+D+P+A,V=Math.min(j.offsetHeight*5,T),R=window.getComputedStyle(m),H=parseInt(R.paddingTop,10),oe=parseInt(R.paddingBottom,10),ce=N.top+N.height/2-Cr,Ne=O-ce,ae=j.offsetHeight/2,Y=j.offsetTop+ae,X=U+$+Y,Ee=T-X;if(X<=ce){const ie=L.length>0&&j===L[L.length-1].ref.current;l.style.bottom="0px";const je=u.clientHeight-m.offsetTop-m.offsetHeight,lt=Math.max(Ne,ae+(ie?oe:0)+je+A),Ct=X+lt;l.style.height=Ct+"px"}else{const ie=L.length>0&&j===L[0].ref.current;l.style.top="0px";const lt=Math.max(ce,U+m.offsetTop+(ie?H:0)+ae)+Ee;l.style.height=lt+"px",m.scrollTop=X-ce+m.offsetTop}l.style.margin=`${Cr}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>g.current=!0)}},[f,o.trigger,o.valueNode,l,u,m,j,x,o.dir,n]);_t(()=>v(),[v]);const[b,S]=p.useState();_t(()=>{u&&S(window.getComputedStyle(u).zIndex)},[u]);const E=p.useCallback(N=>{N&&w.current===!0&&(v(),y==null||y(),w.current=!1)},[v,y]);return i.jsx(F$,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:i.jsx(me.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});j_.displayName=D$;var $$="SelectPopperPosition",Vf=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Cr,...o}=e,a=Vu(r);return i.jsx(C$,{...a,...o,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vf.displayName=$$;var[F$,zp]=ji(ro,{}),Uf="SelectViewport",b_=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,o=Ss(Uf,r),a=zp(Uf,r),l=Me(t,o.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx($u.Slot,{scope:r,children:i.jsx(me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ue(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=a;if(f!=null&&f.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const w=window.innerHeight-Cr*2,m=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),x=Math.max(m,j);if(x<w){const y=x+g,v=Math.min(w,y),b=y-v;h.style.height=v+"px",h.style.bottom==="0px"&&(d.scrollTop=b>0?b:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});b_.displayName=Uf;var S_="SelectGroup",[V$,U$]=ji(S_),B$=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=is();return i.jsx(V$,{scope:r,id:s,children:i.jsx(me.div,{role:"group","aria-labelledby":s,...n,ref:t})})});B$.displayName=S_;var __="SelectLabel",C_=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=U$(__,r);return i.jsx(me.div,{id:s.id,...n,ref:t})});C_.displayName=__;var Xc="SelectItem",[z$,N_]=ji(Xc),E_=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...a}=e,l=bs(Xc,r),c=Ss(Xc,r),u=l.value===n,[d,h]=p.useState(o??""),[f,g]=p.useState(!1),w=Me(t,y=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,y,n,s)}),m=is(),j=p.useRef("touch"),x=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(z$,{scope:r,value:n,disabled:s,textId:m,isSelected:u,onItemTextChange:p.useCallback(y=>{h(v=>v||((y==null?void 0:y.textContent)??"").trim())},[]),children:i.jsx($u.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:i.jsx(me.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:ue(a.onFocus,()=>g(!0)),onBlur:ue(a.onBlur,()=>g(!1)),onClick:ue(a.onClick,()=>{j.current!=="mouse"&&x()}),onPointerUp:ue(a.onPointerUp,()=>{j.current==="mouse"&&x()}),onPointerDown:ue(a.onPointerDown,y=>{j.current=y.pointerType}),onPointerMove:ue(a.onPointerMove,y=>{var v;j.current=y.pointerType,s?(v=c.onItemLeave)==null||v.call(c):j.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(a.onPointerLeave,y=>{var v;y.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:ue(a.onKeyDown,y=>{var b;((b=c.searchRef)==null?void 0:b.current)!==""&&y.key===" "||(k$.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});E_.displayName=Xc;var qi="SelectItemText",k_=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,a=bs(qi,r),l=Ss(qi,r),c=N_(qi,r),u=R$(qi,r),[d,h]=p.useState(null),f=Me(t,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),g=d==null?void 0:d.textContent,w=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:m,onNativeOptionRemove:j}=u;return _t(()=>(m(w),()=>j(w)),[m,j,w]),i.jsxs(i.Fragment,{children:[i.jsx(me.span,{id:c.textId,...o,ref:f}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?oo.createPortal(o.children,a.valueNode):null]})});k_.displayName=qi;var P_="SelectItemIndicator",T_=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return N_(P_,r).isSelected?i.jsx(me.span,{"aria-hidden":!0,...n,ref:t}):null});T_.displayName=P_;var Bf="SelectScrollUpButton",A_=p.forwardRef((e,t)=>{const r=Ss(Bf,e.__scopeSelect),n=zp(Bf,e.__scopeSelect),[s,o]=p.useState(!1),a=Me(t,n.onScrollButtonChange);return _t(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(O_,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});A_.displayName=Bf;var zf="SelectScrollDownButton",R_=p.forwardRef((e,t)=>{const r=Ss(zf,e.__scopeSelect),n=zp(zf,e.__scopeSelect),[s,o]=p.useState(!1),a=Me(t,n.onScrollButtonChange);return _t(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(O_,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});R_.displayName=zf;var O_=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=Ss("SelectScrollButton",r),a=p.useRef(null),l=Fu(r),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),_t(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(me.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:ue(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:ue(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:ue(s.onPointerLeave,()=>{c()})})}),W$="SelectSeparator",I_=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(me.div,{"aria-hidden":!0,...n,ref:t})});I_.displayName=W$;var Wf="SelectArrow",q$=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Vu(r),o=bs(Wf,r),a=Ss(Wf,r);return o.open&&a.position==="popper"?i.jsx(N$,{...s,...n,ref:t}):null});q$.displayName=Wf;var H$="SelectBubbleInput",L_=p.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const s=p.useRef(null),o=Me(n,s),a=u_(t);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[a,t]),i.jsx(me.select,{...r,style:{...Nj,...r.style},ref:o,defaultValue:t})});L_.displayName=H$;function M_(e){return e===""||e===void 0}function D_(e){const t=yr(e),r=p.useRef(""),n=p.useRef(0),s=p.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function $_(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=G$(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function G$(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var K$=d_,F_=f_,J$=p_,Y$=g_,X$=v_,V_=y_,Q$=b_,U_=C_,B_=E_,Z$=k_,eF=T_,z_=A_,W_=R_,q_=I_;const Qe=K$,Ze=J$,Ke=de.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(F_,{ref:n,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx(Y$,{asChild:!0,children:i.jsx(Kj,{className:"h-4 w-4 opacity-50"})})]}));Ke.displayName=F_.displayName;const H_=de.forwardRef(({className:e,...t},r)=>i.jsx(z_,{ref:r,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(kP,{className:"h-4 w-4"})}));H_.displayName=z_.displayName;const G_=de.forwardRef(({className:e,...t},r)=>i.jsx(W_,{ref:r,className:Ce("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(Kj,{className:"h-4 w-4"})}));G_.displayName=W_.displayName;const Je=de.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(X$,{children:i.jsxs(V_,{ref:s,className:Ce("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(H_,{}),i.jsx(Q$,{className:Ce("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(G_,{})]})}));Je.displayName=V_.displayName;const tF=de.forwardRef(({className:e,...t},r)=>i.jsx(U_,{ref:r,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));tF.displayName=U_.displayName;const ye=de.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(B_,{ref:n,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(eF,{children:i.jsx(EP,{className:"h-4 w-4"})})}),i.jsx(Z$,{children:t})]}));ye.displayName=B_.displayName;const rF=de.forwardRef(({className:e,...t},r)=>i.jsx(q_,{ref:r,className:Ce("-mx-1 my-1 h-px bg-muted",e),...t}));rF.displayName=q_.displayName;class nF{async getCustomerGroups(){try{const{data:t,error:r}=await Q.from("customer_groups").select("*").order("name");if(r)throw r;return t||[]}catch(t){throw console.error("Erro ao buscar grupos de clientes:",t),t}}async getCustomerGroup(t){try{const{data:r,error:n}=await Q.from("customer_groups").select("*").eq("id",t).single();if(n)throw n;return r}catch(r){throw console.error("Erro ao buscar grupo de cliente:",r),r}}async createCustomerGroup(t){try{const r={name:t.name,category:"Varejo",ticket_min:t.average_ticket||null,ticket_max:null,description:t.description||null},{data:n,error:s}=await Q.from("customer_groups").insert([r]).select().single();if(s)throw s;return n}catch(r){throw console.error("Erro ao criar grupo de cliente:",r),r}}async updateCustomerGroup(t,r){try{const n={name:r.name,category:"Varejo",ticket_min:r.average_ticket||null,ticket_max:null,description:r.description||null},{data:s,error:o}=await Q.from("customer_groups").update(n).eq("id",t).select().single();if(o)throw o;return s}catch(n){throw console.error("Erro ao atualizar grupo de cliente:",n),n}}async deleteCustomerGroup(t){try{const{error:r}=await Q.from("customer_groups").delete().eq("id",t);if(r)throw r;return!0}catch(r){throw console.error("Erro ao deletar grupo de cliente:",r),r}}async isGroupInUse(t){try{const{data:r,error:n}=await Q.from("customers").select("id").eq("group_id",t).limit(1);if(n)throw n;return r&&r.length>0}catch(r){throw console.error("Erro ao verificar uso do grupo:",r),r}}}const Hs=new nF,sF=({open:e,onOpenChange:t,onCustomerCreated:r})=>{const{toast:n}=at(),[s,o]=p.useState({name:"",cpf:"",cnpj:"",phone:"",email:"",category:"",group_id:"",cep:"",street:"",bairro:"",cidade:"",estado:"",complemento:""}),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState([]);p.useEffect(()=>{e&&o({name:"",cpf:"",cnpj:"",phone:"",email:"",category:"",group_id:"",cep:"",street:"",bairro:"",cidade:"",estado:"",complemento:""})},[e]),p.useEffect(()=>{(async()=>{try{const y=await Hs.getCustomerGroups();h(y)}catch(y){console.error("Erro ao buscar grupos:",y)}})()},[]);const f=x=>x.replace(/\D/g,"").replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),g=x=>{const y=x.replace(/\D/g,"");return y.length<=10?y.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):y.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3")},w=async x=>{const y=x.target.value.replace(/\D/g,"");if(y.length===8){u(!0);try{const b=await(await fetch(`https://viacep.com.br/ws/${y}/json/`)).json();b.erro||o({...s,cep:b.cep,street:b.logradouro,bairro:b.bairro,cidade:b.localidade,estado:b.uf,complemento:b.complemento})}finally{u(!1)}}},m=s.category==="Atacado"||s.category==="Cliente Exclusivo",j=async x=>{if(x.preventDefault(),!s.name||!s.phone||!s.category){n({title:"Campos obrigatrios",description:"Nome, telefone e categoria so obrigatrios.",variant:"destructive"});return}if(m&&(!s.cnpj||!s.razao_social||!s.inscricao_estadual)){n({title:"Campos obrigatrios",description:"CNPJ, Razo Social e Inscrio Estadual so obrigatrios para empresas.",variant:"destructive"});return}l(!0);try{const y={name:s.name,cpf:s.cpf,phone:s.phone,email:s.email,category:s.category,group_id:s.group_id==="none"?null:s.group_id,cep:s.cep,street:s.street,bairro:s.bairro,cidade:s.cidade,estado:s.estado,complemento:s.complemento,cnpj:s.cnpj,razao_social:s.razao_social,inscricao_estadual:s.inscricao_estadual,nome_fantasia:s.nome_fantasia},v=await sS(y);v?(n({title:"Cliente criado com sucesso!",description:`${s.name} foi adicionado  lista de clientes.`,variant:"default"}),r&&r(v),t(!1)):n({title:"Erro ao criar cliente",description:"Tente novamente.",variant:"destructive"})}catch(y){console.error("Erro ao criar cliente:",y),n({title:"Erro ao criar cliente",description:y.message||"Tente novamente.",variant:"destructive"})}finally{l(!1)}};return i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(er,{children:i.jsxs(tr,{className:"flex items-center gap-2",children:[i.jsx(sr,{className:"w-5 h-5"}),"Cadastrar Novo Cliente"]})}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"name",children:"Nome Completo *"}),i.jsx(W,{id:"name",value:s.name,onChange:x=>o({...s,name:x.target.value}),placeholder:"Nome completo do cliente"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cpf",children:"CPF"}),i.jsx(W,{id:"cpf",placeholder:"000.000.000-00",value:s.cpf,onChange:x=>o({...s,cpf:f(x.target.value)})})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"phone",children:"Telefone *"}),i.jsx(W,{id:"phone",placeholder:"(00) 00000-0000",value:s.phone,onChange:x=>o({...s,phone:g(x.target.value)})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"email",children:"E-mail"}),i.jsx(W,{id:"email",type:"email",value:s.email,onChange:x=>o({...s,email:x.target.value}),placeholder:"email@exemplo.com"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"category",children:"Categoria *"}),i.jsxs(Qe,{value:s.category,onValueChange:x=>o({...s,category:x}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione a categoria..."})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"Varejo",children:"Varejo"}),i.jsx(ye,{value:"Atacado",children:"Atacado"}),i.jsx(ye,{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"group_id",children:"Nvel de Comprador"}),i.jsxs(Qe,{value:s.group_id,onValueChange:x=>o({...s,group_id:x}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione um grupo..."})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"none",children:"Nenhum grupo"}),d.map(x=>i.jsxs(ye,{value:x.id,children:[x.name," - ",x.category,x.ticket_min&&` (${new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.ticket_min)})`]},x.id))]})]})]}),m&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cnpj",children:"CNPJ *"}),i.jsx(W,{id:"cnpj",placeholder:"00.000.000/0000-00",value:s.cnpj||"",onChange:x=>o({...s,cnpj:x.target.value}),required:m})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"razao_social",children:"Razo Social *"}),i.jsx(W,{id:"razao_social",value:s.razao_social||"",onChange:x=>o({...s,razao_social:x.target.value}),placeholder:"Razo social da empresa",required:m})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"inscricao_estadual",children:"Inscrio Estadual *"}),i.jsx(W,{id:"inscricao_estadual",value:s.inscricao_estadual||"",onChange:x=>o({...s,inscricao_estadual:x.target.value}),placeholder:"Inscrio estadual",required:m})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"nome_fantasia",children:"Nome Fantasia"}),i.jsx(W,{id:"nome_fantasia",value:s.nome_fantasia||"",onChange:x=>o({...s,nome_fantasia:x.target.value}),placeholder:"Nome fantasia da empresa"})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cep",children:"CEP"}),i.jsx(W,{id:"cep",placeholder:"00000-000",value:s.cep,onChange:x=>o({...s,cep:x.target.value}),onBlur:w,disabled:c})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"street",children:"Rua"}),i.jsx(W,{id:"street",value:s.street,onChange:x=>o({...s,street:x.target.value}),placeholder:"Nome da rua"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"bairro",children:"Bairro"}),i.jsx(W,{id:"bairro",value:s.bairro,onChange:x=>o({...s,bairro:x.target.value}),placeholder:"Nome do bairro"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cidade",children:"Cidade"}),i.jsx(W,{id:"cidade",value:s.cidade,onChange:x=>o({...s,cidade:x.target.value}),placeholder:"Nome da cidade"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"estado",children:"Estado"}),i.jsx(W,{id:"estado",value:s.estado,onChange:x=>o({...s,estado:x.target.value}),placeholder:"UF"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"complemento",children:"Complemento"}),i.jsx(W,{id:"complemento",value:s.complemento,onChange:x=>o({...s,complemento:x.target.value}),placeholder:"Apartamento, bloco, etc."})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:a,children:"Cancelar"}),i.jsx(F,{type:"submit",disabled:a,children:a?"Criando...":"Criar Cliente"})]})]})]})})},K_=p.createContext(),J_=()=>{const e=p.useContext(K_);if(!e)throw new Error("useRecentProducts deve ser usado dentro de um RecentProductsProvider");return e},oF=({children:e})=>{const[t,r]=p.useState([]),[n,s]=p.useState(!1),o=async()=>{try{s(!0);const u=(await kp()).filter(d=>d.active).sort((d,h)=>new Date(h.created_at)-new Date(d.created_at)).slice(0,3);r(u)}catch(c){console.error("Erro ao buscar produtos recentes:",c)}finally{s(!1)}};p.useEffect(()=>{o()},[]);const l={recentProducts:t,loading:n,refreshRecentProducts:()=>{o()},fetchRecentProducts:o};return i.jsx(K_.Provider,{value:l,children:e})},iF=({onProductFound:e})=>{const[t,r]=p.useState(""),{recentProducts:n,loading:s,refreshRecentProducts:o}=J_(),{toast:a}=at(),l=async u=>{if(u.preventDefault(),!!t.trim())try{const d=await Lf(t);d&&d.product?(e(d.product),r("")):a({title:"Produto no encontrado",description:`Cdigo de barras: ${t}`,variant:"destructive"})}catch(d){a({title:"Erro ao buscar produto",description:d.message,variant:"destructive"})}},c=async u=>{try{const d=await Lf(u);d&&d.product?e(d.product):a({title:"Produto no encontrado",description:`Cdigo: ${u}`,variant:"destructive"})}catch(d){a({title:"Erro ao buscar produto",description:d.message,variant:"destructive"})}};return i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(lf,{className:"w-5 h-5"}),i.jsx("span",{children:"Leitor de Cdigo de Barras"})]})}),i.jsxs(se,{children:[i.jsxs("form",{onSubmit:l,className:"flex space-x-2",children:[i.jsx(W,{placeholder:"Escaneie ou digite o cdigo de barras",value:t,onChange:u=>r(u.target.value),className:"flex-1 barcode-scanner",autoFocus:!0}),i.jsx(F,{type:"submit",children:i.jsx(sr,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Produtos Recentes"}),i.jsx(F,{variant:"ghost",size:"sm",onClick:o,disabled:s,className:"text-xs",children:s?"Carregando...":"Atualizar"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:n.length>0?n.map(u=>{var d;return i.jsxs(F,{variant:"outline",onClick:()=>c(u.barcode),className:"text-sm h-auto p-2 flex flex-col items-center",disabled:s,children:[i.jsx("span",{className:"font-medium",children:u.name}),i.jsxs("span",{className:"text-xs text-gray-400 mt-1",children:["R$ ",((d=u.price)==null?void 0:d.toFixed(2))||"0.00"]})]},u.id)}):i.jsx("div",{className:"col-span-3 text-center text-gray-400 text-sm py-4",children:s?"Carregando produtos...":"Nenhum produto recente encontrado"})})]})]})]})},aF=({cart:e,onUpdateQuantity:t,onRemoveFromCart:r,onClearCart:n})=>i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Aa,{className:"w-5 h-5"}),i.jsxs("span",{children:["Carrinho (",e.length," itens)"]})]}),e.length>0&&i.jsx(F,{variant:"outline",size:"sm",onClick:n,children:"Limpar"})]})}),i.jsx(se,{children:e.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Aa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Carrinho vazio"}),i.jsx("p",{className:"text-sm",children:"Escaneie um produto para comear"})]}):i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.map(s=>i.jsxs(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium",children:s.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["R$ ",s.price.toFixed(2)]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(F,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>t(s.id,s.quantity-1),children:i.jsx(Ic,{className:"w-3 h-3"})}),i.jsx("span",{className:"w-8 text-center",children:s.quantity}),i.jsx(F,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>t(s.id,s.quantity+1),children:i.jsx(sr,{className:"w-3 h-3"})}),i.jsxs("span",{className:"w-20 text-right font-medium",children:["R$ ",s.subtotal.toFixed(2)]}),i.jsx(F,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>r(s.id),children:i.jsx(ao,{className:"w-3 h-3"})})]})]},s.id))})})]}),lF=({subtotal:e,discountAmount:t,total:r,onApplyDiscount:n,discount:s})=>{const o=it(),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(""),f=x=>{u(x),h("")},g=()=>{if(c==="percentage"){const x=parseFloat(d);!isNaN(x)&&x>=0&&x<=100&&(n({type:"percentage",value:x}),l(!1),u(null),h(""))}else if(c==="fixed"){const x=parseFloat(d.replace(",","."));!isNaN(x)&&x>=0&&x<=e&&(n({type:"fixed",value:x}),l(!1),u(null),h(""))}},w=()=>{l(!1),u(null),h("")},m=()=>{n({type:"none",value:0})},j=x=>x.replace(/[^\d,]/g,"");return i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(Gj,{className:"w-5 h-5"}),i.jsx("span",{children:"Totais"})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal:"}),i.jsxs("span",{children:["R$ ",e.toFixed(2)]})]}),t>0&&i.jsxs("div",{className:"flex justify-between text-green-600",children:[i.jsxs("span",{children:["Desconto ",(s==null?void 0:s.type)==="percentage"?`(${s.value}%)`:"(R$)",":"]}),i.jsxs("span",{children:["- R$ ",t.toFixed(2)]})]}),i.jsx("div",{className:"border-t pt-2",children:i.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[i.jsx("span",{children:"Total:"}),i.jsxs("span",{children:["R$ ",r.toFixed(2)]})]})}),Gt(o==null?void 0:o.role,J.APPLY_DISCOUNTS)&&i.jsxs("div",{className:"pt-2 border-t space-y-3",children:[a?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(F,{variant:c==="percentage"?"default":"outline",size:"sm",className:"flex-1 hover:bg-gray-700 hover:text-white border-gray-600 text-gray-300",onClick:()=>f("percentage"),children:[i.jsx(qv,{className:"w-3 h-3 mr-1"}),"%"]}),i.jsxs(F,{variant:c==="fixed"?"default":"outline",size:"sm",className:"flex-1 hover:bg-gray-700 hover:text-white border-gray-600 text-gray-300",onClick:()=>f("fixed"),children:[i.jsx(xn,{className:"w-3 h-3 mr-1"}),"R$"]})]}),c&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(W,{type:"text",placeholder:c==="percentage"?"Ex: 10":"Ex: 10,50",value:d,onChange:x=>{h(c==="percentage"?x.target.value.replace(/[^\d]/g,""):j(x.target.value))},className:"text-center border-gray-600 bg-gray-800 text-white placeholder-gray-400"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700",onClick:g,disabled:!d||c==="percentage"&&(parseFloat(d)<0||parseFloat(d)>100)||c==="fixed"&&(parseFloat(d.replace(",","."))<0||parseFloat(d.replace(",","."))>e),children:"Aplicar"}),i.jsx(F,{variant:"outline",size:"sm",className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",onClick:w,children:i.jsx(Oa,{className:"w-4 h-4"})})]})]})]}):i.jsxs(F,{variant:"outline",size:"sm",className:"w-full hover:bg-gray-700 hover:text-white border-gray-600 text-gray-300",onClick:()=>l(!0),children:[i.jsx(qv,{className:"w-4 h-4 mr-2"}),"Aplicar Desconto"]}),t>0&&!a&&i.jsxs(F,{variant:"outline",size:"sm",className:"w-full border-red-600 text-red-400 hover:bg-red-600 hover:text-white",onClick:m,children:[i.jsx(Oa,{className:"w-4 h-4 mr-2"}),"Remover Desconto"]})]})]})]})},Fl={CASH:"cash",DEBIT:"debit",CREDIT:"credit",PIX:"pix"},tn={[Fl.CASH]:"Dinheiro",[Fl.DEBIT]:"Carto Dbito",[Fl.CREDIT]:"Carto Crdito",[Fl.PIX]:"PIX"},cF="/images/pixicon.png",Vx="/images/debito card.png",uF="/images/crediticon.png",Ux="/images/dinheiroicon.png",Bx=[{value:"varejo",label:"Varejo"},{value:"atacado",label:"Atacado"},{value:"cliente_exclusivo",label:"Cliente Exclusivo"}],zx=Array.from({length:10},(e,t)=>t+1),nt=e=>{if(!e)return 0;let t=e.toString().replace(/[^\d,.]/g,"");t.includes(",")&&t.includes(".")?t=t.replace(",",""):t.includes(",")&&!t.includes(".")&&(t=t.replace(",","."));const r=parseFloat(t);return isNaN(r)?0:r},ct=e=>{if(!e&&e!==0)return"R$ 0,00";const t=parseFloat(e);return isNaN(t)?"R$ 0,00":t.toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})},Wx=()=>{const e=M=>{try{localStorage.setItem("pos_sale_state",JSON.stringify(M))}catch(G){console.error("Erro ao salvar estado da venda:",G)}},t=()=>{try{const M=localStorage.getItem("pos_sale_state");return M?JSON.parse(M):null}catch(M){return console.error("Erro ao carregar estado da venda:",M),null}},r=()=>{try{localStorage.removeItem("pos_sale_state")}catch(M){console.error("Erro ao limpar estado da venda:",M)}},n=t(),[s,o]=p.useState((n==null?void 0:n.cart)||[]),[a,l]=p.useState((n==null?void 0:n.discount)||{type:"percentage",value:0}),[c,u]=p.useState((n==null?void 0:n.payments)||[]),[d,h]=p.useState({isOpen:!1,currentAmount:0,openingAmount:0,id:null,store_id:null}),[f,g]=p.useState(null),{toast:w}=at(),m=it(),j=!!(m!=null&&m.store_id)&&!Gt(m.role,J.VIEW_ALL_STORES_DATA),[x,y]=p.useState((n==null?void 0:n.step)||0),[v,b]=p.useState((n==null?void 0:n.modalidade)||""),[S,E]=p.useState((n==null?void 0:n.vendedor)||null),[N,_]=p.useState([]),[C,I]=p.useState(!1),[L,O]=p.useState((n==null?void 0:n.cliente)||null),[D,k]=p.useState([]),[U,$]=p.useState(!1),[A,P]=p.useState(!1),[T,V]=p.useState(""),[R,H]=p.useState("all"),[oe,ce]=p.useState(!1),[Ne,ae]=p.useState(1),Y=()=>L?i.jsxs("div",{className:"p-3 bg-green-600 rounded-lg text-white",children:[i.jsx("div",{className:"font-medium text-green-100 mb-1",children:" Cliente selecionado"}),i.jsxs("div",{className:"text-sm text-green-100",children:[i.jsx("strong",{className:"text-white",children:L.name})," - ",L.category||"Cliente",L.cpf&&i.jsxs("span",{children:[" - CPF: ",L.cpf]}),L.cnpj&&i.jsxs("span",{children:[" - CNPJ: ",L.cnpj]}),L.phone&&i.jsxs("span",{children:[" - Tel: ",L.phone]})]})]}):null,[X,Ee]=p.useState((n==null?void 0:n.numPagamentos)||1),[z,ie]=p.useState((n==null?void 0:n.pagamentosWizard)||[{method:"",amount:"",parcelas:void 0},{method:"",amount:"",parcelas:void 0}]),[je,lt]=p.useState((n==null?void 0:n.isTroca)||!1),[Ct,Dr]=p.useState(!1),[xr,wr]=p.useState(!!n),[_n,Cn]=p.useState(2.99);p.useEffect(()=>{zu()},[]);const zu=async()=>{try{const M=await Wi.getInterestRate();Cn(M.credit_card_interest)}catch(M){console.error("Erro ao carregar taxa de juros:",M)}};p.useEffect(()=>{e({cart:s,discount:a,payments:c,step:x,modalidade:v,vendedor:S,cliente:L,numPagamentos:X,pagamentosWizard:z,isTroca:je})},[s,a,c,x,v,S,L,X,z,je]),p.useEffect(()=>{var M,G,ge,he,Ue,rt,yt,Te,Cs;if(z.length>0&&((M=z[0])!=null&&M.method)){const Qr=ke(),Re=[...z];if(X===1)if(((G=Re[0])==null?void 0:G.method)==="credit"){const Zr=((ge=Re[0])==null?void 0:ge.parcelas)||1;Re[0]={...Re[0],amount:tt(Qr,Zr).toFixed(2)}}else Re[0]={...Re[0],amount:Qr.toFixed(2)};else if(X===2&&((he=Re[0])!=null&&he.amount)&&((Ue=Re[1])!=null&&Ue.method)){const Zr=nt(Re[0].amount),Ns=nt(Re[1].amount),Nn=Zr+Ns,Es=Zr/Nn,ks=Ns/Nn,En=Qr*Es,_i=Qr*ks;if(((rt=Re[0])==null?void 0:rt.method)==="credit"){const fo=((yt=Re[0])==null?void 0:yt.parcelas)||1;Re[0]={...Re[0],amount:tt(En,fo).toFixed(2)}}else Re[0]={...Re[0],amount:En.toFixed(2)};if(((Te=Re[1])==null?void 0:Te.method)==="credit"){const fo=((Cs=Re[1])==null?void 0:Cs.parcelas)||1;Re[1]={...Re[1],amount:tt(_i,fo).toFixed(2)}}else Re[1]={...Re[1],amount:_i.toFixed(2)}}ie(Re)}},[a]),p.useEffect(()=>{if(xr){const M=setTimeout(()=>{wr(!1)},5e3);return()=>clearTimeout(M)}},[xr]);const Wu=()=>xr?i.jsx("div",{className:"fixed top-4 right-4 z-50 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:" Venda restaurada automaticamente"}),i.jsx("button",{onClick:()=>wr(!1),className:"text-white hover:text-green-200",children:""})]})}):null,qu=()=>{var M;return i.jsxs("div",{className:"space-y-6 max-w-2xl",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Resumo da Venda"}),i.jsxs("div",{className:"border rounded-lg p-4 bg-card",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Modalidade:"})," ",(M=Bx.find(G=>G.value===v))==null?void 0:M.label]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Vendedor:"})," ",S==null?void 0:S.name]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Cliente:"})," ",L==null?void 0:L.name]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Tipo de venda:"})," ",je?"Troca":"Normal"]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Itens:"}),i.jsx("ul",{className:"ml-4 list-disc",children:s.map(G=>i.jsxs("li",{children:[G.name," - ",G.quantity," x ",ct(G.price)," = ",ct(G.price*G.quantity)]},G.id))})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Total:"})," ",ct(ke())]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("b",{children:"Pagamentos:"}),i.jsx("ul",{className:"ml-4 list-disc",children:z.slice(0,X).map((G,ge)=>i.jsxs("li",{children:[tn[G.method]," - ",ct(nt(G.amount)),G.method==="credit"&&G.parcelas>1&&i.jsxs("div",{className:"ml-4 text-sm text-gray-600 dark:text-gray-400",children:[" Valor original: ",ct(nt(G.amount)),i.jsx("br",{})," Juros (",_n,"% ao ms): ",ct(tt(nt(G.amount),G.parcelas)-nt(G.amount)),i.jsx("br",{})," Valor por parcela: ",ct(tt(nt(G.amount),G.parcelas)/G.parcelas),i.jsx("br",{})," ",G.parcelas,"x de ",ct(tt(nt(G.amount),G.parcelas)/G.parcelas)]}),G.method==="credit"&&G.parcelas===1&&` (${G.parcelas}x)`]},ge))})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("input",{type:"checkbox",id:"troca",checked:je,onChange:G=>lt(G.target.checked)}),i.jsxs("label",{htmlFor:"troca",className:"text-sm",children:["Esta venda  uma ",i.jsx("b",{children:"troca"})]})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(F,{onClick:async()=>{Dr(!0);try{const G={items:s.map(he=>({productId:he.productId,name:he.name,price:he.price,barcode:he.barcode,quantity:he.quantity,subtotal:he.subtotal})),subtotal:Z(),discount:pe(),total:ke(),payments:z.slice(0,X).map(he=>({method:he.method,amount:nt(he.amount),parcelas:he.method==="credit"?he.parcelas:void 0})),cashier:m==null?void 0:m.name,cashierId:m==null?void 0:m.id,customerId:L==null?void 0:L.id,store_id:(f==null?void 0:f.id)||(m==null?void 0:m.store_id)||null,modalidade:v,vendedor_id:S==null?void 0:S.id,tipo_venda:je?"troca":"normal"},ge=await HM(G);try{const he=await Dn.getConfig();if(he.printer.enabled){const Ue={...ge.sale,items:G.items,payments:G.payments,store_name:(f==null?void 0:f.name)||"Loja",user_id:m==null?void 0:m.id,store_id:(f==null?void 0:f.id)||(m==null?void 0:m.store_id)};await Dn.printReceipt(Ue,he.printer),w({title:"Venda finalizada e recibo impresso!",description:`Venda #${ge.sale.id} criada e recibo impresso automaticamente.`,variant:"default"})}else w({title:"Venda finalizada com sucesso!",description:`Venda #${ge.sale.id} criada.`,variant:"default"})}catch(he){console.error("Erro ao imprimir recibo:",he),w({title:"Venda finalizada com sucesso!",description:`Venda #${ge.sale.id} criada. (Erro na impresso: ${he.message})`,variant:"default"})}try{const he=await qn.getConfig();if(he.nfe.enabled||he.sat.enabled){const Ue={...ge.sale,items:G.items,payments:G.payments,store_name:(f==null?void 0:f.name)||"Loja",user_id:m==null?void 0:m.id,store_id:(f==null?void 0:f.id)||(m==null?void 0:m.store_id)},rt=await qn.generateFiscalDocument(Ue);w({title:"Documento fiscal gerado!",description:`Documento fiscal gerado automaticamente para venda #${ge.sale.id}.`,variant:"default"})}}catch(he){console.error("Erro ao gerar documento fiscal:",he)}K(),lt(!1),y(0),E(null),ie([{method:"",amount:"",parcelas:void 0},{method:"",amount:"",parcelas:void 0}]),Ee(1)}catch(G){w({title:"Erro ao finalizar venda",description:G.message||"Tente novamente.",variant:"destructive"})}finally{Dr(!1)}},disabled:Ct,children:Ct?"Finalizando...":"Finalizar Venda"}),i.jsx(F,{variant:"ghost",onClick:()=>y(3),disabled:Ct,children:"Voltar"})]})]})};p.useEffect(()=>{x===1&&N.length===0&&(I(!0),eS().then(M=>{const G=M.filter(ge=>["manager","cashier","admin"].includes(ge.role));_(G)}).finally(()=>I(!1)))},[x,N.length]),p.useEffect(()=>{x===2&&D.length===0&&($(!0),nS().then(M=>{k(M||[])}).catch(M=>{console.error("Erro ao carregar clientes:",M),k([])}).finally(()=>$(!1)))},[x,D.length]);const Hu=M=>{k(G=>[...G,M]),O(M)};p.useEffect(()=>{x!==2&&(V(""),H("all"),ce(!1),ae(1))},[x]),p.useEffect(()=>{ae(1)},[T,R]);const ho=p.useCallback(async()=>{const M=await qM();h(M),j&&(m!=null&&m.store_id)?g({id:m.store_id,name:m.store_name||"Loja Fsica"}):g({id:null,name:"Loja Online"})},[j,m==null?void 0:m.store_id,m==null?void 0:m.store_name]);p.useEffect(()=>{ho()},[ho]);const Gu=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsx(Y,{}),i.jsx(iF,{onProductFound:Ju,getProductByBarcode:Lf}),i.jsx(aF,{cart:s,onUpdateQuantity:rl,onRemoveFromCart:bi,onClearCart:K}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(F,{onClick:()=>s.length>0&&y(4),disabled:s.length===0,children:"Avanar"}),i.jsx(F,{variant:"ghost",onClick:()=>y(2),children:"Voltar"})]})]}),Ku=M=>v==="varejo"&&M.price_varejo!=null?M.price_varejo:v==="atacado"&&M.price_atacado!=null?M.price_atacado:v==="cliente_exclusivo"&&M.price_atacarejo!=null?M.price_atacarejo:M.price,Ju=async M=>{var he,Ue;if(j&&M.is_physical_store_stock&&(!M.stock||M.stock<=0)){w({title:"Sem estoque na sua loja",description:`O produto ${M.name} no tem estoque disponvel na sua loja.`,variant:"warning"});return}if(!j&&(!M.stock||M.stock<=0)){w({title:"Sem estoque online",description:`O produto ${M.name} no tem estoque online disponvel.`,variant:"warning"});return}const G=Ku(M),ge=s.find(rt=>rt.productId===M.id);if(ge)rl(ge.id,ge.quantity+1,M.stock);else{const rt={id:`${M.id}-${Date.now()}`,productId:M.id,name:M.name,price:G,barcode:M.barcode,quantity:1,size:((he=M.sizes)==null?void 0:he[0])||null,color:((Ue=M.colors)==null?void 0:Ue[0])||null,subtotal:G,product_main_store_id:M.store_id,max_available_stock:M.stock};o(yt=>[...yt,rt])}w({title:"Produto adicionado",description:`${M.name} adicionado ao carrinho. Estoque disponvel: ${M.stock}`})},rl=(M,G,ge)=>{const he=s.find(rt=>rt.id===M);if(!he)return;const Ue=ge!==void 0?ge:he.max_available_stock;if(G>Ue&&(w({title:"Quantidade excede estoque",description:`Mximo de ${Ue} unidades disponveis.`,variant:"warning"}),G=Ue),G<=0){bi(M);return}o(rt=>rt.map(yt=>yt.id===M?{...yt,quantity:G,subtotal:yt.price*G}:yt))},bi=M=>{o(G=>G.filter(ge=>ge.id!==M))},K=()=>{o([]),u([]),l({type:"percentage",value:0}),r()},Z=()=>s.reduce((M,G)=>M+G.subtotal,0),pe=()=>{const M=Z();return a.type==="percentage"?M*a.value/100:Math.min(a.value,M)},ke=()=>Z()-pe(),Ye=M=>{if(!Gt(m==null?void 0:m.role,J.APPLY_DISCOUNTS)){w({title:"Sem permisso",description:"Voc no tem permisso para aplicar descontos",variant:"destructive"});return}if(M.type==="none"){l({type:"none",value:0}),w({title:"Desconto removido",description:"Desconto foi removido com sucesso."});return}M.type==="percentage"?(l({type:"percentage",value:M.value}),w({title:"Desconto aplicado",description:`${M.value}% de desconto.`})):M.type==="fixed"&&(l({type:"fixed",value:M.value}),w({title:"Desconto aplicado",description:`R$ ${M.value.toFixed(2)} de desconto.`}))},ht=()=>{o([]),l({type:"none",value:0}),u([]),y(0),b(""),E(null),O(null),Ee(1),ie([{method:"",amount:"",parcelas:void 0},{method:"",amount:"",parcelas:void 0}]),lt(!1),r(),w({title:"Venda encerrada",description:"Nova venda iniciada. Todos os dados foram limpos.",variant:"default"})},jr=()=>z.reduce((M,G)=>M+(nt(G.amount)||0),0),tt=(M,G)=>{if(G<=1)return M;const ge=_n/100,he=Math.pow(1+ge,G-1)-1;return M*(1+he)},_s=()=>{var M,G;if(s.length===0||!((M=z[0])!=null&&M.method))return!1;if(X===1)return!0;for(let ge=0;ge<X;ge++)if(!((G=z[ge])!=null&&G.amount)||nt(z[ge].amount)<=0)return!1;return Math.abs(jr()-ke())<=.01},Si=(M,G,ge)=>{console.log("handlePagamentoChange:",M,G,ge),ie(he=>{const Ue=he.map((rt,yt)=>yt===M?{...rt,[G]:ge}:rt);return console.log("Novo estado:",Ue),Ue})},nl=()=>{var ge,he,Ue,rt,yt,Te,Cs,Qr,Re,Zr,Ns,Nn,Es,ks,En,_i,fo,Kp,Jp,Yp;const M=ke(),G={cash:Ux,credit:uF,debit:Vx,pix:cF,transfer:Vx,check:Ux};return i.jsxs("div",{className:"space-y-6 max-w-2xl",children:[i.jsx(Y,{}),i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Formas de Pagamento"}),i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-6 bg-gray-50 dark:bg-gray-800",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:Object.entries(tn).map(([ft,ne])=>{var en;return i.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all duration-200 text-center ${((en=z[0])==null?void 0:en.method)===ft?"border-blue-500 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200":"border-gray-400 hover:border-gray-500 bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,onClick:()=>{const kn=[...z];kn[0]={...kn[0],method:ft,amount:X===1?M.toFixed(2):kn[0].amount,parcelas:ft==="credit"?kn[0].parcelas||1:void 0},ie(kn)},children:[i.jsx("div",{className:"mb-2",children:i.jsx("img",{src:G[ft],alt:ne,className:"w-12 h-12 mx-auto object-contain"})}),i.jsx("div",{className:"font-medium",children:ne})]},ft)})}),i.jsx("div",{className:"flex gap-4 mb-6",children:X===1?i.jsx(F,{variant:"outline",onClick:()=>{var ft;if(Ee(2),(ft=z[0])!=null&&ft.method){const ne=[...z];ne[0]={...ne[0],amount:"",parcelas:ne[0].parcelas||1},ne[1]={method:"",amount:"",parcelas:void 0},ie(ne)}},className:"w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-gray-400 dark:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white",children:"2 Formas de Pagamento"}):i.jsx(F,{variant:"outline",onClick:()=>{var ft;if(Ee(1),(ft=z[0])!=null&&ft.method){const ne=[...z];ne[0]={...ne[0],amount:M.toFixed(2),parcelas:ne[0].parcelas||1},ne[1]={method:"",amount:"",parcelas:void 0},ie(ne)}},className:"w-full bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-gray-400 dark:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white",children:"Voltar para 1 Forma"})}),((ge=z[0])==null?void 0:ge.method)&&X===1&&((he=z[0])==null?void 0:he.method)!=="credit"&&i.jsx("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-green-50 dark:bg-green-900/20",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("img",{src:G[(Ue=z[0])==null?void 0:Ue.method],alt:tn[(rt=z[0])==null?void 0:rt.method],className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:tn[(yt=z[0])==null?void 0:yt.method]}),i.jsx("span",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:ct(M)})]})}),((Te=z[0])==null?void 0:Te.method)==="credit"&&X===1&&i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-blue-50 dark:bg-blue-900/20",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("img",{src:G[(Cs=z[0])==null?void 0:Cs.method],alt:tn[(Qr=z[0])==null?void 0:Qr.method],className:"w-8 h-8 object-contain"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:tn[(Re=z[0])==null?void 0:Re.method]})]}),i.jsx("div",{className:"flex gap-3 items-center mb-3",children:i.jsxs(Qe,{value:(((Zr=z[0])==null?void 0:Zr.parcelas)||1).toString(),onValueChange:ft=>{const ne=parseInt(ft);console.log("Mudando parcelas para:",ne);const en=[...z];en[0]={...en[0],parcelas:ne,amount:tt(M,ne).toFixed(2)},ie(en)},children:[i.jsx(Ke,{className:"w-32 bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-200 focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600",children:i.jsx(Ze,{placeholder:"Parcelas"})}),i.jsx(Je,{className:"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600",children:zx.map(ft=>i.jsxs(ye,{value:ft.toString(),className:"text-gray-800 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600",children:[ft,"x"]},ft))})]})}),i.jsx("div",{className:"bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg p-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor original:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(M)})]}),(((Ns=z[0])==null?void 0:Ns.parcelas)||1)>1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Juros (",_n,"% ao ms):"]}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:ct(tt(M,((Nn=z[0])==null?void 0:Nn.parcelas)||1)-M)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Valor por parcela:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(tt(M,((Es=z[0])==null?void 0:Es.parcelas)||1)/(((ks=z[0])==null?void 0:ks.parcelas)||1))})]})]}),i.jsxs("div",{className:"border-t pt-2",children:[i.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[i.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:"Total a pagar:"}),i.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:ct(tt(M,((En=z[0])==null?void 0:En.parcelas)||1))})]}),(((_i=z[0])==null?void 0:_i.parcelas)||1)>1&&i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:[((fo=z[0])==null?void 0:fo.parcelas)||1,"x de ",ct(tt(M,((Kp=z[0])==null?void 0:Kp.parcelas)||1)/(((Jp=z[0])==null?void 0:Jp.parcelas)||1))]})]})]})})]}),X===2&&i.jsx("div",{className:"space-y-4",children:[...Array(X)].map((ft,ne)=>{var en,kn,Xp,Qp,Zp,eg,tg,rg,ng,sg,og,ig,ag,lg,cg,ug,dg,hg,fg,mg,pg;return i.jsxs("div",{className:"border border-gray-300 dark:border-gray-600 rounded-lg p-4 bg-white dark:bg-gray-700",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx("img",{src:G[(en=z[ne])==null?void 0:en.method],alt:tn[(kn=z[ne])==null?void 0:kn.method],className:"w-8 h-8 object-contain"}),i.jsxs("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:[tn[(Xp=z[ne])==null?void 0:Xp.method]," (",ne+1,")"]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Valor:"}),i.jsx(W,{type:"text",placeholder:"0,00",className:`w-40 border-gray-300 text-gray-800 focus:ring-0 focus:border-gray-300 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0 ${X===2&&ne===1?"bg-gray-100 cursor-not-allowed":"bg-white"}`,value:((Qp=z[ne])==null?void 0:Qp.amount)||"",disabled:X===2&&ne===1,onChange:Nt=>{var $r;if(X===2&&ne===1)return;const Ft=Nt.target.value;console.log("Digitando valor:",Ft,"no ndice:",ne,"valor atual:",($r=z[ne])==null?void 0:$r.amount),Si(ne,"amount",Ft)},onBlur:Nt=>{if(X===2&&ne===0){const Ft=nt(Nt.target.value)||0,$r=M-Ft;if($r>=0){const mo=[...z];mo[1]={...mo[1],amount:$r.toFixed(2)},ie(mo)}}}})]}),((Zp=z[ne])==null?void 0:Zp.amount)&&nt(z[ne].amount)>0&&i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Forma:"}),i.jsxs(Qe,{value:((eg=z[ne])==null?void 0:eg.method)||"",onValueChange:Nt=>{if(Si(ne,"method",Nt),Nt==="credit"){const Ft=[...z];Ft[ne]={...Ft[ne],method:Nt,parcelas:1},ie(Ft)}},children:[i.jsx(Ke,{className:"w-40 bg-white border-gray-300 text-gray-800 focus:ring-0 focus:border-gray-300 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0",children:i.jsx(Ze,{placeholder:"Escolher forma"})}),i.jsx(Je,{className:"bg-white border-gray-300",children:Object.entries(tn).map(([Nt,Ft])=>i.jsx(ye,{value:Nt,className:"text-gray-800 hover:bg-gray-100",children:Ft},Nt))})]})]}),((tg=z[ne])==null?void 0:tg.method)==="credit"&&i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Parcelas:"}),i.jsxs(Qe,{value:(((rg=z[ne])==null?void 0:rg.parcelas)||1).toString(),onValueChange:Nt=>{var mo;const Ft=parseInt(Nt);console.log("Mudando parcelas para:",Ft,"no ndice:",ne);const $r=[...z];$r[ne]={...$r[ne],parcelas:Ft},((mo=z[ne])==null?void 0:mo.method)==="credit"&&($r[ne].parcelas=Ft),ie($r)},children:[i.jsx(Ke,{className:"w-32 bg-white border-gray-300 text-gray-800 focus:ring-0 focus:border-gray-300 focus:outline-none focus-visible:ring-0 focus-visible:ring-offset-0",children:i.jsx(Ze,{placeholder:"Parcelas"})}),i.jsx(Je,{className:"bg-white border-gray-300",children:zx.map(Nt=>i.jsxs(ye,{value:Nt.toString(),className:"text-gray-800 hover:bg-gray-100",children:[Nt,"x"]},Nt))})]})]})]}),((ng=z[ne])==null?void 0:ng.method)==="credit"&&X===2&&(((sg=z[ne])==null?void 0:sg.parcelas)||1)>1&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-3",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Valor original:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(nt((og=z[ne])==null?void 0:og.amount))})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{className:"text-blue-800 dark:text-blue-200",children:["Juros (",_n,"% ao ms):"]}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:ct(tt(nt((ig=z[ne])==null?void 0:ig.amount),((ag=z[ne])==null?void 0:ag.parcelas)||1)-nt((lg=z[ne])==null?void 0:lg.amount))})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-blue-800 dark:text-blue-200",children:"Valor por parcela:"}),i.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:ct(tt(nt((cg=z[ne])==null?void 0:cg.amount),((ug=z[ne])==null?void 0:ug.parcelas)||1)/(((dg=z[ne])==null?void 0:dg.parcelas)||1))})]}),i.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400 text-center",children:[((hg=z[ne])==null?void 0:hg.parcelas)||1,"x de ",ct(tt(nt((fg=z[ne])==null?void 0:fg.amount),((mg=z[ne])==null?void 0:mg.parcelas)||1)/(((pg=z[ne])==null?void 0:pg.parcelas)||1))]})]})})]},ne)})})]}),!_s&&((Yp=z[0])==null?void 0:Yp.method)&&i.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:" Preencha todas as formas de pagamento corretamente e o valor total deve bater com o total da venda."}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(F,{onClick:()=>_s&&y(5),disabled:!_s,children:"Avanar"}),i.jsx(F,{variant:"ghost",onClick:()=>y(3),children:"Voltar"})]})]})},sl=()=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione a modalidade da venda"}),i.jsx("div",{className:"flex gap-4 mb-4",children:Bx.map(M=>i.jsx(F,{variant:v===M.value?"default":"outline",onClick:()=>b(M.value),className:"min-w-[120px]",children:M.label},M.value))}),i.jsx(F,{onClick:()=>v&&y(1),disabled:!v,className:"mt-2",children:"Avanar"})]}),Yu=()=>i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione o vendedor responsvel"}),C?i.jsx("div",{children:"Carregando vendedores..."}):i.jsx("div",{className:"flex flex-col gap-2 mb-4 max-w-md",children:N.map(M=>i.jsxs(F,{variant:(S==null?void 0:S.id)===M.id?"default":"outline",onClick:()=>E(M),className:"justify-start",children:[M.name," ",i.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",M.role,")"]})]},M.id))}),i.jsx(F,{onClick:()=>S&&y(2),disabled:!S,className:"mt-2",children:"Avanar"}),i.jsx(F,{variant:"ghost",className:"mt-2 ml-2",onClick:()=>y(0),children:"Voltar"})]}),_C=()=>{const M=R||"all",G=D.filter(Te=>{var Nn,Es,ks,En;const Cs=(Nn=Te.name)==null?void 0:Nn.toLowerCase().includes(T.toLowerCase()),Qr=(Es=Te.cpf)==null?void 0:Es.includes(T),Re=(ks=Te.cnpj)==null?void 0:ks.includes(T),Zr=(En=Te.phone)==null?void 0:En.includes(T),Ns=M!=="all"?Te.category===M:!0;return(Cs||Qr||Re||Zr)&&Ns}),ge=10,he=Math.ceil(G.length/ge),Ue=(Ne-1)*ge,rt=Ue+ge,yt=oe?G:G.slice(Ue,rt);return i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Selecione o cliente"}),i.jsxs("div",{className:"mb-4",children:[i.jsx(W,{placeholder:"Buscar por nome, CPF, CNPJ ou telefone...",value:T,onChange:Te=>V(Te.target.value),className:"mb-2"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsxs(Qe,{value:M,onValueChange:H,children:[i.jsx(Ke,{className:"w-48",children:i.jsx(Ze,{placeholder:"Todas as categorias"})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"all",children:"Todas as categorias"}),i.jsx(ye,{value:"Varejo",children:"Varejo"}),i.jsx(ye,{value:"Atacado",children:"Atacado"}),i.jsx(ye,{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]})]}),i.jsx(F,{variant:"outline",onClick:()=>ce(!oe),children:oe?"Mostrar menos":"Mostrar todos"}),i.jsxs(F,{variant:"default",onClick:()=>P(!0),className:"bg-green-600 hover:bg-green-700 text-white",children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Cadastrar Cliente"]})]})]}),U?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Carregando clientes..."}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto border border-gray-700 rounded-lg p-2",children:yt.length===0?i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:T?"Nenhum cliente encontrado com essa busca.":"Nenhum cliente cadastrado."}):yt.map(Te=>i.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors border ${(L==null?void 0:L.id)===Te.id?"bg-blue-600 border-blue-500 text-white":"bg-gray-800 border-gray-700 hover:bg-gray-700 text-gray-200"}`,onClick:()=>O(Te),children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:`font-medium ${(L==null?void 0:L.id)===Te.id?"text-white":"text-gray-200"}`,children:Te.name}),i.jsxs("div",{className:`text-sm mt-1 ${(L==null?void 0:L.id)===Te.id?"text-blue-100":"text-gray-400"}`,children:[i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${Te.category==="Varejo"?"bg-green-600 text-green-100":Te.category==="Atacado"?"bg-blue-600 text-blue-100":Te.category==="Cliente Exclusivo"?"bg-purple-600 text-purple-100":"bg-gray-600 text-gray-100"}`,children:Te.category||"Cliente"}),Te.cpf&&i.jsxs("span",{className:"ml-2",children:[" CPF: ",Te.cpf]}),Te.cnpj&&i.jsxs("span",{className:"ml-2",children:[" CNPJ: ",Te.cnpj]}),Te.phone&&i.jsxs("span",{className:"ml-2",children:[" Tel: ",Te.phone]})]})]}),(L==null?void 0:L.id)===Te.id&&i.jsx("div",{className:"text-white text-sm font-medium bg-white bg-opacity-20 px-3 py-1 rounded-full",children:" Selecionado"})]})},Te.id))}),!U&&G.length>ge&&!oe&&i.jsxs("div",{className:"flex justify-between items-center mt-4 p-3 bg-gray-800 border border-gray-700 rounded-lg",children:[i.jsxs("div",{className:"text-sm text-gray-300 font-medium",children:["Mostrando ",Ue+1,"-",Math.min(rt,G.length)," de ",G.length," clientes"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(F,{variant:"outline",size:"sm",onClick:()=>ae(Math.max(1,Ne-1)),disabled:Ne===1,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:" Anterior"}),i.jsxs("span",{className:"px-4 py-2 text-sm bg-gray-700 border border-gray-600 rounded-lg font-medium text-gray-200",children:[Ne," de ",he]}),i.jsx(F,{variant:"outline",size:"sm",onClick:()=>ae(Math.min(he,Ne+1)),disabled:Ne===he,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white",children:"Prxima "})]})]}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx(F,{onClick:()=>L&&y(3),disabled:!L,children:"Avanar"}),i.jsx(F,{variant:"ghost",onClick:()=>y(1),children:"Voltar"})]})]})};return ke(),z.slice(0,X).reduce((M,G)=>M+(nt(G.amount)||0),0),z.slice(0,X).every(M=>M.method&&M.amount&&!isNaN(nt(M.amount))&&(M.method!=="credit"||M.parcelas)),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[i.jsx(Wu,{}),i.jsx(sF,{open:A,onOpenChange:P,onCustomerCreated:Hu}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[x===0&&sl(),x===1&&Yu(),x===2&&_C(),x===3&&Gu(),x===4&&nl(),x===5&&qu()]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(lF,{subtotal:Z(),discountAmount:pe(),total:ke(),onApplyDiscount:Ye,discount:a}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"w-5 h-5"}),i.jsx("span",{children:"Status do Caixa"})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),i.jsx("p",{className:`font-bold ${d.isOpen?"text-green-600":"text-red-600"}`,children:d.isOpen?"ABERTO":"FECHADO"}),d.isOpen&&i.jsx("p",{className:"text-lg font-bold",children:ct(d.currentAmount)})]}),i.jsx("div",{className:"text-center",children:i.jsx(F,{variant:"outline",size:"sm",onClick:()=>window.location.href="/cash-register",className:"w-full",children:"Gerenciar Caixa"})})]})]}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"pt-6",children:i.jsx(F,{variant:"outline",size:"lg",className:"w-full border-red-600 text-red-400 hover:bg-red-600 hover:text-white",onClick:ht,children:"Encerrar Venda"})})})]})]})},dF=({products:e,onEdit:t,onDelete:r,stores:n,currentUser:s})=>{if(e.length===0)return i.jsx(re,{children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(Hr,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum produto encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os termos de busca ou crie seu primeiro produto."})]})});const o=a=>{var l;return((l=n.find(c=>c.id===a))==null?void 0:l.name)||"Loja Desconhecida"};return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(a=>{var u,d,h;let l=a.stock,c="Est. Online/Geral";if(s&&s.store_id&&!((u=s.stores)!=null&&u.is_online_store)){const f=(d=a.physicalStocks)==null?void 0:d.find(g=>g.store_id===s.store_id);f?(l=f.quantity,c=`Est. ${s.stores.name}`):(l=0,c=`Est. ${s.stores.name}`)}return i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-hover",children:i.jsxs(re,{className:"glass-effect flex flex-col h-full",children:[i.jsxs(xe,{children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[a.image_url?i.jsx("img",{src:a.image_url,alt:a.name,className:"w-10 h-10 object-cover rounded-md border",onError:f=>{console.log(" Erro ao carregar imagem:",a.image_url,"para produto:",a.name),f.target.style.display="none",f.target.nextSibling.style.display="block"},onLoad:()=>{console.log(" Imagem carregada com sucesso:",a.image_url,"para produto:",a.name)}}):null,i.jsx(Hr,{className:`w-5 h-5 text-primary ${a.image_url?"hidden":"block"}`}),i.jsx(we,{className:"text-lg",children:a.name})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(Go,{to:`/products/${a.id}`,children:i.jsx(F,{variant:"ghost",size:"icon",children:i.jsx(ep,{className:"w-4 h-4"})})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>t(a),children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>r(a),className:"text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]}),i.jsxs("p",{className:"text-xs text-muted-foreground pt-1",children:["Cd: ",a.barcode]}),i.jsxs("p",{className:"text-xs text-muted-foreground capitalize",children:["Tipo: ",a.product_type==="variable"?"Varivel":"Simples"]}),a.store_id&&i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[i.jsx(Ra,{className:"w-3 h-3 mr-1"}),i.jsxs("span",{children:["Cadastrado em: ",o(a.store_id)]})]})]}),i.jsxs(se,{className:"space-y-3 flex-grow flex flex-col justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-muted-foreground",children:"Categoria:"}),i.jsx("p",{children:a.category||"-"})]})}),s&&(((h=s.stores)==null?void 0:h.is_online_store)||s.role==="admin")&&a.physicalStocks&&a.physicalStocks.length>0&&i.jsxs("div",{className:"mt-3 pt-2 border-t border-dashed",children:[i.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Estoque nas Lojas Fsicas:"}),i.jsx("div",{className:"space-y-1 max-h-20 overflow-y-auto text-xs",children:a.physicalStocks.map(f=>{var g;return i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Jj,{className:"w-3 h-3 mr-1 text-muted-foreground"}),i.jsxs("span",{children:[((g=f.stores)==null?void 0:g.name)||o(f.store_id),":"]})]}),i.jsxs("span",{children:[f.quantity," un."]})]},f.id)})})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 border-t mt-3",children:[i.jsxs("span",{className:"text-xl font-bold text-primary",children:["R$ ",a.price.toFixed(2)]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`text-sm font-medium ${l<=a.min_stock?"text-orange-600":"text-green-600"}`,children:[c,": ",l]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Alerta Mn: ",a.min_stock]})]})]})]})]})},a.id)})})},hF=async()=>{try{const e=it();let t=Q.from("categories").select("*").order("name");(e==null?void 0:e.role)!=="admin"&&(e!=null&&e.store_id)?t=t.eq("store_id",e.store_id):(e==null?void 0:e.role)!=="admin"&&(t=t.is("store_id",null));const{data:r,error:n}=await t;if(n)throw console.error("Erro ao buscar categorias:",n),new Error("Erro ao buscar categorias");return r||[]}catch(e){throw console.error("Erro em getCategories:",e),e}},fF=async e=>{try{const t=it(),r={...e,store_id:(t==null?void 0:t.store_id)||null},{data:n,error:s}=await Q.from("categories").insert([r]).select().single();if(s)throw console.error("Erro ao adicionar categoria:",s),new Error("Erro ao adicionar categoria");return n}catch(t){throw console.error("Erro em addCategory:",t),t}},mF=async(e,t)=>{try{const{data:r,error:n}=await Q.from("categories").update(t).eq("id",e).select().single();if(n)throw console.error("Erro ao atualizar categoria:",n),new Error("Erro ao atualizar categoria");return r}catch(r){throw console.error("Erro em updateCategory:",r),r}},pF=async e=>{try{const{error:t}=await Q.from("categories").delete().eq("id",e);if(t)throw console.error("Erro ao deletar categoria:",t),new Error("Erro ao deletar categoria");return!0}catch(t){throw console.error("Erro em deleteCategory:",t),t}},gF=async()=>{try{const e=it();let t=Q.from("categories").select("*").eq("active",!0).order("name");(e==null?void 0:e.role)!=="admin"&&(e!=null&&e.store_id)?t=t.eq("store_id",e.store_id):(e==null?void 0:e.role)!=="admin"&&(t=t.is("store_id",null));const{data:r,error:n}=await t;if(n)throw console.error("Erro ao buscar categorias ativas:",n),new Error("Erro ao buscar categorias ativas");return r||[]}catch(e){throw console.error("Erro em getActiveCategories:",e),e}},vF=async e=>{try{const{data:t,error:r}=await Q.from("products").select("id, name").eq("category",e).limit(1);if(r)throw console.error("Erro ao verificar uso da categoria:",r),new Error("Erro ao verificar uso da categoria");return t.length>0}catch(t){throw console.error("Erro em checkCategoryUsage:",t),t}},Er={SIMPLE:"simple",VARIABLE:"variable"},yF=({formData:e,handleInputChange:t,handleProductTypeChange:r,categories:n=[]})=>i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"name",children:"Nome do Produto *"}),i.jsx(W,{id:"name",name:"name",value:e.name,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"category",children:"Categoria"}),i.jsxs(Qe,{name:"category",value:e.category,onValueChange:s=>t({target:{name:"category",value:s}}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione a categoria"})}),i.jsx(Je,{children:n.map(s=>i.jsx(ye,{value:s.name,children:s.name},s.id))})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"barcode",children:"Cdigo de Barras Principal *"}),i.jsx(W,{id:"barcode",name:"barcode",value:e.barcode,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"price",children:"Preo Principal *"}),i.jsx(W,{id:"price",name:"price",type:"number",step:"0.01",value:e.price,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"price_varejo",children:"Preo de Varejo"}),i.jsx(W,{id:"price_varejo",name:"price_varejo",type:"number",step:"0.01",value:e.price_varejo||"",onChange:t})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"price_atacado",children:"Preo de Atacado"}),i.jsx(W,{id:"price_atacado",name:"price_atacado",type:"number",step:"0.01",value:e.price_atacado||"",onChange:t})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"price_atacarejo",children:"Cliente Exclusivo"}),i.jsx(W,{id:"price_atacarejo",name:"price_atacarejo",type:"number",step:"0.01",value:e.price_atacarejo||"",onChange:t})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"product_type",children:"Tipo de Produto *"}),i.jsxs(Qe,{name:"product_type",value:e.product_type,onValueChange:r,children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione o tipo"})}),i.jsxs(Je,{children:[i.jsx(ye,{value:Er.SIMPLE,children:"Produto Simples"}),i.jsx(ye,{value:Er.VARIABLE,children:"Produto Varivel"})]})]})]}),e.product_type===Er.SIMPLE&&i.jsxs("div",{children:[i.jsx(B,{htmlFor:"stock",children:"Estoque (Simples) *"}),i.jsx(W,{id:"stock",name:"stock",type:"number",value:e.stock,onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"referencia",children:"Referncia *"}),i.jsx(W,{id:"referencia",name:"referencia",value:e.referencia||"",onChange:t,required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"min_stock",children:"Estoque Mnimo Global (Alerta)"}),i.jsx(W,{id:"min_stock",name:"min_stock",type:"number",value:e.min_stock,onChange:t})]})]}),i.jsxs("div",{className:"pt-4 border-t mt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Dimenses e Peso (para frete)"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"weight",children:"Peso (kg)"}),i.jsx(W,{id:"weight",name:"weight",type:"number",step:"0.01",value:e.weight,onChange:t})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"length",children:"Comprimento (cm)"}),i.jsx(W,{id:"length",name:"length",type:"number",step:"0.1",value:e.length,onChange:t})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"height",children:"Altura (cm)"}),i.jsx(W,{id:"height",name:"height",type:"number",step:"0.1",value:e.height,onChange:t})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"width",children:"Largura (cm)"}),i.jsx(W,{id:"width",name:"width",type:"number",step:"0.1",value:e.width,onChange:t})]})]})]})]}),Y_=({title:e,imageUrlPreview:t,handleImageChange:r,imageInputRef:n,idPrefix:s="main"})=>i.jsxs("div",{className:"pt-4 border-t mt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:e}),i.jsx(W,{type:"file",accept:"image/*",onChange:r,ref:n,className:"mb-2",id:`${s}_image_upload`}),t&&i.jsx("img",{src:t,alt:`Preview ${e}`,className:"w-32 h-32 object-cover rounded-md border"})]}),xF=({variations:e,handleVariationChange:t,handleVariationAttributeChange:r,removeVariation:n,addVariation:s,handleVariationImageChange:o,variationImageUrlPreviews:a})=>!e||e.length===0?i.jsx("div",{className:"pt-4 border-t mt-6",children:i.jsxs(F,{type:"button",variant:"outline",onClick:s,children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Adicionar Primeira Variao"]})}):i.jsxs("div",{className:"pt-4 border-t mt-6",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Variaes do Produto"}),e.map((l,c)=>i.jsxs("div",{className:"p-4 border rounded-md mb-4 space-y-3 bg-muted/20 relative",children:[i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"absolute top-2 right-2 text-destructive",onClick:()=>n(c),children:i.jsx(ao,{className:"w-4 h-4"})}),i.jsxs("p",{className:"font-semibold text-md",children:["Variao ",c+1]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(l.attributes||[{name:"",value:""}]).map((u,d)=>i.jsxs(de.Fragment,{children:[i.jsxs("div",{children:[i.jsxs(B,{htmlFor:`variation_${c}_attribute_name_${d}`,children:["Nome do Atributo ",d+1," (Ex: Cor, Tamanho)"]}),i.jsx(W,{id:`variation_${c}_attribute_name_${d}`,value:u.name,onChange:h=>r(c,d,"name",h.target.value)})]}),i.jsxs("div",{children:[i.jsxs(B,{htmlFor:`variation_${c}_attribute_value_${d}`,children:["Valor do Atributo ",d+1," (Ex: Azul, M)"]}),i.jsx(W,{id:`variation_${c}_attribute_value_${d}`,value:u.value,onChange:h=>r(c,d,"value",h.target.value)})]})]},d))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_sku_${c}`,children:"SKU da Variao"}),i.jsx(W,{id:`variation_sku_${c}`,value:l.sku||"",onChange:u=>t(c,"sku",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_barcode_${c}`,children:"Cd. Barras Variao"}),i.jsx(W,{id:`variation_barcode_${c}`,value:l.barcode||"",onChange:u=>t(c,"barcode",u.target.value),onKeyDown:u=>{var d;if(u.key==="Enter"){u.preventDefault(),u.stopPropagation();const h=(d=u.target.closest("form"))==null?void 0:d.querySelector(`#variation_referencia_${c}`);h&&h.focus()}}})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_referencia_${c}`,children:"Referncia"}),i.jsx(W,{id:`variation_referencia_${c}`,value:l.referencia||"",onChange:u=>t(c,"referencia",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_price_${c}`,children:"Preo Variao (opcional)"}),i.jsx(W,{id:`variation_price_${c}`,type:"number",step:"0.01",value:l.price||"",onChange:u=>t(c,"price",u.target.value),placeholder:"Usar preo principal"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_price_varejo_${c}`,children:"Preo Varejo"}),i.jsx(W,{id:`variation_price_varejo_${c}`,type:"number",step:"0.01",value:l.price_varejo||"",onChange:u=>t(c,"price_varejo",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_price_atacado_${c}`,children:"Preo Atacado"}),i.jsx(W,{id:`variation_price_atacado_${c}`,type:"number",step:"0.01",value:l.price_atacado||"",onChange:u=>t(c,"price_atacado",u.target.value)})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_price_atacarejo_${c}`,children:"Cliente Exclusivo"}),i.jsx(W,{id:`variation_price_atacarejo_${c}`,type:"number",step:"0.01",value:l.price_atacarejo||"",onChange:u=>t(c,"price_atacarejo",u.target.value)})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:`variation_stock_${c}`,children:"Estoque da Variao *"}),i.jsx(W,{id:`variation_stock_${c}`,type:"number",value:l.stock||"0",onChange:u=>t(c,"stock",u.target.value),required:!0})]}),i.jsx(Y_,{title:"Imagem da Variao (opcional)",imageUrlPreview:a[c],handleImageChange:u=>o(c,u),idPrefix:`variation_${c}`})]},c)),i.jsxs(F,{type:"button",variant:"outline",onClick:s,children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Adicionar Variao"]})]});var Uu="Switch",[wF,D3]=vs(Uu),[jF,bF]=wF(Uu),X_=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,g]=p.useState(null),w=Me(t,v=>g(v)),m=p.useRef(!1),j=f?d||!!f.closest("form"):!0,[x,y]=Qs({prop:s,defaultProp:o??!1,onChange:u,caller:Uu});return i.jsxs(jF,{scope:r,checked:x,disabled:l,children:[i.jsx(me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":a,"data-state":tC(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:w,onClick:ue(e.onClick,v=>{y(b=>!b),j&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})}),j&&i.jsx(eC,{control:f,bubbles:!m.current,name:n,value:c,checked:x,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});X_.displayName=Uu;var Q_="SwitchThumb",Z_=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=bF(Q_,r);return i.jsx(me.span,{"data-state":tC(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});Z_.displayName=Q_;var SF="SwitchBubbleInput",eC=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...s},o)=>{const a=p.useRef(null),l=Me(a,o),c=u_(r),u=ZS(t);return p.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==r&&g){const w=new Event("click",{bubbles:n});g.call(d,r),d.dispatchEvent(w)}},[c,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});eC.displayName=SF;function tC(e){return e?"checked":"unchecked"}var rC=X_,_F=Z_;const Un=de.forwardRef(({className:e,...t},r)=>i.jsx(rC,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(_F,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Un.displayName=rC.displayName;class nC{constructor(){this.baseURL="https://fiodegala.com.br",this.consumerKey="ck_5e67006c47937098df701a162be25fbb74e9d5c0",this.consumerSecret="cs_6bf2fe2d2bb181c962c053cc6c8276df208b48f2",this.apiVersion="wc/v3"}getAuthHeader(){const t=`${this.consumerKey}:${this.consumerSecret}`;return`Basic ${btoa(t)}`}async createProduct(t){try{let r=null;t.category&&(r=await this.getOrCreateCategory(t.category));const n={name:t.name,type:"simple",regular_price:t.price.toString(),description:t.description||"",short_description:t.short_description||"",sku:t.barcode||"",manage_stock:!0,stock_quantity:t.stock||0,stock_status:(t.stock||0)>0?"instock":"outofstock",weight:t.weight?t.weight.toString():"",dimensions:{length:t.length?t.length.toString():"",width:t.width?t.width.toString():"",height:t.height?t.height.toString():""},categories:r?[{id:r}]:[],images:t.images?t.images.map(a=>({src:a,position:0})):[],attributes:this.mapAttributes(t),status:"publish"},s=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(n)});if(!s.ok){const a=await s.json();throw new Error(`Erro ao criar produto no WooCommerce: ${a.message||s.statusText}`)}const o=await s.json();return console.log("Produto criado no WooCommerce:",o),o}catch(r){throw console.error("Erro na integrao WooCommerce:",r),r}}async updateProduct(t,r){try{let n=null;r.category&&(n=await this.getOrCreateCategory(r.category));const s={name:r.name,regular_price:r.price.toString(),description:r.description||"",short_description:r.short_description||"",sku:r.barcode||"",manage_stock:!0,stock_quantity:r.stock||0,stock_status:(r.stock||0)>0?"instock":"outofstock",weight:r.weight?r.weight.toString():"",dimensions:{length:r.length?r.length.toString():"",width:r.width?r.width.toString():"",height:r.height?r.height.toString():""},categories:n?[{id:n}]:[],images:r.images?r.images.map(l=>({src:l,position:0})):[],attributes:this.mapAttributes(r)},o=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(s)});if(!o.ok){const l=await o.json();throw new Error(`Erro ao atualizar produto no WooCommerce: ${l.message||o.statusText}`)}const a=await o.json();return console.log("Produto atualizado no WooCommerce:",a),a}catch(n){throw console.error("Erro na atualizao WooCommerce:",n),n}}async updateStock(t,r){try{const n={stock_quantity:r,stock_status:r>0?"instock":"outofstock"},s=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify(n)});if(!s.ok){const a=await s.json();throw new Error(`Erro ao atualizar estoque no WooCommerce: ${a.message||s.statusText}`)}const o=await s.json();return console.log("Estoque atualizado no WooCommerce:",o),o}catch(n){throw console.error("Erro na atualizao de estoque:",n),n}}async deleteProduct(t){try{const r=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/${t}`,{method:"DELETE",headers:{Authorization:this.getAuthHeader()}});if(!r.ok){const n=await r.json();throw new Error(`Erro ao deletar produto no WooCommerce: ${n.message||r.statusText}`)}return console.log("Produto deletado no WooCommerce"),!0}catch(r){throw console.error("Erro ao deletar produto:",r),r}}async getProductBySKU(t){try{const r=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products?sku=${t}`,{headers:{Authorization:this.getAuthHeader()}});if(!r.ok)throw new Error(`Erro ao buscar produto no WooCommerce: ${r.statusText}`);const n=await r.json();return n.length>0?n[0]:null}catch(r){throw console.error("Erro ao buscar produto por SKU:",r),r}}mapAttributes(t){const r=[];return t.color&&r.push({name:"Cor",position:0,visible:!0,variation:!0,options:[t.color]}),t.size&&r.push({name:"Tamanho",position:1,visible:!0,variation:!0,options:[t.size]}),t.brand&&r.push({name:"Marca",position:2,visible:!0,variation:!1,options:[t.brand]}),r}async getOrCreateCategory(t){try{const r=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/categories?search=${encodeURIComponent(t)}`,{headers:{Authorization:this.getAuthHeader()}});if(r.ok){const a=(await r.json()).find(l=>l.name.toLowerCase()===t.toLowerCase());if(a)return console.log("Categoria encontrada:",a.name,"ID:",a.id),a.id}const n=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products/categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getAuthHeader()},body:JSON.stringify({name:t,slug:t.toLowerCase().replace(/\s+/g,"-")})});if(!n.ok){const o=await n.json();throw new Error(`Erro ao criar categoria: ${o.message||n.statusText}`)}const s=await n.json();return console.log("Nova categoria criada:",s.name,"ID:",s.id),s.id}catch(r){throw console.error("Erro ao buscar/criar categoria:",r),r}}async testConnection(){try{const t=await fetch(`${this.baseURL}/wp-json/${this.apiVersion}/products?per_page=1`,{headers:{Authorization:this.getAuthHeader()}});if(!t.ok)throw new Error(`Erro na conexo: ${t.statusText}`);return!0}catch(t){throw console.error("Erro no teste de conexo:",t),t}}}const th=Object.freeze(Object.defineProperty({__proto__:null,default:nC},Symbol.toStringTag,{value:"Module"})),CF=({open:e,onOpenChange:t,formData:r,setFormData:n,onSubmit:s,editingProduct:o,resetForm:a,onStockShared:l})=>{const[c,u]=p.useState([]),[d,h]=p.useState([]),[f,g]=p.useState(!1),[w,m]=p.useState(""),[j,x]=p.useState(""),[y,v]=p.useState([]),[b,S]=p.useState([]),[E,N]=p.useState(null),[_,C]=p.useState(""),[I,L]=p.useState({}),[O,D]=p.useState({}),[k,U]=p.useState([]),[$,A]=p.useState([]),[P,T]=p.useState(!1),[V,R]=p.useState(r.medidas||{ombro:"",busto:"",cintura:"",quadril:"",comprimento:"",manga:"",tornozelo:""}),[H,oe]=p.useState(!1),[ce,Ne]=p.useState(""),[ae,Y]=p.useState(!1);p.useRef(null);const{toast:X}=at(),Ee=it(),z={name:"",category:"",barcode:"",price:"",price_varejo:"",price_atacado:"",price_atacarejo:"",referencia:"",stock:"0",min_stock:"0",active:!0,weight:"",length:"",height:"",width:"",product_type:Er.SIMPLE,image_url:""};p.useEffect(()=>{var K,Z,pe,ke,Ye,ht,jr,tt,_s,Si;if(o){n({name:o.name||"",category:o.category||"",barcode:o.barcode||"",price:((K=o.price)==null?void 0:K.toString())||"",price_varejo:((Z=o.price_varejo)==null?void 0:Z.toString())||"",price_atacado:((pe=o.price_atacado)==null?void 0:pe.toString())||"",price_atacarejo:((ke=o.price_atacarejo)==null?void 0:ke.toString())||"",referencia:o.referencia||"",stock:o.product_type===Er.SIMPLE&&((Ye=o.stock)==null?void 0:Ye.toString())||"0",min_stock:((ht=o.min_stock)==null?void 0:ht.toString())||"0",active:o.active!==void 0?o.active:!0,weight:((jr=o.weight)==null?void 0:jr.toString())||"",length:((tt=o.length)==null?void 0:tt.toString())||"",height:((_s=o.height)==null?void 0:_s.toString())||"",width:((Si=o.width)==null?void 0:Si.toString())||"",product_type:o.product_type||Er.SIMPLE,image_url:o.image_url||""}),S(o.variations||[]),C(o.image_url||"");const nl={};(o.variations||[]).forEach((sl,Yu)=>{sl.image_url&&(nl[Yu]=sl.image_url)}),D(nl)}else n(z),S([]),C(""),D({})},[o,e,n]),p.useEffect(()=>{R(r.medidas||{ombro:"",busto:"",cintura:"",quadril:"",comprimento:"",manga:"",tornozelo:""})},[r.medidas]);const ie=async()=>{try{await new nC().testConnection(),Y(!0),X({title:"Conexo OK",description:"Conexo com WooCommerce estabelecida com sucesso!",variant:"default"})}catch{Y(!1),X({title:"Erro de Conexo",description:"No foi possvel conectar com o WooCommerce. Verifique as configuraes.",variant:"destructive"})}},je=()=>{const K=r.category,Z=["Camiseta","Gola Mdia","Camisa","Blazer","Jaqueta","Seter"],pe=["Calas","Bermudas"];return Z.includes(K)?[{name:"tamanho",label:"Tamanho"},{name:"comprimento",label:"Comprimento"},{name:"busto",label:"Busto"},{name:"cintura",label:"Cintura"},{name:"ombro",label:"Ombro"},{name:"manga",label:"Manga"}]:pe.includes(K)?[{name:"tamanho",label:"Tamanho"},{name:"comprimento",label:"Comprimento"},{name:"cintura",label:"Cintura"},{name:"tornozelo",label:"Tornozelo"}]:[]};p.useEffect(()=>{(async()=>{const Z=await js(!0);u(Z||[])})()},[]),p.useEffect(()=>{(async()=>{try{const Z=await gF();h(Z||[])}catch(Z){console.error("Erro ao buscar categorias:",Z)}})()},[]),p.useEffect(()=>{e&&o&&(async()=>{if(o&&o.id){const Z=await li(o.id);v(Z||[])}else v([])})()},[e,o]);const lt=K=>{const{name:Z,value:pe}=K.target;n(ke=>({...ke,[Z]:pe}))},Ct=K=>{const{name:Z,value:pe}=K.target;R(ke=>({...ke,[Z]:pe}))},Dr=()=>{n(K=>({...K,medidas:V})),T(!1)},xr=K=>{n(Z=>({...Z,product_type:K,stock:K===Er.SIMPLE?Z.stock:"0"})),K===Er.SIMPLE?S([]):b.length===0&&wr()},wr=()=>{S(K=>[...K,{attributes:[{name:"Cor",value:""},{name:"Tamanho",value:""}],sku:"",barcode:"",price:"",stock:"0",image_url:""}])},_n=(K,Z,pe)=>{const ke=[...b];ke[K][Z]=pe,S(ke)},Cn=(K,Z,pe,ke)=>{const Ye=[...b];Ye[K].attributes||(Ye[K].attributes=[]),Ye[K].attributes[Z]||(Ye[K].attributes[Z]={name:"",value:""}),Ye[K].attributes[Z][pe]=ke,S(Ye)},zu=K=>{S(Z=>Z.filter((pe,ke)=>ke!==K)),L(Z=>{const pe={...Z};return delete pe[K],pe}),D(Z=>{const pe={...Z};return delete pe[K],pe})},Wu=K=>{const Z=K.target.files[0];Z&&(N(Z),C(URL.createObjectURL(Z)))},qu=(K,Z)=>{const pe=Z.target.files[0];pe&&(L(ke=>({...ke,[K]:pe})),D(ke=>({...ke,[K]:URL.createObjectURL(pe)})))},Hu=K=>{const Z=Array.from(K.target.files);U(Z),A(Z.map(pe=>URL.createObjectURL(pe)))},ho=async(K,Z="img-products")=>{if(!K)return null;const pe=`${Date.now()}_${K.name.replace(/\s/g,"_")}`,{data:ke,error:Ye}=await Q.storage.from(Z).upload(pe,K);if(Ye)throw X({title:"Erro no Upload da Imagem",description:Ye.message,variant:"destructive"}),Ye;const{data:{publicUrl:ht}}=Q.storage.from(Z).getPublicUrl(pe);return ht},Gu=async K=>{K.preventDefault(),await Ku()},Ku=async()=>{let K=r.image_url;if(E)try{K=await ho(E)}catch{return}let Z=[];k.length>0&&(Z=await Promise.all(k.map(async ht=>{try{return await ho(ht)}catch{return null}})),Z=Z.filter(Boolean));const pe=await Promise.all(b.map(async(ht,jr)=>{let tt=ht.image_url;if(I[jr])try{tt=await ho(I[jr])}catch{throw new Error(`Erro ao fazer upload da imagem para variao ${jr+1}.`)}return{...ht,image_url:tt,price:parseFloat(ht.price)||null,stock:parseInt(ht.stock)||0}})).catch(ht=>(X({title:"Erro no processamento de variaes",description:ht.message,variant:"destructive"}),null));if(!pe&&b.length>0)return;const ke={...r,referencia:r.referencia,image_url:K,variations:r.product_type===Er.VARIABLE?pe:[],price:parseFloat(r.price)||0,price_varejo:parseFloat(r.price_varejo)||0,price_atacado:parseFloat(r.price_atacado)||0,price_atacarejo:parseFloat(r.price_atacarejo)||0,weight:parseFloat(r.weight)||null,length:parseFloat(r.length)||null,height:parseFloat(r.height)||null,width:parseFloat(r.width)||null};ke.product_type===Er.VARIABLE?ke.stock=(pe||[]).reduce((ht,jr)=>ht+(parseInt(jr.stock)||0),0):ke.stock=parseInt(r.stock)||0;const Ye={...ke,syncWithWooCommerce:H&&ae,uploadedImageUrls:Z};s(Ye,Z)},Ju=async()=>{if(!o||!w||!j){X({title:"Erro",description:"Selecione produto, loja e quantidade para compartilhar.",variant:"destructive"});return}const K=parseInt(j);if(isNaN(K)||K<=0){X({title:"Erro",description:"Quantidade invlida.",variant:"destructive"});return}try{await VM(o.id,w,K,null),X({title:"Estoque Compartilhado!",description:`${K} unidades compartilhadas com sucesso.`}),m(""),x(""),g(!1);const Z=await li(o.id);v(Z||[]),l&&l()}catch(Z){X({title:"Erro ao compartilhar",description:Z.message,variant:"destructive"})}},rl=Ee&&Gt(Ee.role,J.SHARE_STOCK),bi=()=>{t(!1),a(),g(!1),m(""),x(""),v([]),S([]),N(null),C(""),L({}),D({})};return i.jsxs(mr,{open:e,onOpenChange:K=>{K?t(!0):bi()},children:[i.jsx(Jo,{asChild:!0,children:i.jsxs(F,{children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Novo Produto"]})}),i.jsxs(Zt,{className:"max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsx(er,{children:i.jsx(tr,{children:o?"Editar Produto":"Novo Produto"})}),i.jsxs("form",{id:"product-form",onSubmit:Gu,className:"flex-1 overflow-y-auto space-y-6 p-2 pr-4",children:[i.jsx(yF,{formData:r,handleInputChange:lt,handleProductTypeChange:xr,categories:d}),i.jsx(Y_,{title:"Imagem Principal (opcional)",imageUrlPreview:_,handleImageChange:Wu,idPrefix:"main"}),i.jsxs("div",{className:"mt-4",children:[i.jsx(B,{children:"Imagens do Produto (vrias)"}),i.jsxs("div",{className:"flex gap-2 flex-wrap mt-2",children:[$.map((K,Z)=>i.jsxs("div",{className:`relative group rounded-lg shadow-md border bg-background ${Z===0?"ring-2 ring-primary":""}`,children:[i.jsx("img",{src:K,alt:`Imagem ${Z+1}`,className:"w-24 h-24 object-cover rounded-lg transition-transform group-hover:scale-105"}),Z===0&&i.jsx("span",{className:"absolute top-1 left-1 bg-primary text-xs text-white px-2 py-0.5 rounded shadow",children:"Destaque"}),i.jsx("button",{type:"button",className:"absolute top-1 right-1 bg-destructive text-white rounded-full p-1 opacity-80 hover:opacity-100",onClick:()=>{U(pe=>pe.filter((ke,Ye)=>Ye!==Z)),A(pe=>pe.filter((ke,Ye)=>Ye!==Z))},title:"Remover imagem",children:""})]},Z)),i.jsxs("label",{className:"flex flex-col items-center justify-center w-24 h-24 border-2 border-dashed border-muted-foreground rounded-lg cursor-pointer hover:bg-muted transition",children:[i.jsx("span",{className:"text-3xl text-muted-foreground",children:"+"}),i.jsx("input",{type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:Hu})]})]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"A primeira imagem ser a de destaque."})]}),r.product_type===Er.VARIABLE&&i.jsx(xF,{variations:b,handleVariationChange:_n,handleVariationAttributeChange:Cn,removeVariation:zu,addVariation:wr,handleVariationImageChange:qu,variationImageUrlPreviews:O}),i.jsxs("div",{className:"pt-4 border-t mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Integrao WooCommerce"}),i.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:ie,children:"Testar Conexo"})]}),i.jsxs("div",{className:"p-4 border rounded-md bg-muted/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Un,{checked:H,onCheckedChange:oe,disabled:!ae}),i.jsx(B,{children:"Sincronizar com WooCommerce"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${ae?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:"text-sm text-muted-foreground",children:ae?"Conectado":"Desconectado"})]})]}),ce&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["ID WooCommerce: ",ce]}),!ae&&i.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:'Clique em "Testar Conexo" para verificar a integrao com WooCommerce.'})]})]}),o&&rl&&i.jsxs("div",{className:"pt-4 border-t mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Compartilhar Estoque com Lojas Fsicas"}),i.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>g(!f),children:[i.jsx(VP,{className:"w-4 h-4 mr-2"}),f?"Fechar":"Abrir"," Compartilhamento"]})]}),f&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-md bg-muted/30",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"shareStoreId",children:"Loja Fsica"}),i.jsxs(Qe,{value:w,onValueChange:m,children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione a loja"})}),i.jsx(Je,{children:c.map(K=>i.jsx(ye,{value:K.id,children:K.name},K.id))})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"shareQuantity",children:"Qtd. a Compartilhar"}),i.jsx("input",{id:"shareQuantity",type:"number",min:"1",value:j,onChange:K=>x(K.target.value),className:"input w-full border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 rounded-md"})]}),i.jsx("div",{className:"md:self-end",children:i.jsx(F,{type:"button",onClick:Ju,className:"w-full",children:"Compartilhar"})})]}),y.length>0&&i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Estoque Compartilhado:"}),y.map(K=>{var Z;return i.jsxs("div",{className:"flex items-center justify-between text-sm p-2 bg-background rounded-md",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Jj,{className:"w-4 h-4 mr-2 text-muted-foreground"}),i.jsx("span",{children:((Z=K.stores)==null?void 0:Z.name)||"Loja desconhecida"})]}),i.jsxs("span",{children:[K.quantity," unidades"]})]},K.id)})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t mt-4 bg-background",children:[i.jsx(F,{type:"button",variant:"outline",onClick:bi,children:"Cancelar"}),i.jsxs(F,{type:"submit",form:"product-form",children:[o?"Atualizar":"Criar"," Produto"]})]}),i.jsx(F,{type:"button",variant:"outline",className:"mt-2",onClick:()=>T(!0),children:"Adicionar Medidas"}),i.jsx(mr,{open:P,onOpenChange:T,children:i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Medidas da Pea"})}),r.category?i.jsx("div",{className:"grid grid-cols-2 gap-4 mt-4",children:je().map(K=>i.jsxs("div",{children:[i.jsx(B,{children:K.label}),i.jsx(W,{name:K.name,value:V[K.name]||"",onChange:Ct})]},K.name))}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Selecione uma categoria primeiro para ver os campos de medidas disponveis."}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(F,{type:"button",variant:"ghost",onClick:()=>T(!1),children:"Cancelar"}),i.jsx(F,{type:"button",onClick:Dr,children:"Salvar"})]})]})})]})]})},NF=({products:e})=>e.length===0?null:i.jsxs(re,{className:"border-orange-500 bg-orange-50 dark:bg-orange-950",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2 text-orange-700 dark:text-orange-300",children:[i.jsx(SP,{className:"w-5 h-5"}),i.jsx("span",{children:"Produtos com Estoque Baixo"})]})}),i.jsx(se,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:e.map(t=>i.jsxs("div",{className:"text-sm p-2 bg-orange-100 dark:bg-orange-900/50 rounded",children:[i.jsx("span",{className:"font-medium",children:t.name}),i.jsxs("span",{className:"text-orange-600 dark:text-orange-400 ml-2",children:["(Estoque: ",t.stock," / Mn: ",t.min_stock,")"]})]},t.id))})})]}),EF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(""),[s,o]=p.useState(null),[a,l]=p.useState(!1),[c,u]=p.useState(!0),[d,h]=p.useState([]),{toast:f}=at(),g=it(),{refreshRecentProducts:w}=J_(),[m,j]=p.useState({name:"",category:"",brand:"",barcode:"",sizes:"",colors:"",price:"",stock:"",min_stock:"",active:!0}),[x,y]=p.useState({barcode:"",sku:"",referencia:"",name:""}),v=O=>{const{name:D,value:k}=O.target;y(U=>({...U,[D]:k}))},b=e.filter(O=>{var D,k,U,$;return(!x.barcode||((D=O.barcode)==null?void 0:D.toLowerCase().includes(x.barcode.toLowerCase())))&&(!x.sku||((k=O.sku)==null?void 0:k.toLowerCase().includes(x.sku.toLowerCase()))||O.variations&&O.variations.some(A=>{var P;return(P=A.sku)==null?void 0:P.toLowerCase().includes(x.sku.toLowerCase())}))&&(!x.referencia||((U=O.referencia)==null?void 0:U.toLowerCase().includes(x.referencia.toLowerCase()))||O.variations&&O.variations.some(A=>{var P;return(P=A.referencia)==null?void 0:P.toLowerCase().includes(x.referencia.toLowerCase())}))&&(!x.name||(($=O.name)==null?void 0:$.toLowerCase().includes(x.name.toLowerCase())))}),S=p.useCallback(async()=>{u(!0);try{const[O,D]=await Promise.all([kp(),js()]),k=await Promise.all((O||[]).map(async U=>{const $=await li(U.id);return{...U,physicalStocks:$||[]}}));t(k),h(D||[])}catch(O){f({title:"Erro ao carregar produtos ou lojas",description:O.message,variant:"destructive"})}finally{u(!1)}},[f,g==null?void 0:g.store_id,g==null?void 0:g.role]);p.useEffect(()=>{S()},[S]);const E=()=>{j({name:"",category:"",brand:"",barcode:"",sizes:"",colors:"",price:"",stock:"",min_stock:"",active:!0}),o(null)},N=async O=>{var k,U;console.log(" Iniciando criao de produto..."),console.log(" Dados recebidos:",O);const D={...O,price:parseFloat(O.price)||0,stock:parseInt(O.stock)||0,min_stock:parseInt(O.min_stock)||0,sizes:O.sizes?O.sizes.split(",").map($=>$.trim()).filter($=>$):[],colors:O.colors?O.colors.split(",").map($=>$.trim()).filter($=>$):[]};if(console.log(" Dados processados:",D),!D.name||!D.barcode||!D.price||isNaN(D.stock)){console.log(" Erro de validao:",{name:D.name,barcode:D.barcode,price:D.price,stock:D.stock}),f({title:"Erro de Validao",description:"Nome, Cdigo de Barras, Preo e Estoque Online so obrigatrios.",variant:"destructive"});return}u(!0);try{if(console.log(" Verificando loja..."),!s&&!((k=g==null?void 0:g.stores)!=null&&k.is_online_store)){const $=d.find(A=>A.is_online_store);if(console.log(" Loja online encontrada:",$),$)D.store_id=$.id;else{console.log(" Loja online no encontrada"),f({title:"Erro",description:"Loja online principal no encontrada para cadastro.",variant:"destructive"}),u(!1);return}}else s?D.store_id=s.store_id:(U=g==null?void 0:g.stores)!=null&&U.is_online_store&&(D.store_id=g.store_id);if(console.log(" Dados finais antes de salvar:",D),s){console.log(" Atualizando produto...");const{syncWithWooCommerce:$,uploadedImageUrls:A,...P}=D,T=await nc(s.id,P);if(console.log(" Produto atualizado com sucesso:",T),O.syncWithWooCommerce&&s.woocommerce_id)try{const V=(await os(()=>Promise.resolve().then(()=>th),void 0)).default,R=new V,H={name:T.name,price:T.price,description:T.description||"",short_description:T.short_description||"",barcode:T.barcode,stock:T.stock,category:T.category,images:O.uploadedImageUrls||[],weight:T.weight,length:T.length,height:T.height,width:T.width},oe=await R.updateProduct(s.woocommerce_id,H);console.log(" Produto atualizado no WooCommerce:",oe),f({title:"Produto atualizado e sincronizado!",description:`${D.name} foi atualizado no PDV e no WooCommerce.`})}catch(V){console.error(" Erro na sincronizao WooCommerce:",V),f({title:"Produto atualizado (erro WooCommerce)",description:`${D.name} foi atualizado no PDV, mas houve erro na sincronizao com WooCommerce.`,variant:"destructive"})}else f({title:"Produto atualizado!",description:`${D.name} foi atualizado.`})}else{console.log(" Verificando cdigo de barras duplicado...");const $=await DM();if(console.log(" Produtos existentes:",$.length),$.some(R=>R.barcode===D.barcode)){console.log(" Cdigo de barras j existe:",D.barcode),f({title:"Erro de Validao",description:"Cdigo de barras j existe.",variant:"destructive"}),u(!1);return}console.log(" Criando produto...");const{syncWithWooCommerce:A,uploadedImageUrls:P,...T}=D,V=await $M(T);if(console.log(" Produto criado com sucesso:",V),O.syncWithWooCommerce)try{const R=(await os(()=>Promise.resolve().then(()=>th),void 0)).default,H=new R,oe={name:V.name,price:V.price,description:V.description||"",short_description:V.short_description||"",barcode:V.barcode,stock:V.stock,category:V.category,images:O.uploadedImageUrls||[],weight:V.weight,length:V.length,height:V.height,width:V.width},ce=await H.createProduct(oe);console.log(" Produto sincronizado com WooCommerce:",ce),f({title:"Produto criado e sincronizado!",description:`${D.name} foi criado no PDV e no WooCommerce.`})}catch(R){console.error(" Erro na sincronizao WooCommerce:",R),f({title:"Produto criado (erro WooCommerce)",description:`${D.name} foi criado no PDV, mas houve erro na sincronizao com WooCommerce.`,variant:"destructive"})}else f({title:"Produto criado!",description:`${D.name} foi criado.`})}S(),w(),l(!1),E()}catch($){console.error(" Erro ao salvar produto:",$),f({title:"Erro ao salvar produto",description:$.message,variant:"destructive"})}finally{u(!1)}},_=async O=>{var D,k;u(!0);try{const U=await FM(O.id);o(U),j({name:U.name,category:U.category||"",brand:U.brand||"",barcode:U.barcode,sizes:((D=U.sizes)==null?void 0:D.join(", "))||"",colors:((k=U.colors)==null?void 0:k.join(", "))||"",price:U.price.toString(),stock:U.stock.toString(),min_stock:U.min_stock.toString(),active:U.active}),l(!0)}catch(U){f({title:"Erro ao buscar produto para edio",description:U.message,variant:"destructive"})}finally{u(!1)}},C=async O=>{if(window.confirm("Deseja realmente excluir este produto? Esta ao  irreversvel!")){u(!0);try{if(await UM(O.id),O.woocommerce_id)try{const D=(await os(()=>Promise.resolve().then(()=>th),void 0)).default;await new D().deleteProduct(O.woocommerce_id),console.log(" Produto excludo do WooCommerce"),f({title:"Produto excludo!",description:"O produto foi removido do PDV e do WooCommerce."})}catch(D){console.error(" Erro ao excluir do WooCommerce:",D),f({title:"Produto excludo (erro WooCommerce)",description:"O produto foi removido do PDV, mas houve erro ao excluir do WooCommerce.",variant:"destructive"})}else f({title:"Produto excludo!",description:"O produto foi removido do sistema."});S(),w()}catch(D){f({title:"Erro ao excluir produto",description:D.message,variant:"destructive"})}finally{u(!1)}}},I=()=>e.filter(O=>O.active&&O.stock<=O.min_stock),L=()=>{S()};return c&&e.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[i.jsx(W,{placeholder:"Buscar por Cdigo de Barras",name:"barcode",value:x.barcode,onChange:v,className:"w-44"}),i.jsx(W,{placeholder:"Buscar por SKU",name:"sku",value:x.sku,onChange:v,className:"w-36"}),i.jsx(W,{placeholder:"Buscar por Referncia",name:"referencia",value:x.referencia,onChange:v,className:"w-32"}),i.jsx(W,{placeholder:"Buscar por Nome",name:"name",value:x.name,onChange:v,className:"w-44"})]}),i.jsx(CF,{open:a,onOpenChange:l,formData:m,setFormData:j,onSubmit:N,editingProduct:s,resetForm:E,onStockShared:L})]}),i.jsx(NF,{products:I()}),i.jsx(re,{children:i.jsx(se,{className:"pt-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ta,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(W,{placeholder:"Buscar produtos por nome, categoria, marca ou cdigo...",value:r,onChange:O=>n(O.target.value),className:"pl-10"})]})})}),e.length>0?i.jsx(dF,{products:b,onEdit:_,onDelete:C,stores:d,currentUser:g}):i.jsx(re,{className:"mt-6",children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(DP,{className:"w-16 h-16 mx-auto mb-6 text-muted-foreground opacity-50"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Nenhum produto encontrado"}),i.jsxs("p",{className:"text-muted-foreground mb-6",children:[r?"Tente ajustar sua busca ou ":"",'Clique em "Novo Produto" para comear a cadastrar.']})]})})]})},kF=()=>{var N;const{id:e}=Pk(),[t,r]=p.useState(null),[n,s]=p.useState([]),[o,a]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!0),[h,f]=p.useState([]),[g,w]=p.useState(null),[m,j]=p.useState(!1),{toast:x}=at(),y=p.useCallback(async()=>{d(!0);try{const{data:_,error:C}=await Q.from("products").select("*").eq("id",e).single();if(C)throw C;r(_);const I=[];if(_.image_url&&I.push({id:"main",image_url:_.image_url,is_featured:!0}),f(I),console.log(" Imagens encontradas:",I),_.product_type==="variable"){const{data:D,error:k}=await Q.from("product_variations").select("*").eq("product_id",e);if(k)throw k;s(D||[]),console.log(" Variaes encontradas:",D)}const L=await li(e);a(L||[]);const O=await js();c(O||[])}catch(_){x({title:"Erro ao buscar detalhes do produto",description:_.message,variant:"destructive"}),r(null)}finally{d(!1)}},[e,x]);p.useEffect(()=>{y()},[y]);const v=_=>{var C;return((C=l.find(I=>I.id===_))==null?void 0:C.name)||"Loja Desconhecida"},b=_=>{w(_),j(!0)},S=()=>{j(!1),w(null)};if(u)return i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsx("div",{className:"loading-spinner"})});if(!t)return i.jsxs("div",{className:"container mx-auto p-6 text-center",children:[i.jsx(Hr,{className:"w-24 h-24 mx-auto text-muted-foreground mb-4"}),i.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Produto no encontrado"}),i.jsx("p",{className:"text-muted-foreground mb-6",children:"O produto que voc est procurando no existe ou foi removido."}),i.jsx(F,{asChild:!0,variant:"outline",children:i.jsxs(Go,{to:"/products",children:[i.jsx(zv,{className:"mr-2 h-4 w-4"})," Voltar para Produtos"]})})]});const E=t.product_type==="variable"?n.reduce((_,C)=>_+C.stock,0):t.stock;return i.jsxs("div",{className:"container mx-auto p-4 md:p-8 space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(F,{asChild:!0,variant:"outline",size:"sm",children:i.jsxs(Go,{to:"/products",children:[i.jsx(zv,{className:"mr-2 h-4 w-4"})," Voltar para Produtos"]})}),i.jsx("h1",{className:"text-3xl font-bold text-center flex-grow",children:t.name}),i.jsx("div",{className:"w-24"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(AP,{className:"mr-2 text-primary"})," Imagens do Produto"]})}),i.jsx(se,{children:h.length>0?i.jsxs("div",{children:[i.jsx("img",{src:h[0].image_url,alt:"Destaque",className:"w-full h-64 object-cover rounded-lg border mb-2 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>b(h[0]),onError:_=>{console.log(" Erro ao carregar imagem principal:",h[0].image_url),_.target.style.display="none",_.target.nextSibling.style.display="flex"},onLoad:()=>{console.log(" Imagem principal carregada:",h[0].image_url)}}),i.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center hidden",children:i.jsx(Cd,{className:"w-16 h-16 text-muted-foreground"})}),i.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:h.map((_,C)=>i.jsx("img",{src:_.image_url,alt:`Imagem ${C+1}`,className:`w-16 h-16 object-cover rounded border cursor-pointer hover:opacity-90 transition-opacity ${C===0?"ring-2 ring-primary":""}`,title:_.is_featured?"Destaque":"",onClick:()=>b(_),onError:I=>{console.log(" Erro ao carregar miniatura:",_.image_url),I.target.style.display="none"},onLoad:()=>{console.log(" Miniatura carregada:",_.image_url)}},_.id))})]}):i.jsx("div",{className:"w-full h-64 bg-muted rounded-lg flex items-center justify-center",children:i.jsx(Cd,{className:"w-16 h-16 text-muted-foreground"})})})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(RP,{className:"mr-2 text-primary"})," Dados Principais"]})}),i.jsxs(se,{className:"space-y-3 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Nome:"})," ",t.name]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Referncia:"})," ",t.referencia||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Categoria:"})," ",t.category||"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Cdigo de Barras:"})," ",t.barcode]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Tipo:"})," ",i.jsx("span",{className:"capitalize",children:t.product_type==="variable"?"Produto Varivel":"Produto Simples"})]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Status:"})," ",t.active?"Ativo":"Inativo"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Data de Cadastro:"})," ",t.created_at?new Date(t.created_at).toLocaleDateString():"N/A"]})]})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(xn,{className:"mr-2 text-primary"})," Preos"]})}),i.jsxs(se,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Principal:"})," R$ ",(N=t.price)==null?void 0:N.toFixed(2)]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Varejo:"})," ",t.price_varejo?`R$ ${t.price_varejo.toFixed(2)}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Atacado:"})," ",t.price_atacado?`R$ ${t.price_atacado.toFixed(2)}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Cliente Exclusivo:"})," ",t.price_atacarejo?`R$ ${t.price_atacarejo.toFixed(2)}`:"N/A"]})]})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(Gv,{className:"mr-2 text-primary"})," Dimenses e Peso"]})}),i.jsxs(se,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Peso:"})," ",t.weight?`${t.weight} kg`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Comprimento:"})," ",t.length?`${t.length} cm`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Altura:"})," ",t.height?`${t.height} cm`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Largura:"})," ",t.width?`${t.width} cm`:"N/A"]})]})]}),t.medidas&&i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(Gv,{className:"mr-2 text-primary"})," Medidas da Pea"]})}),i.jsx(se,{className:"space-y-2 text-sm",children:Object.entries(t.medidas).map(([_,C])=>i.jsxs("p",{children:[i.jsxs("strong",{children:[_.charAt(0).toUpperCase()+_.slice(1),":"]})," ",C||"N/A"]},_))})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(UP,{className:"mr-2 text-primary"})," Estoque"]})}),i.jsxs(se,{className:"space-y-2 text-sm",children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Estoque Mnimo Global:"})," ",t.min_stock," unidades"]}),i.jsxs("p",{className:`font-semibold ${E<=t.min_stock?"text-orange-500":"text-green-500"}`,children:["Estoque Online/Geral Total: ",E," unidades"]})]})]}),o.length>0&&i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(Ra,{className:"mr-2 text-primary"})," Estoque nas Lojas Fsicas"]})}),i.jsx(se,{className:"space-y-2",children:o.map(_=>i.jsxs("div",{className:"flex justify-between items-center p-3 bg-background/30 rounded-md text-sm",children:[i.jsx("p",{children:i.jsxs("strong",{children:[v(_.store_id),":"]})}),i.jsxs("p",{children:[_.quantity," unidades ",_.variation_id?`(Variao ID: ${_.variation_id.substring(0,8)}...)`:"(Produto Simples/Agregado)"]})]},_.id))})]}),o.length===0&&i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6 text-center text-muted-foreground",children:"Este produto (ou suas variaes) ainda no teve estoque compartilhado com lojas fsicas."})}),t.product_type==="variable"&&n.length>0&&i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center",children:[i.jsx(OP,{className:"mr-2 text-primary"})," Variaes do Produto (",n.length,")"]})}),i.jsx(se,{className:"space-y-4",children:n.map((_,C)=>{var I;return i.jsx(re,{className:"bg-background/30 p-4 rounded-md",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[i.jsxs("div",{className:"md:col-span-1",children:[_.image_url?i.jsx("img",{src:_.image_url,alt:`Variao ${C+1}`,className:"w-full h-auto object-cover rounded border aspect-square cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>b({image_url:_.image_url,id:_.id}),onError:L=>{console.log(" Erro ao carregar imagem da variao:",_.image_url),L.target.style.display="none",L.target.nextSibling.style.display="flex"},onLoad:()=>{console.log(" Imagem da variao carregada:",_.image_url)}}):null,i.jsx("div",{className:"w-full h-32 bg-muted rounded flex items-center justify-center",style:{display:_.image_url?"none":"flex"},children:i.jsx(Cd,{className:"w-10 h-10 text-muted-foreground"})})]}),i.jsxs("div",{className:"md:col-span-2 space-y-2 text-sm",children:[i.jsx("p",{className:"font-semibold text-base",children:((I=_.attributes)==null?void 0:I.map(L=>`${L.name}: ${L.value}`).join(" / "))||`Variao ${C+1}`}),_.sku&&i.jsxs("p",{children:[i.jsx("strong",{children:"SKU:"})," ",_.sku]}),_.barcode&&i.jsxs("p",{children:[i.jsx("strong",{children:"Cd. Barras:"})," ",_.barcode]}),_.referencia&&i.jsxs("p",{children:[i.jsx("strong",{children:"Referncia:"})," ",_.referencia]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Especfico:"})," ",_.price?`R$ ${_.price.toFixed(2)}`:"Usar preo principal"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Varejo:"})," ",_.price_varejo?`R$ ${_.price_varejo}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Atacado:"})," ",_.price_atacado?`R$ ${_.price_atacado}`:"N/A"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Preo Cliente Exclusivo:"})," ",_.price_atacarejo?`R$ ${_.price_atacarejo}`:"N/A"]}),i.jsxs("p",{className:"font-medium",children:[i.jsx("strong",{children:"Estoque da Variao:"})," ",_.stock," unidades"]}),_.medidas&&i.jsxs("div",{className:"mt-2",children:[i.jsx("span",{className:"font-semibold",children:"Medidas:"}),i.jsx("ul",{className:"ml-4 list-disc",children:Object.entries(_.medidas).map(([L,O])=>i.jsxs("li",{children:[i.jsxs("strong",{children:[L.charAt(0).toUpperCase()+L.slice(1),":"]})," ",O||"N/A"]},L))})]})]})]})},_.id||C)})})]}),t.product_type==="variable"&&n.length===0&&i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6 text-center text-muted-foreground",children:"Nenhuma variao cadastrada para este produto."})})]})]}),m&&g&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:S,children:i.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[i.jsx("button",{onClick:S,className:"absolute top-4 right-4 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full p-2 transition-all z-10",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("img",{src:g.image_url,alt:"Visualizao",className:"max-w-full max-h-full object-contain rounded-lg",onClick:_=>_.stopPropagation()})]})})]})},ve={IN:"in",OUT:"out",ADJUSTMENT:"adjustment",SALE_ONLINE:"sale_online_physical_debit",SALE_PHYSICAL:"sale_physical_store",TRANSFER_IN:"transfer_in",TRANSFER_OUT:"transfer_out",TRANSFER_TO_STORE:"transfer_to_store"},Vl={[ve.IN]:"Entrada Manual",[ve.OUT]:"Sada Manual",[ve.ADJUSTMENT]:"Ajuste Manual",[ve.SALE_ONLINE]:"Venda Online (Dbito Fsico)",[ve.SALE_PHYSICAL]:"Venda Loja Fsica",[ve.TRANSFER_IN]:"Transferncia (Entrada Loja)",[ve.TRANSFER_OUT]:"Transferncia (Sada Online)",[ve.TRANSFER_TO_STORE]:"Transferncia para Loja"},PF=()=>{var $;const[e,t]=p.useState([]),[r,n]=p.useState([]),[s,o]=p.useState(""),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(null),[f,g]=p.useState([]),[w,m]=p.useState(!0),[j,x]=p.useState(null),{toast:y}=at(),v=it(),[b,S]=p.useState({type:"",quantity:"",reason:"",target_store_id:""}),E=p.useCallback(async()=>{m(!0),x(null);try{console.log("[STOCK] Iniciando carregamento de dados...");const[A,P,T]=await Promise.all([kp(),MM(),js()]);console.log("[STOCK] Dados carregados:",{products:(A==null?void 0:A.length)||0,movements:(P==null?void 0:P.length)||0,stores:(T==null?void 0:T.length)||0});const V=await Promise.all((A||[]).map(async R=>{try{const H=await li(R.id);return{...R,physicalStocks:H||[]}}catch(H){return console.error("[STOCK] Erro ao carregar estoque fsico para produto:",R.id,H),{...R,physicalStocks:[]}}}));t(V),n(P||[]),g(T||[]),console.log("[STOCK] Dados processados com sucesso")}catch(A){console.error("[STOCK] Erro ao carregar dados:",A),x(A.message),y({title:"Erro ao carregar dados de estoque",description:A.message,variant:"destructive"})}finally{m(!1)}},[y,v==null?void 0:v.store_id]);if(p.useEffect(()=>{E()},[E]),j)return i.jsx("div",{className:"min-h-screen bg-background p-8",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Hr,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Erro ao Carregar Estoque"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:j}),i.jsx(F,{onClick:E,className:"bg-red-600 hover:bg-red-700",children:"Tentar Novamente"})]})})});if(w)return i.jsx("div",{className:"min-h-screen bg-background p-8",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"loading-spinner w-12 h-12 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Carregando Estoque..."}),i.jsx("p",{className:"text-muted-foreground",children:"Aguarde enquanto carregamos os dados"})]})})});const N=e.filter(A=>{var P,T,V;return A.active&&(((P=A.name)==null?void 0:P.toLowerCase().includes(s.toLowerCase()))||((T=A.category)==null?void 0:T.toLowerCase().includes(s.toLowerCase()))||((V=A.barcode)==null?void 0:V.includes(s)))}),_=async A=>{var T;if(A.preventDefault(),!c||!b.type||!b.quantity){y({title:"Erro",description:"Produto, tipo e quantidade so obrigatrios.",variant:"destructive"});return}const P=parseInt(b.quantity);if(isNaN(P)||P<=0){y({title:"Erro",description:"Quantidade deve ser um nmero positivo.",variant:"destructive"});return}m(!0);try{let V,R,H=b.target_store_id||c.store_id,oe="online",ce=null;if(b.type===ve.TRANSFER_TO_STORE){if(!b.target_store_id){y({title:"Erro",description:"Selecione uma loja de destino para a transferncia.",variant:"destructive"}),m(!1);return}if(c.stock<P){y({title:"Erro",description:"Estoque online insuficiente para esta transferncia.",variant:"destructive"}),m(!1);return}const Ne=c.stock-P;await nc(c.id,{stock:Ne});const ae=c.physicalStocks.find(X=>X.store_id===b.target_store_id);let Y;if(ae)Y=ae.quantity+P,await Q.from("product_store_stock").update({quantity:Y}).eq("id",ae.id),ce=ae.id;else{Y=P;const{data:X}=await Q.from("product_store_stock").insert({product_id:c.id,store_id:b.target_store_id,quantity:Y}).select("id").single();ce=X==null?void 0:X.id}await rc({product_id:c.id,type:ve.TRANSFER_TO_STORE,quantity:P,previous_stock:c.stock,new_stock:Ne,reason:`Transferncia para ${I(b.target_store_id)} - ${b.reason}`,user_id:v==null?void 0:v.id,store_id:b.target_store_id,stock_type:"physical_store",product_store_stock_id:ce}),y({title:"Transferncia realizada!",description:`${P} unidades transferidas para ${I(b.target_store_id)}.`}),E(),l(!1),S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null),m(!1);return}if(b.target_store_id){if(b.type===ve.OUT){if(c.stock<P){y({title:"Erro",description:"Estoque online insuficiente para esta transferncia.",variant:"destructive"}),m(!1);return}const ae=c.stock-P;await nc(c.id,{stock:ae});const Y=c.physicalStocks.find(Ee=>Ee.store_id===b.target_store_id);let X;if(Y)X=Y.quantity+P,await Q.from("product_store_stock").update({quantity:X}).eq("id",Y.id),ce=Y.id;else{X=P;const{data:Ee}=await Q.from("product_store_stock").insert({product_id:c.id,store_id:b.target_store_id,quantity:X}).select("id").single();ce=Ee==null?void 0:Ee.id}await rc({product_id:c.id,type:ve.TRANSFER_TO_STORE,quantity:P,previous_stock:c.stock,new_stock:ae,reason:`Transferncia para ${I(b.target_store_id)} - ${b.reason}`,user_id:v==null?void 0:v.id,store_id:b.target_store_id,stock_type:"physical_store",product_store_stock_id:ce}),y({title:"Transferncia realizada!",description:`${P} unidades transferidas para ${I(b.target_store_id)}.`}),E(),l(!1),S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null),m(!1);return}oe="physical_store";const Ne=c.physicalStocks.find(ae=>ae.store_id===b.target_store_id);if(V=Ne?Ne.quantity:0,ce=Ne?Ne.id:null,b.type===ve.IN?R=V+P:b.type===ve.ADJUSTMENT&&(R=P),R<0&&b.type!==ve.ADJUSTMENT){y({title:"Erro",description:"Estoque da loja fsica no pode ficar negativo.",variant:"destructive"}),m(!1);return}if(b.type===ve.ADJUSTMENT&&R<0&&(R=0),Ne)await Q.from("product_store_stock").update({quantity:R}).eq("id",Ne.id);else{const{data:ae}=await Q.from("product_store_stock").insert({product_id:c.id,store_id:b.target_store_id,quantity:R}).select("id").single();ce=ae==null?void 0:ae.id}await tS(c.id)}else{if(!((T=v==null?void 0:v.stores)!=null&&T.is_online_store)&&(v==null?void 0:v.role)!==jt.ADMIN){y({title:"Ao no permitida",description:"Selecione uma loja fsica para esta movimentao ou realize no estoque Online (se admin/online).",variant:"destructive"}),m(!1);return}if(H=c.store_id,V=c.stock,b.type===ve.IN?R=V+P:b.type===ve.OUT?R=V-P:b.type===ve.ADJUSTMENT&&(R=P),R<0&&b.type!==ve.ADJUSTMENT){y({title:"Erro",description:"Estoque online/geral no pode ficar negativo.",variant:"destructive"}),m(!1);return}b.type===ve.ADJUSTMENT&&R<0&&(R=0),await nc(c.id,{stock:R})}await rc({product_id:c.id,type:b.type,quantity:P,previous_stock:V,new_stock:R,reason:b.reason,user_id:v==null?void 0:v.id,store_id:H,stock_type:oe,product_store_stock_id:oe==="physical_store"?ce:null}),y({title:"Movimentao registrada!",description:`${Vl[b.type]||b.type} de ${P} unidades para ${c.name}.`}),E(),l(!1),S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null)}catch(V){y({title:"Erro ao registrar movimentao",description:V.message,variant:"destructive"})}finally{m(!1)}},C=(A,P,T=null)=>{var V;u(A),h(T),S({...b,type:P,target_store_id:T?T.id:(V=v==null?void 0:v.stores)!=null&&V.is_online_store||(v==null?void 0:v.role)===jt.ADMIN?"":v==null?void 0:v.store_id}),l(!0)},I=A=>{var P;return((P=f.find(T=>T.id===A))==null?void 0:P.name)||"N/A"},L=()=>e.filter(A=>A.active&&A.stock<=A.min_stock).length,O=()=>e.filter(A=>A.active).length,D=()=>e.filter(A=>A.active).reduce((A,P)=>A+P.stock,0),k=A=>e.reduce((P,T)=>{var R;const V=(R=T.physicalStocks)==null?void 0:R.find(H=>H.store_id===A);return P+(V?V.quantity:0)},0),U=f.filter(A=>!A.is_online_store);return i.jsx("div",{className:"min-h-screen bg-background p-8",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Controle de Estoque"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie o estoque dos seus produtos"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(Hr,{className:"w-7 h-7 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:O()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Produtos Ativos"})]})]}),i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(xu,{className:"w-7 h-7 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:D()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Estoque Online"})]})]}),i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(BP,{className:"w-7 h-7 text-orange-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:L()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Estoque Baixo"})]})]}),i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx(ta,{className:"w-7 h-7 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-foreground",children:r.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Movimentaes"})]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4 text-center",children:"Estoque por Loja"}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-auto",children:[i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-xs",children:"O"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-bold text-foreground",children:"Loja Online"}),i.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[D()," un."]})]})]}),U.map(A=>i.jsxs("div",{className:"rounded-xl bg-card border border-border p-4 flex items-center gap-3 shadow-sm h-20",children:[i.jsx("div",{className:"w-7 h-7 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-xs",children:A.name.charAt(0).toUpperCase()})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-bold text-foreground",children:A.name}),i.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[k(A.id)," un."]})]})]},A.id))]})})]}),i.jsx("div",{className:"mt-6",children:i.jsxs("div",{className:"relative max-w-md mx-auto",children:[i.jsx(Ta,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(W,{placeholder:"Buscar produtos...",value:s,onChange:A=>o(A.target.value),className:"pl-10"})]})}),i.jsx("div",{className:"space-y-4 mt-8",children:N.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Hr,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Nenhum produto encontrado"})]}):N.map(A=>i.jsxs(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"rounded-xl bg-card border border-border p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4 shadow-sm hover:shadow-lg transition",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-lg font-bold text-foreground",children:A.name}),A.stock<=A.min_stock&&i.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",children:"Baixo estoque"})]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.category,"  ",A.barcode]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[i.jsxs("span",{className:"text-xs text-foreground bg-muted rounded px-2 py-0.5",children:["Online: ",i.jsx("b",{children:A.stock})," un."]}),U.map(P=>{var R;const T=(R=A.physicalStocks)==null?void 0:R.find(H=>H.store_id===P.id),V=T?T.quantity:0;return i.jsxs("span",{className:"text-xs text-foreground bg-muted rounded px-2 py-0.5",children:[P.name,": ",i.jsx("b",{children:V})," un."]},P.id)})]})]}),i.jsxs("div",{className:"flex flex-col md:items-end gap-1",children:[i.jsxs("span",{className:`text-base font-semibold ${A.stock<=A.min_stock?"text-orange-600 dark:text-orange-400":"text-green-600 dark:text-green-400"}`,children:["Online: ",A.stock," un."]}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:["Mn. Online: ",A.min_stock]})]}),i.jsxs("div",{className:"flex gap-2 mt-2 md:mt-0",children:[i.jsxs(F,{variant:"outline",size:"sm",onClick:()=>C(A,ve.IN),children:[i.jsx(sr,{className:"w-4 h-4 mr-1"}),"Entrada"]}),i.jsxs(F,{variant:"outline",size:"sm",onClick:()=>C(A,ve.OUT),children:[i.jsx(Ic,{className:"w-4 h-4 mr-1"}),"Sada"]}),i.jsx(F,{variant:"outline",size:"sm",onClick:()=>C(A,ve.ADJUSTMENT),children:"Ajuste"})]})]},A.id))}),i.jsxs("div",{className:"mt-10",children:[i.jsxs("h3",{className:"text-lg font-bold text-foreground mb-2 flex items-center gap-2",children:[i.jsx(ta,{className:"w-5 h-5 text-purple-500"}),"Histrico de Movimentaes"]}),i.jsx("div",{className:"rounded-xl bg-card border border-border p-4 max-h-96 overflow-y-auto",children:r.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(ta,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma movimentao registrada"})]}):i.jsx("div",{className:"space-y-3",children:r.slice(0,20).map(A=>{var P,T;return i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-muted/50 transition text-sm",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-semibold text-foreground",children:[A.productName||((P=A.products)==null?void 0:P.name)," (",(T=A.products)==null?void 0:T.barcode,")"]}),i.jsxs("p",{className:"text-muted-foreground",children:[Vl[A.type]||A.type,"  ",A.storeName]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[A.userName,"  ",new Date(A.created_at).toLocaleString(),"  ",A.reason]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:`font-medium ${A.type===ve.IN||A.type===ve.TRANSFER_IN?"text-green-600 dark:text-green-400":A.type===ve.OUT||A.type===ve.TRANSFER_OUT||A.type===ve.SALE_ONLINE||A.type===ve.SALE_PHYSICAL?"text-red-600 dark:text-red-400":"text-purple-600 dark:text-purple-400"}`,children:[A.type===ve.IN||A.type===ve.TRANSFER_IN?"+":A.type===ve.OUT||A.type===ve.TRANSFER_OUT||A.type===ve.SALE_ONLINE||A.type===ve.SALE_PHYSICAL?"-":"=",A.quantity]}),i.jsxs("p",{className:"text-muted-foreground",children:[A.previous_stock,"  ",A.new_stock]})]})]},A.id)})})})]}),i.jsx(mr,{open:a,onOpenChange:A=>{l(A),A||(S({type:"",quantity:"",reason:"",target_store_id:""}),u(null),h(null))},children:i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:b.type&&`${Vl[b.type]||b.type} de Estoque`})}),c&&i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(B,{children:"Produto"}),i.jsx(W,{value:c.name,disabled:!0})]}),(b.type===ve.TRANSFER_TO_STORE||b.type===ve.OUT&&((($=v==null?void 0:v.stores)==null?void 0:$.is_online_store)||(v==null?void 0:v.role)===jt.ADMIN))&&i.jsxs("div",{children:[i.jsx(B,{htmlFor:"target_store_id",children:"Loja de Destino"}),i.jsxs(Qe,{value:b.target_store_id,onValueChange:A=>S({...b,target_store_id:A}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione a loja de destino"})}),i.jsx(Je,{children:U.map(A=>i.jsx(ye,{value:A.id,children:A.name},A.id))})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.type===ve.TRANSFER_TO_STORE?"Transferir estoque do online para esta loja":"Movimentar estoque nesta loja especfica"})]}),i.jsxs("div",{children:[i.jsx(B,{children:"Estoque Atual"}),i.jsx(W,{value:`${c.stock} unidades (Online)`,disabled:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"quantity",children:b.type===ve.ADJUSTMENT?"Novo Estoque":"Quantidade da Movimentao"}),i.jsx(W,{id:"quantity",type:"number",min:"1",value:b.quantity,onChange:A=>S({...b,quantity:A.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"reason",children:"Motivo/Observao"}),i.jsx(W,{id:"reason",placeholder:"Descreva o motivo da movimentao",value:b.reason,onChange:A=>S({...b,reason:A.target.value}),required:!0})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),i.jsx(F,{type:"submit",disabled:w,children:w?"Salvando...":`Confirmar ${Vl[b.type]||b.type}`})]})]})]})})]})})},TF=yu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}}),Wp=de.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,className:Ce(TF({variant:t}),e),...r}));Wp.displayName="Badge";const AF=({categories:e,onEdit:t,onDelete:r,loading:n})=>n?i.jsx("div",{className:"flex items-center justify-center py-8",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(uf,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Nenhuma categoria encontrada"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Crie sua primeira categoria para organizar seus produtos"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((s,o)=>i.jsxs(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.1},className:"bg-card border border-border rounded-lg p-4 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color||"#3B82F6"}}),i.jsx("h3",{className:"font-semibold text-lg",children:s.name})]}),i.jsx(Wp,{variant:s.active?"default":"secondary",children:s.active?"Ativa":"Inativa"})]}),s.description&&i.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2",children:s.description}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[i.jsx(uf,{className:"w-3 h-3"}),i.jsxs("span",{children:["Criada em ",new Date(s.created_at).toLocaleDateString("pt-BR")]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>t(s),className:"h-8 w-8 p-0",children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>r(s),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})]},s.id))}),qp=de.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));qp.displayName="Textarea";const RF=({open:e,onOpenChange:t,formData:r,setFormData:n,onSubmit:s,editingCategory:o})=>{const a=(u,d)=>{n(h=>({...h,[u]:d}))},l=[{value:"tag",label:"Tag"},{value:"shirt",label:"Camisa"},{value:"footprints",label:"Calados"},{value:"watch",label:"Relgio"},{value:"dumbbell",label:"Esportes"},{value:"baby",label:"Infantil"},{value:"home",label:"Casa"},{value:"gift",label:"Presente"},{value:"heart",label:"Corao"},{value:"star",label:"Estrela"},{value:"bookmark",label:"Marcador"},{value:"package",label:"Pacote"}],c=[{value:"#3B82F6",label:"Azul"},{value:"#10B981",label:"Verde"},{value:"#F59E0B",label:"Amarelo"},{value:"#EF4444",label:"Vermelho"},{value:"#8B5CF6",label:"Roxo"},{value:"#06B6D4",label:"Ciano"},{value:"#F97316",label:"Laranja"},{value:"#EC4899",label:"Rosa"},{value:"#6B7280",label:"Cinza"},{value:"#000000",label:"Preto"}];return i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"sm:max-w-[500px]",children:[i.jsx(er,{children:i.jsx(tr,{children:o?"Editar Categoria":"Nova Categoria"})}),i.jsxs("form",{onSubmit:s,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"name",children:"Nome da Categoria *"}),i.jsx(W,{id:"name",value:r.name,onChange:u=>a("name",u.target.value),placeholder:"Ex: Roupas, Calados, Acessrios",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"description",children:"Descrio"}),i.jsx(qp,{id:"description",value:r.description,onChange:u=>a("description",u.target.value),placeholder:"Descreva brevemente esta categoria...",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"icon",children:"cone"}),i.jsxs(Qe,{value:r.icon,onValueChange:u=>a("icon",u),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione um cone"})}),i.jsx(Je,{children:l.map(u=>i.jsx(ye,{value:u.value,children:u.label},u.value))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"color",children:"Cor"}),i.jsxs(Qe,{value:r.color,onValueChange:u=>a("color",u),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione uma cor"})}),i.jsx(Je,{children:c.map(u=>i.jsx(ye,{value:u.value,children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:u.value}}),i.jsx("span",{children:u.label})]})},u.value))})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Un,{id:"active",checked:r.active,onCheckedChange:u=>a("active",u)}),i.jsx(B,{htmlFor:"active",children:"Categoria ativa"})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancelar"}),i.jsxs(F,{type:"submit",children:[o?"Atualizar":"Criar"," Categoria"]})]})]})]})})},OF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(""),[s,o]=p.useState(null),[a,l]=p.useState(!1),[c,u]=p.useState(!0),{toast:d}=at();it();const[h,f]=p.useState({name:"",description:"",color:"#3B82F6",icon:"tag",active:!0}),g=p.useCallback(async()=>{u(!0);try{const v=await hF();t(v||[])}catch(v){d({title:"Erro ao carregar categorias",description:v.message,variant:"destructive"})}finally{u(!1)}},[d]);p.useEffect(()=>{g()},[g]);const w=e.filter(v=>{var b,S;return((b=v.name)==null?void 0:b.toLowerCase().includes(r.toLowerCase()))||((S=v.description)==null?void 0:S.toLowerCase().includes(r.toLowerCase()))}),m=async v=>{if(v.preventDefault(),!h.name.trim()){d({title:"Erro",description:"Nome da categoria  obrigatrio",variant:"destructive"});return}try{s?(await mF(s.id,h),d({title:"Sucesso",description:"Categoria atualizada com sucesso!"})):(await fF(h),d({title:"Sucesso",description:"Categoria criada com sucesso!"})),l(!1),o(null),f({name:"",description:"",color:"#3B82F6",icon:"tag",active:!0}),g()}catch(b){d({title:"Erro",description:b.message,variant:"destructive"})}},j=v=>{o(v),f({name:v.name,description:v.description||"",color:v.color||"#3B82F6",icon:v.icon||"tag",active:v.active}),l(!0)},x=async v=>{try{if(await vF(v.id)){d({title:"No  possvel deletar",description:"Esta categoria est sendo usada por produtos. Remova a associao primeiro.",variant:"destructive"});return}window.confirm(`Tem certeza que deseja deletar a categoria "${v.name}"?`)&&(await pF(v.id),d({title:"Sucesso",description:"Categoria deletada com sucesso!"}),g())}catch(b){d({title:"Erro",description:b.message,variant:"destructive"})}},y=()=>{o(null),f({name:"",description:"",color:"#3B82F6",icon:"tag",active:!0}),l(!0)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Categorias"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie as categorias dos seus produtos"})]}),i.jsxs("button",{onClick:y,className:"inline-flex items-center px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Nova Categoria"]})]}),i.jsx(re,{children:i.jsxs(se,{className:"p-6",children:[i.jsx("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Ta,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),i.jsx(W,{placeholder:"Buscar categorias...",value:r,onChange:v=>n(v.target.value),className:"pl-10"})]})}),i.jsx(AF,{categories:w,onEdit:j,onDelete:x,loading:c})]})}),i.jsx(RF,{open:a,onOpenChange:l,formData:h,setFormData:f,onSubmit:m,editingCategory:s})]})},IF=({customers:e,onEdit:t,onDelete:r,onViewHistory:n,getCustomerPurchases:s,getCustomerTotalSpent:o,formatCPF:a,formatPhone:l})=>{const c=u=>{if(!u)return"";const d=u.replace(/\D/g,"");return d.length>14&&d.slice(0,14),d.replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2")};return e.length===0?i.jsx(re,{children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(qs,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum cliente encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Tente ajustar os termos de busca ou crie seu primeiro cliente."})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(u=>{const d=s(u.id),h=o(u.id);return i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-5 h-5 text-primary"}),i.jsx(we,{className:"text-lg",children:u.name})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>n(u),title:"Ver Histrico",children:i.jsx(Pa,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>t(u),title:"Editar Cliente",children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>r(u.id),className:"text-destructive hover:text-destructive",title:"Remover Cliente",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-1",children:[u.cpf&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(qs,{className:"w-3 h-3 text-muted-foreground"}),i.jsxs("span",{children:["CPF: ",a(u.cpf)]})]}),u.cnpj&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(_P,{className:"w-3 h-3 text-muted-foreground"}),i.jsxs("span",{children:["CNPJ: ",c(u.cnpj)]})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx($P,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{children:l(u.phone)})]}),u.email&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(LP,{className:"w-3 h-3 text-muted-foreground"}),i.jsx("span",{className:"truncate",children:u.email})]}),u.customer_groups&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(Zj,{className:"w-3 h-3 text-blue-600"}),i.jsx("span",{className:"text-blue-600 font-medium",children:u.customer_groups.name})]})]}),i.jsx("div",{className:"pt-3 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-lg font-bold text-primary",children:d.length}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Compras"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-lg font-bold text-green-600",children:["R$ ",h.toFixed(2)]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Gasto"})]})]})}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Cliente desde: ",new Date(u.created_at||u.createdAt).toLocaleDateString()]})]})]})},u.id)})})},LF=({open:e,onOpenChange:t,formData:r,setFormData:n,onSubmit:s,editingCustomer:o,formatCPF:a,formatPhone:l,resetForm:c})=>{const[u,d]=p.useState(!1),[h,f]=p.useState([]);p.useEffect(()=>{(async()=>{try{const j=await Hs.getCustomerGroups();f(j)}catch(j){console.error("Erro ao buscar grupos:",j)}})()},[]);const g=async m=>{const j=m.target.value.replace(/\D/g,"");if(j.length===8){d(!0);try{const y=await(await fetch(`https://viacep.com.br/ws/${j}/json/`)).json();y.erro||n({...r,cep:y.cep,street:y.logradouro,bairro:y.bairro,cidade:y.localidade,estado:y.uf,complemento:y.complemento})}finally{d(!1)}}},w=r.category==="Atacado"||r.category==="Cliente Exclusivo";return i.jsxs(mr,{open:e,onOpenChange:m=>{t(m),m||c()},children:[i.jsx(Jo,{asChild:!0,children:i.jsxs(F,{children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Novo Cliente"]})}),i.jsxs(Zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(er,{children:i.jsx(tr,{children:o?"Editar Cliente":"Novo Cliente"})}),i.jsxs("form",{onSubmit:s,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"name",children:"Nome Completo *"}),i.jsx(W,{id:"name",value:r.name,onChange:m=>n({...r,name:m.target.value})})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cpf",children:"CPF"}),i.jsx(W,{id:"cpf",placeholder:"000.000.000-00",value:r.cpf,onChange:m=>n({...r,cpf:a(m.target.value)})})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"phone",children:"Telefone *"}),i.jsx(W,{id:"phone",placeholder:"(00) 00000-0000",value:r.phone,onChange:m=>n({...r,phone:l(m.target.value)})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"email",children:"E-mail"}),i.jsx(W,{id:"email",type:"email",value:r.email,onChange:m=>n({...r,email:m.target.value})})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"category",children:"Categoria *"}),i.jsxs(Qe,{value:r.category||"",onValueChange:m=>n({...r,category:m}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione a categoria..."})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"Varejo",children:"Varejo"}),i.jsx(ye,{value:"Atacado",children:"Atacado"}),i.jsx(ye,{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"group_id",children:"Nvel de Comprador"}),i.jsxs(Qe,{value:r.group_id||"",onValueChange:m=>n({...r,group_id:m}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione um grupo..."})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"none",children:"Nenhum grupo"}),h.map(m=>i.jsxs(ye,{value:m.id,children:[m.name," - ",m.ticket_min?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m.ticket_min):"Sem valor definido"]},m.id))]})]})]}),w&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cnpj",children:"CNPJ *"}),i.jsx(W,{id:"cnpj",placeholder:"00.000.000/0000-00",value:r.cnpj||"",onChange:m=>n({...r,cnpj:m.target.value}),required:w})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"razao_social",children:"Razo Social *"}),i.jsx(W,{id:"razao_social",value:r.razao_social||"",onChange:m=>n({...r,razao_social:m.target.value}),placeholder:"Razo social da empresa",required:w})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"inscricao_estadual",children:"Inscrio Estadual *"}),i.jsx(W,{id:"inscricao_estadual",value:r.inscricao_estadual||"",onChange:m=>n({...r,inscricao_estadual:m.target.value}),placeholder:"Inscrio estadual",required:w})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"nome_fantasia",children:"Nome Fantasia"}),i.jsx(W,{id:"nome_fantasia",value:r.nome_fantasia||"",onChange:m=>n({...r,nome_fantasia:m.target.value}),placeholder:"Nome fantasia da empresa"})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cep",children:"CEP *"}),i.jsx(W,{id:"cep",placeholder:"00000-000",value:r.cep||"",onChange:m=>n({...r,cep:m.target.value}),onBlur:g,required:!0,disabled:u})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"street",children:"Rua *"}),i.jsx(W,{id:"street",value:r.street||"",onChange:m=>n({...r,street:m.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"bairro",children:"Bairro *"}),i.jsx(W,{id:"bairro",value:r.bairro||"",onChange:m=>n({...r,bairro:m.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cidade",children:"Cidade *"}),i.jsx(W,{id:"cidade",value:r.cidade||"",onChange:m=>n({...r,cidade:m.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"estado",children:"Estado *"}),i.jsx(W,{id:"estado",value:r.estado||"",onChange:m=>n({...r,estado:m.target.value}),required:!0})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(B,{htmlFor:"complemento",children:"Complemento"}),i.jsx(W,{id:"complemento",value:r.complemento||"",onChange:m=>n({...r,complemento:m.target.value})})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>{t(!1),c()},children:"Cancelar"}),i.jsxs(F,{type:"submit",children:[o?"Atualizar":"Criar"," Cliente"]})]})]})]})]})},MF=({open:e,onOpenChange:t,customer:r,purchases:n})=>r?i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"max-w-2xl",children:[i.jsx(er,{children:i.jsxs(tr,{children:["Histrico de Compras: ",r.name]})}),i.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 p-1",children:n.length===0?i.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Nenhuma compra encontrada para este cliente."}):n.map(s=>i.jsxs(re,{className:"bg-background/50",children:[i.jsx(xe,{className:"pb-2",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(we,{className:"text-base",children:["Venda #",s.id]}),i.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(s.created_at||s.date).toLocaleString()})]})}),i.jsxs(se,{children:[i.jsx("ul",{className:"text-sm space-y-1",children:(s.items||s.sale_items||[]).map(o=>{var a;return i.jsxs("li",{className:"flex justify-between",children:[i.jsxs("span",{children:[o.quantity,"x ",o.name||((a=o.products)==null?void 0:a.name)||"Produto Indisponvel"]}),i.jsxs("span",{children:["R$ ",(o.subtotal||o.quantity*o.unit_price).toFixed(2)]})]},o.id||o.product_id)})}),i.jsxs("div",{className:"border-t mt-2 pt-2 flex justify-between font-semibold",children:[i.jsx("span",{children:"Total da Venda:"}),i.jsxs("span",{children:["R$ ",(s.total_amount||s.total).toFixed(2)]})]})]})]},s.id))})]})}):null,DF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[s,o]=p.useState(""),[a,l]=p.useState(null),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,g]=p.useState(null),[w,m]=p.useState(!0),{toast:j}=at(),[x,y]=p.useState({name:"",cpf:"",phone:"",email:"",address:"",category:"",group_id:"",cep:"",street:"",bairro:"",cidade:"",estado:"",complemento:"",cnpj:"",razao_social:"",inscricao_estadual:"",nome_fantasia:""}),v=p.useCallback(async()=>{m(!0);try{const R=await nS(),H=await rS();t(R||[]),n(H||[])}catch(R){j({title:"Erro ao carregar dados",description:R.message,variant:"destructive"})}finally{m(!1)}},[j]);p.useEffect(()=>{v()},[v]);const b=e.filter(R=>R.category==="Varejo").length,S=e.filter(R=>R.category==="Atacado").length,E=e.filter(R=>R.category==="Cliente Exclusivo").length,[N,_]=p.useState(""),[C,I]=p.useState(""),L=e.filter(R=>{var Ne,ae,Y;const H=(Ne=R.name)==null?void 0:Ne.toLowerCase().includes(s.toLowerCase()),oe=N?R.category===N:!0,ce=C?((ae=R.cpf)==null?void 0:ae.includes(C))||((Y=R.cnpj)==null?void 0:Y.includes(C)):!0;return H&&oe&&ce}),O=()=>{y({name:"",cpf:"",phone:"",email:"",address:"",category:"",group_id:"",cep:"",street:"",bairro:"",cidade:"",estado:"",complemento:"",cnpj:"",razao_social:"",inscricao_estadual:"",nome_fantasia:""}),l(null)},D=R=>{if(!R)return"";const H=R.replace(/\D/g,"");return H.length>11&&H.slice(0,11),H.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")},k=R=>{if(!R)return"";const H=R.replace(/\D/g,"");return H.length>11&&H.slice(0,11),H.length===11?H.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):H.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3")},U=async R=>{R.preventDefault();const H={...x,cpf:x.cpf.replace(/\D/g,""),phone:x.phone.replace(/\D/g,"")};if(!H.name||!H.phone){j({title:"Erro de Validao",description:"Nome e Telefone so obrigatrios.",variant:"destructive"});return}if(H.cpf&&H.cpf.length!==11){j({title:"Erro de Validao",description:"CPF invlido.",variant:"destructive"});return}m(!0);try{a?(await zM(a.id,H),j({title:"Cliente atualizado!",description:`${H.name} foi atualizado.`})):(await sS(H),j({title:"Cliente criado!",description:`${H.name} foi criado.`})),v(),u(!1),O()}catch(oe){j({title:"Erro ao salvar cliente",description:oe.message,variant:"destructive"})}finally{m(!1)}},$=R=>{l(R),y({name:R.name||"",cpf:D(R.cpf),phone:k(R.phone),email:R.email||"",address:R.address||"",category:R.category||"",group_id:R.group_id||"",cep:R.cep||"",street:R.street||"",bairro:R.bairro||"",cidade:R.cidade||"",estado:R.estado||"",complemento:R.complemento||"",cnpj:R.cnpj||"",razao_social:R.razao_social||"",inscricao_estadual:R.inscricao_estadual||"",nome_fantasia:R.nome_fantasia||""}),u(!0)},A=async R=>{if(window.confirm("Tem certeza que deseja remover este cliente?")){m(!0);try{await WM(R),j({title:"Cliente removido!",description:"O cliente foi removido."}),v()}catch(H){j({title:"Erro ao remover cliente",description:H.message,variant:"destructive"})}finally{m(!1)}}},P=p.useCallback(R=>r.filter(H=>H.customer_id===R).sort((H,oe)=>new Date(oe.created_at||oe.date)-new Date(H.created_at||H.date)),[r]),T=p.useCallback(R=>P(R).reduce((oe,ce)=>oe+(ce.total_amount||ce.total),0),[P]),V=R=>{g(R),h(!0)};return w&&e.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Clientes"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie o cadastro de clientes e seus histricos."})]}),i.jsx(LF,{open:c,onOpenChange:u,formData:x,setFormData:y,onSubmit:U,editingCustomer:a,formatCPF:D,formatPhone:k,resetForm:O})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsx(re,{children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-8 h-8 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:e.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Clientes"})]})]})})}),i.jsx(re,{children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-8 h-8 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:b}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes de Varejo"})]})]})})}),i.jsx(re,{children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-8 h-8 text-yellow-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:S}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes de Atacado"})]})]})})}),i.jsx(re,{children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qs,{className:"w-8 h-8 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:E}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Clientes Exclusivos"})]})]})})})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mt-4",children:[i.jsx(W,{placeholder:"Buscar por nome...",value:s,onChange:R=>o(R.target.value),className:"bg-background/70 border-none text-white placeholder:text-gray-400 rounded-xl"}),i.jsxs("select",{value:N,onChange:R=>_(R.target.value),className:"bg-background/70 border-none text-white rounded-xl px-3 py-2",children:[i.jsx("option",{value:"",children:"Todas as Categorias"}),i.jsx("option",{value:"Varejo",children:"Varejo"}),i.jsx("option",{value:"Atacado",children:"Atacado"}),i.jsx("option",{value:"Cliente Exclusivo",children:"Cliente Exclusivo"})]}),i.jsx(W,{placeholder:"Buscar por CPF ou CNPJ...",value:C,onChange:R=>I(R.target.value),className:"bg-background/70 border-none text-white placeholder:text-gray-400 rounded-xl"})]}),i.jsx(IF,{customers:L,onEdit:$,onDelete:A,onViewHistory:V,getCustomerPurchases:P,getCustomerTotalSpent:T,formatCPF:D,formatPhone:k}),i.jsx(MF,{open:d,onOpenChange:h,customer:f,purchases:f?P(f.id):[]})]})},$F=({isOpen:e,onClose:t,editingGroup:r=null,onSuccess:n})=>{const[s,o]=p.useState({name:"",average_ticket:"",description:""}),[a,l]=p.useState(!1),{toast:c}=at();p.useEffect(()=>{o(r?{name:r.name||"",average_ticket:r.ticket_min?r.ticket_min.toString():"",description:r.description||""}:{name:"",average_ticket:"",description:""})},[r,e]);const u=g=>{const w=g.replace(/\D/g,"");return w===""?"":(parseFloat(w)/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2})},d=g=>{const w=g.replace(/[^\d,]/g,"").replace(",",".");return parseFloat(w)||0},h=(g,w)=>{o(g==="average_ticket"?m=>({...m,[g]:u(w)}):m=>({...m,[g]:w}))},f=async g=>{if(g.preventDefault(),!s.name.trim()){c({title:"Erro",description:"Nome do grupo  obrigatrio",variant:"destructive"});return}l(!0);try{const w={name:s.name.trim(),average_ticket:s.average_ticket?d(s.average_ticket):null,description:s.description.trim()||null};r?(await Hs.updateCustomerGroup(r.id,w),c({title:"Sucesso!",description:"Grupo de clientes atualizado com sucesso"})):(await Hs.createCustomerGroup(w),c({title:"Sucesso!",description:"Grupo de clientes criado com sucesso"})),n(),t()}catch(w){console.error("Erro ao salvar grupo:",w),c({title:"Erro",description:"Erro ao salvar grupo de clientes",variant:"destructive"})}finally{l(!1)}};return i.jsx(mr,{open:e,onOpenChange:t,children:i.jsxs(Zt,{className:"sm:max-w-[425px]",children:[i.jsx(er,{children:i.jsx(tr,{children:r?"Editar Grupo de Clientes":"Criar Grupo de Clientes"})}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"name",children:"Nome do Grupo *"}),i.jsx(W,{id:"name",value:s.name,onChange:g=>h("name",g.target.value),placeholder:"Ex: Clientes Premium",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"average_ticket",children:"Ticket Mdio"}),i.jsx(W,{id:"average_ticket",value:s.average_ticket,onChange:g=>h("average_ticket",g.target.value),placeholder:"R$ 0,00"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(B,{htmlFor:"description",children:"Descrio"}),i.jsx(qp,{id:"description",value:s.description,onChange:g=>h("description",g.target.value),placeholder:"Informaes adicionais sobre o grupo...",rows:3})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(F,{type:"button",variant:"outline",onClick:t,disabled:a,children:"Cancelar"}),i.jsx(F,{type:"submit",disabled:a,children:a?"Salvando...":r?"Atualizar":"Criar"})]})]})]})})},FF=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[s,o]=p.useState(!1),[a,l]=p.useState(null),{toast:c}=at(),u=async()=>{try{n(!0);const m=await Hs.getCustomerGroups();t(m)}catch(m){console.error("Erro ao buscar grupos:",m),c({title:"Erro",description:"Erro ao carregar grupos de clientes",variant:"destructive"})}finally{n(!1)}};p.useEffect(()=>{u()},[]);const d=m=>{l(m),o(!0)},h=async m=>{if(window.confirm(`Deseja realmente excluir o grupo "${m.name}"?`))try{if(await Hs.isGroupInUse(m.id)){c({title:"Erro",description:"Este grupo no pode ser excludo pois est sendo usado por clientes",variant:"destructive"});return}await Hs.deleteCustomerGroup(m.id),c({title:"Sucesso!",description:"Grupo excludo com sucesso"}),u()}catch(j){console.error("Erro ao excluir grupo:",j),c({title:"Erro",description:"Erro ao excluir grupo",variant:"destructive"})}},f=m=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(m),g=()=>{u(),l(null)},w=()=>{o(!1),l(null)};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"text-gray-500",children:"Carregando grupos..."})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Grupos de Clientes"}),i.jsxs(F,{onClick:()=>o(!0),children:[i.jsx(hn,{className:"w-4 h-4 mr-2"}),"Criar Grupo"]})]}),e.length===0?i.jsx(re,{children:i.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(hn,{className:"w-12 h-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum grupo criado"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"Crie seu primeiro grupo de clientes para comear"}),i.jsx(F,{onClick:()=>o(!0),children:"Criar Primeiro Grupo"})]})}):i.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map(m=>i.jsxs(re,{className:"hover:shadow-md transition-shadow",children:[i.jsx(xe,{className:"pb-3",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx(we,{className:"text-lg",children:m.name}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>d(m),className:"h-8 w-8 p-0",children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"sm",onClick:()=>h(m),className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"text-sm text-gray-600",children:"Ticket Mdio:"}),i.jsx("span",{className:"font-medium text-green-600",children:m.ticket_min?f(m.ticket_min):"No definido"})]}),m.description&&i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsx("p",{className:"font-medium mb-1",children:"Descrio:"}),i.jsx("p",{className:"text-gray-500",children:m.description})]}),i.jsxs("div",{className:"text-xs text-gray-400",children:["Criado em: ",new Date(m.created_at).toLocaleDateString("pt-BR")]})]})]},m.id))}),i.jsx($F,{isOpen:s,onClose:w,editingGroup:a,onSuccess:g})]})},VF=()=>i.jsxs("div",{className:"container mx-auto p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Nveis de Comprador"}),i.jsx("p",{className:"text-gray-600",children:"Gerencie grupos de clientes baseados no ticket mdio de compra e outras caractersticas."})]}),i.jsx(FF,{})]});var rh="rovingFocusGroup.onEntryFocus",UF={bubbles:!1,cancelable:!0},el="RovingFocusGroup",[qf,sC,BF]=Gm(el),[zF,oC]=vs(el,[BF]),[WF,qF]=zF(el),iC=p.forwardRef((e,t)=>i.jsx(qf.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(qf.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(HF,{...e,ref:t})})}));iC.displayName=el;var HF=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=p.useRef(null),g=Me(t,f),w=Op(o),[m,j]=Qs({prop:a,defaultProp:l??null,onChange:c,caller:el}),[x,y]=p.useState(!1),v=yr(u),b=sC(r),S=p.useRef(!1),[E,N]=p.useState(0);return p.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(rh,v),()=>_.removeEventListener(rh,v)},[v]),i.jsx(WF,{scope:r,orientation:n,dir:w,loop:s,currentTabStopId:m,onItemFocus:p.useCallback(_=>j(_),[j]),onItemShiftTab:p.useCallback(()=>y(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(_=>_+1),[]),onFocusableItemRemove:p.useCallback(()=>N(_=>_-1),[]),children:i.jsx(me.div,{tabIndex:x||E===0?-1:0,"data-orientation":n,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:ue(e.onMouseDown,()=>{S.current=!0}),onFocus:ue(e.onFocus,_=>{const C=!S.current;if(_.target===_.currentTarget&&C&&!x){const I=new CustomEvent(rh,UF);if(_.currentTarget.dispatchEvent(I),!I.defaultPrevented){const L=b().filter($=>$.focusable),O=L.find($=>$.active),D=L.find($=>$.id===m),U=[O,D,...L].filter(Boolean).map($=>$.ref.current);cC(U,d)}}S.current=!1}),onBlur:ue(e.onBlur,()=>y(!1))})})}),aC="RovingFocusGroupItem",lC=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,children:a,...l}=e,c=is(),u=o||c,d=qF(aC,r),h=d.currentTabStopId===u,f=sC(r),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:m}=d;return p.useEffect(()=>{if(n)return g(),()=>w()},[n,g,w]),i.jsx(qf.ItemSlot,{scope:r,id:u,focusable:n,active:s,children:i.jsx(me.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ue(e.onMouseDown,j=>{n?d.onItemFocus(u):j.preventDefault()}),onFocus:ue(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ue(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){d.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const x=JF(j,d.orientation,d.dir);if(x!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let v=f().filter(b=>b.focusable).map(b=>b.ref.current);if(x==="last")v.reverse();else if(x==="prev"||x==="next"){x==="prev"&&v.reverse();const b=v.indexOf(j.currentTarget);v=d.loop?YF(v,b+1):v.slice(b+1)}setTimeout(()=>cC(v))}}),children:typeof a=="function"?a({isCurrentTabStop:h,hasTabStop:m!=null}):a})})});lC.displayName=aC;var GF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function KF(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function JF(e,t,r){const n=KF(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return GF[n]}function cC(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function YF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var XF=iC,QF=lC,Bu="Tabs",[ZF,$3]=vs(Bu,[oC]),uC=oC(),[e3,Hp]=ZF(Bu),dC=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Op(l),[h,f]=Qs({prop:n,onChange:s,defaultProp:o??"",caller:Bu});return i.jsx(e3,{scope:r,baseId:is(),value:h,onValueChange:f,orientation:a,dir:d,activationMode:c,children:i.jsx(me.div,{dir:d,"data-orientation":a,...u,ref:t})})});dC.displayName=Bu;var hC="TabsList",fC=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,o=Hp(hC,r),a=uC(r);return i.jsx(XF,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:i.jsx(me.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});fC.displayName=hC;var mC="TabsTrigger",pC=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=e,a=Hp(mC,r),l=uC(r),c=yC(a.baseId,n),u=xC(a.baseId,n),d=n===a.value;return i.jsx(QF,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(me.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:ue(e.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(n):h.preventDefault()}),onKeyDown:ue(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(n)}),onFocus:ue(e.onFocus,()=>{const h=a.activationMode!=="manual";!d&&!s&&h&&a.onValueChange(n)})})})});pC.displayName=mC;var gC="TabsContent",vC=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...a}=e,l=Hp(gC,r),c=yC(l.baseId,n),u=xC(l.baseId,n),d=n===l.value,h=p.useRef(d);return p.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(gi,{present:s||d,children:({present:f})=>i.jsx(me.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&o})})});vC.displayName=gC;function yC(e,t){return`${e}-trigger-${t}`}function xC(e,t){return`${e}-content-${t}`}var t3=dC,wC=fC,jC=pC,bC=vC;const SC=t3,Gp=de.forwardRef(({className:e,...t},r)=>i.jsx(wC,{ref:r,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-gray-800 p-1 text-gray-400",e),...t}));Gp.displayName=wC.displayName;const Hn=de.forwardRef(({className:e,...t},r)=>i.jsx(jC,{ref:r,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-gray-700 data-[state=active]:text-white data-[state=active]:shadow-sm hover:bg-gray-700 hover:text-white",e),...t}));Hn.displayName=jC.displayName;const Gn=de.forwardRef(({className:e,...t},r)=>i.jsx(bC,{ref:r,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Gn.displayName=bC.displayName;const r3=({totalRevenue:e,totalSales:t,averageTicket:r,totalItemsSold:n})=>{const s=[{icon:xn,value:`R$ ${e.toFixed(2)}`,label:"Faturamento",color:"text-green-500"},{icon:Aa,value:t,label:"Vendas",color:"text-blue-500"},{icon:xu,value:`R$ ${r.toFixed(2)}`,label:"Ticket Mdio",color:"text-purple-500"},{icon:Hr,value:n,label:"Itens Vendidos",color:"text-orange-500"}];return i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map(o=>{const a=o.icon;return i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`p-2 rounded-full bg-primary/10 ${o.color}`,children:i.jsx(a,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:o.value}),i.jsx("p",{className:"text-sm text-gray-400",children:o.label})]})]})})},o.label)})})},n3=({sales:e,salesByHour:t})=>i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(Hj,{className:"w-5 h-5"}),i.jsx("span",{children:"Vendas Recentes"})]})}),i.jsx(se,{children:e.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(Aa,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma venda no perodo selecionado"})]}):i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.slice(0,10).map(r=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["Venda #",r.id]}),i.jsxs("p",{className:"text-sm text-gray-400",children:[r.cashier||r.cashier_name||"Vendedor","  ",new Date(r.date||r.created_at).toLocaleString()]}),i.jsxs("p",{className:"text-xs text-gray-400",children:[(r.items||r.sale_items||[]).length," itens"]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",(r.total||r.total_amount||0).toFixed(2)]})})]},r.id))})})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(Wv,{className:"w-5 h-5"}),i.jsx("span",{children:"Vendas por Horrio"})]})}),i.jsx(se,{children:Object.keys(t).length===0?i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(Wv,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma venda por horrio no perodo"})]}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:Object.entries(t).sort(([r],[n])=>parseInt(r)-parseInt(n)).map(([r,n])=>i.jsxs("div",{className:"flex items-center justify-between p-2 bg-background/50 rounded-md",children:[i.jsxs("span",{className:"text-sm font-medium",children:[r.padStart(2,"0"),":00 - ",String(parseInt(r)+1).padStart(2,"0"),":00"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-xs px-2 py-0.5 bg-secondary rounded-full",children:[n.count," vendas"]}),i.jsxs("span",{className:"text-sm font-semibold text-primary",children:["R$ ",n.revenue.toFixed(2)]})]})]},r))})})]})]}),s3=({topProducts:e})=>i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(Hr,{className:"w-5 h-5"}),i.jsx("span",{children:"Produtos Mais Vendidos"})]})}),i.jsx(se,{children:e.length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Hr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhum produto vendido no perodo"})]}):i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:e.map((t,r)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-primary-foreground font-bold ${r===0?"bg-yellow-500":r===1?"bg-gray-400":r===2?"bg-yellow-700":"bg-primary"}`,children:r+1}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:t.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.quantity," unidades vendidas"]})]})]}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",t.revenue.toFixed(2)]})})]},t.name))})})]}),o3={cash:"Dinheiro",debit:"Carto Dbito",credit:"Carto Crdito",pix:"PIX"},i3=({paymentMethodStats:e,totalRevenue:t})=>i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(xn,{className:"w-5 h-5"}),i.jsx("span",{children:"Mtodos de Pagamento"})]})}),i.jsx(se,{children:Object.keys(e).length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(xn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhum pagamento registrado no perodo"})]}):i.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:Object.entries(e).map(([r,n])=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:o3[r]||r}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.count," transaes"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",n.amount.toFixed(2)]}),t>0&&i.jsxs("p",{className:"text-xs text-muted-foreground",children:[(n.amount/t*100).toFixed(1),"% do total"]})]})]},r))})})]}),a3={today:"Hoje",yesterday:"Ontem",week:"ltimos 7 dias",month:"Este ms"},l3=({salesByUser:e,dateFilter:t,totalSales:r,totalRevenue:n,averageTicket:s,totalItemsSold:o})=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-5 h-5"}),i.jsx("span",{children:"Performance por Operador"})]})}),i.jsx(se,{children:Object.keys(e).length===0?i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(hn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{children:"Nenhuma venda por operador no perodo"})]}):i.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(e).map(([a,l])=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-background/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:a||"No identificado"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.count," vendas"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-green-600",children:["R$ ",l.revenue.toFixed(2)]}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["Ticket Mdio: R$ ",(l.revenue/l.count||0).toFixed(2)]})]})]},a))})})]}),i.jsxs(re,{className:"glass-effect",children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center space-x-2",children:[i.jsx(xu,{className:"w-5 h-5"}),i.jsx("span",{children:"Resumo do Perodo"})]})}),i.jsx(se,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center p-4 bg-background/50 rounded-lg",children:[i.jsx("p",{className:"text-xl font-bold text-primary",children:a3[t]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Perodo Selecionado"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Total de Vendas:"}),i.jsx("span",{className:"font-medium",children:r})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Faturamento Total:"}),i.jsxs("span",{className:"font-medium text-green-600",children:["R$ ",n.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Ticket Mdio:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",s.toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Itens Vendidos:"}),i.jsx("span",{className:"font-medium",children:o})]})]})]})})]})]}),c3={today:"Hoje",yesterday:"Ontem",week:"ltimos 7 dias",month:"Este ms",all:"Todo o perodo"},u3=()=>{const[e,t]=p.useState([]),[r,n]=p.useState("today"),[s,o]=p.useState(!0),[a,l]=p.useState(null),{toast:c}=at(),u=p.useCallback(async()=>{o(!0);try{console.log("Carregando dados de vendas...");const g=await rS();console.log("Dados carregados:",g),t(g||[])}catch(g){console.error("Erro ao carregar vendas:",g),l(g.message),c({title:"Erro ao carregar vendas",description:g.message,variant:"destructive"}),t([])}finally{o(!1)}},[c]);p.useEffect(()=>{u()},[u]);const d=p.useMemo(()=>{const g=new Date,w=new Date(g.getFullYear(),g.getMonth(),g.getDate()),m=new Date(w);m.setDate(m.getDate()-1);const j=new Date(g);j.setDate(g.getDate()-6),j.setHours(0,0,0,0);const x=new Date(g.getFullYear(),g.getMonth(),1);return e.filter(y=>{const v=new Date(y.created_at||y.date);switch(r){case"today":return v>=w&&v<=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999);case"yesterday":return v>=m&&v<w;case"week":return v>=j&&v<=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999);case"month":return v>=x&&v<=new Date(g.getFullYear(),g.getMonth(),g.getDate(),23,59,59,999);case"all":default:return!0}})},[e,r]),h=p.useMemo(()=>{const g=d.reduce((S,E)=>S+(E.total_amount||E.total||0),0),w=d.length,m=w>0?g/w:0,j=d.reduce((S,E)=>{const N=E.items||E.sale_items||[];return S+N.reduce((_,C)=>_+(C.quantity||0),0)},0),x=(()=>{const S={};return d.forEach(E=>{(E.items||E.sale_items||[]).forEach(_=>{var O;const C=_.product_id||_.productId,I=((O=_.products)==null?void 0:O.name)||_.name||"Produto Desconhecido",L=_.subtotal||_.quantity*_.unit_price||0;S[C]||(S[C]={id:C,name:I,quantity:0,revenue:0}),S[C].quantity+=_.quantity||0,S[C].revenue+=L})}),Object.values(S).sort((E,N)=>N.revenue-E.revenue).slice(0,10)})(),y=(()=>{const S={};return d.forEach(E=>{(E.payment_details||E.payments||[]).forEach(_=>{S[_.method]||(S[_.method]={count:0,amount:0}),S[_.method].count+=1,S[_.method].amount+=_.amount||0})}),S})(),v=(()=>{const S={};return d.forEach(E=>{const N=new Date(E.created_at||E.date).getHours().toString();S[N]||(S[N]={count:0,revenue:0}),S[N].count+=1,S[N].revenue+=E.total_amount||E.total||0}),S})(),b=(()=>{const S={};return d.forEach(E=>{const N=E.cashier_name||E.cashier||"Desconhecido";S[N]||(S[N]={count:0,revenue:0}),S[N].count+=1,S[N].revenue+=E.total_amount||E.total||0}),S})();return{totalRevenue:g,totalSales:w,averageTicket:m,totalItemsSold:j,topProducts:x,paymentMethodStats:y,salesByHour:v,salesByUser:b}},[d]),f=()=>{c({title:" Em Desenvolvimento ",description:"A funcionalidade de exportar relatrios ser implementada em breve!"})};return s?i.jsx("div",{className:"space-y-6 bg-gray-900 text-white min-h-screen p-6",children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"loading-spinner mb-4"}),i.jsx("p",{children:"Carregando relatrios..."})]})})}):a?i.jsx("div",{className:"space-y-6 bg-gray-900 text-white min-h-screen p-6",children:i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-red-400 mb-4",children:"Erro ao carregar relatrios"}),i.jsx("p",{className:"text-gray-400 mb-4",children:a}),i.jsx(F,{onClick:u,variant:"outline",children:"Tentar novamente"})]})})}):i.jsxs("div",{className:"space-y-6 bg-gray-900 text-white min-h-screen p-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Relatrios"}),i.jsx("p",{className:"text-muted-foreground",children:"Anlise detalhada de vendas e performance da loja."})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(Qe,{value:r,onValueChange:n,children:[i.jsx(Ke,{className:"w-[180px]",children:i.jsx(Ze,{placeholder:"Selecione o perodo"})}),i.jsx(Je,{children:Object.entries(c3).map(([g,w])=>i.jsx(ye,{value:g,children:w},g))})]}),i.jsxs(F,{variant:"outline",onClick:f,children:[i.jsx(Xj,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),e.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("p",{className:"text-gray-400 mb-4",children:"Nenhuma venda encontrada para o perodo selecionado."}),i.jsx("p",{className:"text-sm text-gray-500",children:"Tente selecionar um perodo diferente ou aguarde novas vendas."})]}):i.jsx(r3,{totalRevenue:h.totalRevenue,totalSales:h.totalSales,averageTicket:h.averageTicket,totalItemsSold:h.totalItemsSold}),e.length>0&&i.jsxs(SC,{defaultValue:"sales",className:"space-y-6",children:[i.jsxs(Gp,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[i.jsx(Hn,{value:"sales",children:"Vendas"}),i.jsx(Hn,{value:"products",children:"Produtos"}),i.jsx(Hn,{value:"payments",children:"Pagamentos"}),i.jsx(Hn,{value:"performance",children:"Performance"})]}),i.jsx(Gn,{value:"sales",children:i.jsx(n3,{sales:d,salesByHour:h.salesByHour})}),i.jsx(Gn,{value:"products",children:i.jsx(s3,{topProducts:h.topProducts})}),i.jsx(Gn,{value:"payments",children:i.jsx(i3,{paymentMethodStats:h.paymentMethodStats,totalRevenue:h.totalRevenue})}),i.jsx(Gn,{value:"performance",children:i.jsx(l3,{salesByUser:h.salesByUser,dateFilter:r,totalSales:h.totalSales,totalRevenue:h.totalRevenue,averageTicket:h.averageTicket,totalItemsSold:h.totalItemsSold})})]})]})},qx={[jt.ADMIN]:"Administrador",[jt.MANAGER]:"Gerente",[jt.CASHIER]:"Operador de Caixa",[jt.STOCK]:"Estoquista",[jt.SALESPERSON]:"Vendedor"},So="__no_store_selected__",d3=()=>{var _;const[e,t]=p.useState([]),[r,n]=p.useState([]),[s,o]=p.useState(null),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!0),{toast:f}=at(),[g,w]=p.useState({username:"",password:"",name:"",role:"",store_id:So,active:!0}),m=((_=it())==null?void 0:_.role)===jt.ADMIN,j=p.useCallback(async()=>{h(!0);try{const[C,I]=await Promise.all([eS(),js()]);t(C||[]),n(I||[])}catch(C){f({title:"Erro ao carregar dados",description:C.message,variant:"destructive"})}finally{h(!1)}},[f]);p.useEffect(()=>{j()},[j]);const x=()=>{w({username:"",password:"",name:"",role:"",store_id:So,active:!0}),o(null),u(!1)},y=async C=>{var k;C.preventDefault();const I=g.store_id===So?null:g.store_id,L=(k=r.find(U=>U.id===I))==null?void 0:k.is_online_store;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.username)){f({title:"Erro de Validao",description:"O e-mail do usurio  invlido.",variant:"destructive"});return}if(!g.role){f({title:"Erro de Validao",description:"Funo  obrigatria.",variant:"destructive"});return}if(!I&&g.role!==jt.ADMIN&&!L){f({title:"Erro de Validao",description:"Loja  obrigatria para esta funo (exceto Admin global ou se a loja for a online).",variant:"destructive"});return}if(e.find(U=>U.username===g.username&&(!s||U.id!==s.id))){f({title:"Erro",description:"Nome de usurio j existe.",variant:"destructive"});return}h(!0);try{const U={...g,store_id:I};if(s&&!g.password&&delete U.password,s)if(m){const $={name:g.name,role:g.role,store_id:g.store_id===So?null:g.store_id,password:g.password||void 0};await AM(s.id,$),f({title:"Usurio atualizado!",description:`${g.name} foi atualizado com sucesso.`})}else f({title:"Apenas admin pode alterar usurios!",variant:"destructive"});else await v(U),f({title:"Funcionrio criado!",description:`${g.name} foi criado com sucesso.`});j(),l(!1),x()}catch(U){f({title:"Erro ao salvar usurio",description:U.message,variant:"destructive"})}finally{h(!1)}},v=async C=>{try{const I=await fetch("/api/usuarios",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:C.username,password:C.password,name:C.name,role:C.role,store_id:C.store_id})});if(!I.ok){const L=await I.json();throw new Error(L.error||"Erro ao criar funcionrio")}return await I.json()}catch(I){throw new Error(`Erro na comunicao com o backend: ${I.message}`)}},b=C=>{o(C),w({username:C.username,password:"",name:C.name||C.username.split("@")[0],role:C.role,store_id:C.store_id||So,active:C.active}),l(!0)},S=async C=>{h(!0);try{await OM(C.id,!C.active),f({title:C.active?"Usurio desativado":"Usurio ativado",description:`${C.name} foi ${C.active?"desativado":"ativado"}.`}),j()}catch(I){f({title:"Erro ao alterar status do usurio",description:I.message,variant:"destructive"})}finally{h(!1)}},E=async C=>{if(window.confirm("Tem certeza que deseja remover este usurio?")){h(!0);try{await RM(C),f({title:"Usurio removido!",description:"O usurio foi removido com sucesso."}),j()}catch(I){f({title:"Erro ao remover usurio",description:I.message,variant:"destructive"})}finally{h(!1)}}},N=C=>{switch(C){case jt.ADMIN:return"text-red-600 bg-red-100 dark:bg-red-900";case jt.MANAGER:return"text-blue-600 bg-blue-100 dark:bg-blue-900";case jt.CASHIER:return"text-green-600 bg-green-100 dark:bg-green-900";case jt.STOCK:return"text-purple-600 bg-purple-100 dark:bg-purple-900";case jt.SALESPERSON:return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900";default:return"text-gray-600 bg-gray-100 dark:bg-gray-900"}};return d&&e.length===0&&r.length===0?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Usurios"}),i.jsx("p",{className:"text-muted-foreground",children:"Gerencie usurios, funes e suas lojas"})]}),m&&i.jsxs(mr,{open:a,onOpenChange:C=>{l(C),C||x()},children:[i.jsx(Jo,{asChild:!0,children:i.jsxs(F,{onClick:()=>x(),children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Novo Funcionrio"]})}),i.jsxs(Zt,{className:"max-w-md",children:[i.jsxs(er,{children:[i.jsx(tr,{children:s?"Editar Usurio":"Novo Funcionrio"}),i.jsx(VS,{children:s?"Edite as informaes do usurio.":"Crie um novo funcionrio no sistema."})]}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"name",children:"Nome Completo"}),i.jsx(W,{id:"name",value:g.name,onChange:C=>w({...g,name:C.target.value}),required:!0})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"username",children:"E-mail do Usurio"}),i.jsx(W,{id:"username",type:"email",value:g.username,onChange:C=>w({...g,username:C.target.value}),required:!0,placeholder:"usuario@exemplo.com"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"password",children:s?"Nova Senha (deixe vazio para manter atual)":"Senha"}),i.jsxs("div",{className:"relative",children:[i.jsx(W,{id:"password",type:c?"text":"password",value:g.password,onChange:C=>w({...g,password:C.target.value}),required:!s}),i.jsx(F,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-8 w-8",onClick:()=>u(!c),children:c?i.jsx(TP,{className:"w-4 h-4"}):i.jsx(ep,{className:"w-4 h-4"})})]})]}),m&&i.jsxs("div",{children:[i.jsx(B,{htmlFor:"role",children:"Funo"}),i.jsxs(Qe,{value:g.role,onValueChange:C=>w({...g,role:C}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione uma funo"})}),i.jsx(Je,{children:Object.entries(qx).map(([C,I])=>i.jsx(ye,{value:C,children:I},C))})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"store_id",children:"Loja"}),i.jsxs(Qe,{value:g.store_id,onValueChange:C=>w({...g,store_id:C}),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione uma loja"})}),i.jsxs(Je,{children:[i.jsx(ye,{value:So,children:"Nenhuma (Global/Admin)"}),r.map(C=>i.jsxs(ye,{value:C.id,children:[C.name," ",C.is_online_store?"(Online)":""]},C.id))]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(F,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancelar"}),i.jsx(F,{type:"submit",disabled:d,children:d?"Salvando...":(s?"Atualizar":"Criar")+" Usurio"})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-8 h-8 text-primary"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:e.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Usurios"})]})]})})}),i.jsx(re,{className:"glass-effect",children:i.jsx(se,{className:"p-6",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ra,{className:"w-8 h-8 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold",children:r.length}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total de Lojas"})]})]})})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(C=>{var I,L,O;return i.jsx(xs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card-hover",children:i.jsxs(re,{className:`glass-effect ${C.active?"":"opacity-60"}`,children:[i.jsx(xe,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(hn,{className:"w-5 h-5 text-primary"}),i.jsx(we,{className:"text-lg",children:C.name})]}),i.jsxs("div",{className:"flex space-x-1",children:[i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>b(C),children:i.jsx(Ha,{className:"w-4 h-4"})}),i.jsx(F,{variant:"ghost",size:"icon",onClick:()=>E(C.id),className:"text-destructive hover:text-destructive",children:i.jsx(ao,{className:"w-4 h-4"})})]})]})}),i.jsxs(se,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Usurio: ",C.username]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Nome: ",C.name||C.username.split("@")[0]]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Loja: ",(I=C.stores)!=null&&I.name?`${C.stores.name}${C.stores.is_online_store?" (Online)":""}`:C.role===jt.ADMIN?"Todas (Admin)":"No definida"]}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${N(C.role)}`,children:qx[C.role]}),m&&i.jsx(F,{size:"xs",variant:"outline",onClick:()=>b(C),children:"Alterar Role"}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.active?"text-green-600 bg-green-100 dark:bg-green-900":"text-red-600 bg-red-100 dark:bg-red-900"}`,children:C.active?"Ativo":"Inativo"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium mb-2",children:"Permisses:"}),i.jsxs("div",{className:"space-y-1",children:[(L=tc[C.role])==null?void 0:L.slice(0,3).map(D=>i.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",D.replace(/_/g," ").toLowerCase()]},D)),((O=tc[C.role])==null?void 0:O.length)>3&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:[" +",tc[C.role].length-3," mais..."]})]})]}),i.jsx("div",{className:"pt-2 border-t",children:i.jsx(F,{variant:"outline",size:"sm",className:"w-full",onClick:()=>S(C),disabled:d,children:d?"Aguarde...":(C.active?"Desativar":"Ativar")+" Usurio"})})]})]})},C.id)})}),e.length===0&&!d&&i.jsx(re,{children:i.jsxs(se,{className:"text-center py-12",children:[i.jsx(hn,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhum usurio encontrado"}),i.jsx("p",{className:"text-muted-foreground",children:"Comece criando seu primeiro usurio"})]})})]})},tl="http://localhost:4000/api",h3=async(e=null)=>{try{const t=new URLSearchParams;e&&t.append("store_id",e);const r=await fetch(`${tl}/cash-register/state?${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Erro ao buscar estado do caixa")}return await r.json()}catch(t){throw new Error(`Erro na comunicao com o backend: ${t.message}`)}},f3=async(e,t,r)=>{try{const n=await fetch(`${tl}/cash-register/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({initial_amount:e,store_id:t,user_id:r})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Erro ao abrir caixa")}return await n.json()}catch(n){throw new Error(`Erro na comunicao com o backend: ${n.message}`)}},m3=async(e,t,r,n=null)=>{try{const s=await fetch(`${tl}/cash-register/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({final_amount:e,store_id:t,user_id:r,notes:n})});if(!s.ok){const o=await s.json();throw new Error(o.error||"Erro ao fechar caixa")}return await s.json()}catch(s){throw new Error(`Erro na comunicao com o backend: ${s.message}`)}},p3=async(e={})=>{try{const t=new URLSearchParams;e.store_id&&t.append("store_id",e.store_id),e.page&&t.append("page",e.page),e.limit&&t.append("limit",e.limit),e.date_from&&t.append("date_from",e.date_from),e.date_to&&t.append("date_to",e.date_to);const r=await fetch(`${tl}/cash-register/logs?${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok){const n=await r.json();throw new Error(n.error||"Erro ao buscar logs do caixa")}return await r.json()}catch(t){throw new Error(`Erro na comunicao com o backend: ${t.message}`)}},g3=async(e,t,r,n,s=null)=>{try{const o=await fetch(`${tl}/cash-register/logs`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,amount:t,store_id:r,user_id:n,notes:s})});if(!o.ok){const a=await o.json();throw new Error(a.error||"Erro ao adicionar log do caixa")}return await o.json()}catch(o){throw new Error(`Erro na comunicao com o backend: ${o.message}`)}},v3=()=>{var P;const[e,t]=p.useState({isOpen:!1,currentAmount:0,openingAmount:0,openedBy:null,openedAt:null,closedAt:null,id:null,store_id:null,store:null}),[r,n]=p.useState([]),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,g]=p.useState(""),[w,m]=p.useState(""),[j,x]=p.useState(""),[y,v]=p.useState("add"),[b,S]=p.useState(""),[E,N]=p.useState("status"),{toast:_}=at(),C=it(),I=Gt(C==null?void 0:C.role,J.CASH_REGISTER_MANAGEMENT),L=async()=>{try{o(!0);const T=(C==null?void 0:C.store_id)||"1fa90f00-cf02-4a42-8167-c599537c22bb",V=await h3(T);t(V)}catch(T){_({title:"Erro",description:T.message,variant:"destructive"})}finally{o(!1)}},O=async()=>{try{const T=await p3({limit:100});n(T.logs||[])}catch(T){_({title:"Erro",description:T.message,variant:"destructive"})}};p.useEffect(()=>{L(),O()},[]);const D=async()=>{if(!f||parseFloat(f)<0){_({title:"Erro",description:"Valor inicial  obrigatrio e deve ser maior ou igual a zero.",variant:"destructive"});return}try{o(!0);const T=await f3(parseFloat(f),e.store_id,C==null?void 0:C.id);t(T.cashRegister),l(!1),g(""),_({title:"Sucesso",description:T.message}),O()}catch(T){_({title:"Erro",description:T.message,variant:"destructive"})}finally{o(!1)}},k=async()=>{try{o(!0);const T=await m3(parseFloat(w)||e.currentAmount,e.store_id,C==null?void 0:C.id,b);t(T.cashRegister),u(!1),m(""),S(""),_({title:"Sucesso",description:T.message}),O()}catch(T){_({title:"Erro",description:T.message,variant:"destructive"})}finally{o(!1)}},U=async()=>{if(!j||parseFloat(j)<=0){_({title:"Erro",description:"Valor  obrigatrio e deve ser maior que zero.",variant:"destructive"});return}try{o(!0);const T=parseFloat(j),V=y==="add"?T:-T;await g3(y,T,e.store_id,C==null?void 0:C.id,b),h(!1),x(""),v("add"),S(""),_({title:"Sucesso",description:"Movimentao registrada com sucesso!"}),L(),O()}catch(T){_({title:"Erro",description:T.message,variant:"destructive"})}finally{o(!1)}},$=T=>new Date(T).toLocaleString("pt-BR"),A=T=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(T);return I?i.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(xn,{className:"w-8 h-8"}),"Controle de Caixa"]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground",children:((P=e.store)==null?void 0:P.name)||"Loja Online"}),i.jsx(F,{variant:"outline",size:"sm",onClick:async()=>{if(confirm("Tem certeza que deseja resetar o caixa? Isso apagar todo o histrico."))try{(await fetch(`http://31.97.86.88:4000/api/cash-register/reset/${e.store_id}`,{method:"DELETE"})).ok&&(_({title:"Sucesso",description:"Caixa resetado com sucesso!"}),L(),O())}catch{_({title:"Erro",description:"Erro ao resetar caixa",variant:"destructive"})}},children:"Resetar Caixa"})]})]}),i.jsxs(SC,{value:E,onValueChange:N,children:[i.jsxs(Gp,{className:"grid w-full grid-cols-3",children:[i.jsx(Hn,{value:"status",children:"Status"}),i.jsx(Hn,{value:"operations",children:"Operaes"}),i.jsx(Hn,{value:"history",children:"Histrico"})]}),i.jsx(Gn,{value:"status",className:"space-y-6",children:i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[e.isOpen?i.jsx(Zm,{className:"w-6 h-6 text-green-500"}):i.jsx(df,{className:"w-6 h-6 text-red-500"}),"Status do Caixa"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center p-4 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),i.jsx("p",{className:`text-lg font-bold ${e.isOpen?"text-green-600":"text-red-600"}`,children:e.isOpen?"ABERTO":"FECHADO"})]}),i.jsxs("div",{className:"text-center p-4 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Atual"}),i.jsx("p",{className:"text-2xl font-bold",children:A(e.currentAmount)})]})]}),e.isOpen&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Inicial"}),i.jsx("p",{className:"font-bold",children:A(e.openingAmount)})]}),i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Aberto por"}),i.jsx("p",{className:"font-bold",children:e.openedBy||"N/A"})]}),i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Aberto em"}),i.jsx("p",{className:"font-bold",children:e.openedAt?$(e.openedAt):"N/A"})]})]}),!e.isOpen&&e.closedAt&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Fechado em"}),i.jsx("p",{className:"font-bold",children:$(e.closedAt)})]}),i.jsxs("div",{className:"text-center p-3 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Valor Final"}),i.jsx("p",{className:"font-bold",children:A(e.currentAmount)})]})]})]})]})}),i.jsx(Gn,{value:"operations",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Jv,{className:"w-5 h-5"}),"Abrir Caixa"]})}),i.jsx(se,{children:i.jsxs(mr,{open:a,onOpenChange:l,children:[i.jsx(Jo,{asChild:!0,children:i.jsx(F,{className:"w-full",disabled:e.isOpen||s,children:"Abrir Caixa"})}),i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Abrir Caixa"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"initialAmount",children:"Valor Inicial (R$)"}),i.jsx(W,{id:"initialAmount",type:"number",step:"0.01",min:"0",value:f,onChange:T=>g(T.target.value),placeholder:"0,00"})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(F,{variant:"outline",onClick:()=>l(!1),disabled:s,children:"Cancelar"}),i.jsx(F,{onClick:D,disabled:s,children:s?"Abrindo...":"Abrir Caixa"})]})]})]})]})})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(of,{className:"w-5 h-5"}),"Fechar Caixa"]})}),i.jsx(se,{children:i.jsxs(mr,{open:c,onOpenChange:u,children:[i.jsx(Jo,{asChild:!0,children:i.jsx(F,{variant:"outline",className:"w-full",disabled:!e.isOpen||s,children:"Fechar Caixa"})}),i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Fechar Caixa"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"finalAmount",children:"Valor Final (R$)"}),i.jsx(W,{id:"finalAmount",type:"number",step:"0.01",min:"0",value:w,onChange:T=>m(T.target.value),placeholder:e.currentAmount.toFixed(2)})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"closeNotes",children:"Observaes (opcional)"}),i.jsx(W,{id:"closeNotes",value:b,onChange:T=>S(T.target.value),placeholder:"Observaes sobre o fechamento..."})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(F,{variant:"outline",onClick:()=>u(!1),disabled:s,children:"Cancelar"}),i.jsx(F,{onClick:k,disabled:s,children:s?"Fechando...":"Fechar Caixa"})]})]})]})]})})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(xu,{className:"w-5 h-5"}),"Movimentaes"]})}),i.jsx(se,{children:i.jsxs(mr,{open:d,onOpenChange:h,children:[i.jsx(Jo,{asChild:!0,children:i.jsx(F,{variant:"outline",className:"w-full",disabled:!e.isOpen||s,children:"Adicionar/Remover"})}),i.jsxs(Zt,{children:[i.jsx(er,{children:i.jsx(tr,{children:"Movimentao de Caixa"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(B,{children:"Tipo de Operao"}),i.jsxs("div",{className:"flex gap-2 mt-2",children:[i.jsxs(F,{variant:y==="add"?"default":"outline",onClick:()=>v("add"),className:"flex-1",children:[i.jsx(sr,{className:"w-4 h-4 mr-2"}),"Adicionar"]}),i.jsxs(F,{variant:y==="remove"?"default":"outline",onClick:()=>v("remove"),className:"flex-1",children:[i.jsx(Ic,{className:"w-4 h-4 mr-2"}),"Remover"]})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"movementAmount",children:"Valor (R$)"}),i.jsx(W,{id:"movementAmount",type:"number",step:"0.01",min:"0",value:j,onChange:T=>x(T.target.value),placeholder:"0,00"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"movementNotes",children:"Observaes (opcional)"}),i.jsx(W,{id:"movementNotes",value:b,onChange:T=>S(T.target.value),placeholder:"Motivo da movimentao..."})]}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(F,{variant:"outline",onClick:()=>h(!1),disabled:s,children:"Cancelar"}),i.jsx(F,{onClick:U,disabled:s,children:s?"Registrando...":"Registrar Movimentao"})]})]})]})]})})]})]})}),i.jsx(Gn,{value:"history",className:"space-y-6",children:i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(ta,{className:"w-5 h-5"}),"Histrico de Operaes"]})}),i.jsx(se,{children:i.jsxs("div",{className:"space-y-4",children:[r.map(T=>i.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-600 rounded-lg bg-gray-800",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[T.type==="open"&&i.jsx(Jv,{className:"w-5 h-5 text-green-500"}),T.type==="close"&&i.jsx(of,{className:"w-5 h-5 text-red-500"}),T.type==="add"&&i.jsx(sr,{className:"w-5 h-5 text-blue-500"}),T.type==="remove"&&i.jsx(Ic,{className:"w-5 h-5 text-orange-500"}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[T.type==="open"&&"Abertura de Caixa",T.type==="close"&&"Fechamento de Caixa",T.type==="add"&&"Adio de Dinheiro",T.type==="remove"&&"Remoo de Dinheiro"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:T.notes})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:A(T.current_amount)}),i.jsx("p",{className:"text-sm text-muted-foreground",children:$(T.created_at)})]})]},T.id)),r.length===0&&i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Nenhuma operao registrada."})]})})]})})]})]}):i.jsx("div",{className:"container mx-auto p-6",children:i.jsx(re,{className:"max-w-md mx-auto",children:i.jsxs(se,{className:"p-6 text-center",children:[i.jsx(df,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),i.jsx("h2",{className:"text-xl font-bold mb-2",children:"Acesso Negado"}),i.jsx("p",{className:"text-muted-foreground",children:"Voc no tem permisso para acessar o controle de caixa."})]})})})},y3=()=>{const[e,t]=p.useState({printer:{type:"epson",interface:"USB",port:"USB001",enabled:!0},scanner:{deviceId:"",autoScan:!0,enabled:!0}}),[r,n]=p.useState({nfe:{enabled:!1,environment:"homologation",series:"1",nextNumber:1},sat:{enabled:!1,environment:"homologation",nextNumber:1},general:{cnpj:"",inscricaoEstadual:"",razaoSocial:"",nomeFantasia:""}}),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(!1),[d,h]=p.useState(!1),[f,g]=p.useState([]),[w,m]=p.useState(null),{toast:j}=at();p.useEffect(()=>{x()},[]);const x=async()=>{try{o(!0);const[k,U]=await Promise.all([Dn.getConfig(),qn.getConfig()]);t(k),n(U)}catch(k){j({title:"Erro ao carregar configuraes",description:k.message,variant:"destructive"})}finally{o(!1)}},y=async()=>{try{o(!0),await Dn.saveConfig(e),j({title:"Configuraes salvas",description:"As configuraes de perifricos foram salvas com sucesso!"})}catch(k){j({title:"Erro ao salvar configuraes",description:k.message,variant:"destructive"})}finally{o(!1)}},v=async()=>{try{o(!0),await qn.saveConfig(r),j({title:"Configuraes fiscais salvas",description:"As configuraes fiscais foram salvas com sucesso!"})}catch(k){j({title:"Erro ao salvar configuraes fiscais",description:k.message,variant:"destructive"})}finally{o(!1)}},b=async()=>{try{l(!0),await Dn.testPrinter(e.printer),j({title:"Teste da impressora",description:"Impressora testada com sucesso!"})}catch(k){j({title:"Erro no teste da impressora",description:k.message,variant:"destructive"})}finally{l(!1)}},S=async()=>{try{u(!0);const k=await Dn.testScanner(e.scanner);j({title:"Teste do scanner",description:`Scanner testado com sucesso! Cdigo de teste: ${k.testCode}`})}catch(k){j({title:"Erro no teste do scanner",description:k.message,variant:"destructive"})}finally{u(!1)}},E=async()=>{try{u(!0);const k=await Dn.scanBarcode(e.scanner);m(k.barcode),j({title:"Cdigo de barras lido",description:`Cdigo: ${k.barcode.text} (${k.barcode.format})`})}catch(k){j({title:"Erro na leitura",description:k.message,variant:"destructive"})}finally{u(!1)}},N=async()=>{try{h(!0);const k=await Dn.detectDevices();g(k),j({title:"Dispositivos detectados",description:`${k.length} dispositivo(s) encontrado(s)!`})}catch(k){j({title:"Erro ao detectar dispositivos",description:k.message,variant:"destructive"})}finally{h(!1)}},_=(k,U,$)=>{t(A=>({...A,[k]:{...A[k],[U]:$}}))},C=(k,U,$)=>{n(A=>({...A,[k]:{...A[k],[U]:$}}))},I=k=>k?qn.validateCNPJ(k):!0,L=k=>qn.formatCNPJ(k),O=k=>{const U=L(k);C("general","cnpj",U)},D=k=>{switch(k){case"printer":return i.jsx(af,{className:"w-4 h-4"});case"scanner":return i.jsx(lf,{className:"w-4 h-4"});default:return i.jsx(cf,{className:"w-4 h-4"})}};return s?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(cf,{className:"w-6 h-6 text-primary"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Configuraes de Perifricos e Fiscal"})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Ta,{className:"w-5 h-5"}),"Detectar Dispositivos"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs(F,{onClick:N,disabled:d,className:"w-full",children:[i.jsx(Ta,{className:"w-4 h-4 mr-2"}),d?"Detectando...":"Detectar Dispositivos"]}),f.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium",children:"Dispositivos Encontrados:"}),f.map((k,U)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[D(k.device_type),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:k.device_name}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.interface_type," - ",k.port_address]})]}),k.is_connected?i.jsx(Zm,{className:"w-5 h-5 text-green-500"}):i.jsx(Qm,{className:"w-5 h-5 text-red-500"})]},U))]})]})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(af,{className:"w-5 h-5"}),"Configurao da Impressora"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(B,{htmlFor:"printer-enabled",children:"Ativar Impressora"}),i.jsx(Un,{id:"printer-enabled",checked:e.printer.enabled,onCheckedChange:k=>_("printer","enabled",k)})]}),e.printer.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"printer-type",children:"Tipo de Impressora"}),i.jsxs(Qe,{value:e.printer.type,onValueChange:k=>_("printer","type",k),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione o tipo"})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"epson",children:"Epson"}),i.jsx(ye,{value:"star",children:"Star"}),i.jsx(ye,{value:"citizen",children:"Citizen"}),i.jsx(ye,{value:"bematech",children:"Bematech"})]})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"printer-interface",children:"Interface"}),i.jsxs(Qe,{value:e.printer.interface,onValueChange:k=>_("printer","interface",k),children:[i.jsx(Ke,{children:i.jsx(Ze,{placeholder:"Selecione a interface"})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"USB",children:"USB"}),i.jsx(ye,{value:"Network",children:"Rede"}),i.jsx(ye,{value:"Serial",children:"Serial"})]})]})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"printer-port",children:"Porta/Endereo"}),i.jsx(W,{id:"printer-port",value:e.printer.port,onChange:k=>_("printer","port",k.target.value),placeholder:"Ex: USB001, 192.168.1.100:9100"})]}),i.jsxs(F,{onClick:b,disabled:a,className:"w-full",children:[i.jsx(Kv,{className:"w-4 h-4 mr-2"}),a?"Testando...":"Testar Impressora"]})]})]})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(lf,{className:"w-5 h-5"}),"Configurao do Scanner"]})}),i.jsxs(se,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(B,{htmlFor:"scanner-enabled",children:"Ativar Scanner"}),i.jsx(Un,{id:"scanner-enabled",checked:e.scanner.enabled,onCheckedChange:k=>_("scanner","enabled",k)})]}),e.scanner.enabled&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(B,{htmlFor:"scanner-auto",children:"Escaneamento Automtico"}),i.jsx(Un,{id:"scanner-auto",checked:e.scanner.autoScan,onCheckedChange:k=>_("scanner","autoScan",k)})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"scanner-device",children:"ID do Dispositivo"}),i.jsx(W,{id:"scanner-device",value:e.scanner.deviceId,onChange:k=>_("scanner","deviceId",k.target.value),placeholder:"Deixe vazio para auto-deteco"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[i.jsxs(F,{onClick:S,disabled:c,className:"w-full",children:[i.jsx(Kv,{className:"w-4 h-4 mr-2"}),c?"Testando...":"Testar Scanner"]}),i.jsxs(F,{onClick:E,disabled:c,variant:"outline",className:"w-full",children:[i.jsx(NP,{className:"w-4 h-4 mr-2"}),c?"Lendo...":"Ler Cdigo"]})]}),w&&i.jsxs("div",{className:"p-3 border rounded-lg bg-muted",children:[i.jsx("h4",{className:"font-medium mb-2",children:"ltimo cdigo lido:"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Cdigo:"})," ",w.text]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Formato:"})," ",w.format]}),i.jsxs("div",{children:[i.jsx("strong",{children:"Hora:"})," ",new Date(w.timestamp).toLocaleTimeString("pt-BR")]})]})]})]})]})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(CP,{className:"w-5 h-5"}),"Configurao Fiscal"]})}),i.jsxs(se,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"font-medium",children:"Dados da Empresa"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"cnpj",children:"CNPJ"}),i.jsx(W,{id:"cnpj",value:r.general.cnpj,onChange:k=>O(k.target.value),placeholder:"00.000.000/0000-00",className:!I(r.general.cnpj)&&r.general.cnpj?"border-red-500":""}),!I(r.general.cnpj)&&r.general.cnpj&&i.jsx("p",{className:"text-sm text-red-500 mt-1",children:"CNPJ invlido"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"ie",children:"Inscrio Estadual"}),i.jsx(W,{id:"ie",value:r.general.inscricaoEstadual,onChange:k=>C("general","inscricaoEstadual",k.target.value),placeholder:"000.000.000.000"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"razao-social",children:"Razo Social"}),i.jsx(W,{id:"razao-social",value:r.general.razaoSocial,onChange:k=>C("general","razaoSocial",k.target.value),placeholder:"Nome da empresa"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"nome-fantasia",children:"Nome Fantasia"}),i.jsx(W,{id:"nome-fantasia",value:r.general.nomeFantasia,onChange:k=>C("general","nomeFantasia",k.target.value),placeholder:"Nome fantasia"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(B,{htmlFor:"nfe-enabled",children:"Ativar NF-e"}),i.jsx(Un,{id:"nfe-enabled",checked:r.nfe.enabled,onCheckedChange:k=>C("nfe","enabled",k)})]}),r.nfe.enabled&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"nfe-environment",children:"Ambiente"}),i.jsxs(Qe,{value:r.nfe.environment,onValueChange:k=>C("nfe","environment",k),children:[i.jsx(Ke,{children:i.jsx(Ze,{})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"homologation",children:"Homologao"}),i.jsx(ye,{value:"production",children:"Produo"})]})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"nfe-series",children:"Srie"}),i.jsx(W,{id:"nfe-series",value:r.nfe.series,onChange:k=>C("nfe","series",k.target.value),placeholder:"1"})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"nfe-next-number",children:"Prximo Nmero"}),i.jsx(W,{id:"nfe-next-number",type:"number",value:r.nfe.nextNumber,onChange:k=>C("nfe","nextNumber",parseInt(k.target.value)),placeholder:"1"})]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(B,{htmlFor:"sat-enabled",children:"Ativar SAT"}),i.jsx(Un,{id:"sat-enabled",checked:r.sat.enabled,onCheckedChange:k=>C("sat","enabled",k)})]}),r.sat.enabled&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"sat-environment",children:"Ambiente"}),i.jsxs(Qe,{value:r.sat.environment,onValueChange:k=>C("sat","environment",k),children:[i.jsx(Ke,{children:i.jsx(Ze,{})}),i.jsxs(Je,{children:[i.jsx(ye,{value:"homologation",children:"Homologao"}),i.jsx(ye,{value:"production",children:"Produo"})]})]})]}),i.jsxs("div",{children:[i.jsx(B,{htmlFor:"sat-next-number",children:"Prximo Nmero"}),i.jsx(W,{id:"sat-next-number",type:"number",value:r.sat.nextNumber,onChange:k=>C("sat","nextNumber",parseInt(k.target.value)),placeholder:"1"})]})]})]})]})]}),i.jsxs("div",{className:"flex gap-4 justify-end",children:[i.jsxs(F,{onClick:y,disabled:s,variant:"outline",children:[i.jsx(Qj,{className:"w-4 h-4 mr-2"}),"Salvar Perifricos"]}),i.jsxs(F,{onClick:v,disabled:s,children:[i.jsx(Pa,{className:"w-4 h-4 mr-2"}),"Salvar Fiscal"]})]})]})},x3=()=>{const[e,t]=p.useState(2.99),[r,n]=p.useState(!1),[s,o]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(null),{toast:f}=at();p.useEffect(()=>{g(),w(),m()},[]);const g=async()=>{n(!0);try{const y=await Wi.getInterestRate();t(y.credit_card_interest),u(y.updated_at)}catch(y){console.error("Erro ao carregar taxa de juros:",y),f({title:"Erro ao carregar",description:"No foi possvel carregar a configurao de juros.",variant:"destructive"})}finally{n(!1)}},w=async()=>{try{const y=await Wi.canManageInterestRates();l(y)}catch(y){console.error("Erro ao verificar permisses:",y),l(!1)}},m=async()=>{try{const y=await Wi.getCurrentConfigWithAudit();h(y)}catch(y){console.error("Erro ao carregar configurao atual:",y)}},j=async()=>{if(!a){f({title:"Sem permisso",description:"Voc no tem permisso para alterar as taxas de juros.",variant:"destructive"});return}o(!0);try{await Wi.saveInterestRate(e),f({title:"Configurao salva!",description:`Taxa de juros do carto de crdito definida em ${e}% ao ms.`}),await g(),await m()}catch{f({title:"Erro ao salvar",description:"No foi possvel salvar a configurao de juros.",variant:"destructive"})}finally{o(!1)}},x=(y=100,v)=>{if(v<=1)return y;const b=e/100,S=Math.pow(1+b,v-1)-1;return y*(1+S)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Yj,{className:"w-6 h-6"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Configurao de Taxas de Juros"})]}),!a&&i.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Qm,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400"}),i.jsx("span",{className:"text-yellow-800 dark:text-yellow-200",children:"Voc no tem permisso para alterar as taxas de juros. Apenas administradores e gerentes podem fazer alteraes."})]})}),i.jsxs(re,{children:[i.jsxs(xe,{children:[i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(Gj,{className:"w-5 h-5"}),"Taxa de Juros - Carto de Crdito"]}),c&&i.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ltima atualizao: ",new Date(c).toLocaleString("pt-BR")]})]}),i.jsxs(se,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(B,{htmlFor:"interest-rate",className:"text-base font-medium",children:"Taxa de Juros Mensal"}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Define a taxa de juros aplicada ao parcelamento do carto de crdito"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(W,{id:"interest-rate",type:"number",min:"0",max:"100",step:"0.01",className:"w-32",value:e,onChange:y=>t(parseFloat(y.target.value)||0)}),i.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"% ao ms"})]})]}),i.jsxs(F,{onClick:j,disabled:r||s||!a,className:"w-full md:w-auto",children:[i.jsx(Qj,{className:"w-4 h-4 mr-2"}),s?"Salvando...":"Salvar Configurao"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Exemplo de Clculo (R$ 100,00)"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"1x sem juros:"}),i.jsx("span",{className:"font-medium",children:"R$ 100,00"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"2x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,2).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"3x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,3).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"6x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,6).toFixed(2)]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"12x com juros:"}),i.jsxs("span",{className:"font-medium",children:["R$ ",x(100,12).toFixed(2)]})]})]})]})]}),i.jsxs("div",{className:"border-t pt-4",children:[i.jsx("h3",{className:"font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Como funciona o clculo:"}),i.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[i.jsx("li",{children:" A primeira parcela no tem juros"}),i.jsx("li",{children:" As parcelas subsequentes acumulam juros compostos mensais"}),i.jsx("li",{children:" A taxa  aplicada sobre o valor restante a cada ms"}),i.jsx("li",{children:" O valor total  dividido igualmente entre as parcelas"})]})]})]})]}),d&&i.jsxs(re,{children:[i.jsx(xe,{children:i.jsxs(we,{className:"flex items-center gap-2",children:[i.jsx(ta,{className:"w-5 h-5"}),"Informaes da Configurao"]})}),i.jsx(se,{children:i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Taxa atual: ",d.credit_card_interest,"% ao ms"]}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Criada em: ",new Date(d.created_at).toLocaleString("pt-BR")]}),d.updated_at!==d.created_at&&i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["ltima alterao: ",new Date(d.updated_at).toLocaleString("pt-BR")]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:"Configurao nica"})]})})})]})]})},w3=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),[s,o]=p.useState({status:"",document_type:""}),{toast:a}=at();p.useEffect(()=>{l()},[]);const l=async()=>{try{n(!0);const m=await qn.getDocuments(s);t(m||[])}catch(m){console.error("Erro ao carregar documentos:",m),a({title:"Erro ao carregar documentos",description:m.message,variant:"destructive"})}finally{n(!1)}},c=async(m,j)=>{try{await qn.sendDocument(m,j),a({title:"Documento enviado",description:"Documento fiscal enviado com sucesso!"}),l()}catch(x){a({title:"Erro ao enviar documento",description:x.message,variant:"destructive"})}},u=m=>{switch(m){case"approved":return i.jsx(Zm,{className:"w-4 h-4 text-green-500"});case"pending":return i.jsx(PP,{className:"w-4 h-4 text-yellow-500"});case"rejected":case"cancelled":return i.jsx(df,{className:"w-4 h-4 text-red-500"});default:return i.jsx(Qm,{className:"w-4 h-4 text-gray-500"})}},d=m=>{const j={pending:"Pendente",sent:"Enviado",approved:"Aprovado",rejected:"Rejeitado",cancelled:"Cancelado"},x={pending:"bg-yellow-100 text-yellow-800",sent:"bg-blue-100 text-blue-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"};return i.jsx(Wp,{className:x[m]||"bg-gray-100 text-gray-800",children:j[m]||m})},h=m=>({nfe:"NF-e",sat:"SAT",nfce:"NFC-e"})[m]||m.toUpperCase(),f=m=>new Date(m).toLocaleString("pt-BR"),g=(m,j)=>{o(x=>({...x,[m]:j}))},w=()=>{l()};return r?i.jsx("div",{className:"flex justify-center items-center h-64",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[i.jsx(Pa,{className:"w-6 h-6 text-primary"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Documentos Fiscais"})]}),i.jsxs(re,{children:[i.jsx(xe,{children:i.jsx(we,{className:"text-lg",children:"Filtros"})}),i.jsx(se,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Status"}),i.jsxs("select",{className:"w-full p-2 border rounded-md",value:s.status,onChange:m=>g("status",m.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"pending",children:"Pendente"}),i.jsx("option",{value:"sent",children:"Enviado"}),i.jsx("option",{value:"approved",children:"Aprovado"}),i.jsx("option",{value:"rejected",children:"Rejeitado"}),i.jsx("option",{value:"cancelled",children:"Cancelado"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium",children:"Tipo"}),i.jsxs("select",{className:"w-full p-2 border rounded-md",value:s.document_type,onChange:m=>g("document_type",m.target.value),children:[i.jsx("option",{value:"",children:"Todos"}),i.jsx("option",{value:"nfe",children:"NF-e"}),i.jsx("option",{value:"sat",children:"SAT"}),i.jsx("option",{value:"nfce",children:"NFC-e"})]})]}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs(F,{onClick:w,className:"flex-1",children:[i.jsx(Hv,{className:"w-4 h-4 mr-2"}),"Filtrar"]}),i.jsx(F,{onClick:l,variant:"outline",children:i.jsx(Hv,{className:"w-4 h-4"})})]})]})})]}),i.jsx("div",{className:"space-y-4",children:e.length===0?i.jsx(re,{children:i.jsxs(se,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Pa,{className:"w-12 h-12 text-gray-400 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"Nenhum documento fiscal encontrado"}),i.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Os documentos fiscais aparecero aqui aps serem gerados no POS"})]})}):e.map(m=>i.jsx(re,{children:i.jsxs(se,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[u(m.status),i.jsxs("div",{children:[i.jsxs("h3",{className:"font-semibold",children:[h(m.document_type)," #",m.document_number]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["Venda #",m.sale_id,"  ",f(m.created_at)]})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:d(m.status)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Chave de Acesso"}),i.jsx("p",{className:"font-mono text-sm",children:m.access_key})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"Status"}),i.jsx("p",{className:"text-sm",children:m.error_message||"Sem erros"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[m.status==="pending"&&i.jsxs(F,{size:"sm",onClick:()=>c(m.id,m.document_type),children:[i.jsx(FP,{className:"w-4 h-4 mr-2"}),"Enviar"]}),i.jsxs(F,{size:"sm",variant:"outline",children:[i.jsx(ep,{className:"w-4 h-4 mr-2"}),"Visualizar"]}),i.jsxs(F,{size:"sm",variant:"outline",children:[i.jsx(Xj,{className:"w-4 h-4 mr-2"}),"Download XML"]})]})]})},m.id))})]})},Rt=({element:e,requiredPermission:t,user:r})=>!r||r.role==="none"?i.jsx(Oc,{to:"/login"}):t&&!Gt(r.role,t)?i.jsx(Oc,{to:"/"}):e;function j3(){const[e,t]=p.useState(null),[r,n]=p.useState(!0),{toast:s}=at();p.useEffect(()=>{const l=d=>{s(d.detail)};window.addEventListener("show-toast",l),(async()=>{const d=it();d&&t(d),n(!1)})();const{data:u}=Q.auth.onAuthStateChange(async(d,h)=>{var f;if(h!=null&&h.user){let g="none";h.user.email==="admin@server.com"&&(g="admin");const w={id:h.user.id,email:h.user.email,name:((f=h.user.user_metadata)==null?void 0:f.name)||h.user.email.split("@")[0],role:g,store_id:null,active:!0,created_at:h.user.created_at,stores:null};t(w),vx(w)}else t(null),If();n(!1)});return()=>{var d;(d=u==null?void 0:u.subscription)==null||d.unsubscribe(),window.removeEventListener("show-toast",l)}},[s]),p.useEffect(()=>{(async()=>{try{const c=await it();t(c)}catch(c){console.error("Erro ao verificar usurio:",c)}finally{n(!1)}})()},[]);const o=l=>{t(l),vx(l)},a=()=>{t(null),If()};return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center gradient-bg",children:i.jsx("div",{className:"loading-spinner w-8 h-8 border-4 border-white border-t-transparent rounded-full"})}):i.jsx(oF,{children:i.jsxs(Zk,{children:[i.jsxs(Hk,{children:[i.jsx(mt,{path:"/login",element:e?i.jsx(Oc,{to:"/"}):i.jsx(IM,{onLogin:o})}),i.jsxs(mt,{path:"/",element:i.jsx(Rt,{user:e,element:i.jsx(LM,{onLogout:a})}),children:[i.jsx(mt,{index:!0,element:i.jsx(Rt,{user:e,element:i.jsx(Wx,{}),requiredPermission:J.PROCESS_SALES})}),i.jsx(mt,{path:"pos",element:i.jsx(Rt,{user:e,element:i.jsx(Wx,{}),requiredPermission:J.PROCESS_SALES})}),i.jsx(mt,{path:"products",element:i.jsx(Rt,{user:e,element:i.jsx(EF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"products/:id",element:i.jsx(Rt,{user:e,element:i.jsx(kF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"categories",element:i.jsx(Rt,{user:e,element:i.jsx(OF,{}),requiredPermission:J.MANAGE_CATEGORIES})}),i.jsx(mt,{path:"stock",element:i.jsx(Rt,{user:e,element:i.jsx(PF,{}),requiredPermission:J.MANAGE_STOCK})}),i.jsx(mt,{path:"customers",element:i.jsx(Rt,{user:e,element:i.jsx(DF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"customer-groups",element:i.jsx(Rt,{user:e,element:i.jsx(VF,{}),requiredPermission:J.MANAGE_PRODUCTS})}),i.jsx(mt,{path:"reports",element:i.jsx(Rt,{user:e,element:i.jsx(u3,{}),requiredPermission:J.VIEW_REPORTS})}),i.jsx(mt,{path:"users",element:i.jsx(Rt,{user:e,element:i.jsx(d3,{}),requiredPermission:J.MANAGE_USERS})}),i.jsx(mt,{path:"cash-register",element:i.jsx(Rt,{user:e,element:i.jsx(v3,{}),requiredPermission:J.CASH_REGISTER_MANAGEMENT})}),i.jsx(mt,{path:"peripherals",element:i.jsx(Rt,{user:e,element:i.jsx(y3,{}),requiredPermission:J.MANAGE_USERS})}),i.jsx(mt,{path:"interest-rates",element:i.jsx(Rt,{user:e,element:i.jsx(x3,{}),requiredPermission:J.MANAGE_USERS})}),i.jsx(mt,{path:"/fiscal-documents",element:i.jsx(Rt,{permission:J.MANAGE_FISCAL_DOCUMENTS,children:i.jsx(w3,{})})}),i.jsx(mt,{path:"*",element:i.jsx(Oc,{to:e?"/":"/login"})})]})]}),i.jsx(YP,{})]})})}nh.createRoot(document.getElementById("root")).render(i.jsx(de.StrictMode,{children:i.jsx(j3,{})}));
